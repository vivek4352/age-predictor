var CA=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var JV=CA((e5,oT)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(a){if(a.ep)return;a.ep=!0;const o=t(a);fetch(a.href,o)}})();var Ep={exports:{}},wu={};var Y1;function SA(){if(Y1)return wu;Y1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,o){var u=null;if(o!==void 0&&(u=""+o),a.key!==void 0&&(u=""+a.key),"key"in a){o={};for(var l in a)l!=="key"&&(o[l]=a[l])}else o=a;return a=o.ref,{$$typeof:n,type:r,key:u,ref:a!==void 0?a:null,props:o}}return wu.Fragment=e,wu.jsx=t,wu.jsxs=t,wu}var Q1;function _A(){return Q1||(Q1=1,Ep.exports=SA()),Ep.exports}var Et=_A(),Cp={exports:{}},Bt={};var Z1;function TA(){if(Z1)return Bt;Z1=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),u=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),m=Symbol.iterator;function g(L){return L===null||typeof L!="object"?null:(L=m&&L[m]||L["@@iterator"],typeof L=="function"?L:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,w={};function C(L,X,st){this.props=L,this.context=X,this.refs=w,this.updater=st||x}C.prototype.isReactComponent={},C.prototype.setState=function(L,X){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,X,"setState")},C.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function S(){}S.prototype=C.prototype;function _(L,X,st){this.props=L,this.context=X,this.refs=w,this.updater=st||x}var T=_.prototype=new S;T.constructor=_,E(T,C.prototype),T.isPureReactComponent=!0;var A=Array.isArray;function D(){}var N={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function O(L,X,st){var dt=st.ref;return{$$typeof:n,type:L,key:X,ref:dt!==void 0?dt:null,props:st}}function B(L,X){return O(L.type,X,L.props)}function V(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function U(L){var X={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(st){return X[st]})}var it=/\/+/g;function et(L,X){return typeof L=="object"&&L!==null&&L.key!=null?U(""+L.key):X.toString(36)}function tt(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(D,D):(L.status="pending",L.then(function(X){L.status==="pending"&&(L.status="fulfilled",L.value=X)},function(X){L.status==="pending"&&(L.status="rejected",L.reason=X)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function P(L,X,st,dt,pt){var mt=typeof L;(mt==="undefined"||mt==="boolean")&&(L=null);var yt=!1;if(L===null)yt=!0;else switch(mt){case"bigint":case"string":case"number":yt=!0;break;case"object":switch(L.$$typeof){case n:case e:yt=!0;break;case d:return yt=L._init,P(yt(L._payload),X,st,dt,pt)}}if(yt)return pt=pt(L),yt=dt===""?"."+et(L,0):dt,A(pt)?(st="",yt!=null&&(st=yt.replace(it,"$&/")+"/"),P(pt,X,st,"",function(ue){return ue})):pt!=null&&(V(pt)&&(pt=B(pt,st+(pt.key==null||L&&L.key===pt.key?"":(""+pt.key).replace(it,"$&/")+"/")+yt)),X.push(pt)),1;yt=0;var Mt=dt===""?".":dt+":";if(A(L))for(var At=0;At<L.length;At++)dt=L[At],mt=Mt+et(dt,At),yt+=P(dt,X,st,mt,pt);else if(At=g(L),typeof At=="function")for(L=At.call(L),At=0;!(dt=L.next()).done;)dt=dt.value,mt=Mt+et(dt,At++),yt+=P(dt,X,st,mt,pt);else if(mt==="object"){if(typeof L.then=="function")return P(tt(L),X,st,dt,pt);throw X=String(L),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return yt}function G(L,X,st){if(L==null)return L;var dt=[],pt=0;return P(L,dt,"","",function(mt){return X.call(st,mt,pt++)}),dt}function q(L){if(L._status===-1){var X=L._result;X=X(),X.then(function(st){(L._status===0||L._status===-1)&&(L._status=1,L._result=st)},function(st){(L._status===0||L._status===-1)&&(L._status=2,L._result=st)}),L._status===-1&&(L._status=0,L._result=X)}if(L._status===1)return L._result.default;throw L._result}var nt=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},ot={map:G,forEach:function(L,X,st){G(L,function(){X.apply(this,arguments)},st)},count:function(L){var X=0;return G(L,function(){X++}),X},toArray:function(L){return G(L,function(X){return X})||[]},only:function(L){if(!V(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return Bt.Activity=v,Bt.Children=ot,Bt.Component=C,Bt.Fragment=t,Bt.Profiler=a,Bt.PureComponent=_,Bt.StrictMode=r,Bt.Suspense=c,Bt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,Bt.__COMPILER_RUNTIME={__proto__:null,c:function(L){return N.H.useMemoCache(L)}},Bt.cache=function(L){return function(){return L.apply(null,arguments)}},Bt.cacheSignal=function(){return null},Bt.cloneElement=function(L,X,st){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var dt=E({},L.props),pt=L.key;if(X!=null)for(mt in X.key!==void 0&&(pt=""+X.key),X)!k.call(X,mt)||mt==="key"||mt==="__self"||mt==="__source"||mt==="ref"&&X.ref===void 0||(dt[mt]=X[mt]);var mt=arguments.length-2;if(mt===1)dt.children=st;else if(1<mt){for(var yt=Array(mt),Mt=0;Mt<mt;Mt++)yt[Mt]=arguments[Mt+2];dt.children=yt}return O(L.type,pt,dt)},Bt.createContext=function(L){return L={$$typeof:u,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:o,_context:L},L},Bt.createElement=function(L,X,st){var dt,pt={},mt=null;if(X!=null)for(dt in X.key!==void 0&&(mt=""+X.key),X)k.call(X,dt)&&dt!=="key"&&dt!=="__self"&&dt!=="__source"&&(pt[dt]=X[dt]);var yt=arguments.length-2;if(yt===1)pt.children=st;else if(1<yt){for(var Mt=Array(yt),At=0;At<yt;At++)Mt[At]=arguments[At+2];pt.children=Mt}if(L&&L.defaultProps)for(dt in yt=L.defaultProps,yt)pt[dt]===void 0&&(pt[dt]=yt[dt]);return O(L,mt,pt)},Bt.createRef=function(){return{current:null}},Bt.forwardRef=function(L){return{$$typeof:l,render:L}},Bt.isValidElement=V,Bt.lazy=function(L){return{$$typeof:d,_payload:{_status:-1,_result:L},_init:q}},Bt.memo=function(L,X){return{$$typeof:h,type:L,compare:X===void 0?null:X}},Bt.startTransition=function(L){var X=N.T,st={};N.T=st;try{var dt=L(),pt=N.S;pt!==null&&pt(st,dt),typeof dt=="object"&&dt!==null&&typeof dt.then=="function"&&dt.then(D,nt)}catch(mt){nt(mt)}finally{X!==null&&st.types!==null&&(X.types=st.types),N.T=X}},Bt.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},Bt.use=function(L){return N.H.use(L)},Bt.useActionState=function(L,X,st){return N.H.useActionState(L,X,st)},Bt.useCallback=function(L,X){return N.H.useCallback(L,X)},Bt.useContext=function(L){return N.H.useContext(L)},Bt.useDebugValue=function(){},Bt.useDeferredValue=function(L,X){return N.H.useDeferredValue(L,X)},Bt.useEffect=function(L,X){return N.H.useEffect(L,X)},Bt.useEffectEvent=function(L){return N.H.useEffectEvent(L)},Bt.useId=function(){return N.H.useId()},Bt.useImperativeHandle=function(L,X,st){return N.H.useImperativeHandle(L,X,st)},Bt.useInsertionEffect=function(L,X){return N.H.useInsertionEffect(L,X)},Bt.useLayoutEffect=function(L,X){return N.H.useLayoutEffect(L,X)},Bt.useMemo=function(L,X){return N.H.useMemo(L,X)},Bt.useOptimistic=function(L,X){return N.H.useOptimistic(L,X)},Bt.useReducer=function(L,X,st){return N.H.useReducer(L,X,st)},Bt.useRef=function(L){return N.H.useRef(L)},Bt.useState=function(L){return N.H.useState(L)},Bt.useSyncExternalStore=function(L,X,st){return N.H.useSyncExternalStore(L,X,st)},Bt.useTransition=function(){return N.H.useTransition()},Bt.version="19.2.3",Bt}var J1;function hm(){return J1||(J1=1,Cp.exports=TA()),Cp.exports}var Y=hm(),Sp={exports:{}},Eu={},_p={exports:{}},Tp={};var $1;function RA(){return $1||($1=1,(function(n){function e(P,G){var q=P.length;P.push(G);t:for(;0<q;){var nt=q-1>>>1,ot=P[nt];if(0<a(ot,G))P[nt]=G,P[q]=ot,q=nt;else break t}}function t(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var G=P[0],q=P.pop();if(q!==G){P[0]=q;t:for(var nt=0,ot=P.length,L=ot>>>1;nt<L;){var X=2*(nt+1)-1,st=P[X],dt=X+1,pt=P[dt];if(0>a(st,q))dt<ot&&0>a(pt,st)?(P[nt]=pt,P[dt]=q,nt=dt):(P[nt]=st,P[X]=q,nt=X);else if(dt<ot&&0>a(pt,q))P[nt]=pt,P[dt]=q,nt=dt;else break t}}return G}function a(P,G){var q=P.sortIndex-G.sortIndex;return q!==0?q:P.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var u=Date,l=u.now();n.unstable_now=function(){return u.now()-l}}var c=[],h=[],d=1,v=null,m=3,g=!1,x=!1,E=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function T(P){for(var G=t(h);G!==null;){if(G.callback===null)r(h);else if(G.startTime<=P)r(h),G.sortIndex=G.expirationTime,e(c,G);else break;G=t(h)}}function A(P){if(E=!1,T(P),!x)if(t(c)!==null)x=!0,D||(D=!0,U());else{var G=t(h);G!==null&&tt(A,G.startTime-P)}}var D=!1,N=-1,k=5,O=-1;function B(){return w?!0:!(n.unstable_now()-O<k)}function V(){if(w=!1,D){var P=n.unstable_now();O=P;var G=!0;try{t:{x=!1,E&&(E=!1,S(N),N=-1),g=!0;var q=m;try{e:{for(T(P),v=t(c);v!==null&&!(v.expirationTime>P&&B());){var nt=v.callback;if(typeof nt=="function"){v.callback=null,m=v.priorityLevel;var ot=nt(v.expirationTime<=P);if(P=n.unstable_now(),typeof ot=="function"){v.callback=ot,T(P),G=!0;break e}v===t(c)&&r(c),T(P)}else r(c);v=t(c)}if(v!==null)G=!0;else{var L=t(h);L!==null&&tt(A,L.startTime-P),G=!1}}break t}finally{v=null,m=q,g=!1}G=void 0}}finally{G?U():D=!1}}}var U;if(typeof _=="function")U=function(){_(V)};else if(typeof MessageChannel<"u"){var it=new MessageChannel,et=it.port2;it.port1.onmessage=V,U=function(){et.postMessage(null)}}else U=function(){C(V,0)};function tt(P,G){N=C(function(){P(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(P){P.callback=null},n.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<P?Math.floor(1e3/P):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_next=function(P){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var q=m;m=G;try{return P()}finally{m=q}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function(P,G){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var q=m;m=P;try{return G()}finally{m=q}},n.unstable_scheduleCallback=function(P,G,q){var nt=n.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?nt+q:nt):q=nt,P){case 1:var ot=-1;break;case 2:ot=250;break;case 5:ot=1073741823;break;case 4:ot=1e4;break;default:ot=5e3}return ot=q+ot,P={id:d++,callback:G,priorityLevel:P,startTime:q,expirationTime:ot,sortIndex:-1},q>nt?(P.sortIndex=q,e(h,P),t(c)===null&&P===t(h)&&(E?(S(N),N=-1):E=!0,tt(A,q-nt))):(P.sortIndex=ot,e(c,P),x||g||(x=!0,D||(D=!0,U()))),P},n.unstable_shouldYield=B,n.unstable_wrapCallback=function(P){var G=m;return function(){var q=m;m=G;try{return P.apply(this,arguments)}finally{m=q}}}})(Tp)),Tp}var tx;function AA(){return tx||(tx=1,_p.exports=RA()),_p.exports}var Rp={exports:{}},un={};var ex;function DA(){if(ex)return un;ex=1;var n=hm();function e(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)h+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function o(c,h,d){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:c,containerInfo:h,implementation:d}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,h){if(c==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,un.createPortal=function(c,h){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return o(c,h,null,d)},un.flushSync=function(c){var h=u.T,d=r.p;try{if(u.T=null,r.p=2,c)return c()}finally{u.T=h,r.p=d,r.d.f()}},un.preconnect=function(c,h){typeof c=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,r.d.C(c,h))},un.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},un.preinit=function(c,h){if(typeof c=="string"&&h&&typeof h.as=="string"){var d=h.as,v=l(d,h.crossOrigin),m=typeof h.integrity=="string"?h.integrity:void 0,g=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;d==="style"?r.d.S(c,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:v,integrity:m,fetchPriority:g}):d==="script"&&r.d.X(c,{crossOrigin:v,integrity:m,fetchPriority:g,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},un.preinitModule=function(c,h){if(typeof c=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var d=l(h.as,h.crossOrigin);r.d.M(c,{crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&r.d.M(c)},un.preload=function(c,h){if(typeof c=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var d=h.as,v=l(d,h.crossOrigin);r.d.L(c,d,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},un.preloadModule=function(c,h){if(typeof c=="string")if(h){var d=l(h.as,h.crossOrigin);r.d.m(c,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:d,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else r.d.m(c)},un.requestFormReset=function(c){r.d.r(c)},un.unstable_batchedUpdates=function(c,h){return c(h)},un.useFormState=function(c,h,d){return u.H.useFormState(c,h,d)},un.useFormStatus=function(){return u.H.useHostTransitionStatus()},un.version="19.2.3",un}var nx;function MA(){if(nx)return Rp.exports;nx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rp.exports=DA(),Rp.exports}var rx;function NA(){if(rx)return Eu;rx=1;var n=AA(),e=hm(),t=MA();function r(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)s+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function o(i){var s=i,f=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(f=s.return),i=s.return;while(i)}return s.tag===3?f:null}function u(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function l(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function c(i){if(o(i)!==i)throw Error(r(188))}function h(i){var s=i.alternate;if(!s){if(s=o(i),s===null)throw Error(r(188));return s!==i?null:i}for(var f=i,p=s;;){var y=f.return;if(y===null)break;var b=y.alternate;if(b===null){if(p=y.return,p!==null){f=p;continue}break}if(y.child===b.child){for(b=y.child;b;){if(b===f)return c(y),i;if(b===p)return c(y),s;b=b.sibling}throw Error(r(188))}if(f.return!==p.return)f=y,p=b;else{for(var R=!1,M=y.child;M;){if(M===f){R=!0,f=y,p=b;break}if(M===p){R=!0,p=y,f=b;break}M=M.sibling}if(!R){for(M=b.child;M;){if(M===f){R=!0,f=b,p=y;break}if(M===p){R=!0,p=b,f=y;break}M=M.sibling}if(!R)throw Error(r(189))}}if(f.alternate!==p)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?i:s}function d(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=d(i),s!==null)return s;i=i.sibling}return null}var v=Object.assign,m=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),_=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function U(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var it=Symbol.for("react.client.reference");function et(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===it?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case E:return"Fragment";case C:return"Profiler";case w:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList";case O:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case x:return"Portal";case _:return i.displayName||"Context";case S:return(i._context.displayName||"Context")+".Consumer";case T:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case N:return s=i.displayName||null,s!==null?s:et(i.type)||"Memo";case k:s=i._payload,i=i._init;try{return et(i(s))}catch{}}return null}var tt=Array.isArray,P=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},nt=[],ot=-1;function L(i){return{current:i}}function X(i){0>ot||(i.current=nt[ot],nt[ot]=null,ot--)}function st(i,s){ot++,nt[ot]=i.current,i.current=s}var dt=L(null),pt=L(null),mt=L(null),yt=L(null);function Mt(i,s){switch(st(mt,s),st(pt,i),st(dt,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?y1(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=y1(s),i=b1(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}X(dt),st(dt,i)}function At(){X(dt),X(pt),X(mt)}function ue(i){i.memoizedState!==null&&st(yt,i);var s=dt.current,f=b1(s,i.type);s!==f&&(st(pt,i),st(dt,f))}function Ut(i){pt.current===i&&(X(dt),X(pt)),yt.current===i&&(X(yt),gu._currentValue=q)}var Qt,Xt;function ee(i){if(Qt===void 0)try{throw Error()}catch(f){var s=f.stack.trim().match(/\n( *(at )?)/);Qt=s&&s[1]||"",Xt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qt+i+Xt}var le=!1;function ce(i,s){if(!i||le)return"";le=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var p={DetermineComponentFrameRoot:function(){try{if(s){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(rt){var J=rt}Reflect.construct(i,[],ft)}else{try{ft.call()}catch(rt){J=rt}i.call(ft.prototype)}}else{try{throw Error()}catch(rt){J=rt}(ft=i())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(rt){if(rt&&J&&typeof rt.stack=="string")return[rt.stack,J.stack]}return[null,null]}};p.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(p.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(p.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=p.DetermineComponentFrameRoot(),R=b[0],M=b[1];if(R&&M){var z=R.split(`
`),Z=M.split(`
`);for(y=p=0;p<z.length&&!z[p].includes("DetermineComponentFrameRoot");)p++;for(;y<Z.length&&!Z[y].includes("DetermineComponentFrameRoot");)y++;if(p===z.length||y===Z.length)for(p=z.length-1,y=Z.length-1;1<=p&&0<=y&&z[p]!==Z[y];)y--;for(;1<=p&&0<=y;p--,y--)if(z[p]!==Z[y]){if(p!==1||y!==1)do if(p--,y--,0>y||z[p]!==Z[y]){var ut=`
`+z[p].replace(" at new "," at ");return i.displayName&&ut.includes("<anonymous>")&&(ut=ut.replace("<anonymous>",i.displayName)),ut}while(1<=p&&0<=y);break}}}finally{le=!1,Error.prepareStackTrace=f}return(f=i?i.displayName||i.name:"")?ee(f):""}function Qn(i,s){switch(i.tag){case 26:case 27:case 5:return ee(i.type);case 16:return ee("Lazy");case 13:return i.child!==s&&s!==null?ee("Suspense Fallback"):ee("Suspense");case 19:return ee("SuspenseList");case 0:case 15:return ce(i.type,!1);case 11:return ce(i.type.render,!1);case 1:return ce(i.type,!0);case 31:return ee("Activity");default:return""}}function In(i){try{var s="",f=null;do s+=Qn(i,f),f=i,i=i.return;while(i);return s}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}var Qe=Object.prototype.hasOwnProperty,Mr=n.unstable_scheduleCallback,Bn=n.unstable_cancelCallback,Nr=n.unstable_shouldYield,mr=n.unstable_requestPaint,Me=n.unstable_now,gr=n.unstable_getCurrentPriorityLevel,so=n.unstable_ImmediatePriority,Zr=n.unstable_UserBlockingPriority,gn=n.unstable_NormalPriority,Ds=n.unstable_LowPriority,xl=n.unstable_IdlePriority,uh=n.log,lh=n.unstable_setDisableYieldValue,Jr=null,Ze=null;function Zn(i){if(typeof uh=="function"&&lh(i),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(Jr,i)}catch{}}var Fn=Math.clz32?Math.clz32:lT,sT=Math.log,uT=Math.LN2;function lT(i){return i>>>=0,i===0?32:31-(sT(i)/uT|0)|0}var wl=256,El=262144,Cl=4194304;function bi(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Sl(i,s,f){var p=i.pendingLanes;if(p===0)return 0;var y=0,b=i.suspendedLanes,R=i.pingedLanes;i=i.warmLanes;var M=p&134217727;return M!==0?(p=M&~b,p!==0?y=bi(p):(R&=M,R!==0?y=bi(R):f||(f=M&~i,f!==0&&(y=bi(f))))):(M=p&~b,M!==0?y=bi(M):R!==0?y=bi(R):f||(f=p&~i,f!==0&&(y=bi(f)))),y===0?0:s!==0&&s!==y&&(s&b)===0&&(b=y&-y,f=s&-s,b>=f||b===32&&(f&4194048)!==0)?s:y}function Ms(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function cT(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $g(){var i=Cl;return Cl<<=1,(Cl&62914560)===0&&(Cl=4194304),i}function ch(i){for(var s=[],f=0;31>f;f++)s.push(i);return s}function Ns(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function fT(i,s,f,p,y,b){var R=i.pendingLanes;i.pendingLanes=f,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=f,i.entangledLanes&=f,i.errorRecoveryDisabledLanes&=f,i.shellSuspendCounter=0;var M=i.entanglements,z=i.expirationTimes,Z=i.hiddenUpdates;for(f=R&~f;0<f;){var ut=31-Fn(f),ft=1<<ut;M[ut]=0,z[ut]=-1;var J=Z[ut];if(J!==null)for(Z[ut]=null,ut=0;ut<J.length;ut++){var rt=J[ut];rt!==null&&(rt.lane&=-536870913)}f&=~ft}p!==0&&ty(i,p,0),b!==0&&y===0&&i.tag!==0&&(i.suspendedLanes|=b&~(R&~s))}function ty(i,s,f){i.pendingLanes|=s,i.suspendedLanes&=~s;var p=31-Fn(s);i.entangledLanes|=s,i.entanglements[p]=i.entanglements[p]|1073741824|f&261930}function ey(i,s){var f=i.entangledLanes|=s;for(i=i.entanglements;f;){var p=31-Fn(f),y=1<<p;y&s|i[p]&s&&(i[p]|=s),f&=~y}}function ny(i,s){var f=s&-s;return f=(f&42)!==0?1:fh(f),(f&(i.suspendedLanes|s))!==0?0:f}function fh(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function hh(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function ry(){var i=G.p;return i!==0?i:(i=window.event,i===void 0?32:H1(i.type))}function ay(i,s){var f=G.p;try{return G.p=i,s()}finally{G.p=f}}var Na=Math.random().toString(36).slice(2),Je="__reactFiber$"+Na,wn="__reactProps$"+Na,uo="__reactContainer$"+Na,dh="__reactEvents$"+Na,hT="__reactListeners$"+Na,dT="__reactHandles$"+Na,iy="__reactResources$"+Na,Os="__reactMarker$"+Na;function ph(i){delete i[Je],delete i[wn],delete i[dh],delete i[hT],delete i[dT]}function lo(i){var s=i[Je];if(s)return s;for(var f=i.parentNode;f;){if(s=f[uo]||f[Je]){if(f=s.alternate,s.child!==null||f!==null&&f.child!==null)for(i=T1(i);i!==null;){if(f=i[Je])return f;i=T1(i)}return s}i=f,f=i.parentNode}return null}function co(i){if(i=i[Je]||i[uo]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function ks(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(r(33))}function fo(i){var s=i[iy];return s||(s=i[iy]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function We(i){i[Os]=!0}var oy=new Set,sy={};function xi(i,s){ho(i,s),ho(i+"Capture",s)}function ho(i,s){for(sy[i]=s,i=0;i<s.length;i++)oy.add(s[i])}var pT=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),uy={},ly={};function vT(i){return Qe.call(ly,i)?!0:Qe.call(uy,i)?!1:pT.test(i)?ly[i]=!0:(uy[i]=!0,!1)}function _l(i,s,f){if(vT(s))if(f===null)i.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var p=s.toLowerCase().slice(0,5);if(p!=="data-"&&p!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+f)}}function Tl(i,s,f){if(f===null)i.removeAttribute(s);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+f)}}function $r(i,s,f,p){if(p===null)i.removeAttribute(f);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(f);return}i.setAttributeNS(s,f,""+p)}}function Jn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function cy(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function mT(i,s,f){var p=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var y=p.get,b=p.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return y.call(this)},set:function(R){f=""+R,b.call(this,R)}}),Object.defineProperty(i,s,{enumerable:p.enumerable}),{getValue:function(){return f},setValue:function(R){f=""+R},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function vh(i){if(!i._valueTracker){var s=cy(i)?"checked":"value";i._valueTracker=mT(i,s,""+i[s])}}function fy(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var f=s.getValue(),p="";return i&&(p=cy(i)?i.checked?"true":"false":i.value),i=p,i!==f?(s.setValue(i),!0):!1}function Rl(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var gT=/[\n"\\]/g;function $n(i){return i.replace(gT,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function mh(i,s,f,p,y,b,R,M){i.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?i.type=R:i.removeAttribute("type"),s!=null?R==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+Jn(s)):i.value!==""+Jn(s)&&(i.value=""+Jn(s)):R!=="submit"&&R!=="reset"||i.removeAttribute("value"),s!=null?gh(i,R,Jn(s)):f!=null?gh(i,R,Jn(f)):p!=null&&i.removeAttribute("value"),y==null&&b!=null&&(i.defaultChecked=!!b),y!=null&&(i.checked=y&&typeof y!="function"&&typeof y!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?i.name=""+Jn(M):i.removeAttribute("name")}function hy(i,s,f,p,y,b,R,M){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),s!=null||f!=null){if(!(b!=="submit"&&b!=="reset"||s!=null)){vh(i);return}f=f!=null?""+Jn(f):"",s=s!=null?""+Jn(s):f,M||s===i.value||(i.value=s),i.defaultValue=s}p=p??y,p=typeof p!="function"&&typeof p!="symbol"&&!!p,i.checked=M?i.checked:!!p,i.defaultChecked=!!p,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(i.name=R),vh(i)}function gh(i,s,f){s==="number"&&Rl(i.ownerDocument)===i||i.defaultValue===""+f||(i.defaultValue=""+f)}function po(i,s,f,p){if(i=i.options,s){s={};for(var y=0;y<f.length;y++)s["$"+f[y]]=!0;for(f=0;f<i.length;f++)y=s.hasOwnProperty("$"+i[f].value),i[f].selected!==y&&(i[f].selected=y),y&&p&&(i[f].defaultSelected=!0)}else{for(f=""+Jn(f),s=null,y=0;y<i.length;y++){if(i[y].value===f){i[y].selected=!0,p&&(i[y].defaultSelected=!0);return}s!==null||i[y].disabled||(s=i[y])}s!==null&&(s.selected=!0)}}function dy(i,s,f){if(s!=null&&(s=""+Jn(s),s!==i.value&&(i.value=s),f==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=f!=null?""+Jn(f):""}function py(i,s,f,p){if(s==null){if(p!=null){if(f!=null)throw Error(r(92));if(tt(p)){if(1<p.length)throw Error(r(93));p=p[0]}f=p}f==null&&(f=""),s=f}f=Jn(s),i.defaultValue=f,p=i.textContent,p===f&&p!==""&&p!==null&&(i.value=p),vh(i)}function vo(i,s){if(s){var f=i.firstChild;if(f&&f===i.lastChild&&f.nodeType===3){f.nodeValue=s;return}}i.textContent=s}var yT=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function vy(i,s,f){var p=s.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?p?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":p?i.setProperty(s,f):typeof f!="number"||f===0||yT.has(s)?s==="float"?i.cssFloat=f:i[s]=(""+f).trim():i[s]=f+"px"}function my(i,s,f){if(s!=null&&typeof s!="object")throw Error(r(62));if(i=i.style,f!=null){for(var p in f)!f.hasOwnProperty(p)||s!=null&&s.hasOwnProperty(p)||(p.indexOf("--")===0?i.setProperty(p,""):p==="float"?i.cssFloat="":i[p]="");for(var y in s)p=s[y],s.hasOwnProperty(y)&&f[y]!==p&&vy(i,y,p)}else for(var b in s)s.hasOwnProperty(b)&&vy(i,b,s[b])}function yh(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bT=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xT=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Al(i){return xT.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function ta(){}var bh=null;function xh(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mo=null,go=null;function gy(i){var s=co(i);if(s&&(i=s.stateNode)){var f=i[wn]||null;t:switch(i=s.stateNode,s.type){case"input":if(mh(i,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),s=f.name,f.type==="radio"&&s!=null){for(f=i;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+$n(""+s)+'"][type="radio"]'),s=0;s<f.length;s++){var p=f[s];if(p!==i&&p.form===i.form){var y=p[wn]||null;if(!y)throw Error(r(90));mh(p,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(s=0;s<f.length;s++)p=f[s],p.form===i.form&&fy(p)}break t;case"textarea":dy(i,f.value,f.defaultValue);break t;case"select":s=f.value,s!=null&&po(i,!!f.multiple,s,!1)}}}var wh=!1;function yy(i,s,f){if(wh)return i(s,f);wh=!0;try{var p=i(s);return p}finally{if(wh=!1,(mo!==null||go!==null)&&(vc(),mo&&(s=mo,i=go,go=mo=null,gy(s),i)))for(s=0;s<i.length;s++)gy(i[s])}}function Is(i,s){var f=i.stateNode;if(f===null)return null;var p=f[wn]||null;if(p===null)return null;f=p[s];t:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(i=i.type,p=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!p;break t;default:i=!1}if(i)return null;if(f&&typeof f!="function")throw Error(r(231,s,typeof f));return f}var ea=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Eh=!1;if(ea)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){Eh=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{Eh=!1}var Oa=null,Ch=null,Dl=null;function by(){if(Dl)return Dl;var i,s=Ch,f=s.length,p,y="value"in Oa?Oa.value:Oa.textContent,b=y.length;for(i=0;i<f&&s[i]===y[i];i++);var R=f-i;for(p=1;p<=R&&s[f-p]===y[b-p];p++);return Dl=y.slice(i,1<p?1-p:void 0)}function Ml(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Nl(){return!0}function xy(){return!1}function En(i){function s(f,p,y,b,R){this._reactName=f,this._targetInst=y,this.type=p,this.nativeEvent=b,this.target=R,this.currentTarget=null;for(var M in i)i.hasOwnProperty(M)&&(f=i[M],this[M]=f?f(b):b[M]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Nl:xy,this.isPropagationStopped=xy,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Nl)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Nl)},persist:function(){},isPersistent:Nl}),s}var wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ol=En(wi),Fs=v({},wi,{view:0,detail:0}),wT=En(Fs),Sh,_h,Ls,kl=v({},Fs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rh,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ls&&(Ls&&i.type==="mousemove"?(Sh=i.screenX-Ls.screenX,_h=i.screenY-Ls.screenY):_h=Sh=0,Ls=i),Sh)},movementY:function(i){return"movementY"in i?i.movementY:_h}}),wy=En(kl),ET=v({},kl,{dataTransfer:0}),CT=En(ET),ST=v({},Fs,{relatedTarget:0}),Th=En(ST),_T=v({},wi,{animationName:0,elapsedTime:0,pseudoElement:0}),TT=En(_T),RT=v({},wi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),AT=En(RT),DT=v({},wi,{data:0}),Ey=En(DT),MT={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NT={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OT={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kT(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=OT[i])?!!s[i]:!1}function Rh(){return kT}var IT=v({},Fs,{key:function(i){if(i.key){var s=MT[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=Ml(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?NT[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rh,charCode:function(i){return i.type==="keypress"?Ml(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Ml(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),BT=En(IT),FT=v({},kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cy=En(FT),LT=v({},Fs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rh}),PT=En(LT),zT=v({},wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),UT=En(zT),VT=v({},kl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),HT=En(VT),GT=v({},wi,{newState:0,oldState:0}),jT=En(GT),WT=[9,13,27,32],Ah=ea&&"CompositionEvent"in window,Ps=null;ea&&"documentMode"in document&&(Ps=document.documentMode);var qT=ea&&"TextEvent"in window&&!Ps,Sy=ea&&(!Ah||Ps&&8<Ps&&11>=Ps),_y=" ",Ty=!1;function Ry(i,s){switch(i){case"keyup":return WT.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ay(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var yo=!1;function KT(i,s){switch(i){case"compositionend":return Ay(s);case"keypress":return s.which!==32?null:(Ty=!0,_y);case"textInput":return i=s.data,i===_y&&Ty?null:i;default:return null}}function XT(i,s){if(yo)return i==="compositionend"||!Ah&&Ry(i,s)?(i=by(),Dl=Ch=Oa=null,yo=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Sy&&s.locale!=="ko"?null:s.data;default:return null}}var YT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!YT[i.type]:s==="textarea"}function My(i,s,f,p){mo?go?go.push(p):go=[p]:mo=p,s=Ec(s,"onChange"),0<s.length&&(f=new Ol("onChange","change",null,f,p),i.push({event:f,listeners:s}))}var zs=null,Us=null;function QT(i){h1(i,0)}function Il(i){var s=ks(i);if(fy(s))return i}function Ny(i,s){if(i==="change")return s}var Oy=!1;if(ea){var Dh;if(ea){var Mh="oninput"in document;if(!Mh){var ky=document.createElement("div");ky.setAttribute("oninput","return;"),Mh=typeof ky.oninput=="function"}Dh=Mh}else Dh=!1;Oy=Dh&&(!document.documentMode||9<document.documentMode)}function Iy(){zs&&(zs.detachEvent("onpropertychange",By),Us=zs=null)}function By(i){if(i.propertyName==="value"&&Il(Us)){var s=[];My(s,Us,i,xh(i)),yy(QT,s)}}function ZT(i,s,f){i==="focusin"?(Iy(),zs=s,Us=f,zs.attachEvent("onpropertychange",By)):i==="focusout"&&Iy()}function JT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Il(Us)}function $T(i,s){if(i==="click")return Il(s)}function tR(i,s){if(i==="input"||i==="change")return Il(s)}function eR(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Ln=typeof Object.is=="function"?Object.is:eR;function Vs(i,s){if(Ln(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var f=Object.keys(i),p=Object.keys(s);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var y=f[p];if(!Qe.call(s,y)||!Ln(i[y],s[y]))return!1}return!0}function Fy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ly(i,s){var f=Fy(i);i=0;for(var p;f;){if(f.nodeType===3){if(p=i+f.textContent.length,i<=s&&p>=s)return{node:f,offset:s-i};i=p}t:{for(;f;){if(f.nextSibling){f=f.nextSibling;break t}f=f.parentNode}f=void 0}f=Fy(f)}}function Py(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?Py(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function zy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=Rl(i.document);s instanceof i.HTMLIFrameElement;){try{var f=typeof s.contentWindow.location.href=="string"}catch{f=!1}if(f)i=s.contentWindow;else break;s=Rl(i.document)}return s}function Nh(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var nR=ea&&"documentMode"in document&&11>=document.documentMode,bo=null,Oh=null,Hs=null,kh=!1;function Uy(i,s,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;kh||bo==null||bo!==Rl(p)||(p=bo,"selectionStart"in p&&Nh(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),Hs&&Vs(Hs,p)||(Hs=p,p=Ec(Oh,"onSelect"),0<p.length&&(s=new Ol("onSelect","select",null,s,f),i.push({event:s,listeners:p}),s.target=bo)))}function Ei(i,s){var f={};return f[i.toLowerCase()]=s.toLowerCase(),f["Webkit"+i]="webkit"+s,f["Moz"+i]="moz"+s,f}var xo={animationend:Ei("Animation","AnimationEnd"),animationiteration:Ei("Animation","AnimationIteration"),animationstart:Ei("Animation","AnimationStart"),transitionrun:Ei("Transition","TransitionRun"),transitionstart:Ei("Transition","TransitionStart"),transitioncancel:Ei("Transition","TransitionCancel"),transitionend:Ei("Transition","TransitionEnd")},Ih={},Vy={};ea&&(Vy=document.createElement("div").style,"AnimationEvent"in window||(delete xo.animationend.animation,delete xo.animationiteration.animation,delete xo.animationstart.animation),"TransitionEvent"in window||delete xo.transitionend.transition);function Ci(i){if(Ih[i])return Ih[i];if(!xo[i])return i;var s=xo[i],f;for(f in s)if(s.hasOwnProperty(f)&&f in Vy)return Ih[i]=s[f];return i}var Hy=Ci("animationend"),Gy=Ci("animationiteration"),jy=Ci("animationstart"),rR=Ci("transitionrun"),aR=Ci("transitionstart"),iR=Ci("transitioncancel"),Wy=Ci("transitionend"),qy=new Map,Bh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bh.push("scrollEnd");function yr(i,s){qy.set(i,s),xi(s,[i])}var Bl=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},tr=[],wo=0,Fh=0;function Fl(){for(var i=wo,s=Fh=wo=0;s<i;){var f=tr[s];tr[s++]=null;var p=tr[s];tr[s++]=null;var y=tr[s];tr[s++]=null;var b=tr[s];if(tr[s++]=null,p!==null&&y!==null){var R=p.pending;R===null?y.next=y:(y.next=R.next,R.next=y),p.pending=y}b!==0&&Ky(f,y,b)}}function Ll(i,s,f,p){tr[wo++]=i,tr[wo++]=s,tr[wo++]=f,tr[wo++]=p,Fh|=p,i.lanes|=p,i=i.alternate,i!==null&&(i.lanes|=p)}function Lh(i,s,f,p){return Ll(i,s,f,p),Pl(i)}function Si(i,s){return Ll(i,null,null,s),Pl(i)}function Ky(i,s,f){i.lanes|=f;var p=i.alternate;p!==null&&(p.lanes|=f);for(var y=!1,b=i.return;b!==null;)b.childLanes|=f,p=b.alternate,p!==null&&(p.childLanes|=f),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(y=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,y&&s!==null&&(y=31-Fn(f),i=b.hiddenUpdates,p=i[y],p===null?i[y]=[s]:p.push(s),s.lane=f|536870912),b):null}function Pl(i){if(50<cu)throw cu=0,qd=null,Error(r(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var Eo={};function oR(i,s,f,p){this.tag=i,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(i,s,f,p){return new oR(i,s,f,p)}function Ph(i){return i=i.prototype,!(!i||!i.isReactComponent)}function na(i,s){var f=i.alternate;return f===null?(f=Pn(i.tag,s,i.key,i.mode),f.elementType=i.elementType,f.type=i.type,f.stateNode=i.stateNode,f.alternate=i,i.alternate=f):(f.pendingProps=s,f.type=i.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=i.flags&65011712,f.childLanes=i.childLanes,f.lanes=i.lanes,f.child=i.child,f.memoizedProps=i.memoizedProps,f.memoizedState=i.memoizedState,f.updateQueue=i.updateQueue,s=i.dependencies,f.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},f.sibling=i.sibling,f.index=i.index,f.ref=i.ref,f.refCleanup=i.refCleanup,f}function Xy(i,s){i.flags&=65011714;var f=i.alternate;return f===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=f.childLanes,i.lanes=f.lanes,i.child=f.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=f.memoizedProps,i.memoizedState=f.memoizedState,i.updateQueue=f.updateQueue,i.type=f.type,s=f.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function zl(i,s,f,p,y,b){var R=0;if(p=i,typeof i=="function")Ph(i)&&(R=1);else if(typeof i=="string")R=fA(i,f,dt.current)?26:i==="html"||i==="head"||i==="body"?27:5;else t:switch(i){case O:return i=Pn(31,f,s,y),i.elementType=O,i.lanes=b,i;case E:return _i(f.children,y,b,s);case w:R=8,y|=24;break;case C:return i=Pn(12,f,s,y|2),i.elementType=C,i.lanes=b,i;case A:return i=Pn(13,f,s,y),i.elementType=A,i.lanes=b,i;case D:return i=Pn(19,f,s,y),i.elementType=D,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case _:R=10;break t;case S:R=9;break t;case T:R=11;break t;case N:R=14;break t;case k:R=16,p=null;break t}R=29,f=Error(r(130,i===null?"null":typeof i,"")),p=null}return s=Pn(R,f,s,y),s.elementType=i,s.type=p,s.lanes=b,s}function _i(i,s,f,p){return i=Pn(7,i,p,s),i.lanes=f,i}function zh(i,s,f){return i=Pn(6,i,null,s),i.lanes=f,i}function Yy(i){var s=Pn(18,null,null,0);return s.stateNode=i,s}function Uh(i,s,f){return s=Pn(4,i.children!==null?i.children:[],i.key,s),s.lanes=f,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var Qy=new WeakMap;function er(i,s){if(typeof i=="object"&&i!==null){var f=Qy.get(i);return f!==void 0?f:(s={value:i,source:s,stack:In(s)},Qy.set(i,s),s)}return{value:i,source:s,stack:In(s)}}var Co=[],So=0,Ul=null,Gs=0,nr=[],rr=0,ka=null,Or=1,kr="";function ra(i,s){Co[So++]=Gs,Co[So++]=Ul,Ul=i,Gs=s}function Zy(i,s,f){nr[rr++]=Or,nr[rr++]=kr,nr[rr++]=ka,ka=i;var p=Or;i=kr;var y=32-Fn(p)-1;p&=~(1<<y),f+=1;var b=32-Fn(s)+y;if(30<b){var R=y-y%5;b=(p&(1<<R)-1).toString(32),p>>=R,y-=R,Or=1<<32-Fn(s)+y|f<<y|p,kr=b+i}else Or=1<<b|f<<y|p,kr=i}function Vh(i){i.return!==null&&(ra(i,1),Zy(i,1,0))}function Hh(i){for(;i===Ul;)Ul=Co[--So],Co[So]=null,Gs=Co[--So],Co[So]=null;for(;i===ka;)ka=nr[--rr],nr[rr]=null,kr=nr[--rr],nr[rr]=null,Or=nr[--rr],nr[rr]=null}function Jy(i,s){nr[rr++]=Or,nr[rr++]=kr,nr[rr++]=ka,Or=s.id,kr=s.overflow,ka=i}var $e=null,de=null,Kt=!1,Ia=null,ar=!1,Gh=Error(r(519));function Ba(i){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw js(er(s,i)),Gh}function $y(i){var s=i.stateNode,f=i.type,p=i.memoizedProps;switch(s[Je]=i,s[wn]=p,f){case"dialog":Gt("cancel",s),Gt("close",s);break;case"iframe":case"object":case"embed":Gt("load",s);break;case"video":case"audio":for(f=0;f<hu.length;f++)Gt(hu[f],s);break;case"source":Gt("error",s);break;case"img":case"image":case"link":Gt("error",s),Gt("load",s);break;case"details":Gt("toggle",s);break;case"input":Gt("invalid",s),hy(s,p.value,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name,!0);break;case"select":Gt("invalid",s);break;case"textarea":Gt("invalid",s),py(s,p.value,p.defaultValue,p.children)}f=p.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||s.textContent===""+f||p.suppressHydrationWarning===!0||m1(s.textContent,f)?(p.popover!=null&&(Gt("beforetoggle",s),Gt("toggle",s)),p.onScroll!=null&&Gt("scroll",s),p.onScrollEnd!=null&&Gt("scrollend",s),p.onClick!=null&&(s.onclick=ta),s=!0):s=!1,s||Ba(i,!0)}function t0(i){for($e=i.return;$e;)switch($e.tag){case 5:case 31:case 13:ar=!1;return;case 27:case 3:ar=!0;return;default:$e=$e.return}}function _o(i){if(i!==$e)return!1;if(!Kt)return t0(i),Kt=!0,!1;var s=i.tag,f;if((f=s!==3&&s!==27)&&((f=s===5)&&(f=i.type,f=!(f!=="form"&&f!=="button")||sp(i.type,i.memoizedProps)),f=!f),f&&de&&Ba(i),t0(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));de=_1(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));de=_1(i)}else s===27?(s=de,Ya(i.type)?(i=hp,hp=null,de=i):de=s):de=$e?or(i.stateNode.nextSibling):null;return!0}function Ti(){de=$e=null,Kt=!1}function jh(){var i=Ia;return i!==null&&(Tn===null?Tn=i:Tn.push.apply(Tn,i),Ia=null),i}function js(i){Ia===null?Ia=[i]:Ia.push(i)}var Wh=L(null),Ri=null,aa=null;function Fa(i,s,f){st(Wh,s._currentValue),s._currentValue=f}function ia(i){i._currentValue=Wh.current,X(Wh)}function qh(i,s,f){for(;i!==null;){var p=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,p!==null&&(p.childLanes|=s)):p!==null&&(p.childLanes&s)!==s&&(p.childLanes|=s),i===f)break;i=i.return}}function Kh(i,s,f,p){var y=i.child;for(y!==null&&(y.return=i);y!==null;){var b=y.dependencies;if(b!==null){var R=y.child;b=b.firstContext;t:for(;b!==null;){var M=b;b=y;for(var z=0;z<s.length;z++)if(M.context===s[z]){b.lanes|=f,M=b.alternate,M!==null&&(M.lanes|=f),qh(b.return,f,i),p||(R=null);break t}b=M.next}}else if(y.tag===18){if(R=y.return,R===null)throw Error(r(341));R.lanes|=f,b=R.alternate,b!==null&&(b.lanes|=f),qh(R,f,i),R=null}else R=y.child;if(R!==null)R.return=y;else for(R=y;R!==null;){if(R===i){R=null;break}if(y=R.sibling,y!==null){y.return=R.return,R=y;break}R=R.return}y=R}}function To(i,s,f,p){i=null;for(var y=s,b=!1;y!==null;){if(!b){if((y.flags&524288)!==0)b=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var R=y.alternate;if(R===null)throw Error(r(387));if(R=R.memoizedProps,R!==null){var M=y.type;Ln(y.pendingProps.value,R.value)||(i!==null?i.push(M):i=[M])}}else if(y===yt.current){if(R=y.alternate,R===null)throw Error(r(387));R.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(i!==null?i.push(gu):i=[gu])}y=y.return}i!==null&&Kh(s,i,f,p),s.flags|=262144}function Vl(i){for(i=i.firstContext;i!==null;){if(!Ln(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ai(i){Ri=i,aa=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function tn(i){return e0(Ri,i)}function Hl(i,s){return Ri===null&&Ai(i),e0(i,s)}function e0(i,s){var f=s._currentValue;if(s={context:s,memoizedValue:f,next:null},aa===null){if(i===null)throw Error(r(308));aa=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else aa=aa.next=s;return f}var sR=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(f,p){i.push(p)}};this.abort=function(){s.aborted=!0,i.forEach(function(f){return f()})}},uR=n.unstable_scheduleCallback,lR=n.unstable_NormalPriority,Ne={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xh(){return{controller:new sR,data:new Map,refCount:0}}function Ws(i){i.refCount--,i.refCount===0&&uR(lR,function(){i.controller.abort()})}var qs=null,Yh=0,Ro=0,Ao=null;function cR(i,s){if(qs===null){var f=qs=[];Yh=0,Ro=Jd(),Ao={status:"pending",value:void 0,then:function(p){f.push(p)}}}return Yh++,s.then(n0,n0),s}function n0(){if(--Yh===0&&qs!==null){Ao!==null&&(Ao.status="fulfilled");var i=qs;qs=null,Ro=0,Ao=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function fR(i,s){var f=[],p={status:"pending",value:null,reason:null,then:function(y){f.push(y)}};return i.then(function(){p.status="fulfilled",p.value=s;for(var y=0;y<f.length;y++)(0,f[y])(s)},function(y){for(p.status="rejected",p.reason=y,y=0;y<f.length;y++)(0,f[y])(void 0)}),p}var r0=P.S;P.S=function(i,s){Ub=Me(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&cR(i,s),r0!==null&&r0(i,s)};var Di=L(null);function Qh(){var i=Di.current;return i!==null?i:fe.pooledCache}function Gl(i,s){s===null?st(Di,Di.current):st(Di,s.pool)}function a0(){var i=Qh();return i===null?null:{parent:Ne._currentValue,pool:i}}var Do=Error(r(460)),Zh=Error(r(474)),jl=Error(r(542)),Wl={then:function(){}};function i0(i){return i=i.status,i==="fulfilled"||i==="rejected"}function o0(i,s,f){switch(f=i[f],f===void 0?i.push(s):f!==s&&(s.then(ta,ta),s=f),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,u0(i),i;default:if(typeof s.status=="string")s.then(ta,ta);else{if(i=fe,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=s,i.status="pending",i.then(function(p){if(s.status==="pending"){var y=s;y.status="fulfilled",y.value=p}},function(p){if(s.status==="pending"){var y=s;y.status="rejected",y.reason=p}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,u0(i),i}throw Ni=s,Do}}function Mi(i){try{var s=i._init;return s(i._payload)}catch(f){throw f!==null&&typeof f=="object"&&typeof f.then=="function"?(Ni=f,Do):f}}var Ni=null;function s0(){if(Ni===null)throw Error(r(459));var i=Ni;return Ni=null,i}function u0(i){if(i===Do||i===jl)throw Error(r(483))}var Mo=null,Ks=0;function ql(i){var s=Ks;return Ks+=1,Mo===null&&(Mo=[]),o0(Mo,i,s)}function Xs(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Kl(i,s){throw s.$$typeof===m?Error(r(525)):(i=Object.prototype.toString.call(s),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function l0(i){function s(K,j){if(i){var Q=K.deletions;Q===null?(K.deletions=[j],K.flags|=16):Q.push(j)}}function f(K,j){if(!i)return null;for(;j!==null;)s(K,j),j=j.sibling;return null}function p(K){for(var j=new Map;K!==null;)K.key!==null?j.set(K.key,K):j.set(K.index,K),K=K.sibling;return j}function y(K,j){return K=na(K,j),K.index=0,K.sibling=null,K}function b(K,j,Q){return K.index=Q,i?(Q=K.alternate,Q!==null?(Q=Q.index,Q<j?(K.flags|=67108866,j):Q):(K.flags|=67108866,j)):(K.flags|=1048576,j)}function R(K){return i&&K.alternate===null&&(K.flags|=67108866),K}function M(K,j,Q,ct){return j===null||j.tag!==6?(j=zh(Q,K.mode,ct),j.return=K,j):(j=y(j,Q),j.return=K,j)}function z(K,j,Q,ct){var Dt=Q.type;return Dt===E?ut(K,j,Q.props.children,ct,Q.key):j!==null&&(j.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===k&&Mi(Dt)===j.type)?(j=y(j,Q.props),Xs(j,Q),j.return=K,j):(j=zl(Q.type,Q.key,Q.props,null,K.mode,ct),Xs(j,Q),j.return=K,j)}function Z(K,j,Q,ct){return j===null||j.tag!==4||j.stateNode.containerInfo!==Q.containerInfo||j.stateNode.implementation!==Q.implementation?(j=Uh(Q,K.mode,ct),j.return=K,j):(j=y(j,Q.children||[]),j.return=K,j)}function ut(K,j,Q,ct,Dt){return j===null||j.tag!==7?(j=_i(Q,K.mode,ct,Dt),j.return=K,j):(j=y(j,Q),j.return=K,j)}function ft(K,j,Q){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=zh(""+j,K.mode,Q),j.return=K,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case g:return Q=zl(j.type,j.key,j.props,null,K.mode,Q),Xs(Q,j),Q.return=K,Q;case x:return j=Uh(j,K.mode,Q),j.return=K,j;case k:return j=Mi(j),ft(K,j,Q)}if(tt(j)||U(j))return j=_i(j,K.mode,Q,null),j.return=K,j;if(typeof j.then=="function")return ft(K,ql(j),Q);if(j.$$typeof===_)return ft(K,Hl(K,j),Q);Kl(K,j)}return null}function J(K,j,Q,ct){var Dt=j!==null?j.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Dt!==null?null:M(K,j,""+Q,ct);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case g:return Q.key===Dt?z(K,j,Q,ct):null;case x:return Q.key===Dt?Z(K,j,Q,ct):null;case k:return Q=Mi(Q),J(K,j,Q,ct)}if(tt(Q)||U(Q))return Dt!==null?null:ut(K,j,Q,ct,null);if(typeof Q.then=="function")return J(K,j,ql(Q),ct);if(Q.$$typeof===_)return J(K,j,Hl(K,Q),ct);Kl(K,Q)}return null}function rt(K,j,Q,ct,Dt){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return K=K.get(Q)||null,M(j,K,""+ct,Dt);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case g:return K=K.get(ct.key===null?Q:ct.key)||null,z(j,K,ct,Dt);case x:return K=K.get(ct.key===null?Q:ct.key)||null,Z(j,K,ct,Dt);case k:return ct=Mi(ct),rt(K,j,Q,ct,Dt)}if(tt(ct)||U(ct))return K=K.get(Q)||null,ut(j,K,ct,Dt,null);if(typeof ct.then=="function")return rt(K,j,Q,ql(ct),Dt);if(ct.$$typeof===_)return rt(K,j,Q,Hl(j,ct),Dt);Kl(j,ct)}return null}function bt(K,j,Q,ct){for(var Dt=null,Zt=null,Ct=j,Pt=j=0,qt=null;Ct!==null&&Pt<Q.length;Pt++){Ct.index>Pt?(qt=Ct,Ct=null):qt=Ct.sibling;var Jt=J(K,Ct,Q[Pt],ct);if(Jt===null){Ct===null&&(Ct=qt);break}i&&Ct&&Jt.alternate===null&&s(K,Ct),j=b(Jt,j,Pt),Zt===null?Dt=Jt:Zt.sibling=Jt,Zt=Jt,Ct=qt}if(Pt===Q.length)return f(K,Ct),Kt&&ra(K,Pt),Dt;if(Ct===null){for(;Pt<Q.length;Pt++)Ct=ft(K,Q[Pt],ct),Ct!==null&&(j=b(Ct,j,Pt),Zt===null?Dt=Ct:Zt.sibling=Ct,Zt=Ct);return Kt&&ra(K,Pt),Dt}for(Ct=p(Ct);Pt<Q.length;Pt++)qt=rt(Ct,K,Pt,Q[Pt],ct),qt!==null&&(i&&qt.alternate!==null&&Ct.delete(qt.key===null?Pt:qt.key),j=b(qt,j,Pt),Zt===null?Dt=qt:Zt.sibling=qt,Zt=qt);return i&&Ct.forEach(function(ti){return s(K,ti)}),Kt&&ra(K,Pt),Dt}function Nt(K,j,Q,ct){if(Q==null)throw Error(r(151));for(var Dt=null,Zt=null,Ct=j,Pt=j=0,qt=null,Jt=Q.next();Ct!==null&&!Jt.done;Pt++,Jt=Q.next()){Ct.index>Pt?(qt=Ct,Ct=null):qt=Ct.sibling;var ti=J(K,Ct,Jt.value,ct);if(ti===null){Ct===null&&(Ct=qt);break}i&&Ct&&ti.alternate===null&&s(K,Ct),j=b(ti,j,Pt),Zt===null?Dt=ti:Zt.sibling=ti,Zt=ti,Ct=qt}if(Jt.done)return f(K,Ct),Kt&&ra(K,Pt),Dt;if(Ct===null){for(;!Jt.done;Pt++,Jt=Q.next())Jt=ft(K,Jt.value,ct),Jt!==null&&(j=b(Jt,j,Pt),Zt===null?Dt=Jt:Zt.sibling=Jt,Zt=Jt);return Kt&&ra(K,Pt),Dt}for(Ct=p(Ct);!Jt.done;Pt++,Jt=Q.next())Jt=rt(Ct,K,Pt,Jt.value,ct),Jt!==null&&(i&&Jt.alternate!==null&&Ct.delete(Jt.key===null?Pt:Jt.key),j=b(Jt,j,Pt),Zt===null?Dt=Jt:Zt.sibling=Jt,Zt=Jt);return i&&Ct.forEach(function(EA){return s(K,EA)}),Kt&&ra(K,Pt),Dt}function se(K,j,Q,ct){if(typeof Q=="object"&&Q!==null&&Q.type===E&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case g:t:{for(var Dt=Q.key;j!==null;){if(j.key===Dt){if(Dt=Q.type,Dt===E){if(j.tag===7){f(K,j.sibling),ct=y(j,Q.props.children),ct.return=K,K=ct;break t}}else if(j.elementType===Dt||typeof Dt=="object"&&Dt!==null&&Dt.$$typeof===k&&Mi(Dt)===j.type){f(K,j.sibling),ct=y(j,Q.props),Xs(ct,Q),ct.return=K,K=ct;break t}f(K,j);break}else s(K,j);j=j.sibling}Q.type===E?(ct=_i(Q.props.children,K.mode,ct,Q.key),ct.return=K,K=ct):(ct=zl(Q.type,Q.key,Q.props,null,K.mode,ct),Xs(ct,Q),ct.return=K,K=ct)}return R(K);case x:t:{for(Dt=Q.key;j!==null;){if(j.key===Dt)if(j.tag===4&&j.stateNode.containerInfo===Q.containerInfo&&j.stateNode.implementation===Q.implementation){f(K,j.sibling),ct=y(j,Q.children||[]),ct.return=K,K=ct;break t}else{f(K,j);break}else s(K,j);j=j.sibling}ct=Uh(Q,K.mode,ct),ct.return=K,K=ct}return R(K);case k:return Q=Mi(Q),se(K,j,Q,ct)}if(tt(Q))return bt(K,j,Q,ct);if(U(Q)){if(Dt=U(Q),typeof Dt!="function")throw Error(r(150));return Q=Dt.call(Q),Nt(K,j,Q,ct)}if(typeof Q.then=="function")return se(K,j,ql(Q),ct);if(Q.$$typeof===_)return se(K,j,Hl(K,Q),ct);Kl(K,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint"?(Q=""+Q,j!==null&&j.tag===6?(f(K,j.sibling),ct=y(j,Q),ct.return=K,K=ct):(f(K,j),ct=zh(Q,K.mode,ct),ct.return=K,K=ct),R(K)):f(K,j)}return function(K,j,Q,ct){try{Ks=0;var Dt=se(K,j,Q,ct);return Mo=null,Dt}catch(Ct){if(Ct===Do||Ct===jl)throw Ct;var Zt=Pn(29,Ct,null,K.mode);return Zt.lanes=ct,Zt.return=K,Zt}finally{}}}var Oi=l0(!0),c0=l0(!1),La=!1;function Jh(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function $h(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Pa(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function za(i,s,f){var p=i.updateQueue;if(p===null)return null;if(p=p.shared,($t&2)!==0){var y=p.pending;return y===null?s.next=s:(s.next=y.next,y.next=s),p.pending=s,s=Pl(i),Ky(i,null,f),s}return Ll(i,p,s,f),Pl(i)}function Ys(i,s,f){if(s=s.updateQueue,s!==null&&(s=s.shared,(f&4194048)!==0)){var p=s.lanes;p&=i.pendingLanes,f|=p,s.lanes=f,ey(i,f)}}function td(i,s){var f=i.updateQueue,p=i.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var y=null,b=null;if(f=f.firstBaseUpdate,f!==null){do{var R={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};b===null?y=b=R:b=b.next=R,f=f.next}while(f!==null);b===null?y=b=s:b=b.next=s}else y=b=s;f={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:b,shared:p.shared,callbacks:p.callbacks},i.updateQueue=f;return}i=f.lastBaseUpdate,i===null?f.firstBaseUpdate=s:i.next=s,f.lastBaseUpdate=s}var ed=!1;function Qs(){if(ed){var i=Ao;if(i!==null)throw i}}function Zs(i,s,f,p){ed=!1;var y=i.updateQueue;La=!1;var b=y.firstBaseUpdate,R=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var z=M,Z=z.next;z.next=null,R===null?b=Z:R.next=Z,R=z;var ut=i.alternate;ut!==null&&(ut=ut.updateQueue,M=ut.lastBaseUpdate,M!==R&&(M===null?ut.firstBaseUpdate=Z:M.next=Z,ut.lastBaseUpdate=z))}if(b!==null){var ft=y.baseState;R=0,ut=Z=z=null,M=b;do{var J=M.lane&-536870913,rt=J!==M.lane;if(rt?(Wt&J)===J:(p&J)===J){J!==0&&J===Ro&&(ed=!0),ut!==null&&(ut=ut.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});t:{var bt=i,Nt=M;J=s;var se=f;switch(Nt.tag){case 1:if(bt=Nt.payload,typeof bt=="function"){ft=bt.call(se,ft,J);break t}ft=bt;break t;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Nt.payload,J=typeof bt=="function"?bt.call(se,ft,J):bt,J==null)break t;ft=v({},ft,J);break t;case 2:La=!0}}J=M.callback,J!==null&&(i.flags|=64,rt&&(i.flags|=8192),rt=y.callbacks,rt===null?y.callbacks=[J]:rt.push(J))}else rt={lane:J,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ut===null?(Z=ut=rt,z=ft):ut=ut.next=rt,R|=J;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;rt=M,M=rt.next,rt.next=null,y.lastBaseUpdate=rt,y.shared.pending=null}}while(!0);ut===null&&(z=ft),y.baseState=z,y.firstBaseUpdate=Z,y.lastBaseUpdate=ut,b===null&&(y.shared.lanes=0),ja|=R,i.lanes=R,i.memoizedState=ft}}function f0(i,s){if(typeof i!="function")throw Error(r(191,i));i.call(s)}function h0(i,s){var f=i.callbacks;if(f!==null)for(i.callbacks=null,i=0;i<f.length;i++)f0(f[i],s)}var No=L(null),Xl=L(0);function d0(i,s){i=pa,st(Xl,i),st(No,s),pa=i|s.baseLanes}function nd(){st(Xl,pa),st(No,No.current)}function rd(){pa=Xl.current,X(No),X(Xl)}var zn=L(null),ir=null;function Ua(i){var s=i.alternate;st(Re,Re.current&1),st(zn,i),ir===null&&(s===null||No.current!==null||s.memoizedState!==null)&&(ir=i)}function ad(i){st(Re,Re.current),st(zn,i),ir===null&&(ir=i)}function p0(i){i.tag===22?(st(Re,Re.current),st(zn,i),ir===null&&(ir=i)):Va()}function Va(){st(Re,Re.current),st(zn,zn.current)}function Un(i){X(zn),ir===i&&(ir=null),X(Re)}var Re=L(0);function Yl(i){for(var s=i;s!==null;){if(s.tag===13){var f=s.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||cp(f)||fp(f)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var oa=0,Lt=null,ie=null,Oe=null,Ql=!1,Oo=!1,ki=!1,Zl=0,Js=0,ko=null,hR=0;function Ce(){throw Error(r(321))}function id(i,s){if(s===null)return!1;for(var f=0;f<s.length&&f<i.length;f++)if(!Ln(i[f],s[f]))return!1;return!0}function od(i,s,f,p,y,b){return oa=b,Lt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,P.H=i===null||i.memoizedState===null?Z0:wd,ki=!1,b=f(p,y),ki=!1,Oo&&(b=m0(s,f,p,y)),v0(i),b}function v0(i){P.H=eu;var s=ie!==null&&ie.next!==null;if(oa=0,Oe=ie=Lt=null,Ql=!1,Js=0,ko=null,s)throw Error(r(300));i===null||ke||(i=i.dependencies,i!==null&&Vl(i)&&(ke=!0))}function m0(i,s,f,p){Lt=i;var y=0;do{if(Oo&&(ko=null),Js=0,Oo=!1,25<=y)throw Error(r(301));if(y+=1,Oe=ie=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}P.H=J0,b=s(f,p)}while(Oo);return b}function dR(){var i=P.H,s=i.useState()[0];return s=typeof s.then=="function"?$s(s):s,i=i.useState()[0],(ie!==null?ie.memoizedState:null)!==i&&(Lt.flags|=1024),s}function sd(){var i=Zl!==0;return Zl=0,i}function ud(i,s,f){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~f}function ld(i){if(Ql){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Ql=!1}oa=0,Oe=ie=Lt=null,Oo=!1,Js=Zl=0,ko=null}function yn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oe===null?Lt.memoizedState=Oe=i:Oe=Oe.next=i,Oe}function Ae(){if(ie===null){var i=Lt.alternate;i=i!==null?i.memoizedState:null}else i=ie.next;var s=Oe===null?Lt.memoizedState:Oe.next;if(s!==null)Oe=s,ie=i;else{if(i===null)throw Lt.alternate===null?Error(r(467)):Error(r(310));ie=i,i={memoizedState:ie.memoizedState,baseState:ie.baseState,baseQueue:ie.baseQueue,queue:ie.queue,next:null},Oe===null?Lt.memoizedState=Oe=i:Oe=Oe.next=i}return Oe}function Jl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $s(i){var s=Js;return Js+=1,ko===null&&(ko=[]),i=o0(ko,i,s),s=Lt,(Oe===null?s.memoizedState:Oe.next)===null&&(s=s.alternate,P.H=s===null||s.memoizedState===null?Z0:wd),i}function $l(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return $s(i);if(i.$$typeof===_)return tn(i)}throw Error(r(438,String(i)))}function cd(i){var s=null,f=Lt.updateQueue;if(f!==null&&(s=f.memoCache),s==null){var p=Lt.alternate;p!==null&&(p=p.updateQueue,p!==null&&(p=p.memoCache,p!=null&&(s={data:p.data.map(function(y){return y.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),f===null&&(f=Jl(),Lt.updateQueue=f),f.memoCache=s,f=s.data[s.index],f===void 0)for(f=s.data[s.index]=Array(i),p=0;p<i;p++)f[p]=B;return s.index++,f}function sa(i,s){return typeof s=="function"?s(i):s}function tc(i){var s=Ae();return fd(s,ie,i)}function fd(i,s,f){var p=i.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=f;var y=i.baseQueue,b=p.pending;if(b!==null){if(y!==null){var R=y.next;y.next=b.next,b.next=R}s.baseQueue=y=b,p.pending=null}if(b=i.baseState,y===null)i.memoizedState=b;else{s=y.next;var M=R=null,z=null,Z=s,ut=!1;do{var ft=Z.lane&-536870913;if(ft!==Z.lane?(Wt&ft)===ft:(oa&ft)===ft){var J=Z.revertLane;if(J===0)z!==null&&(z=z.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ft===Ro&&(ut=!0);else if((oa&J)===J){Z=Z.next,J===Ro&&(ut=!0);continue}else ft={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(M=z=ft,R=b):z=z.next=ft,Lt.lanes|=J,ja|=J;ft=Z.action,ki&&f(b,ft),b=Z.hasEagerState?Z.eagerState:f(b,ft)}else J={lane:ft,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},z===null?(M=z=J,R=b):z=z.next=J,Lt.lanes|=ft,ja|=ft;Z=Z.next}while(Z!==null&&Z!==s);if(z===null?R=b:z.next=M,!Ln(b,i.memoizedState)&&(ke=!0,ut&&(f=Ao,f!==null)))throw f;i.memoizedState=b,i.baseState=R,i.baseQueue=z,p.lastRenderedState=b}return y===null&&(p.lanes=0),[i.memoizedState,p.dispatch]}function hd(i){var s=Ae(),f=s.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=i;var p=f.dispatch,y=f.pending,b=s.memoizedState;if(y!==null){f.pending=null;var R=y=y.next;do b=i(b,R.action),R=R.next;while(R!==y);Ln(b,s.memoizedState)||(ke=!0),s.memoizedState=b,s.baseQueue===null&&(s.baseState=b),f.lastRenderedState=b}return[b,p]}function g0(i,s,f){var p=Lt,y=Ae(),b=Kt;if(b){if(f===void 0)throw Error(r(407));f=f()}else f=s();var R=!Ln((ie||y).memoizedState,f);if(R&&(y.memoizedState=f,ke=!0),y=y.queue,vd(x0.bind(null,p,y,i),[i]),y.getSnapshot!==s||R||Oe!==null&&Oe.memoizedState.tag&1){if(p.flags|=2048,Io(9,{destroy:void 0},b0.bind(null,p,y,f,s),null),fe===null)throw Error(r(349));b||(oa&127)!==0||y0(p,s,f)}return f}function y0(i,s,f){i.flags|=16384,i={getSnapshot:s,value:f},s=Lt.updateQueue,s===null?(s=Jl(),Lt.updateQueue=s,s.stores=[i]):(f=s.stores,f===null?s.stores=[i]:f.push(i))}function b0(i,s,f,p){s.value=f,s.getSnapshot=p,w0(s)&&E0(i)}function x0(i,s,f){return f(function(){w0(s)&&E0(i)})}function w0(i){var s=i.getSnapshot;i=i.value;try{var f=s();return!Ln(i,f)}catch{return!0}}function E0(i){var s=Si(i,2);s!==null&&Rn(s,i,2)}function dd(i){var s=yn();if(typeof i=="function"){var f=i;if(i=f(),ki){Zn(!0);try{f()}finally{Zn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:i},s}function C0(i,s,f,p){return i.baseState=f,fd(i,ie,typeof p=="function"?p:sa)}function pR(i,s,f,p,y){if(rc(i))throw Error(r(485));if(i=s.action,i!==null){var b={payload:y,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){b.listeners.push(R)}};P.T!==null?f(!0):b.isTransition=!1,p(b),f=s.pending,f===null?(b.next=s.pending=b,S0(s,b)):(b.next=f.next,s.pending=f.next=b)}}function S0(i,s){var f=s.action,p=s.payload,y=i.state;if(s.isTransition){var b=P.T,R={};P.T=R;try{var M=f(y,p),z=P.S;z!==null&&z(R,M),_0(i,s,M)}catch(Z){pd(i,s,Z)}finally{b!==null&&R.types!==null&&(b.types=R.types),P.T=b}}else try{b=f(y,p),_0(i,s,b)}catch(Z){pd(i,s,Z)}}function _0(i,s,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(p){T0(i,s,p)},function(p){return pd(i,s,p)}):T0(i,s,f)}function T0(i,s,f){s.status="fulfilled",s.value=f,R0(s),i.state=f,s=i.pending,s!==null&&(f=s.next,f===s?i.pending=null:(f=f.next,s.next=f,S0(i,f)))}function pd(i,s,f){var p=i.pending;if(i.pending=null,p!==null){p=p.next;do s.status="rejected",s.reason=f,R0(s),s=s.next;while(s!==p)}i.action=null}function R0(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function A0(i,s){return s}function D0(i,s){if(Kt){var f=fe.formState;if(f!==null){t:{var p=Lt;if(Kt){if(de){e:{for(var y=de,b=ar;y.nodeType!==8;){if(!b){y=null;break e}if(y=or(y.nextSibling),y===null){y=null;break e}}b=y.data,y=b==="F!"||b==="F"?y:null}if(y){de=or(y.nextSibling),p=y.data==="F!";break t}}Ba(p)}p=!1}p&&(s=f[0])}}return f=yn(),f.memoizedState=f.baseState=s,p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:A0,lastRenderedState:s},f.queue=p,f=X0.bind(null,Lt,p),p.dispatch=f,p=dd(!1),b=xd.bind(null,Lt,!1,p.queue),p=yn(),y={state:s,dispatch:null,action:i,pending:null},p.queue=y,f=pR.bind(null,Lt,y,b,f),y.dispatch=f,p.memoizedState=i,[s,f,!1]}function M0(i){var s=Ae();return N0(s,ie,i)}function N0(i,s,f){if(s=fd(i,s,A0)[0],i=tc(sa)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var p=$s(s)}catch(R){throw R===Do?jl:R}else p=s;s=Ae();var y=s.queue,b=y.dispatch;return f!==s.memoizedState&&(Lt.flags|=2048,Io(9,{destroy:void 0},vR.bind(null,y,f),null)),[p,b,i]}function vR(i,s){i.action=s}function O0(i){var s=Ae(),f=ie;if(f!==null)return N0(s,f,i);Ae(),s=s.memoizedState,f=Ae();var p=f.queue.dispatch;return f.memoizedState=i,[s,p,!1]}function Io(i,s,f,p){return i={tag:i,create:f,deps:p,inst:s,next:null},s=Lt.updateQueue,s===null&&(s=Jl(),Lt.updateQueue=s),f=s.lastEffect,f===null?s.lastEffect=i.next=i:(p=f.next,f.next=i,i.next=p,s.lastEffect=i),i}function k0(){return Ae().memoizedState}function ec(i,s,f,p){var y=yn();Lt.flags|=i,y.memoizedState=Io(1|s,{destroy:void 0},f,p===void 0?null:p)}function nc(i,s,f,p){var y=Ae();p=p===void 0?null:p;var b=y.memoizedState.inst;ie!==null&&p!==null&&id(p,ie.memoizedState.deps)?y.memoizedState=Io(s,b,f,p):(Lt.flags|=i,y.memoizedState=Io(1|s,b,f,p))}function I0(i,s){ec(8390656,8,i,s)}function vd(i,s){nc(2048,8,i,s)}function mR(i){Lt.flags|=4;var s=Lt.updateQueue;if(s===null)s=Jl(),Lt.updateQueue=s,s.events=[i];else{var f=s.events;f===null?s.events=[i]:f.push(i)}}function B0(i){var s=Ae().memoizedState;return mR({ref:s,nextImpl:i}),function(){if(($t&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function F0(i,s){return nc(4,2,i,s)}function L0(i,s){return nc(4,4,i,s)}function P0(i,s){if(typeof s=="function"){i=i();var f=s(i);return function(){typeof f=="function"?f():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function z0(i,s,f){f=f!=null?f.concat([i]):null,nc(4,4,P0.bind(null,s,i),f)}function md(){}function U0(i,s){var f=Ae();s=s===void 0?null:s;var p=f.memoizedState;return s!==null&&id(s,p[1])?p[0]:(f.memoizedState=[i,s],i)}function V0(i,s){var f=Ae();s=s===void 0?null:s;var p=f.memoizedState;if(s!==null&&id(s,p[1]))return p[0];if(p=i(),ki){Zn(!0);try{i()}finally{Zn(!1)}}return f.memoizedState=[p,s],p}function gd(i,s,f){return f===void 0||(oa&1073741824)!==0&&(Wt&261930)===0?i.memoizedState=s:(i.memoizedState=f,i=Hb(),Lt.lanes|=i,ja|=i,f)}function H0(i,s,f,p){return Ln(f,s)?f:No.current!==null?(i=gd(i,f,p),Ln(i,s)||(ke=!0),i):(oa&42)===0||(oa&1073741824)!==0&&(Wt&261930)===0?(ke=!0,i.memoizedState=f):(i=Hb(),Lt.lanes|=i,ja|=i,s)}function G0(i,s,f,p,y){var b=G.p;G.p=b!==0&&8>b?b:8;var R=P.T,M={};P.T=M,xd(i,!1,s,f);try{var z=y(),Z=P.S;if(Z!==null&&Z(M,z),z!==null&&typeof z=="object"&&typeof z.then=="function"){var ut=fR(z,p);tu(i,s,ut,Gn(i))}else tu(i,s,p,Gn(i))}catch(ft){tu(i,s,{then:function(){},status:"rejected",reason:ft},Gn())}finally{G.p=b,R!==null&&M.types!==null&&(R.types=M.types),P.T=R}}function gR(){}function yd(i,s,f,p){if(i.tag!==5)throw Error(r(476));var y=j0(i).queue;G0(i,y,s,q,f===null?gR:function(){return W0(i),f(p)})}function j0(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:q},next:null};var f={};return s.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:f},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function W0(i){var s=j0(i);s.next===null&&(s=i.alternate.memoizedState),tu(i,s.next.queue,{},Gn())}function bd(){return tn(gu)}function q0(){return Ae().memoizedState}function K0(){return Ae().memoizedState}function yR(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var f=Gn();i=Pa(f);var p=za(s,i,f);p!==null&&(Rn(p,s,f),Ys(p,s,f)),s={cache:Xh()},i.payload=s;return}s=s.return}}function bR(i,s,f){var p=Gn();f={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},rc(i)?Y0(s,f):(f=Lh(i,s,f,p),f!==null&&(Rn(f,i,p),Q0(f,s,p)))}function X0(i,s,f){var p=Gn();tu(i,s,f,p)}function tu(i,s,f,p){var y={lane:p,revertLane:0,gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null};if(rc(i))Y0(s,y);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=s.lastRenderedReducer,b!==null))try{var R=s.lastRenderedState,M=b(R,f);if(y.hasEagerState=!0,y.eagerState=M,Ln(M,R))return Ll(i,s,y,0),fe===null&&Fl(),!1}catch{}finally{}if(f=Lh(i,s,y,p),f!==null)return Rn(f,i,p),Q0(f,s,p),!0}return!1}function xd(i,s,f,p){if(p={lane:2,revertLane:Jd(),gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},rc(i)){if(s)throw Error(r(479))}else s=Lh(i,f,p,2),s!==null&&Rn(s,i,2)}function rc(i){var s=i.alternate;return i===Lt||s!==null&&s===Lt}function Y0(i,s){Oo=Ql=!0;var f=i.pending;f===null?s.next=s:(s.next=f.next,f.next=s),i.pending=s}function Q0(i,s,f){if((f&4194048)!==0){var p=s.lanes;p&=i.pendingLanes,f|=p,s.lanes=f,ey(i,f)}}var eu={readContext:tn,use:$l,useCallback:Ce,useContext:Ce,useEffect:Ce,useImperativeHandle:Ce,useLayoutEffect:Ce,useInsertionEffect:Ce,useMemo:Ce,useReducer:Ce,useRef:Ce,useState:Ce,useDebugValue:Ce,useDeferredValue:Ce,useTransition:Ce,useSyncExternalStore:Ce,useId:Ce,useHostTransitionStatus:Ce,useFormState:Ce,useActionState:Ce,useOptimistic:Ce,useMemoCache:Ce,useCacheRefresh:Ce};eu.useEffectEvent=Ce;var Z0={readContext:tn,use:$l,useCallback:function(i,s){return yn().memoizedState=[i,s===void 0?null:s],i},useContext:tn,useEffect:I0,useImperativeHandle:function(i,s,f){f=f!=null?f.concat([i]):null,ec(4194308,4,P0.bind(null,s,i),f)},useLayoutEffect:function(i,s){return ec(4194308,4,i,s)},useInsertionEffect:function(i,s){ec(4,2,i,s)},useMemo:function(i,s){var f=yn();s=s===void 0?null:s;var p=i();if(ki){Zn(!0);try{i()}finally{Zn(!1)}}return f.memoizedState=[p,s],p},useReducer:function(i,s,f){var p=yn();if(f!==void 0){var y=f(s);if(ki){Zn(!0);try{f(s)}finally{Zn(!1)}}}else y=s;return p.memoizedState=p.baseState=y,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:y},p.queue=i,i=i.dispatch=bR.bind(null,Lt,i),[p.memoizedState,i]},useRef:function(i){var s=yn();return i={current:i},s.memoizedState=i},useState:function(i){i=dd(i);var s=i.queue,f=X0.bind(null,Lt,s);return s.dispatch=f,[i.memoizedState,f]},useDebugValue:md,useDeferredValue:function(i,s){var f=yn();return gd(f,i,s)},useTransition:function(){var i=dd(!1);return i=G0.bind(null,Lt,i.queue,!0,!1),yn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,f){var p=Lt,y=yn();if(Kt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=s(),fe===null)throw Error(r(349));(Wt&127)!==0||y0(p,s,f)}y.memoizedState=f;var b={value:f,getSnapshot:s};return y.queue=b,I0(x0.bind(null,p,b,i),[i]),p.flags|=2048,Io(9,{destroy:void 0},b0.bind(null,p,b,f,s),null),f},useId:function(){var i=yn(),s=fe.identifierPrefix;if(Kt){var f=kr,p=Or;f=(p&~(1<<32-Fn(p)-1)).toString(32)+f,s="_"+s+"R_"+f,f=Zl++,0<f&&(s+="H"+f.toString(32)),s+="_"}else f=hR++,s="_"+s+"r_"+f.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:bd,useFormState:D0,useActionState:D0,useOptimistic:function(i){var s=yn();s.memoizedState=s.baseState=i;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=f,s=xd.bind(null,Lt,!0,f),f.dispatch=s,[i,s]},useMemoCache:cd,useCacheRefresh:function(){return yn().memoizedState=yR.bind(null,Lt)},useEffectEvent:function(i){var s=yn(),f={impl:i};return s.memoizedState=f,function(){if(($t&2)!==0)throw Error(r(440));return f.impl.apply(void 0,arguments)}}},wd={readContext:tn,use:$l,useCallback:U0,useContext:tn,useEffect:vd,useImperativeHandle:z0,useInsertionEffect:F0,useLayoutEffect:L0,useMemo:V0,useReducer:tc,useRef:k0,useState:function(){return tc(sa)},useDebugValue:md,useDeferredValue:function(i,s){var f=Ae();return H0(f,ie.memoizedState,i,s)},useTransition:function(){var i=tc(sa)[0],s=Ae().memoizedState;return[typeof i=="boolean"?i:$s(i),s]},useSyncExternalStore:g0,useId:q0,useHostTransitionStatus:bd,useFormState:M0,useActionState:M0,useOptimistic:function(i,s){var f=Ae();return C0(f,ie,i,s)},useMemoCache:cd,useCacheRefresh:K0};wd.useEffectEvent=B0;var J0={readContext:tn,use:$l,useCallback:U0,useContext:tn,useEffect:vd,useImperativeHandle:z0,useInsertionEffect:F0,useLayoutEffect:L0,useMemo:V0,useReducer:hd,useRef:k0,useState:function(){return hd(sa)},useDebugValue:md,useDeferredValue:function(i,s){var f=Ae();return ie===null?gd(f,i,s):H0(f,ie.memoizedState,i,s)},useTransition:function(){var i=hd(sa)[0],s=Ae().memoizedState;return[typeof i=="boolean"?i:$s(i),s]},useSyncExternalStore:g0,useId:q0,useHostTransitionStatus:bd,useFormState:O0,useActionState:O0,useOptimistic:function(i,s){var f=Ae();return ie!==null?C0(f,ie,i,s):(f.baseState=i,[i,f.queue.dispatch])},useMemoCache:cd,useCacheRefresh:K0};J0.useEffectEvent=B0;function Ed(i,s,f,p){s=i.memoizedState,f=f(p,s),f=f==null?s:v({},s,f),i.memoizedState=f,i.lanes===0&&(i.updateQueue.baseState=f)}var Cd={enqueueSetState:function(i,s,f){i=i._reactInternals;var p=Gn(),y=Pa(p);y.payload=s,f!=null&&(y.callback=f),s=za(i,y,p),s!==null&&(Rn(s,i,p),Ys(s,i,p))},enqueueReplaceState:function(i,s,f){i=i._reactInternals;var p=Gn(),y=Pa(p);y.tag=1,y.payload=s,f!=null&&(y.callback=f),s=za(i,y,p),s!==null&&(Rn(s,i,p),Ys(s,i,p))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var f=Gn(),p=Pa(f);p.tag=2,s!=null&&(p.callback=s),s=za(i,p,f),s!==null&&(Rn(s,i,f),Ys(s,i,f))}};function $0(i,s,f,p,y,b,R){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(p,b,R):s.prototype&&s.prototype.isPureReactComponent?!Vs(f,p)||!Vs(y,b):!0}function tb(i,s,f,p){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(f,p),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(f,p),s.state!==i&&Cd.enqueueReplaceState(s,s.state,null)}function Ii(i,s){var f=s;if("ref"in s){f={};for(var p in s)p!=="ref"&&(f[p]=s[p])}if(i=i.defaultProps){f===s&&(f=v({},f));for(var y in i)f[y]===void 0&&(f[y]=i[y])}return f}function eb(i){Bl(i)}function nb(i){console.error(i)}function rb(i){Bl(i)}function ac(i,s){try{var f=i.onUncaughtError;f(s.value,{componentStack:s.stack})}catch(p){setTimeout(function(){throw p})}}function ab(i,s,f){try{var p=i.onCaughtError;p(f.value,{componentStack:f.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Sd(i,s,f){return f=Pa(f),f.tag=3,f.payload={element:null},f.callback=function(){ac(i,s)},f}function ib(i){return i=Pa(i),i.tag=3,i}function ob(i,s,f,p){var y=f.type.getDerivedStateFromError;if(typeof y=="function"){var b=p.value;i.payload=function(){return y(b)},i.callback=function(){ab(s,f,p)}}var R=f.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(i.callback=function(){ab(s,f,p),typeof y!="function"&&(Wa===null?Wa=new Set([this]):Wa.add(this));var M=p.stack;this.componentDidCatch(p.value,{componentStack:M!==null?M:""})})}function xR(i,s,f,p,y){if(f.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){if(s=f.alternate,s!==null&&To(s,f,y,!0),f=zn.current,f!==null){switch(f.tag){case 31:case 13:return ir===null?mc():f.alternate===null&&Se===0&&(Se=3),f.flags&=-257,f.flags|=65536,f.lanes=y,p===Wl?f.flags|=16384:(s=f.updateQueue,s===null?f.updateQueue=new Set([p]):s.add(p),Yd(i,p,y)),!1;case 22:return f.flags|=65536,p===Wl?f.flags|=16384:(s=f.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([p])},f.updateQueue=s):(f=s.retryQueue,f===null?s.retryQueue=new Set([p]):f.add(p)),Yd(i,p,y)),!1}throw Error(r(435,f.tag))}return Yd(i,p,y),mc(),!1}if(Kt)return s=zn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=y,p!==Gh&&(i=Error(r(422),{cause:p}),js(er(i,f)))):(p!==Gh&&(s=Error(r(423),{cause:p}),js(er(s,f))),i=i.current.alternate,i.flags|=65536,y&=-y,i.lanes|=y,p=er(p,f),y=Sd(i.stateNode,p,y),td(i,y),Se!==4&&(Se=2)),!1;var b=Error(r(520),{cause:p});if(b=er(b,f),lu===null?lu=[b]:lu.push(b),Se!==4&&(Se=2),s===null)return!0;p=er(p,f),f=s;do{switch(f.tag){case 3:return f.flags|=65536,i=y&-y,f.lanes|=i,i=Sd(f.stateNode,p,i),td(f,i),!1;case 1:if(s=f.type,b=f.stateNode,(f.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Wa===null||!Wa.has(b))))return f.flags|=65536,y&=-y,f.lanes|=y,y=ib(y),ob(y,i,f,p),td(f,y),!1}f=f.return}while(f!==null);return!1}var _d=Error(r(461)),ke=!1;function en(i,s,f,p){s.child=i===null?c0(s,null,f,p):Oi(s,i.child,f,p)}function sb(i,s,f,p,y){f=f.render;var b=s.ref;if("ref"in p){var R={};for(var M in p)M!=="ref"&&(R[M]=p[M])}else R=p;return Ai(s),p=od(i,s,f,R,b,y),M=sd(),i!==null&&!ke?(ud(i,s,y),ua(i,s,y)):(Kt&&M&&Vh(s),s.flags|=1,en(i,s,p,y),s.child)}function ub(i,s,f,p,y){if(i===null){var b=f.type;return typeof b=="function"&&!Ph(b)&&b.defaultProps===void 0&&f.compare===null?(s.tag=15,s.type=b,lb(i,s,b,p,y)):(i=zl(f.type,null,p,s,s.mode,y),i.ref=s.ref,i.return=s,s.child=i)}if(b=i.child,!kd(i,y)){var R=b.memoizedProps;if(f=f.compare,f=f!==null?f:Vs,f(R,p)&&i.ref===s.ref)return ua(i,s,y)}return s.flags|=1,i=na(b,p),i.ref=s.ref,i.return=s,s.child=i}function lb(i,s,f,p,y){if(i!==null){var b=i.memoizedProps;if(Vs(b,p)&&i.ref===s.ref)if(ke=!1,s.pendingProps=p=b,kd(i,y))(i.flags&131072)!==0&&(ke=!0);else return s.lanes=i.lanes,ua(i,s,y)}return Td(i,s,f,p,y)}function cb(i,s,f,p){var y=p.children,b=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),p.mode==="hidden"){if((s.flags&128)!==0){if(b=b!==null?b.baseLanes|f:f,i!==null){for(p=s.child=i.child,y=0;p!==null;)y=y|p.lanes|p.childLanes,p=p.sibling;p=y&~b}else p=0,s.child=null;return fb(i,s,b,f,p)}if((f&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Gl(s,b!==null?b.cachePool:null),b!==null?d0(s,b):nd(),p0(s);else return p=s.lanes=536870912,fb(i,s,b!==null?b.baseLanes|f:f,f,p)}else b!==null?(Gl(s,b.cachePool),d0(s,b),Va(),s.memoizedState=null):(i!==null&&Gl(s,null),nd(),Va());return en(i,s,y,f),s.child}function nu(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function fb(i,s,f,p,y){var b=Qh();return b=b===null?null:{parent:Ne._currentValue,pool:b},s.memoizedState={baseLanes:f,cachePool:b},i!==null&&Gl(s,null),nd(),p0(s),i!==null&&To(i,s,p,!0),s.childLanes=y,null}function ic(i,s){return s=sc({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function hb(i,s,f){return Oi(s,i.child,null,f),i=ic(s,s.pendingProps),i.flags|=2,Un(s),s.memoizedState=null,i}function wR(i,s,f){var p=s.pendingProps,y=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Kt){if(p.mode==="hidden")return i=ic(s,p),s.lanes=536870912,nu(null,i);if(ad(s),(i=de)?(i=S1(i,ar),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ka!==null?{id:Or,overflow:kr}:null,retryLane:536870912,hydrationErrors:null},f=Yy(i),f.return=s,s.child=f,$e=s,de=null)):i=null,i===null)throw Ba(s);return s.lanes=536870912,null}return ic(s,p)}var b=i.memoizedState;if(b!==null){var R=b.dehydrated;if(ad(s),y)if(s.flags&256)s.flags&=-257,s=hb(i,s,f);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(r(558));else if(ke||To(i,s,f,!1),y=(f&i.childLanes)!==0,ke||y){if(p=fe,p!==null&&(R=ny(p,f),R!==0&&R!==b.retryLane))throw b.retryLane=R,Si(i,R),Rn(p,i,R),_d;mc(),s=hb(i,s,f)}else i=b.treeContext,de=or(R.nextSibling),$e=s,Kt=!0,Ia=null,ar=!1,i!==null&&Jy(s,i),s=ic(s,p),s.flags|=4096;return s}return i=na(i.child,{mode:p.mode,children:p.children}),i.ref=s.ref,s.child=i,i.return=s,i}function oc(i,s){var f=s.ref;if(f===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(i===null||i.ref!==f)&&(s.flags|=4194816)}}function Td(i,s,f,p,y){return Ai(s),f=od(i,s,f,p,void 0,y),p=sd(),i!==null&&!ke?(ud(i,s,y),ua(i,s,y)):(Kt&&p&&Vh(s),s.flags|=1,en(i,s,f,y),s.child)}function db(i,s,f,p,y,b){return Ai(s),s.updateQueue=null,f=m0(s,p,f,y),v0(i),p=sd(),i!==null&&!ke?(ud(i,s,b),ua(i,s,b)):(Kt&&p&&Vh(s),s.flags|=1,en(i,s,f,b),s.child)}function pb(i,s,f,p,y){if(Ai(s),s.stateNode===null){var b=Eo,R=f.contextType;typeof R=="object"&&R!==null&&(b=tn(R)),b=new f(p,b),s.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=Cd,s.stateNode=b,b._reactInternals=s,b=s.stateNode,b.props=p,b.state=s.memoizedState,b.refs={},Jh(s),R=f.contextType,b.context=typeof R=="object"&&R!==null?tn(R):Eo,b.state=s.memoizedState,R=f.getDerivedStateFromProps,typeof R=="function"&&(Ed(s,f,R,p),b.state=s.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(R=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),R!==b.state&&Cd.enqueueReplaceState(b,b.state,null),Zs(s,p,b,y),Qs(),b.state=s.memoizedState),typeof b.componentDidMount=="function"&&(s.flags|=4194308),p=!0}else if(i===null){b=s.stateNode;var M=s.memoizedProps,z=Ii(f,M);b.props=z;var Z=b.context,ut=f.contextType;R=Eo,typeof ut=="object"&&ut!==null&&(R=tn(ut));var ft=f.getDerivedStateFromProps;ut=typeof ft=="function"||typeof b.getSnapshotBeforeUpdate=="function",M=s.pendingProps!==M,ut||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(M||Z!==R)&&tb(s,b,p,R),La=!1;var J=s.memoizedState;b.state=J,Zs(s,p,b,y),Qs(),Z=s.memoizedState,M||J!==Z||La?(typeof ft=="function"&&(Ed(s,f,ft,p),Z=s.memoizedState),(z=La||$0(s,f,z,p,J,Z,R))?(ut||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(s.flags|=4194308)):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=p,s.memoizedState=Z),b.props=p,b.state=Z,b.context=R,p=z):(typeof b.componentDidMount=="function"&&(s.flags|=4194308),p=!1)}else{b=s.stateNode,$h(i,s),R=s.memoizedProps,ut=Ii(f,R),b.props=ut,ft=s.pendingProps,J=b.context,Z=f.contextType,z=Eo,typeof Z=="object"&&Z!==null&&(z=tn(Z)),M=f.getDerivedStateFromProps,(Z=typeof M=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(R!==ft||J!==z)&&tb(s,b,p,z),La=!1,J=s.memoizedState,b.state=J,Zs(s,p,b,y),Qs();var rt=s.memoizedState;R!==ft||J!==rt||La||i!==null&&i.dependencies!==null&&Vl(i.dependencies)?(typeof M=="function"&&(Ed(s,f,M,p),rt=s.memoizedState),(ut=La||$0(s,f,ut,p,J,rt,z)||i!==null&&i.dependencies!==null&&Vl(i.dependencies))?(Z||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(p,rt,z),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(p,rt,z)),typeof b.componentDidUpdate=="function"&&(s.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof b.componentDidUpdate!="function"||R===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),s.memoizedProps=p,s.memoizedState=rt),b.props=p,b.state=rt,b.context=z,p=ut):(typeof b.componentDidUpdate!="function"||R===i.memoizedProps&&J===i.memoizedState||(s.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||R===i.memoizedProps&&J===i.memoizedState||(s.flags|=1024),p=!1)}return b=p,oc(i,s),p=(s.flags&128)!==0,b||p?(b=s.stateNode,f=p&&typeof f.getDerivedStateFromError!="function"?null:b.render(),s.flags|=1,i!==null&&p?(s.child=Oi(s,i.child,null,y),s.child=Oi(s,null,f,y)):en(i,s,f,y),s.memoizedState=b.state,i=s.child):i=ua(i,s,y),i}function vb(i,s,f,p){return Ti(),s.flags|=256,en(i,s,f,p),s.child}var Rd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(i){return{baseLanes:i,cachePool:a0()}}function Dd(i,s,f){return i=i!==null?i.childLanes&~f:0,s&&(i|=Hn),i}function mb(i,s,f){var p=s.pendingProps,y=!1,b=(s.flags&128)!==0,R;if((R=b)||(R=i!==null&&i.memoizedState===null?!1:(Re.current&2)!==0),R&&(y=!0,s.flags&=-129),R=(s.flags&32)!==0,s.flags&=-33,i===null){if(Kt){if(y?Ua(s):Va(),(i=de)?(i=S1(i,ar),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:ka!==null?{id:Or,overflow:kr}:null,retryLane:536870912,hydrationErrors:null},f=Yy(i),f.return=s,s.child=f,$e=s,de=null)):i=null,i===null)throw Ba(s);return fp(i)?s.lanes=32:s.lanes=536870912,null}var M=p.children;return p=p.fallback,y?(Va(),y=s.mode,M=sc({mode:"hidden",children:M},y),p=_i(p,y,f,null),M.return=s,p.return=s,M.sibling=p,s.child=M,p=s.child,p.memoizedState=Ad(f),p.childLanes=Dd(i,R,f),s.memoizedState=Rd,nu(null,p)):(Ua(s),Md(s,M))}var z=i.memoizedState;if(z!==null&&(M=z.dehydrated,M!==null)){if(b)s.flags&256?(Ua(s),s.flags&=-257,s=Nd(i,s,f)):s.memoizedState!==null?(Va(),s.child=i.child,s.flags|=128,s=null):(Va(),M=p.fallback,y=s.mode,p=sc({mode:"visible",children:p.children},y),M=_i(M,y,f,null),M.flags|=2,p.return=s,M.return=s,p.sibling=M,s.child=p,Oi(s,i.child,null,f),p=s.child,p.memoizedState=Ad(f),p.childLanes=Dd(i,R,f),s.memoizedState=Rd,s=nu(null,p));else if(Ua(s),fp(M)){if(R=M.nextSibling&&M.nextSibling.dataset,R)var Z=R.dgst;R=Z,p=Error(r(419)),p.stack="",p.digest=R,js({value:p,source:null,stack:null}),s=Nd(i,s,f)}else if(ke||To(i,s,f,!1),R=(f&i.childLanes)!==0,ke||R){if(R=fe,R!==null&&(p=ny(R,f),p!==0&&p!==z.retryLane))throw z.retryLane=p,Si(i,p),Rn(R,i,p),_d;cp(M)||mc(),s=Nd(i,s,f)}else cp(M)?(s.flags|=192,s.child=i.child,s=null):(i=z.treeContext,de=or(M.nextSibling),$e=s,Kt=!0,Ia=null,ar=!1,i!==null&&Jy(s,i),s=Md(s,p.children),s.flags|=4096);return s}return y?(Va(),M=p.fallback,y=s.mode,z=i.child,Z=z.sibling,p=na(z,{mode:"hidden",children:p.children}),p.subtreeFlags=z.subtreeFlags&65011712,Z!==null?M=na(Z,M):(M=_i(M,y,f,null),M.flags|=2),M.return=s,p.return=s,p.sibling=M,s.child=p,nu(null,p),p=s.child,M=i.child.memoizedState,M===null?M=Ad(f):(y=M.cachePool,y!==null?(z=Ne._currentValue,y=y.parent!==z?{parent:z,pool:z}:y):y=a0(),M={baseLanes:M.baseLanes|f,cachePool:y}),p.memoizedState=M,p.childLanes=Dd(i,R,f),s.memoizedState=Rd,nu(i.child,p)):(Ua(s),f=i.child,i=f.sibling,f=na(f,{mode:"visible",children:p.children}),f.return=s,f.sibling=null,i!==null&&(R=s.deletions,R===null?(s.deletions=[i],s.flags|=16):R.push(i)),s.child=f,s.memoizedState=null,f)}function Md(i,s){return s=sc({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function sc(i,s){return i=Pn(22,i,null,s),i.lanes=0,i}function Nd(i,s,f){return Oi(s,i.child,null,f),i=Md(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function gb(i,s,f){i.lanes|=s;var p=i.alternate;p!==null&&(p.lanes|=s),qh(i.return,s,f)}function Od(i,s,f,p,y,b){var R=i.memoizedState;R===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:y,treeForkCount:b}:(R.isBackwards=s,R.rendering=null,R.renderingStartTime=0,R.last=p,R.tail=f,R.tailMode=y,R.treeForkCount=b)}function yb(i,s,f){var p=s.pendingProps,y=p.revealOrder,b=p.tail;p=p.children;var R=Re.current,M=(R&2)!==0;if(M?(R=R&1|2,s.flags|=128):R&=1,st(Re,R),en(i,s,p,f),p=Kt?Gs:0,!M&&i!==null&&(i.flags&128)!==0)t:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&gb(i,f,s);else if(i.tag===19)gb(i,f,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break t;for(;i.sibling===null;){if(i.return===null||i.return===s)break t;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(y){case"forwards":for(f=s.child,y=null;f!==null;)i=f.alternate,i!==null&&Yl(i)===null&&(y=f),f=f.sibling;f=y,f===null?(y=s.child,s.child=null):(y=f.sibling,f.sibling=null),Od(s,!1,y,f,b,p);break;case"backwards":case"unstable_legacy-backwards":for(f=null,y=s.child,s.child=null;y!==null;){if(i=y.alternate,i!==null&&Yl(i)===null){s.child=y;break}i=y.sibling,y.sibling=f,f=y,y=i}Od(s,!0,f,null,b,p);break;case"together":Od(s,!1,null,null,void 0,p);break;default:s.memoizedState=null}return s.child}function ua(i,s,f){if(i!==null&&(s.dependencies=i.dependencies),ja|=s.lanes,(f&s.childLanes)===0)if(i!==null){if(To(i,s,f,!1),(f&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(r(153));if(s.child!==null){for(i=s.child,f=na(i,i.pendingProps),s.child=f,f.return=s;i.sibling!==null;)i=i.sibling,f=f.sibling=na(i,i.pendingProps),f.return=s;f.sibling=null}return s.child}function kd(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Vl(i)))}function ER(i,s,f){switch(s.tag){case 3:Mt(s,s.stateNode.containerInfo),Fa(s,Ne,i.memoizedState.cache),Ti();break;case 27:case 5:ue(s);break;case 4:Mt(s,s.stateNode.containerInfo);break;case 10:Fa(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,ad(s),null;break;case 13:var p=s.memoizedState;if(p!==null)return p.dehydrated!==null?(Ua(s),s.flags|=128,null):(f&s.child.childLanes)!==0?mb(i,s,f):(Ua(s),i=ua(i,s,f),i!==null?i.sibling:null);Ua(s);break;case 19:var y=(i.flags&128)!==0;if(p=(f&s.childLanes)!==0,p||(To(i,s,f,!1),p=(f&s.childLanes)!==0),y){if(p)return yb(i,s,f);s.flags|=128}if(y=s.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),st(Re,Re.current),p)break;return null;case 22:return s.lanes=0,cb(i,s,f,s.pendingProps);case 24:Fa(s,Ne,i.memoizedState.cache)}return ua(i,s,f)}function bb(i,s,f){if(i!==null)if(i.memoizedProps!==s.pendingProps)ke=!0;else{if(!kd(i,f)&&(s.flags&128)===0)return ke=!1,ER(i,s,f);ke=(i.flags&131072)!==0}else ke=!1,Kt&&(s.flags&1048576)!==0&&Zy(s,Gs,s.index);switch(s.lanes=0,s.tag){case 16:t:{var p=s.pendingProps;if(i=Mi(s.elementType),s.type=i,typeof i=="function")Ph(i)?(p=Ii(i,p),s.tag=1,s=pb(null,s,i,p,f)):(s.tag=0,s=Td(null,s,i,p,f));else{if(i!=null){var y=i.$$typeof;if(y===T){s.tag=11,s=sb(null,s,i,p,f);break t}else if(y===N){s.tag=14,s=ub(null,s,i,p,f);break t}}throw s=et(i)||i,Error(r(306,s,""))}}return s;case 0:return Td(i,s,s.type,s.pendingProps,f);case 1:return p=s.type,y=Ii(p,s.pendingProps),pb(i,s,p,y,f);case 3:t:{if(Mt(s,s.stateNode.containerInfo),i===null)throw Error(r(387));p=s.pendingProps;var b=s.memoizedState;y=b.element,$h(i,s),Zs(s,p,null,f);var R=s.memoizedState;if(p=R.cache,Fa(s,Ne,p),p!==b.cache&&Kh(s,[Ne],f,!0),Qs(),p=R.element,b.isDehydrated)if(b={element:p,isDehydrated:!1,cache:R.cache},s.updateQueue.baseState=b,s.memoizedState=b,s.flags&256){s=vb(i,s,p,f);break t}else if(p!==y){y=er(Error(r(424)),s),js(y),s=vb(i,s,p,f);break t}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(de=or(i.firstChild),$e=s,Kt=!0,Ia=null,ar=!0,f=c0(s,null,p,f),s.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Ti(),p===y){s=ua(i,s,f);break t}en(i,s,p,f)}s=s.child}return s;case 26:return oc(i,s),i===null?(f=M1(s.type,null,s.pendingProps,null))?s.memoizedState=f:Kt||(f=s.type,i=s.pendingProps,p=Cc(mt.current).createElement(f),p[Je]=s,p[wn]=i,nn(p,f,i),We(p),s.stateNode=p):s.memoizedState=M1(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return ue(s),i===null&&Kt&&(p=s.stateNode=R1(s.type,s.pendingProps,mt.current),$e=s,ar=!0,y=de,Ya(s.type)?(hp=y,de=or(p.firstChild)):de=y),en(i,s,s.pendingProps.children,f),oc(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Kt&&((y=p=de)&&(p=JR(p,s.type,s.pendingProps,ar),p!==null?(s.stateNode=p,$e=s,de=or(p.firstChild),ar=!1,y=!0):y=!1),y||Ba(s)),ue(s),y=s.type,b=s.pendingProps,R=i!==null?i.memoizedProps:null,p=b.children,sp(y,b)?p=null:R!==null&&sp(y,R)&&(s.flags|=32),s.memoizedState!==null&&(y=od(i,s,dR,null,null,f),gu._currentValue=y),oc(i,s),en(i,s,p,f),s.child;case 6:return i===null&&Kt&&((i=f=de)&&(f=$R(f,s.pendingProps,ar),f!==null?(s.stateNode=f,$e=s,de=null,i=!0):i=!1),i||Ba(s)),null;case 13:return mb(i,s,f);case 4:return Mt(s,s.stateNode.containerInfo),p=s.pendingProps,i===null?s.child=Oi(s,null,p,f):en(i,s,p,f),s.child;case 11:return sb(i,s,s.type,s.pendingProps,f);case 7:return en(i,s,s.pendingProps,f),s.child;case 8:return en(i,s,s.pendingProps.children,f),s.child;case 12:return en(i,s,s.pendingProps.children,f),s.child;case 10:return p=s.pendingProps,Fa(s,s.type,p.value),en(i,s,p.children,f),s.child;case 9:return y=s.type._context,p=s.pendingProps.children,Ai(s),y=tn(y),p=p(y),s.flags|=1,en(i,s,p,f),s.child;case 14:return ub(i,s,s.type,s.pendingProps,f);case 15:return lb(i,s,s.type,s.pendingProps,f);case 19:return yb(i,s,f);case 31:return wR(i,s,f);case 22:return cb(i,s,f,s.pendingProps);case 24:return Ai(s),p=tn(Ne),i===null?(y=Qh(),y===null&&(y=fe,b=Xh(),y.pooledCache=b,b.refCount++,b!==null&&(y.pooledCacheLanes|=f),y=b),s.memoizedState={parent:p,cache:y},Jh(s),Fa(s,Ne,y)):((i.lanes&f)!==0&&($h(i,s),Zs(s,null,null,f),Qs()),y=i.memoizedState,b=s.memoizedState,y.parent!==p?(y={parent:p,cache:p},s.memoizedState=y,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=y),Fa(s,Ne,p)):(p=b.cache,Fa(s,Ne,p),p!==y.cache&&Kh(s,[Ne],f,!0))),en(i,s,s.pendingProps.children,f),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function la(i){i.flags|=4}function Id(i,s,f,p,y){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(y&335544128)===y)if(i.stateNode.complete)i.flags|=8192;else if(qb())i.flags|=8192;else throw Ni=Wl,Zh}else i.flags&=-16777217}function xb(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!B1(s))if(qb())i.flags|=8192;else throw Ni=Wl,Zh}function uc(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?$g():536870912,i.lanes|=s,Po|=s)}function ru(i,s){if(!Kt)switch(i.tailMode){case"hidden":s=i.tail;for(var f=null;s!==null;)s.alternate!==null&&(f=s),s=s.sibling;f===null?i.tail=null:f.sibling=null;break;case"collapsed":f=i.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:p.sibling=null}}function pe(i){var s=i.alternate!==null&&i.alternate.child===i.child,f=0,p=0;if(s)for(var y=i.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags&65011712,p|=y.flags&65011712,y.return=i,y=y.sibling;else for(y=i.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=i,y=y.sibling;return i.subtreeFlags|=p,i.childLanes=f,s}function CR(i,s,f){var p=s.pendingProps;switch(Hh(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(s),null;case 1:return pe(s),null;case 3:return f=s.stateNode,p=null,i!==null&&(p=i.memoizedState.cache),s.memoizedState.cache!==p&&(s.flags|=2048),ia(Ne),At(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(_o(s)?la(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,jh())),pe(s),null;case 26:var y=s.type,b=s.memoizedState;return i===null?(la(s),b!==null?(pe(s),xb(s,b)):(pe(s),Id(s,y,null,p,f))):b?b!==i.memoizedState?(la(s),pe(s),xb(s,b)):(pe(s),s.flags&=-16777217):(i=i.memoizedProps,i!==p&&la(s),pe(s),Id(s,y,i,p,f)),null;case 27:if(Ut(s),f=mt.current,y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==p&&la(s);else{if(!p){if(s.stateNode===null)throw Error(r(166));return pe(s),null}i=dt.current,_o(s)?$y(s):(i=R1(y,p,f),s.stateNode=i,la(s))}return pe(s),null;case 5:if(Ut(s),y=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==p&&la(s);else{if(!p){if(s.stateNode===null)throw Error(r(166));return pe(s),null}if(b=dt.current,_o(s))$y(s);else{var R=Cc(mt.current);switch(b){case 1:b=R.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:b=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":b=R.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":b=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":b=R.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof p.is=="string"?R.createElement("select",{is:p.is}):R.createElement("select"),p.multiple?b.multiple=!0:p.size&&(b.size=p.size);break;default:b=typeof p.is=="string"?R.createElement(y,{is:p.is}):R.createElement(y)}}b[Je]=s,b[wn]=p;t:for(R=s.child;R!==null;){if(R.tag===5||R.tag===6)b.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===s)break t;for(;R.sibling===null;){if(R.return===null||R.return===s)break t;R=R.return}R.sibling.return=R.return,R=R.sibling}s.stateNode=b;t:switch(nn(b,y,p),y){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break t;case"img":p=!0;break t;default:p=!1}p&&la(s)}}return pe(s),Id(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,f),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==p&&la(s);else{if(typeof p!="string"&&s.stateNode===null)throw Error(r(166));if(i=mt.current,_o(s)){if(i=s.stateNode,f=s.memoizedProps,p=null,y=$e,y!==null)switch(y.tag){case 27:case 5:p=y.memoizedProps}i[Je]=s,i=!!(i.nodeValue===f||p!==null&&p.suppressHydrationWarning===!0||m1(i.nodeValue,f)),i||Ba(s,!0)}else i=Cc(i).createTextNode(p),i[Je]=s,s.stateNode=i}return pe(s),null;case 31:if(f=s.memoizedState,i===null||i.memoizedState!==null){if(p=_o(s),f!==null){if(i===null){if(!p)throw Error(r(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[Je]=s}else Ti(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pe(s),i=!1}else f=jh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=f),i=!0;if(!i)return s.flags&256?(Un(s),s):(Un(s),null);if((s.flags&128)!==0)throw Error(r(558))}return pe(s),null;case 13:if(p=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(y=_o(s),p!==null&&p.dehydrated!==null){if(i===null){if(!y)throw Error(r(318));if(y=s.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Je]=s}else Ti(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;pe(s),y=!1}else y=jh(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=y),y=!0;if(!y)return s.flags&256?(Un(s),s):(Un(s),null)}return Un(s),(s.flags&128)!==0?(s.lanes=f,s):(f=p!==null,i=i!==null&&i.memoizedState!==null,f&&(p=s.child,y=null,p.alternate!==null&&p.alternate.memoizedState!==null&&p.alternate.memoizedState.cachePool!==null&&(y=p.alternate.memoizedState.cachePool.pool),b=null,p.memoizedState!==null&&p.memoizedState.cachePool!==null&&(b=p.memoizedState.cachePool.pool),b!==y&&(p.flags|=2048)),f!==i&&f&&(s.child.flags|=8192),uc(s,s.updateQueue),pe(s),null);case 4:return At(),i===null&&np(s.stateNode.containerInfo),pe(s),null;case 10:return ia(s.type),pe(s),null;case 19:if(X(Re),p=s.memoizedState,p===null)return pe(s),null;if(y=(s.flags&128)!==0,b=p.rendering,b===null)if(y)ru(p,!1);else{if(Se!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(b=Yl(i),b!==null){for(s.flags|=128,ru(p,!1),i=b.updateQueue,s.updateQueue=i,uc(s,i),s.subtreeFlags=0,i=f,f=s.child;f!==null;)Xy(f,i),f=f.sibling;return st(Re,Re.current&1|2),Kt&&ra(s,p.treeForkCount),s.child}i=i.sibling}p.tail!==null&&Me()>dc&&(s.flags|=128,y=!0,ru(p,!1),s.lanes=4194304)}else{if(!y)if(i=Yl(b),i!==null){if(s.flags|=128,y=!0,i=i.updateQueue,s.updateQueue=i,uc(s,i),ru(p,!0),p.tail===null&&p.tailMode==="hidden"&&!b.alternate&&!Kt)return pe(s),null}else 2*Me()-p.renderingStartTime>dc&&f!==536870912&&(s.flags|=128,y=!0,ru(p,!1),s.lanes=4194304);p.isBackwards?(b.sibling=s.child,s.child=b):(i=p.last,i!==null?i.sibling=b:s.child=b,p.last=b)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Me(),i.sibling=null,f=Re.current,st(Re,y?f&1|2:f&1),Kt&&ra(s,p.treeForkCount),i):(pe(s),null);case 22:case 23:return Un(s),rd(),p=s.memoizedState!==null,i!==null?i.memoizedState!==null!==p&&(s.flags|=8192):p&&(s.flags|=8192),p?(f&536870912)!==0&&(s.flags&128)===0&&(pe(s),s.subtreeFlags&6&&(s.flags|=8192)):pe(s),f=s.updateQueue,f!==null&&uc(s,f.retryQueue),f=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),p=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(p=s.memoizedState.cachePool.pool),p!==f&&(s.flags|=2048),i!==null&&X(Di),null;case 24:return f=null,i!==null&&(f=i.memoizedState.cache),s.memoizedState.cache!==f&&(s.flags|=2048),ia(Ne),pe(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function SR(i,s){switch(Hh(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return ia(Ne),At(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return Ut(s),null;case 31:if(s.memoizedState!==null){if(Un(s),s.alternate===null)throw Error(r(340));Ti()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(Un(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ti()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return X(Re),null;case 4:return At(),null;case 10:return ia(s.type),null;case 22:case 23:return Un(s),rd(),i!==null&&X(Di),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return ia(Ne),null;case 25:return null;default:return null}}function wb(i,s){switch(Hh(s),s.tag){case 3:ia(Ne),At();break;case 26:case 27:case 5:Ut(s);break;case 4:At();break;case 31:s.memoizedState!==null&&Un(s);break;case 13:Un(s);break;case 19:X(Re);break;case 10:ia(s.type);break;case 22:case 23:Un(s),rd(),i!==null&&X(Di);break;case 24:ia(Ne)}}function au(i,s){try{var f=s.updateQueue,p=f!==null?f.lastEffect:null;if(p!==null){var y=p.next;f=y;do{if((f.tag&i)===i){p=void 0;var b=f.create,R=f.inst;p=b(),R.destroy=p}f=f.next}while(f!==y)}}catch(M){ae(s,s.return,M)}}function Ha(i,s,f){try{var p=s.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var b=y.next;p=b;do{if((p.tag&i)===i){var R=p.inst,M=R.destroy;if(M!==void 0){R.destroy=void 0,y=s;var z=f,Z=M;try{Z()}catch(ut){ae(y,z,ut)}}}p=p.next}while(p!==b)}}catch(ut){ae(s,s.return,ut)}}function Eb(i){var s=i.updateQueue;if(s!==null){var f=i.stateNode;try{h0(s,f)}catch(p){ae(i,i.return,p)}}}function Cb(i,s,f){f.props=Ii(i.type,i.memoizedProps),f.state=i.memoizedState;try{f.componentWillUnmount()}catch(p){ae(i,s,p)}}function iu(i,s){try{var f=i.ref;if(f!==null){switch(i.tag){case 26:case 27:case 5:var p=i.stateNode;break;case 30:p=i.stateNode;break;default:p=i.stateNode}typeof f=="function"?i.refCleanup=f(p):f.current=p}}catch(y){ae(i,s,y)}}function Ir(i,s){var f=i.ref,p=i.refCleanup;if(f!==null)if(typeof p=="function")try{p()}catch(y){ae(i,s,y)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(y){ae(i,s,y)}else f.current=null}function Sb(i){var s=i.type,f=i.memoizedProps,p=i.stateNode;try{t:switch(s){case"button":case"input":case"select":case"textarea":f.autoFocus&&p.focus();break t;case"img":f.src?p.src=f.src:f.srcSet&&(p.srcset=f.srcSet)}}catch(y){ae(i,i.return,y)}}function Bd(i,s,f){try{var p=i.stateNode;qR(p,i.type,f,s),p[wn]=s}catch(y){ae(i,i.return,y)}}function _b(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Ya(i.type)||i.tag===4}function Fd(i){t:for(;;){for(;i.sibling===null;){if(i.return===null||_b(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Ya(i.type)||i.flags&2||i.child===null||i.tag===4)continue t;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Ld(i,s,f){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(i,s):(s=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,s.appendChild(i),f=f._reactRootContainer,f!=null||s.onclick!==null||(s.onclick=ta));else if(p!==4&&(p===27&&Ya(i.type)&&(f=i.stateNode,s=null),i=i.child,i!==null))for(Ld(i,s,f),i=i.sibling;i!==null;)Ld(i,s,f),i=i.sibling}function lc(i,s,f){var p=i.tag;if(p===5||p===6)i=i.stateNode,s?f.insertBefore(i,s):f.appendChild(i);else if(p!==4&&(p===27&&Ya(i.type)&&(f=i.stateNode),i=i.child,i!==null))for(lc(i,s,f),i=i.sibling;i!==null;)lc(i,s,f),i=i.sibling}function Tb(i){var s=i.stateNode,f=i.memoizedProps;try{for(var p=i.type,y=s.attributes;y.length;)s.removeAttributeNode(y[0]);nn(s,p,f),s[Je]=i,s[wn]=f}catch(b){ae(i,i.return,b)}}var ca=!1,Ie=!1,Pd=!1,Rb=typeof WeakSet=="function"?WeakSet:Set,qe=null;function _R(i,s){if(i=i.containerInfo,ip=Mc,i=zy(i),Nh(i)){if("selectionStart"in i)var f={start:i.selectionStart,end:i.selectionEnd};else t:{f=(f=i.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var y=p.anchorOffset,b=p.focusNode;p=p.focusOffset;try{f.nodeType,b.nodeType}catch{f=null;break t}var R=0,M=-1,z=-1,Z=0,ut=0,ft=i,J=null;e:for(;;){for(var rt;ft!==f||y!==0&&ft.nodeType!==3||(M=R+y),ft!==b||p!==0&&ft.nodeType!==3||(z=R+p),ft.nodeType===3&&(R+=ft.nodeValue.length),(rt=ft.firstChild)!==null;)J=ft,ft=rt;for(;;){if(ft===i)break e;if(J===f&&++Z===y&&(M=R),J===b&&++ut===p&&(z=R),(rt=ft.nextSibling)!==null)break;ft=J,J=ft.parentNode}ft=rt}f=M===-1||z===-1?null:{start:M,end:z}}else f=null}f=f||{start:0,end:0}}else f=null;for(op={focusedElem:i,selectionRange:f},Mc=!1,qe=s;qe!==null;)if(s=qe,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,qe=i;else for(;qe!==null;){switch(s=qe,b=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(f=0;f<i.length;f++)y=i[f],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,f=s,y=b.memoizedProps,b=b.memoizedState,p=f.stateNode;try{var bt=Ii(f.type,y);i=p.getSnapshotBeforeUpdate(bt,b),p.__reactInternalSnapshotBeforeUpdate=i}catch(Nt){ae(f,f.return,Nt)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,f=i.nodeType,f===9)lp(i);else if(f===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":lp(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=s.sibling,i!==null){i.return=s.return,qe=i;break}qe=s.return}}function Ab(i,s,f){var p=f.flags;switch(f.tag){case 0:case 11:case 15:ha(i,f),p&4&&au(5,f);break;case 1:if(ha(i,f),p&4)if(i=f.stateNode,s===null)try{i.componentDidMount()}catch(R){ae(f,f.return,R)}else{var y=Ii(f.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(y,s,i.__reactInternalSnapshotBeforeUpdate)}catch(R){ae(f,f.return,R)}}p&64&&Eb(f),p&512&&iu(f,f.return);break;case 3:if(ha(i,f),p&64&&(i=f.updateQueue,i!==null)){if(s=null,f.child!==null)switch(f.child.tag){case 27:case 5:s=f.child.stateNode;break;case 1:s=f.child.stateNode}try{h0(i,s)}catch(R){ae(f,f.return,R)}}break;case 27:s===null&&p&4&&Tb(f);case 26:case 5:ha(i,f),s===null&&p&4&&Sb(f),p&512&&iu(f,f.return);break;case 12:ha(i,f);break;case 31:ha(i,f),p&4&&Nb(i,f);break;case 13:ha(i,f),p&4&&Ob(i,f),p&64&&(i=f.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(f=IR.bind(null,f),tA(i,f))));break;case 22:if(p=f.memoizedState!==null||ca,!p){s=s!==null&&s.memoizedState!==null||Ie,y=ca;var b=Ie;ca=p,(Ie=s)&&!b?da(i,f,(f.subtreeFlags&8772)!==0):ha(i,f),ca=y,Ie=b}break;case 30:break;default:ha(i,f)}}function Db(i){var s=i.alternate;s!==null&&(i.alternate=null,Db(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&ph(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var me=null,Cn=!1;function fa(i,s,f){for(f=f.child;f!==null;)Mb(i,s,f),f=f.sibling}function Mb(i,s,f){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(Jr,f)}catch{}switch(f.tag){case 26:Ie||Ir(f,s),fa(i,s,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Ie||Ir(f,s);var p=me,y=Cn;Ya(f.type)&&(me=f.stateNode,Cn=!1),fa(i,s,f),pu(f.stateNode),me=p,Cn=y;break;case 5:Ie||Ir(f,s);case 6:if(p=me,y=Cn,me=null,fa(i,s,f),me=p,Cn=y,me!==null)if(Cn)try{(me.nodeType===9?me.body:me.nodeName==="HTML"?me.ownerDocument.body:me).removeChild(f.stateNode)}catch(b){ae(f,s,b)}else try{me.removeChild(f.stateNode)}catch(b){ae(f,s,b)}break;case 18:me!==null&&(Cn?(i=me,E1(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,f.stateNode),qo(i)):E1(me,f.stateNode));break;case 4:p=me,y=Cn,me=f.stateNode.containerInfo,Cn=!0,fa(i,s,f),me=p,Cn=y;break;case 0:case 11:case 14:case 15:Ha(2,f,s),Ie||Ha(4,f,s),fa(i,s,f);break;case 1:Ie||(Ir(f,s),p=f.stateNode,typeof p.componentWillUnmount=="function"&&Cb(f,s,p)),fa(i,s,f);break;case 21:fa(i,s,f);break;case 22:Ie=(p=Ie)||f.memoizedState!==null,fa(i,s,f),Ie=p;break;default:fa(i,s,f)}}function Nb(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{qo(i)}catch(f){ae(s,s.return,f)}}}function Ob(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{qo(i)}catch(f){ae(s,s.return,f)}}function TR(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new Rb),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new Rb),s;default:throw Error(r(435,i.tag))}}function cc(i,s){var f=TR(i);s.forEach(function(p){if(!f.has(p)){f.add(p);var y=BR.bind(null,i,p);p.then(y,y)}})}function Sn(i,s){var f=s.deletions;if(f!==null)for(var p=0;p<f.length;p++){var y=f[p],b=i,R=s,M=R;t:for(;M!==null;){switch(M.tag){case 27:if(Ya(M.type)){me=M.stateNode,Cn=!1;break t}break;case 5:me=M.stateNode,Cn=!1;break t;case 3:case 4:me=M.stateNode.containerInfo,Cn=!0;break t}M=M.return}if(me===null)throw Error(r(160));Mb(b,R,y),me=null,Cn=!1,b=y.alternate,b!==null&&(b.return=null),y.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)kb(s,i),s=s.sibling}var br=null;function kb(i,s){var f=i.alternate,p=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Sn(s,i),_n(i),p&4&&(Ha(3,i,i.return),au(3,i),Ha(5,i,i.return));break;case 1:Sn(s,i),_n(i),p&512&&(Ie||f===null||Ir(f,f.return)),p&64&&ca&&(i=i.updateQueue,i!==null&&(p=i.callbacks,p!==null&&(f=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=f===null?p:f.concat(p))));break;case 26:var y=br;if(Sn(s,i),_n(i),p&512&&(Ie||f===null||Ir(f,f.return)),p&4){var b=f!==null?f.memoizedState:null;if(p=i.memoizedState,f===null)if(p===null)if(i.stateNode===null){t:{p=i.type,f=i.memoizedProps,y=y.ownerDocument||y;e:switch(p){case"title":b=y.getElementsByTagName("title")[0],(!b||b[Os]||b[Je]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=y.createElement(p),y.head.insertBefore(b,y.querySelector("head > title"))),nn(b,p,f),b[Je]=i,We(b),p=b;break t;case"link":var R=k1("link","href",y).get(p+(f.href||""));if(R){for(var M=0;M<R.length;M++)if(b=R[M],b.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&b.getAttribute("rel")===(f.rel==null?null:f.rel)&&b.getAttribute("title")===(f.title==null?null:f.title)&&b.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){R.splice(M,1);break e}}b=y.createElement(p),nn(b,p,f),y.head.appendChild(b);break;case"meta":if(R=k1("meta","content",y).get(p+(f.content||""))){for(M=0;M<R.length;M++)if(b=R[M],b.getAttribute("content")===(f.content==null?null:""+f.content)&&b.getAttribute("name")===(f.name==null?null:f.name)&&b.getAttribute("property")===(f.property==null?null:f.property)&&b.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&b.getAttribute("charset")===(f.charSet==null?null:f.charSet)){R.splice(M,1);break e}}b=y.createElement(p),nn(b,p,f),y.head.appendChild(b);break;default:throw Error(r(468,p))}b[Je]=i,We(b),p=b}i.stateNode=p}else I1(y,i.type,i.stateNode);else i.stateNode=O1(y,p,i.memoizedProps);else b!==p?(b===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):b.count--,p===null?I1(y,i.type,i.stateNode):O1(y,p,i.memoizedProps)):p===null&&i.stateNode!==null&&Bd(i,i.memoizedProps,f.memoizedProps)}break;case 27:Sn(s,i),_n(i),p&512&&(Ie||f===null||Ir(f,f.return)),f!==null&&p&4&&Bd(i,i.memoizedProps,f.memoizedProps);break;case 5:if(Sn(s,i),_n(i),p&512&&(Ie||f===null||Ir(f,f.return)),i.flags&32){y=i.stateNode;try{vo(y,"")}catch(bt){ae(i,i.return,bt)}}p&4&&i.stateNode!=null&&(y=i.memoizedProps,Bd(i,y,f!==null?f.memoizedProps:y)),p&1024&&(Pd=!0);break;case 6:if(Sn(s,i),_n(i),p&4){if(i.stateNode===null)throw Error(r(162));p=i.memoizedProps,f=i.stateNode;try{f.nodeValue=p}catch(bt){ae(i,i.return,bt)}}break;case 3:if(Tc=null,y=br,br=Sc(s.containerInfo),Sn(s,i),br=y,_n(i),p&4&&f!==null&&f.memoizedState.isDehydrated)try{qo(s.containerInfo)}catch(bt){ae(i,i.return,bt)}Pd&&(Pd=!1,Ib(i));break;case 4:p=br,br=Sc(i.stateNode.containerInfo),Sn(s,i),_n(i),br=p;break;case 12:Sn(s,i),_n(i);break;case 31:Sn(s,i),_n(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,cc(i,p)));break;case 13:Sn(s,i),_n(i),i.child.flags&8192&&i.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(hc=Me()),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,cc(i,p)));break;case 22:y=i.memoizedState!==null;var z=f!==null&&f.memoizedState!==null,Z=ca,ut=Ie;if(ca=Z||y,Ie=ut||z,Sn(s,i),Ie=ut,ca=Z,_n(i),p&8192)t:for(s=i.stateNode,s._visibility=y?s._visibility&-2:s._visibility|1,y&&(f===null||z||ca||Ie||Bi(i)),f=null,s=i;;){if(s.tag===5||s.tag===26){if(f===null){z=f=s;try{if(b=z.stateNode,y)R=b.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{M=z.stateNode;var ft=z.memoizedProps.style,J=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;M.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(bt){ae(z,z.return,bt)}}}else if(s.tag===6){if(f===null){z=s;try{z.stateNode.nodeValue=y?"":z.memoizedProps}catch(bt){ae(z,z.return,bt)}}}else if(s.tag===18){if(f===null){z=s;try{var rt=z.stateNode;y?C1(rt,!0):C1(z.stateNode,!1)}catch(bt){ae(z,z.return,bt)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break t;for(;s.sibling===null;){if(s.return===null||s.return===i)break t;f===s&&(f=null),s=s.return}f===s&&(f=null),s.sibling.return=s.return,s=s.sibling}p&4&&(p=i.updateQueue,p!==null&&(f=p.retryQueue,f!==null&&(p.retryQueue=null,cc(i,f))));break;case 19:Sn(s,i),_n(i),p&4&&(p=i.updateQueue,p!==null&&(i.updateQueue=null,cc(i,p)));break;case 30:break;case 21:break;default:Sn(s,i),_n(i)}}function _n(i){var s=i.flags;if(s&2){try{for(var f,p=i.return;p!==null;){if(_b(p)){f=p;break}p=p.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var y=f.stateNode,b=Fd(i);lc(i,b,y);break;case 5:var R=f.stateNode;f.flags&32&&(vo(R,""),f.flags&=-33);var M=Fd(i);lc(i,M,R);break;case 3:case 4:var z=f.stateNode.containerInfo,Z=Fd(i);Ld(i,Z,z);break;default:throw Error(r(161))}}catch(ut){ae(i,i.return,ut)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Ib(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Ib(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function ha(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Ab(i,s.alternate,s),s=s.sibling}function Bi(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:Ha(4,s,s.return),Bi(s);break;case 1:Ir(s,s.return);var f=s.stateNode;typeof f.componentWillUnmount=="function"&&Cb(s,s.return,f),Bi(s);break;case 27:pu(s.stateNode);case 26:case 5:Ir(s,s.return),Bi(s);break;case 22:s.memoizedState===null&&Bi(s);break;case 30:Bi(s);break;default:Bi(s)}i=i.sibling}}function da(i,s,f){for(f=f&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var p=s.alternate,y=i,b=s,R=b.flags;switch(b.tag){case 0:case 11:case 15:da(y,b,f),au(4,b);break;case 1:if(da(y,b,f),p=b,y=p.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Z){ae(p,p.return,Z)}if(p=b,y=p.updateQueue,y!==null){var M=p.stateNode;try{var z=y.shared.hiddenCallbacks;if(z!==null)for(y.shared.hiddenCallbacks=null,y=0;y<z.length;y++)f0(z[y],M)}catch(Z){ae(p,p.return,Z)}}f&&R&64&&Eb(b),iu(b,b.return);break;case 27:Tb(b);case 26:case 5:da(y,b,f),f&&p===null&&R&4&&Sb(b),iu(b,b.return);break;case 12:da(y,b,f);break;case 31:da(y,b,f),f&&R&4&&Nb(y,b);break;case 13:da(y,b,f),f&&R&4&&Ob(y,b);break;case 22:b.memoizedState===null&&da(y,b,f),iu(b,b.return);break;case 30:break;default:da(y,b,f)}s=s.sibling}}function zd(i,s){var f=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==f&&(i!=null&&i.refCount++,f!=null&&Ws(f))}function Ud(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ws(i))}function xr(i,s,f,p){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Bb(i,s,f,p),s=s.sibling}function Bb(i,s,f,p){var y=s.flags;switch(s.tag){case 0:case 11:case 15:xr(i,s,f,p),y&2048&&au(9,s);break;case 1:xr(i,s,f,p);break;case 3:xr(i,s,f,p),y&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&Ws(i)));break;case 12:if(y&2048){xr(i,s,f,p),i=s.stateNode;try{var b=s.memoizedProps,R=b.id,M=b.onPostCommit;typeof M=="function"&&M(R,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(z){ae(s,s.return,z)}}else xr(i,s,f,p);break;case 31:xr(i,s,f,p);break;case 13:xr(i,s,f,p);break;case 23:break;case 22:b=s.stateNode,R=s.alternate,s.memoizedState!==null?b._visibility&2?xr(i,s,f,p):ou(i,s):b._visibility&2?xr(i,s,f,p):(b._visibility|=2,Bo(i,s,f,p,(s.subtreeFlags&10256)!==0||!1)),y&2048&&zd(R,s);break;case 24:xr(i,s,f,p),y&2048&&Ud(s.alternate,s);break;default:xr(i,s,f,p)}}function Bo(i,s,f,p,y){for(y=y&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var b=i,R=s,M=f,z=p,Z=R.flags;switch(R.tag){case 0:case 11:case 15:Bo(b,R,M,z,y),au(8,R);break;case 23:break;case 22:var ut=R.stateNode;R.memoizedState!==null?ut._visibility&2?Bo(b,R,M,z,y):ou(b,R):(ut._visibility|=2,Bo(b,R,M,z,y)),y&&Z&2048&&zd(R.alternate,R);break;case 24:Bo(b,R,M,z,y),y&&Z&2048&&Ud(R.alternate,R);break;default:Bo(b,R,M,z,y)}s=s.sibling}}function ou(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var f=i,p=s,y=p.flags;switch(p.tag){case 22:ou(f,p),y&2048&&zd(p.alternate,p);break;case 24:ou(f,p),y&2048&&Ud(p.alternate,p);break;default:ou(f,p)}s=s.sibling}}var su=8192;function Fo(i,s,f){if(i.subtreeFlags&su)for(i=i.child;i!==null;)Fb(i,s,f),i=i.sibling}function Fb(i,s,f){switch(i.tag){case 26:Fo(i,s,f),i.flags&su&&i.memoizedState!==null&&hA(f,br,i.memoizedState,i.memoizedProps);break;case 5:Fo(i,s,f);break;case 3:case 4:var p=br;br=Sc(i.stateNode.containerInfo),Fo(i,s,f),br=p;break;case 22:i.memoizedState===null&&(p=i.alternate,p!==null&&p.memoizedState!==null?(p=su,su=16777216,Fo(i,s,f),su=p):Fo(i,s,f));break;default:Fo(i,s,f)}}function Lb(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function uu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var p=s[f];qe=p,zb(p,i)}Lb(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Pb(i),i=i.sibling}function Pb(i){switch(i.tag){case 0:case 11:case 15:uu(i),i.flags&2048&&Ha(9,i,i.return);break;case 3:uu(i);break;case 12:uu(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,fc(i)):uu(i);break;default:uu(i)}}function fc(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var f=0;f<s.length;f++){var p=s[f];qe=p,zb(p,i)}Lb(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:Ha(8,s,s.return),fc(s);break;case 22:f=s.stateNode,f._visibility&2&&(f._visibility&=-3,fc(s));break;default:fc(s)}i=i.sibling}}function zb(i,s){for(;qe!==null;){var f=qe;switch(f.tag){case 0:case 11:case 15:Ha(8,f,s);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var p=f.memoizedState.cachePool.pool;p!=null&&p.refCount++}break;case 24:Ws(f.memoizedState.cache)}if(p=f.child,p!==null)p.return=f,qe=p;else t:for(f=i;qe!==null;){p=qe;var y=p.sibling,b=p.return;if(Db(p),p===f){qe=null;break t}if(y!==null){y.return=b,qe=y;break t}qe=b}}}var RR={getCacheForType:function(i){var s=tn(Ne),f=s.data.get(i);return f===void 0&&(f=i(),s.data.set(i,f)),f},cacheSignal:function(){return tn(Ne).controller.signal}},AR=typeof WeakMap=="function"?WeakMap:Map,$t=0,fe=null,Ht=null,Wt=0,re=0,Vn=null,Ga=!1,Lo=!1,Vd=!1,pa=0,Se=0,ja=0,Fi=0,Hd=0,Hn=0,Po=0,lu=null,Tn=null,Gd=!1,hc=0,Ub=0,dc=1/0,pc=null,Wa=null,Le=0,qa=null,zo=null,va=0,jd=0,Wd=null,Vb=null,cu=0,qd=null;function Gn(){return($t&2)!==0&&Wt!==0?Wt&-Wt:P.T!==null?Jd():ry()}function Hb(){if(Hn===0)if((Wt&536870912)===0||Kt){var i=El;El<<=1,(El&3932160)===0&&(El=262144),Hn=i}else Hn=536870912;return i=zn.current,i!==null&&(i.flags|=32),Hn}function Rn(i,s,f){(i===fe&&(re===2||re===9)||i.cancelPendingCommit!==null)&&(Uo(i,0),Ka(i,Wt,Hn,!1)),Ns(i,f),(($t&2)===0||i!==fe)&&(i===fe&&(($t&2)===0&&(Fi|=f),Se===4&&Ka(i,Wt,Hn,!1)),Br(i))}function Gb(i,s,f){if(($t&6)!==0)throw Error(r(327));var p=!f&&(s&127)===0&&(s&i.expiredLanes)===0||Ms(i,s),y=p?NR(i,s):Xd(i,s,!0),b=p;do{if(y===0){Lo&&!p&&Ka(i,s,0,!1);break}else{if(f=i.current.alternate,b&&!DR(f)){y=Xd(i,s,!1),b=!1;continue}if(y===2){if(b=s,i.errorRecoveryDisabledLanes&b)var R=0;else R=i.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){s=R;t:{var M=i;y=lu;var z=M.current.memoizedState.isDehydrated;if(z&&(Uo(M,R).flags|=256),R=Xd(M,R,!1),R!==2){if(Vd&&!z){M.errorRecoveryDisabledLanes|=b,Fi|=b,y=4;break t}b=Tn,Tn=y,b!==null&&(Tn===null?Tn=b:Tn.push.apply(Tn,b))}y=R}if(b=!1,y!==2)continue}}if(y===1){Uo(i,0),Ka(i,s,0,!0);break}t:{switch(p=i,b=y,b){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Ka(p,s,Hn,!Ga);break t;case 2:Tn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(y=hc+300-Me(),10<y)){if(Ka(p,s,Hn,!Ga),Sl(p,0,!0)!==0)break t;va=s,p.timeoutHandle=x1(jb.bind(null,p,f,Tn,pc,Gd,s,Hn,Fi,Po,Ga,b,"Throttled",-0,0),y);break t}jb(p,f,Tn,pc,Gd,s,Hn,Fi,Po,Ga,b,null,-0,0)}}break}while(!0);Br(i)}function jb(i,s,f,p,y,b,R,M,z,Z,ut,ft,J,rt){if(i.timeoutHandle=-1,ft=s.subtreeFlags,ft&8192||(ft&16785408)===16785408){ft={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ta},Fb(s,b,ft);var bt=(b&62914560)===b?hc-Me():(b&4194048)===b?Ub-Me():0;if(bt=dA(ft,bt),bt!==null){va=b,i.cancelPendingCommit=bt(Jb.bind(null,i,s,b,f,p,y,R,M,z,ut,ft,null,J,rt)),Ka(i,b,R,!Z);return}}Jb(i,s,b,f,p,y,R,M,z)}function DR(i){for(var s=i;;){var f=s.tag;if((f===0||f===11||f===15)&&s.flags&16384&&(f=s.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var p=0;p<f.length;p++){var y=f[p],b=y.getSnapshot;y=y.value;try{if(!Ln(b(),y))return!1}catch{return!1}}if(f=s.child,s.subtreeFlags&16384&&f!==null)f.return=s,s=f;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Ka(i,s,f,p){s&=~Hd,s&=~Fi,i.suspendedLanes|=s,i.pingedLanes&=~s,p&&(i.warmLanes|=s),p=i.expirationTimes;for(var y=s;0<y;){var b=31-Fn(y),R=1<<b;p[b]=-1,y&=~R}f!==0&&ty(i,f,s)}function vc(){return($t&6)===0?(fu(0),!1):!0}function Kd(){if(Ht!==null){if(re===0)var i=Ht.return;else i=Ht,aa=Ri=null,ld(i),Mo=null,Ks=0,i=Ht;for(;i!==null;)wb(i.alternate,i),i=i.return;Ht=null}}function Uo(i,s){var f=i.timeoutHandle;f!==-1&&(i.timeoutHandle=-1,YR(f)),f=i.cancelPendingCommit,f!==null&&(i.cancelPendingCommit=null,f()),va=0,Kd(),fe=i,Ht=f=na(i.current,null),Wt=s,re=0,Vn=null,Ga=!1,Lo=Ms(i,s),Vd=!1,Po=Hn=Hd=Fi=ja=Se=0,Tn=lu=null,Gd=!1,(s&8)!==0&&(s|=s&32);var p=i.entangledLanes;if(p!==0)for(i=i.entanglements,p&=s;0<p;){var y=31-Fn(p),b=1<<y;s|=i[y],p&=~b}return pa=s,Fl(),f}function Wb(i,s){Lt=null,P.H=eu,s===Do||s===jl?(s=s0(),re=3):s===Zh?(s=s0(),re=4):re=s===_d?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Vn=s,Ht===null&&(Se=1,ac(i,er(s,i.current)))}function qb(){var i=zn.current;return i===null?!0:(Wt&4194048)===Wt?ir===null:(Wt&62914560)===Wt||(Wt&536870912)!==0?i===ir:!1}function Kb(){var i=P.H;return P.H=eu,i===null?eu:i}function Xb(){var i=P.A;return P.A=RR,i}function mc(){Se=4,Ga||(Wt&4194048)!==Wt&&zn.current!==null||(Lo=!0),(ja&134217727)===0&&(Fi&134217727)===0||fe===null||Ka(fe,Wt,Hn,!1)}function Xd(i,s,f){var p=$t;$t|=2;var y=Kb(),b=Xb();(fe!==i||Wt!==s)&&(pc=null,Uo(i,s)),s=!1;var R=Se;t:do try{if(re!==0&&Ht!==null){var M=Ht,z=Vn;switch(re){case 8:Kd(),R=6;break t;case 3:case 2:case 9:case 6:zn.current===null&&(s=!0);var Z=re;if(re=0,Vn=null,Vo(i,M,z,Z),f&&Lo){R=0;break t}break;default:Z=re,re=0,Vn=null,Vo(i,M,z,Z)}}MR(),R=Se;break}catch(ut){Wb(i,ut)}while(!0);return s&&i.shellSuspendCounter++,aa=Ri=null,$t=p,P.H=y,P.A=b,Ht===null&&(fe=null,Wt=0,Fl()),R}function MR(){for(;Ht!==null;)Yb(Ht)}function NR(i,s){var f=$t;$t|=2;var p=Kb(),y=Xb();fe!==i||Wt!==s?(pc=null,dc=Me()+500,Uo(i,s)):Lo=Ms(i,s);t:do try{if(re!==0&&Ht!==null){s=Ht;var b=Vn;e:switch(re){case 1:re=0,Vn=null,Vo(i,s,b,1);break;case 2:case 9:if(i0(b)){re=0,Vn=null,Qb(s);break}s=function(){re!==2&&re!==9||fe!==i||(re=7),Br(i)},b.then(s,s);break t;case 3:re=7;break t;case 4:re=5;break t;case 7:i0(b)?(re=0,Vn=null,Qb(s)):(re=0,Vn=null,Vo(i,s,b,7));break;case 5:var R=null;switch(Ht.tag){case 26:R=Ht.memoizedState;case 5:case 27:var M=Ht;if(R?B1(R):M.stateNode.complete){re=0,Vn=null;var z=M.sibling;if(z!==null)Ht=z;else{var Z=M.return;Z!==null?(Ht=Z,gc(Z)):Ht=null}break e}}re=0,Vn=null,Vo(i,s,b,5);break;case 6:re=0,Vn=null,Vo(i,s,b,6);break;case 8:Kd(),Se=6;break t;default:throw Error(r(462))}}OR();break}catch(ut){Wb(i,ut)}while(!0);return aa=Ri=null,P.H=p,P.A=y,$t=f,Ht!==null?0:(fe=null,Wt=0,Fl(),Se)}function OR(){for(;Ht!==null&&!Nr();)Yb(Ht)}function Yb(i){var s=bb(i.alternate,i,pa);i.memoizedProps=i.pendingProps,s===null?gc(i):Ht=s}function Qb(i){var s=i,f=s.alternate;switch(s.tag){case 15:case 0:s=db(f,s,s.pendingProps,s.type,void 0,Wt);break;case 11:s=db(f,s,s.pendingProps,s.type.render,s.ref,Wt);break;case 5:ld(s);default:wb(f,s),s=Ht=Xy(s,pa),s=bb(f,s,pa)}i.memoizedProps=i.pendingProps,s===null?gc(i):Ht=s}function Vo(i,s,f,p){aa=Ri=null,ld(s),Mo=null,Ks=0;var y=s.return;try{if(xR(i,y,s,f,Wt)){Se=1,ac(i,er(f,i.current)),Ht=null;return}}catch(b){if(y!==null)throw Ht=y,b;Se=1,ac(i,er(f,i.current)),Ht=null;return}s.flags&32768?(Kt||p===1?i=!0:Lo||(Wt&536870912)!==0?i=!1:(Ga=i=!0,(p===2||p===9||p===3||p===6)&&(p=zn.current,p!==null&&p.tag===13&&(p.flags|=16384))),Zb(s,i)):gc(s)}function gc(i){var s=i;do{if((s.flags&32768)!==0){Zb(s,Ga);return}i=s.return;var f=CR(s.alternate,s,pa);if(f!==null){Ht=f;return}if(s=s.sibling,s!==null){Ht=s;return}Ht=s=i}while(s!==null);Se===0&&(Se=5)}function Zb(i,s){do{var f=SR(i.alternate,i);if(f!==null){f.flags&=32767,Ht=f;return}if(f=i.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!s&&(i=i.sibling,i!==null)){Ht=i;return}Ht=i=f}while(i!==null);Se=6,Ht=null}function Jb(i,s,f,p,y,b,R,M,z){i.cancelPendingCommit=null;do yc();while(Le!==0);if(($t&6)!==0)throw Error(r(327));if(s!==null){if(s===i.current)throw Error(r(177));if(b=s.lanes|s.childLanes,b|=Fh,fT(i,f,b,R,M,z),i===fe&&(Ht=fe=null,Wt=0),zo=s,qa=i,va=f,jd=b,Wd=y,Vb=p,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,FR(gn,function(){return r1(),null})):(i.callbackNode=null,i.callbackPriority=0),p=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||p){p=P.T,P.T=null,y=G.p,G.p=2,R=$t,$t|=4;try{_R(i,s,f)}finally{$t=R,G.p=y,P.T=p}}Le=1,$b(),t1(),e1()}}function $b(){if(Le===1){Le=0;var i=qa,s=zo,f=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||f){f=P.T,P.T=null;var p=G.p;G.p=2;var y=$t;$t|=4;try{kb(s,i);var b=op,R=zy(i.containerInfo),M=b.focusedElem,z=b.selectionRange;if(R!==M&&M&&M.ownerDocument&&Py(M.ownerDocument.documentElement,M)){if(z!==null&&Nh(M)){var Z=z.start,ut=z.end;if(ut===void 0&&(ut=Z),"selectionStart"in M)M.selectionStart=Z,M.selectionEnd=Math.min(ut,M.value.length);else{var ft=M.ownerDocument||document,J=ft&&ft.defaultView||window;if(J.getSelection){var rt=J.getSelection(),bt=M.textContent.length,Nt=Math.min(z.start,bt),se=z.end===void 0?Nt:Math.min(z.end,bt);!rt.extend&&Nt>se&&(R=se,se=Nt,Nt=R);var K=Ly(M,Nt),j=Ly(M,se);if(K&&j&&(rt.rangeCount!==1||rt.anchorNode!==K.node||rt.anchorOffset!==K.offset||rt.focusNode!==j.node||rt.focusOffset!==j.offset)){var Q=ft.createRange();Q.setStart(K.node,K.offset),rt.removeAllRanges(),Nt>se?(rt.addRange(Q),rt.extend(j.node,j.offset)):(Q.setEnd(j.node,j.offset),rt.addRange(Q))}}}}for(ft=[],rt=M;rt=rt.parentNode;)rt.nodeType===1&&ft.push({element:rt,left:rt.scrollLeft,top:rt.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ft.length;M++){var ct=ft[M];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}Mc=!!ip,op=ip=null}finally{$t=y,G.p=p,P.T=f}}i.current=s,Le=2}}function t1(){if(Le===2){Le=0;var i=qa,s=zo,f=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||f){f=P.T,P.T=null;var p=G.p;G.p=2;var y=$t;$t|=4;try{Ab(i,s.alternate,s)}finally{$t=y,G.p=p,P.T=f}}Le=3}}function e1(){if(Le===4||Le===3){Le=0,mr();var i=qa,s=zo,f=va,p=Vb;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Le=5:(Le=0,zo=qa=null,n1(i,i.pendingLanes));var y=i.pendingLanes;if(y===0&&(Wa=null),hh(f),s=s.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(Jr,s,void 0,(s.current.flags&128)===128)}catch{}if(p!==null){s=P.T,y=G.p,G.p=2,P.T=null;try{for(var b=i.onRecoverableError,R=0;R<p.length;R++){var M=p[R];b(M.value,{componentStack:M.stack})}}finally{P.T=s,G.p=y}}(va&3)!==0&&yc(),Br(i),y=i.pendingLanes,(f&261930)!==0&&(y&42)!==0?i===qd?cu++:(cu=0,qd=i):cu=0,fu(0)}}function n1(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,Ws(s)))}function yc(){return $b(),t1(),e1(),r1()}function r1(){if(Le!==5)return!1;var i=qa,s=jd;jd=0;var f=hh(va),p=P.T,y=G.p;try{G.p=32>f?32:f,P.T=null,f=Wd,Wd=null;var b=qa,R=va;if(Le=0,zo=qa=null,va=0,($t&6)!==0)throw Error(r(331));var M=$t;if($t|=4,Pb(b.current),Bb(b,b.current,R,f),$t=M,fu(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(Jr,b)}catch{}return!0}finally{G.p=y,P.T=p,n1(i,s)}}function a1(i,s,f){s=er(f,s),s=Sd(i.stateNode,s,2),i=za(i,s,2),i!==null&&(Ns(i,2),Br(i))}function ae(i,s,f){if(i.tag===3)a1(i,i,f);else for(;s!==null;){if(s.tag===3){a1(s,i,f);break}else if(s.tag===1){var p=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Wa===null||!Wa.has(p))){i=er(f,i),f=ib(2),p=za(s,f,2),p!==null&&(ob(f,p,s,i),Ns(p,2),Br(p));break}}s=s.return}}function Yd(i,s,f){var p=i.pingCache;if(p===null){p=i.pingCache=new AR;var y=new Set;p.set(s,y)}else y=p.get(s),y===void 0&&(y=new Set,p.set(s,y));y.has(f)||(Vd=!0,y.add(f),i=kR.bind(null,i,s,f),s.then(i,i))}function kR(i,s,f){var p=i.pingCache;p!==null&&p.delete(s),i.pingedLanes|=i.suspendedLanes&f,i.warmLanes&=~f,fe===i&&(Wt&f)===f&&(Se===4||Se===3&&(Wt&62914560)===Wt&&300>Me()-hc?($t&2)===0&&Uo(i,0):Hd|=f,Po===Wt&&(Po=0)),Br(i)}function i1(i,s){s===0&&(s=$g()),i=Si(i,s),i!==null&&(Ns(i,s),Br(i))}function IR(i){var s=i.memoizedState,f=0;s!==null&&(f=s.retryLane),i1(i,f)}function BR(i,s){var f=0;switch(i.tag){case 31:case 13:var p=i.stateNode,y=i.memoizedState;y!==null&&(f=y.retryLane);break;case 19:p=i.stateNode;break;case 22:p=i.stateNode._retryCache;break;default:throw Error(r(314))}p!==null&&p.delete(s),i1(i,f)}function FR(i,s){return Mr(i,s)}var bc=null,Ho=null,Qd=!1,xc=!1,Zd=!1,Xa=0;function Br(i){i!==Ho&&i.next===null&&(Ho===null?bc=Ho=i:Ho=Ho.next=i),xc=!0,Qd||(Qd=!0,PR())}function fu(i,s){if(!Zd&&xc){Zd=!0;do for(var f=!1,p=bc;p!==null;){if(i!==0){var y=p.pendingLanes;if(y===0)var b=0;else{var R=p.suspendedLanes,M=p.pingedLanes;b=(1<<31-Fn(42|i)+1)-1,b&=y&~(R&~M),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(f=!0,l1(p,b))}else b=Wt,b=Sl(p,p===fe?b:0,p.cancelPendingCommit!==null||p.timeoutHandle!==-1),(b&3)===0||Ms(p,b)||(f=!0,l1(p,b));p=p.next}while(f);Zd=!1}}function LR(){o1()}function o1(){xc=Qd=!1;var i=0;Xa!==0&&XR()&&(i=Xa);for(var s=Me(),f=null,p=bc;p!==null;){var y=p.next,b=s1(p,s);b===0?(p.next=null,f===null?bc=y:f.next=y,y===null&&(Ho=f)):(f=p,(i!==0||(b&3)!==0)&&(xc=!0)),p=y}Le!==0&&Le!==5||fu(i),Xa!==0&&(Xa=0)}function s1(i,s){for(var f=i.suspendedLanes,p=i.pingedLanes,y=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var R=31-Fn(b),M=1<<R,z=y[R];z===-1?((M&f)===0||(M&p)!==0)&&(y[R]=cT(M,s)):z<=s&&(i.expiredLanes|=M),b&=~M}if(s=fe,f=Wt,f=Sl(i,i===s?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p=i.callbackNode,f===0||i===s&&(re===2||re===9)||i.cancelPendingCommit!==null)return p!==null&&p!==null&&Bn(p),i.callbackNode=null,i.callbackPriority=0;if((f&3)===0||Ms(i,f)){if(s=f&-f,s===i.callbackPriority)return s;switch(p!==null&&Bn(p),hh(f)){case 2:case 8:f=Zr;break;case 32:f=gn;break;case 268435456:f=xl;break;default:f=gn}return p=u1.bind(null,i),f=Mr(f,p),i.callbackPriority=s,i.callbackNode=f,s}return p!==null&&p!==null&&Bn(p),i.callbackPriority=2,i.callbackNode=null,2}function u1(i,s){if(Le!==0&&Le!==5)return i.callbackNode=null,i.callbackPriority=0,null;var f=i.callbackNode;if(yc()&&i.callbackNode!==f)return null;var p=Wt;return p=Sl(i,i===fe?p:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),p===0?null:(Gb(i,p,s),s1(i,Me()),i.callbackNode!=null&&i.callbackNode===f?u1.bind(null,i):null)}function l1(i,s){if(yc())return null;Gb(i,s,!0)}function PR(){QR(function(){($t&6)!==0?Mr(so,LR):o1()})}function Jd(){if(Xa===0){var i=Ro;i===0&&(i=wl,wl<<=1,(wl&261888)===0&&(wl=256)),Xa=i}return Xa}function c1(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Al(""+i)}function f1(i,s){var f=s.ownerDocument.createElement("input");return f.name=s.name,f.value=s.value,i.id&&f.setAttribute("form",i.id),s.parentNode.insertBefore(f,s),i=new FormData(i),f.parentNode.removeChild(f),i}function zR(i,s,f,p,y){if(s==="submit"&&f&&f.stateNode===y){var b=c1((y[wn]||null).action),R=p.submitter;R&&(s=(s=R[wn]||null)?c1(s.formAction):R.getAttribute("formAction"),s!==null&&(b=s,R=null));var M=new Ol("action","action",null,p,y);i.push({event:M,listeners:[{instance:null,listener:function(){if(p.defaultPrevented){if(Xa!==0){var z=R?f1(y,R):new FormData(y);yd(f,{pending:!0,data:z,method:y.method,action:b},null,z)}}else typeof b=="function"&&(M.preventDefault(),z=R?f1(y,R):new FormData(y),yd(f,{pending:!0,data:z,method:y.method,action:b},b,z))},currentTarget:y}]})}}for(var $d=0;$d<Bh.length;$d++){var tp=Bh[$d],UR=tp.toLowerCase(),VR=tp[0].toUpperCase()+tp.slice(1);yr(UR,"on"+VR)}yr(Hy,"onAnimationEnd"),yr(Gy,"onAnimationIteration"),yr(jy,"onAnimationStart"),yr("dblclick","onDoubleClick"),yr("focusin","onFocus"),yr("focusout","onBlur"),yr(rR,"onTransitionRun"),yr(aR,"onTransitionStart"),yr(iR,"onTransitionCancel"),yr(Wy,"onTransitionEnd"),ho("onMouseEnter",["mouseout","mouseover"]),ho("onMouseLeave",["mouseout","mouseover"]),ho("onPointerEnter",["pointerout","pointerover"]),ho("onPointerLeave",["pointerout","pointerover"]),xi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),xi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),xi("onBeforeInput",["compositionend","keypress","textInput","paste"]),xi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),xi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hu));function h1(i,s){s=(s&4)!==0;for(var f=0;f<i.length;f++){var p=i[f],y=p.event;p=p.listeners;t:{var b=void 0;if(s)for(var R=p.length-1;0<=R;R--){var M=p[R],z=M.instance,Z=M.currentTarget;if(M=M.listener,z!==b&&y.isPropagationStopped())break t;b=M,y.currentTarget=Z;try{b(y)}catch(ut){Bl(ut)}y.currentTarget=null,b=z}else for(R=0;R<p.length;R++){if(M=p[R],z=M.instance,Z=M.currentTarget,M=M.listener,z!==b&&y.isPropagationStopped())break t;b=M,y.currentTarget=Z;try{b(y)}catch(ut){Bl(ut)}y.currentTarget=null,b=z}}}}function Gt(i,s){var f=s[dh];f===void 0&&(f=s[dh]=new Set);var p=i+"__bubble";f.has(p)||(d1(s,i,2,!1),f.add(p))}function ep(i,s,f){var p=0;s&&(p|=4),d1(f,i,p,s)}var wc="_reactListening"+Math.random().toString(36).slice(2);function np(i){if(!i[wc]){i[wc]=!0,oy.forEach(function(f){f!=="selectionchange"&&(HR.has(f)||ep(f,!1,i),ep(f,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[wc]||(s[wc]=!0,ep("selectionchange",!1,s))}}function d1(i,s,f,p){switch(H1(s)){case 2:var y=mA;break;case 8:y=gA;break;default:y=gp}f=y.bind(null,s,f,i),y=void 0,!Eh||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(y=!0),p?y!==void 0?i.addEventListener(s,f,{capture:!0,passive:y}):i.addEventListener(s,f,!0):y!==void 0?i.addEventListener(s,f,{passive:y}):i.addEventListener(s,f,!1)}function rp(i,s,f,p,y){var b=p;if((s&1)===0&&(s&2)===0&&p!==null)t:for(;;){if(p===null)return;var R=p.tag;if(R===3||R===4){var M=p.stateNode.containerInfo;if(M===y)break;if(R===4)for(R=p.return;R!==null;){var z=R.tag;if((z===3||z===4)&&R.stateNode.containerInfo===y)return;R=R.return}for(;M!==null;){if(R=lo(M),R===null)return;if(z=R.tag,z===5||z===6||z===26||z===27){p=b=R;continue t}M=M.parentNode}}p=p.return}yy(function(){var Z=b,ut=xh(f),ft=[];t:{var J=qy.get(i);if(J!==void 0){var rt=Ol,bt=i;switch(i){case"keypress":if(Ml(f)===0)break t;case"keydown":case"keyup":rt=BT;break;case"focusin":bt="focus",rt=Th;break;case"focusout":bt="blur",rt=Th;break;case"beforeblur":case"afterblur":rt=Th;break;case"click":if(f.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=wy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=CT;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=PT;break;case Hy:case Gy:case jy:rt=TT;break;case Wy:rt=UT;break;case"scroll":case"scrollend":rt=wT;break;case"wheel":rt=HT;break;case"copy":case"cut":case"paste":rt=AT;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=Cy;break;case"toggle":case"beforetoggle":rt=jT}var Nt=(s&4)!==0,se=!Nt&&(i==="scroll"||i==="scrollend"),K=Nt?J!==null?J+"Capture":null:J;Nt=[];for(var j=Z,Q;j!==null;){var ct=j;if(Q=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Q===null||K===null||(ct=Is(j,K),ct!=null&&Nt.push(du(j,ct,Q))),se)break;j=j.return}0<Nt.length&&(J=new rt(J,bt,null,f,ut),ft.push({event:J,listeners:Nt}))}}if((s&7)===0){t:{if(J=i==="mouseover"||i==="pointerover",rt=i==="mouseout"||i==="pointerout",J&&f!==bh&&(bt=f.relatedTarget||f.fromElement)&&(lo(bt)||bt[uo]))break t;if((rt||J)&&(J=ut.window===ut?ut:(J=ut.ownerDocument)?J.defaultView||J.parentWindow:window,rt?(bt=f.relatedTarget||f.toElement,rt=Z,bt=bt?lo(bt):null,bt!==null&&(se=o(bt),Nt=bt.tag,bt!==se||Nt!==5&&Nt!==27&&Nt!==6)&&(bt=null)):(rt=null,bt=Z),rt!==bt)){if(Nt=wy,ct="onMouseLeave",K="onMouseEnter",j="mouse",(i==="pointerout"||i==="pointerover")&&(Nt=Cy,ct="onPointerLeave",K="onPointerEnter",j="pointer"),se=rt==null?J:ks(rt),Q=bt==null?J:ks(bt),J=new Nt(ct,j+"leave",rt,f,ut),J.target=se,J.relatedTarget=Q,ct=null,lo(ut)===Z&&(Nt=new Nt(K,j+"enter",bt,f,ut),Nt.target=Q,Nt.relatedTarget=se,ct=Nt),se=ct,rt&&bt)e:{for(Nt=GR,K=rt,j=bt,Q=0,ct=K;ct;ct=Nt(ct))Q++;ct=0;for(var Dt=j;Dt;Dt=Nt(Dt))ct++;for(;0<Q-ct;)K=Nt(K),Q--;for(;0<ct-Q;)j=Nt(j),ct--;for(;Q--;){if(K===j||j!==null&&K===j.alternate){Nt=K;break e}K=Nt(K),j=Nt(j)}Nt=null}else Nt=null;rt!==null&&p1(ft,J,rt,Nt,!1),bt!==null&&se!==null&&p1(ft,se,bt,Nt,!0)}}t:{if(J=Z?ks(Z):window,rt=J.nodeName&&J.nodeName.toLowerCase(),rt==="select"||rt==="input"&&J.type==="file")var Zt=Ny;else if(Dy(J))if(Oy)Zt=tR;else{Zt=JT;var Ct=ZT}else rt=J.nodeName,!rt||rt.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Z&&yh(Z.elementType)&&(Zt=Ny):Zt=$T;if(Zt&&(Zt=Zt(i,Z))){My(ft,Zt,f,ut);break t}Ct&&Ct(i,J,Z),i==="focusout"&&Z&&J.type==="number"&&Z.memoizedProps.value!=null&&gh(J,"number",J.value)}switch(Ct=Z?ks(Z):window,i){case"focusin":(Dy(Ct)||Ct.contentEditable==="true")&&(bo=Ct,Oh=Z,Hs=null);break;case"focusout":Hs=Oh=bo=null;break;case"mousedown":kh=!0;break;case"contextmenu":case"mouseup":case"dragend":kh=!1,Uy(ft,f,ut);break;case"selectionchange":if(nR)break;case"keydown":case"keyup":Uy(ft,f,ut)}var Pt;if(Ah)t:{switch(i){case"compositionstart":var qt="onCompositionStart";break t;case"compositionend":qt="onCompositionEnd";break t;case"compositionupdate":qt="onCompositionUpdate";break t}qt=void 0}else yo?Ry(i,f)&&(qt="onCompositionEnd"):i==="keydown"&&f.keyCode===229&&(qt="onCompositionStart");qt&&(Sy&&f.locale!=="ko"&&(yo||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&yo&&(Pt=by()):(Oa=ut,Ch="value"in Oa?Oa.value:Oa.textContent,yo=!0)),Ct=Ec(Z,qt),0<Ct.length&&(qt=new Ey(qt,i,null,f,ut),ft.push({event:qt,listeners:Ct}),Pt?qt.data=Pt:(Pt=Ay(f),Pt!==null&&(qt.data=Pt)))),(Pt=qT?KT(i,f):XT(i,f))&&(qt=Ec(Z,"onBeforeInput"),0<qt.length&&(Ct=new Ey("onBeforeInput","beforeinput",null,f,ut),ft.push({event:Ct,listeners:qt}),Ct.data=Pt)),zR(ft,i,Z,f,ut)}h1(ft,s)})}function du(i,s,f){return{instance:i,listener:s,currentTarget:f}}function Ec(i,s){for(var f=s+"Capture",p=[];i!==null;){var y=i,b=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||b===null||(y=Is(i,f),y!=null&&p.unshift(du(i,y,b)),y=Is(i,s),y!=null&&p.push(du(i,y,b))),i.tag===3)return p;i=i.return}return[]}function GR(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function p1(i,s,f,p,y){for(var b=s._reactName,R=[];f!==null&&f!==p;){var M=f,z=M.alternate,Z=M.stateNode;if(M=M.tag,z!==null&&z===p)break;M!==5&&M!==26&&M!==27||Z===null||(z=Z,y?(Z=Is(f,b),Z!=null&&R.unshift(du(f,Z,z))):y||(Z=Is(f,b),Z!=null&&R.push(du(f,Z,z)))),f=f.return}R.length!==0&&i.push({event:s,listeners:R})}var jR=/\r\n?/g,WR=/\u0000|\uFFFD/g;function v1(i){return(typeof i=="string"?i:""+i).replace(jR,`
`).replace(WR,"")}function m1(i,s){return s=v1(s),v1(i)===s}function oe(i,s,f,p,y,b){switch(f){case"children":typeof p=="string"?s==="body"||s==="textarea"&&p===""||vo(i,p):(typeof p=="number"||typeof p=="bigint")&&s!=="body"&&vo(i,""+p);break;case"className":Tl(i,"class",p);break;case"tabIndex":Tl(i,"tabindex",p);break;case"dir":case"role":case"viewBox":case"width":case"height":Tl(i,f,p);break;case"style":my(i,p,b);break;case"data":if(s!=="object"){Tl(i,"data",p);break}case"src":case"href":if(p===""&&(s!=="a"||f!=="href")){i.removeAttribute(f);break}if(p==null||typeof p=="function"||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(f);break}p=Al(""+p),i.setAttribute(f,p);break;case"action":case"formAction":if(typeof p=="function"){i.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(f==="formAction"?(s!=="input"&&oe(i,s,"name",y.name,y,null),oe(i,s,"formEncType",y.formEncType,y,null),oe(i,s,"formMethod",y.formMethod,y,null),oe(i,s,"formTarget",y.formTarget,y,null)):(oe(i,s,"encType",y.encType,y,null),oe(i,s,"method",y.method,y,null),oe(i,s,"target",y.target,y,null)));if(p==null||typeof p=="symbol"||typeof p=="boolean"){i.removeAttribute(f);break}p=Al(""+p),i.setAttribute(f,p);break;case"onClick":p!=null&&(i.onclick=ta);break;case"onScroll":p!=null&&Gt("scroll",i);break;case"onScrollEnd":p!=null&&Gt("scrollend",i);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"multiple":i.multiple=p&&typeof p!="function"&&typeof p!="symbol";break;case"muted":i.muted=p&&typeof p!="function"&&typeof p!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(p==null||typeof p=="function"||typeof p=="boolean"||typeof p=="symbol"){i.removeAttribute("xlink:href");break}f=Al(""+p),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,""+p):i.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":p&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,""):i.removeAttribute(f);break;case"capture":case"download":p===!0?i.setAttribute(f,""):p!==!1&&p!=null&&typeof p!="function"&&typeof p!="symbol"?i.setAttribute(f,p):i.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":p!=null&&typeof p!="function"&&typeof p!="symbol"&&!isNaN(p)&&1<=p?i.setAttribute(f,p):i.removeAttribute(f);break;case"rowSpan":case"start":p==null||typeof p=="function"||typeof p=="symbol"||isNaN(p)?i.removeAttribute(f):i.setAttribute(f,p);break;case"popover":Gt("beforetoggle",i),Gt("toggle",i),_l(i,"popover",p);break;case"xlinkActuate":$r(i,"http://www.w3.org/1999/xlink","xlink:actuate",p);break;case"xlinkArcrole":$r(i,"http://www.w3.org/1999/xlink","xlink:arcrole",p);break;case"xlinkRole":$r(i,"http://www.w3.org/1999/xlink","xlink:role",p);break;case"xlinkShow":$r(i,"http://www.w3.org/1999/xlink","xlink:show",p);break;case"xlinkTitle":$r(i,"http://www.w3.org/1999/xlink","xlink:title",p);break;case"xlinkType":$r(i,"http://www.w3.org/1999/xlink","xlink:type",p);break;case"xmlBase":$r(i,"http://www.w3.org/XML/1998/namespace","xml:base",p);break;case"xmlLang":$r(i,"http://www.w3.org/XML/1998/namespace","xml:lang",p);break;case"xmlSpace":$r(i,"http://www.w3.org/XML/1998/namespace","xml:space",p);break;case"is":_l(i,"is",p);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=bT.get(f)||f,_l(i,f,p))}}function ap(i,s,f,p,y,b){switch(f){case"style":my(i,p,b);break;case"dangerouslySetInnerHTML":if(p!=null){if(typeof p!="object"||!("__html"in p))throw Error(r(61));if(f=p.__html,f!=null){if(y.children!=null)throw Error(r(60));i.innerHTML=f}}break;case"children":typeof p=="string"?vo(i,p):(typeof p=="number"||typeof p=="bigint")&&vo(i,""+p);break;case"onScroll":p!=null&&Gt("scroll",i);break;case"onScrollEnd":p!=null&&Gt("scrollend",i);break;case"onClick":p!=null&&(i.onclick=ta);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sy.hasOwnProperty(f))t:{if(f[0]==="o"&&f[1]==="n"&&(y=f.endsWith("Capture"),s=f.slice(2,y?f.length-7:void 0),b=i[wn]||null,b=b!=null?b[f]:null,typeof b=="function"&&i.removeEventListener(s,b,y),typeof p=="function")){typeof b!="function"&&b!==null&&(f in i?i[f]=null:i.hasAttribute(f)&&i.removeAttribute(f)),i.addEventListener(s,p,y);break t}f in i?i[f]=p:p===!0?i.setAttribute(f,""):_l(i,f,p)}}}function nn(i,s,f){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",i),Gt("load",i);var p=!1,y=!1,b;for(b in f)if(f.hasOwnProperty(b)){var R=f[b];if(R!=null)switch(b){case"src":p=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,b,R,f,null)}}y&&oe(i,s,"srcSet",f.srcSet,f,null),p&&oe(i,s,"src",f.src,f,null);return;case"input":Gt("invalid",i);var M=b=R=y=null,z=null,Z=null;for(p in f)if(f.hasOwnProperty(p)){var ut=f[p];if(ut!=null)switch(p){case"name":y=ut;break;case"type":R=ut;break;case"checked":z=ut;break;case"defaultChecked":Z=ut;break;case"value":b=ut;break;case"defaultValue":M=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(r(137,s));break;default:oe(i,s,p,ut,f,null)}}hy(i,b,M,z,Z,R,y,!1);return;case"select":Gt("invalid",i),p=R=b=null;for(y in f)if(f.hasOwnProperty(y)&&(M=f[y],M!=null))switch(y){case"value":b=M;break;case"defaultValue":R=M;break;case"multiple":p=M;default:oe(i,s,y,M,f,null)}s=b,f=R,i.multiple=!!p,s!=null?po(i,!!p,s,!1):f!=null&&po(i,!!p,f,!0);return;case"textarea":Gt("invalid",i),b=y=p=null;for(R in f)if(f.hasOwnProperty(R)&&(M=f[R],M!=null))switch(R){case"value":p=M;break;case"defaultValue":y=M;break;case"children":b=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:oe(i,s,R,M,f,null)}py(i,p,y,b);return;case"option":for(z in f)if(f.hasOwnProperty(z)&&(p=f[z],p!=null))switch(z){case"selected":i.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:oe(i,s,z,p,f,null)}return;case"dialog":Gt("beforetoggle",i),Gt("toggle",i),Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":Gt("load",i);break;case"video":case"audio":for(p=0;p<hu.length;p++)Gt(hu[p],i);break;case"image":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"embed":case"source":case"link":Gt("error",i),Gt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in f)if(f.hasOwnProperty(Z)&&(p=f[Z],p!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:oe(i,s,Z,p,f,null)}return;default:if(yh(s)){for(ut in f)f.hasOwnProperty(ut)&&(p=f[ut],p!==void 0&&ap(i,s,ut,p,f,void 0));return}}for(M in f)f.hasOwnProperty(M)&&(p=f[M],p!=null&&oe(i,s,M,p,f,null))}function qR(i,s,f,p){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,b=null,R=null,M=null,z=null,Z=null,ut=null;for(rt in f){var ft=f[rt];if(f.hasOwnProperty(rt)&&ft!=null)switch(rt){case"checked":break;case"value":break;case"defaultValue":z=ft;default:p.hasOwnProperty(rt)||oe(i,s,rt,null,p,ft)}}for(var J in p){var rt=p[J];if(ft=f[J],p.hasOwnProperty(J)&&(rt!=null||ft!=null))switch(J){case"type":b=rt;break;case"name":y=rt;break;case"checked":Z=rt;break;case"defaultChecked":ut=rt;break;case"value":R=rt;break;case"defaultValue":M=rt;break;case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(r(137,s));break;default:rt!==ft&&oe(i,s,J,rt,p,ft)}}mh(i,R,M,z,Z,ut,b,y);return;case"select":rt=R=M=J=null;for(b in f)if(z=f[b],f.hasOwnProperty(b)&&z!=null)switch(b){case"value":break;case"multiple":rt=z;default:p.hasOwnProperty(b)||oe(i,s,b,null,p,z)}for(y in p)if(b=p[y],z=f[y],p.hasOwnProperty(y)&&(b!=null||z!=null))switch(y){case"value":J=b;break;case"defaultValue":M=b;break;case"multiple":R=b;default:b!==z&&oe(i,s,y,b,p,z)}s=M,f=R,p=rt,J!=null?po(i,!!f,J,!1):!!p!=!!f&&(s!=null?po(i,!!f,s,!0):po(i,!!f,f?[]:"",!1));return;case"textarea":rt=J=null;for(M in f)if(y=f[M],f.hasOwnProperty(M)&&y!=null&&!p.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:oe(i,s,M,null,p,y)}for(R in p)if(y=p[R],b=f[R],p.hasOwnProperty(R)&&(y!=null||b!=null))switch(R){case"value":J=y;break;case"defaultValue":rt=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==b&&oe(i,s,R,y,p,b)}dy(i,J,rt);return;case"option":for(var bt in f)if(J=f[bt],f.hasOwnProperty(bt)&&J!=null&&!p.hasOwnProperty(bt))switch(bt){case"selected":i.selected=!1;break;default:oe(i,s,bt,null,p,J)}for(z in p)if(J=p[z],rt=f[z],p.hasOwnProperty(z)&&J!==rt&&(J!=null||rt!=null))switch(z){case"selected":i.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:oe(i,s,z,J,p,rt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Nt in f)J=f[Nt],f.hasOwnProperty(Nt)&&J!=null&&!p.hasOwnProperty(Nt)&&oe(i,s,Nt,null,p,J);for(Z in p)if(J=p[Z],rt=f[Z],p.hasOwnProperty(Z)&&J!==rt&&(J!=null||rt!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:oe(i,s,Z,J,p,rt)}return;default:if(yh(s)){for(var se in f)J=f[se],f.hasOwnProperty(se)&&J!==void 0&&!p.hasOwnProperty(se)&&ap(i,s,se,void 0,p,J);for(ut in p)J=p[ut],rt=f[ut],!p.hasOwnProperty(ut)||J===rt||J===void 0&&rt===void 0||ap(i,s,ut,J,p,rt);return}}for(var K in f)J=f[K],f.hasOwnProperty(K)&&J!=null&&!p.hasOwnProperty(K)&&oe(i,s,K,null,p,J);for(ft in p)J=p[ft],rt=f[ft],!p.hasOwnProperty(ft)||J===rt||J==null&&rt==null||oe(i,s,ft,J,p,rt)}function g1(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function KR(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,f=performance.getEntriesByType("resource"),p=0;p<f.length;p++){var y=f[p],b=y.transferSize,R=y.initiatorType,M=y.duration;if(b&&M&&g1(R)){for(R=0,M=y.responseEnd,p+=1;p<f.length;p++){var z=f[p],Z=z.startTime;if(Z>M)break;var ut=z.transferSize,ft=z.initiatorType;ut&&g1(ft)&&(z=z.responseEnd,R+=ut*(z<M?1:(M-Z)/(z-Z)))}if(--p,s+=8*(b+R)/(y.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ip=null,op=null;function Cc(i){return i.nodeType===9?i:i.ownerDocument}function y1(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function b1(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function sp(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var up=null;function XR(){var i=window.event;return i&&i.type==="popstate"?i===up?!1:(up=i,!0):(up=null,!1)}var x1=typeof setTimeout=="function"?setTimeout:void 0,YR=typeof clearTimeout=="function"?clearTimeout:void 0,w1=typeof Promise=="function"?Promise:void 0,QR=typeof queueMicrotask=="function"?queueMicrotask:typeof w1<"u"?function(i){return w1.resolve(null).then(i).catch(ZR)}:x1;function ZR(i){setTimeout(function(){throw i})}function Ya(i){return i==="head"}function E1(i,s){var f=s,p=0;do{var y=f.nextSibling;if(i.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"||f==="/&"){if(p===0){i.removeChild(y),qo(s);return}p--}else if(f==="$"||f==="$?"||f==="$~"||f==="$!"||f==="&")p++;else if(f==="html")pu(i.ownerDocument.documentElement);else if(f==="head"){f=i.ownerDocument.head,pu(f);for(var b=f.firstChild;b;){var R=b.nextSibling,M=b.nodeName;b[Os]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&b.rel.toLowerCase()==="stylesheet"||f.removeChild(b),b=R}}else f==="body"&&pu(i.ownerDocument.body);f=y}while(f);qo(s)}function C1(i,s){var f=i;i=0;do{var p=f.nextSibling;if(f.nodeType===1?s?(f._stashedDisplay=f.style.display,f.style.display="none"):(f.style.display=f._stashedDisplay||"",f.getAttribute("style")===""&&f.removeAttribute("style")):f.nodeType===3&&(s?(f._stashedText=f.nodeValue,f.nodeValue=""):f.nodeValue=f._stashedText||""),p&&p.nodeType===8)if(f=p.data,f==="/$"){if(i===0)break;i--}else f!=="$"&&f!=="$?"&&f!=="$~"&&f!=="$!"||i++;f=p}while(f)}function lp(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var f=s;switch(s=s.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":lp(f),ph(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}i.removeChild(f)}}function JR(i,s,f,p){for(;i.nodeType===1;){var y=f;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!p&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(p){if(!i[Os])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==y.rel||i.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||i.getAttribute("title")!==(y.title==null?null:y.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(y.src==null?null:y.src)||i.getAttribute("type")!==(y.type==null?null:y.type)||i.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var b=y.name==null?null:""+y.name;if(y.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=or(i.nextSibling),i===null)break}return null}function $R(i,s,f){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!f||(i=or(i.nextSibling),i===null))return null;return i}function S1(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=or(i.nextSibling),i===null))return null;return i}function cp(i){return i.data==="$?"||i.data==="$~"}function fp(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function tA(i,s){var f=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||f.readyState!=="loading")s();else{var p=function(){s(),f.removeEventListener("DOMContentLoaded",p)};f.addEventListener("DOMContentLoaded",p),i._reactRetry=p}}function or(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var hp=null;function _1(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var f=i.data;if(f==="/$"||f==="/&"){if(s===0)return or(i.nextSibling);s--}else f!=="$"&&f!=="$!"&&f!=="$?"&&f!=="$~"&&f!=="&"||s++}i=i.nextSibling}return null}function T1(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var f=i.data;if(f==="$"||f==="$!"||f==="$?"||f==="$~"||f==="&"){if(s===0)return i;s--}else f!=="/$"&&f!=="/&"||s++}i=i.previousSibling}return null}function R1(i,s,f){switch(s=Cc(f),i){case"html":if(i=s.documentElement,!i)throw Error(r(452));return i;case"head":if(i=s.head,!i)throw Error(r(453));return i;case"body":if(i=s.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function pu(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);ph(i)}var sr=new Map,A1=new Set;function Sc(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ma=G.d;G.d={f:eA,r:nA,D:rA,C:aA,L:iA,m:oA,X:uA,S:sA,M:lA};function eA(){var i=ma.f(),s=vc();return i||s}function nA(i){var s=co(i);s!==null&&s.tag===5&&s.type==="form"?W0(s):ma.r(i)}var Go=typeof document>"u"?null:document;function D1(i,s,f){var p=Go;if(p&&typeof s=="string"&&s){var y=$n(s);y='link[rel="'+i+'"][href="'+y+'"]',typeof f=="string"&&(y+='[crossorigin="'+f+'"]'),A1.has(y)||(A1.add(y),i={rel:i,crossOrigin:f,href:s},p.querySelector(y)===null&&(s=p.createElement("link"),nn(s,"link",i),We(s),p.head.appendChild(s)))}}function rA(i){ma.D(i),D1("dns-prefetch",i,null)}function aA(i,s){ma.C(i,s),D1("preconnect",i,s)}function iA(i,s,f){ma.L(i,s,f);var p=Go;if(p&&i&&s){var y='link[rel="preload"][as="'+$n(s)+'"]';s==="image"&&f&&f.imageSrcSet?(y+='[imagesrcset="'+$n(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(y+='[imagesizes="'+$n(f.imageSizes)+'"]')):y+='[href="'+$n(i)+'"]';var b=y;switch(s){case"style":b=jo(i);break;case"script":b=Wo(i)}sr.has(b)||(i=v({rel:"preload",href:s==="image"&&f&&f.imageSrcSet?void 0:i,as:s},f),sr.set(b,i),p.querySelector(y)!==null||s==="style"&&p.querySelector(vu(b))||s==="script"&&p.querySelector(mu(b))||(s=p.createElement("link"),nn(s,"link",i),We(s),p.head.appendChild(s)))}}function oA(i,s){ma.m(i,s);var f=Go;if(f&&i){var p=s&&typeof s.as=="string"?s.as:"script",y='link[rel="modulepreload"][as="'+$n(p)+'"][href="'+$n(i)+'"]',b=y;switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=Wo(i)}if(!sr.has(b)&&(i=v({rel:"modulepreload",href:i},s),sr.set(b,i),f.querySelector(y)===null)){switch(p){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(mu(b)))return}p=f.createElement("link"),nn(p,"link",i),We(p),f.head.appendChild(p)}}}function sA(i,s,f){ma.S(i,s,f);var p=Go;if(p&&i){var y=fo(p).hoistableStyles,b=jo(i);s=s||"default";var R=y.get(b);if(!R){var M={loading:0,preload:null};if(R=p.querySelector(vu(b)))M.loading=5;else{i=v({rel:"stylesheet",href:i,"data-precedence":s},f),(f=sr.get(b))&&dp(i,f);var z=R=p.createElement("link");We(z),nn(z,"link",i),z._p=new Promise(function(Z,ut){z.onload=Z,z.onerror=ut}),z.addEventListener("load",function(){M.loading|=1}),z.addEventListener("error",function(){M.loading|=2}),M.loading|=4,_c(R,s,p)}R={type:"stylesheet",instance:R,count:1,state:M},y.set(b,R)}}}function uA(i,s){ma.X(i,s);var f=Go;if(f&&i){var p=fo(f).hoistableScripts,y=Wo(i),b=p.get(y);b||(b=f.querySelector(mu(y)),b||(i=v({src:i,async:!0},s),(s=sr.get(y))&&pp(i,s),b=f.createElement("script"),We(b),nn(b,"link",i),f.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(y,b))}}function lA(i,s){ma.M(i,s);var f=Go;if(f&&i){var p=fo(f).hoistableScripts,y=Wo(i),b=p.get(y);b||(b=f.querySelector(mu(y)),b||(i=v({src:i,async:!0,type:"module"},s),(s=sr.get(y))&&pp(i,s),b=f.createElement("script"),We(b),nn(b,"link",i),f.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},p.set(y,b))}}function M1(i,s,f,p){var y=(y=mt.current)?Sc(y):null;if(!y)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(s=jo(f.href),f=fo(y).hoistableStyles,p=f.get(s),p||(p={type:"style",instance:null,count:0,state:null},f.set(s,p)),p):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){i=jo(f.href);var b=fo(y).hoistableStyles,R=b.get(i);if(R||(y=y.ownerDocument||y,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,R),(b=y.querySelector(vu(i)))&&!b._p&&(R.instance=b,R.state.loading=5),sr.has(i)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},sr.set(i,f),b||cA(y,i,f,R.state))),s&&p===null)throw Error(r(528,""));return R}if(s&&p!==null)throw Error(r(529,""));return null;case"script":return s=f.async,f=f.src,typeof f=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=Wo(f),f=fo(y).hoistableScripts,p=f.get(s),p||(p={type:"script",instance:null,count:0,state:null},f.set(s,p)),p):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function jo(i){return'href="'+$n(i)+'"'}function vu(i){return'link[rel="stylesheet"]['+i+"]"}function N1(i){return v({},i,{"data-precedence":i.precedence,precedence:null})}function cA(i,s,f,p){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?p.loading=1:(s=i.createElement("link"),p.preload=s,s.addEventListener("load",function(){return p.loading|=1}),s.addEventListener("error",function(){return p.loading|=2}),nn(s,"link",f),We(s),i.head.appendChild(s))}function Wo(i){return'[src="'+$n(i)+'"]'}function mu(i){return"script[async]"+i}function O1(i,s,f){if(s.count++,s.instance===null)switch(s.type){case"style":var p=i.querySelector('style[data-href~="'+$n(f.href)+'"]');if(p)return s.instance=p,We(p),p;var y=v({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return p=(i.ownerDocument||i).createElement("style"),We(p),nn(p,"style",y),_c(p,f.precedence,i),s.instance=p;case"stylesheet":y=jo(f.href);var b=i.querySelector(vu(y));if(b)return s.state.loading|=4,s.instance=b,We(b),b;p=N1(f),(y=sr.get(y))&&dp(p,y),b=(i.ownerDocument||i).createElement("link"),We(b);var R=b;return R._p=new Promise(function(M,z){R.onload=M,R.onerror=z}),nn(b,"link",p),s.state.loading|=4,_c(b,f.precedence,i),s.instance=b;case"script":return b=Wo(f.src),(y=i.querySelector(mu(b)))?(s.instance=y,We(y),y):(p=f,(y=sr.get(b))&&(p=v({},f),pp(p,y)),i=i.ownerDocument||i,y=i.createElement("script"),We(y),nn(y,"link",p),i.head.appendChild(y),s.instance=y);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(p=s.instance,s.state.loading|=4,_c(p,f.precedence,i));return s.instance}function _c(i,s,f){for(var p=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=p.length?p[p.length-1]:null,b=y,R=0;R<p.length;R++){var M=p[R];if(M.dataset.precedence===s)b=M;else if(b!==y)break}b?b.parentNode.insertBefore(i,b.nextSibling):(s=f.nodeType===9?f.head:f,s.insertBefore(i,s.firstChild))}function dp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function pp(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var Tc=null;function k1(i,s,f){if(Tc===null){var p=new Map,y=Tc=new Map;y.set(f,p)}else y=Tc,p=y.get(f),p||(p=new Map,y.set(f,p));if(p.has(i))return p;for(p.set(i,null),f=f.getElementsByTagName(i),y=0;y<f.length;y++){var b=f[y];if(!(b[Os]||b[Je]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var R=b.getAttribute(s)||"";R=i+R;var M=p.get(R);M?M.push(b):p.set(R,[b])}}return p}function I1(i,s,f){i=i.ownerDocument||i,i.head.insertBefore(f,s==="title"?i.querySelector("head > title"):null)}function fA(i,s,f){if(f===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function B1(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function hA(i,s,f,p){if(f.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var y=jo(p.href),b=s.querySelector(vu(y));if(b){s=b._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=Rc.bind(i),s.then(i,i)),f.state.loading|=4,f.instance=b,We(b);return}b=s.ownerDocument||s,p=N1(p),(y=sr.get(y))&&dp(p,y),b=b.createElement("link"),We(b);var R=b;R._p=new Promise(function(M,z){R.onload=M,R.onerror=z}),nn(b,"link",p),f.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(f,s),(s=f.state.preload)&&(f.state.loading&3)===0&&(i.count++,f=Rc.bind(i),s.addEventListener("load",f),s.addEventListener("error",f))}}var vp=0;function dA(i,s){return i.stylesheets&&i.count===0&&Dc(i,i.stylesheets),0<i.count||0<i.imgCount?function(f){var p=setTimeout(function(){if(i.stylesheets&&Dc(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+s);0<i.imgBytes&&vp===0&&(vp=62500*KR());var y=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Dc(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>vp?50:800)+s);return i.unsuspend=f,function(){i.unsuspend=null,clearTimeout(p),clearTimeout(y)}}:null}function Rc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Dc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ac=null;function Dc(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ac=new Map,s.forEach(pA,i),Ac=null,Rc.call(i))}function pA(i,s){if(!(s.state.loading&4)){var f=Ac.get(i);if(f)var p=f.get(null);else{f=new Map,Ac.set(i,f);for(var y=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<y.length;b++){var R=y[b];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(f.set(R.dataset.precedence,R),p=R)}p&&f.set(null,p)}y=s.instance,R=y.getAttribute("data-precedence"),b=f.get(R)||p,b===p&&f.set(null,y),f.set(R,y),this.count++,p=Rc.bind(this),y.addEventListener("load",p),y.addEventListener("error",p),b?b.parentNode.insertBefore(y,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(y,i.firstChild)),s.state.loading|=4}}var gu={$$typeof:_,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function vA(i,s,f,p,y,b,R,M,z){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ch(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ch(0),this.hiddenUpdates=ch(null),this.identifierPrefix=p,this.onUncaughtError=y,this.onCaughtError=b,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=z,this.incompleteTransitions=new Map}function F1(i,s,f,p,y,b,R,M,z,Z,ut,ft){return i=new vA(i,s,f,R,z,Z,ut,ft,M),s=1,b===!0&&(s|=24),b=Pn(3,null,null,s),i.current=b,b.stateNode=i,s=Xh(),s.refCount++,i.pooledCache=s,s.refCount++,b.memoizedState={element:p,isDehydrated:f,cache:s},Jh(b),i}function L1(i){return i?(i=Eo,i):Eo}function P1(i,s,f,p,y,b){y=L1(y),p.context===null?p.context=y:p.pendingContext=y,p=Pa(s),p.payload={element:f},b=b===void 0?null:b,b!==null&&(p.callback=b),f=za(i,p,s),f!==null&&(Rn(f,i,s),Ys(f,i,s))}function z1(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var f=i.retryLane;i.retryLane=f!==0&&f<s?f:s}}function mp(i,s){z1(i,s),(i=i.alternate)&&z1(i,s)}function U1(i){if(i.tag===13||i.tag===31){var s=Si(i,67108864);s!==null&&Rn(s,i,67108864),mp(i,67108864)}}function V1(i){if(i.tag===13||i.tag===31){var s=Gn();s=fh(s);var f=Si(i,s);f!==null&&Rn(f,i,s),mp(i,s)}}var Mc=!0;function mA(i,s,f,p){var y=P.T;P.T=null;var b=G.p;try{G.p=2,gp(i,s,f,p)}finally{G.p=b,P.T=y}}function gA(i,s,f,p){var y=P.T;P.T=null;var b=G.p;try{G.p=8,gp(i,s,f,p)}finally{G.p=b,P.T=y}}function gp(i,s,f,p){if(Mc){var y=yp(p);if(y===null)rp(i,s,p,Nc,f),G1(i,p);else if(bA(y,i,s,f,p))p.stopPropagation();else if(G1(i,p),s&4&&-1<yA.indexOf(i)){for(;y!==null;){var b=co(y);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var R=bi(b.pendingLanes);if(R!==0){var M=b;for(M.pendingLanes|=2,M.entangledLanes|=2;R;){var z=1<<31-Fn(R);M.entanglements[1]|=z,R&=~z}Br(b),($t&6)===0&&(dc=Me()+500,fu(0))}}break;case 31:case 13:M=Si(b,2),M!==null&&Rn(M,b,2),vc(),mp(b,2)}if(b=yp(p),b===null&&rp(i,s,p,Nc,f),b===y)break;y=b}y!==null&&p.stopPropagation()}else rp(i,s,p,null,f)}}function yp(i){return i=xh(i),bp(i)}var Nc=null;function bp(i){if(Nc=null,i=lo(i),i!==null){var s=o(i);if(s===null)i=null;else{var f=s.tag;if(f===13){if(i=u(s),i!==null)return i;i=null}else if(f===31){if(i=l(s),i!==null)return i;i=null}else if(f===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return Nc=i,null}function H1(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(gr()){case so:return 2;case Zr:return 8;case gn:case Ds:return 32;case xl:return 268435456;default:return 32}default:return 32}}var xp=!1,Qa=null,Za=null,Ja=null,yu=new Map,bu=new Map,$a=[],yA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function G1(i,s){switch(i){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":Za=null;break;case"mouseover":case"mouseout":Ja=null;break;case"pointerover":case"pointerout":yu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":bu.delete(s.pointerId)}}function xu(i,s,f,p,y,b){return i===null||i.nativeEvent!==b?(i={blockedOn:s,domEventName:f,eventSystemFlags:p,nativeEvent:b,targetContainers:[y]},s!==null&&(s=co(s),s!==null&&U1(s)),i):(i.eventSystemFlags|=p,s=i.targetContainers,y!==null&&s.indexOf(y)===-1&&s.push(y),i)}function bA(i,s,f,p,y){switch(s){case"focusin":return Qa=xu(Qa,i,s,f,p,y),!0;case"dragenter":return Za=xu(Za,i,s,f,p,y),!0;case"mouseover":return Ja=xu(Ja,i,s,f,p,y),!0;case"pointerover":var b=y.pointerId;return yu.set(b,xu(yu.get(b)||null,i,s,f,p,y)),!0;case"gotpointercapture":return b=y.pointerId,bu.set(b,xu(bu.get(b)||null,i,s,f,p,y)),!0}return!1}function j1(i){var s=lo(i.target);if(s!==null){var f=o(s);if(f!==null){if(s=f.tag,s===13){if(s=u(f),s!==null){i.blockedOn=s,ay(i.priority,function(){V1(f)});return}}else if(s===31){if(s=l(f),s!==null){i.blockedOn=s,ay(i.priority,function(){V1(f)});return}}else if(s===3&&f.stateNode.current.memoizedState.isDehydrated){i.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Oc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var f=yp(i.nativeEvent);if(f===null){f=i.nativeEvent;var p=new f.constructor(f.type,f);bh=p,f.target.dispatchEvent(p),bh=null}else return s=co(f),s!==null&&U1(s),i.blockedOn=f,!1;s.shift()}return!0}function W1(i,s,f){Oc(i)&&f.delete(s)}function xA(){xp=!1,Qa!==null&&Oc(Qa)&&(Qa=null),Za!==null&&Oc(Za)&&(Za=null),Ja!==null&&Oc(Ja)&&(Ja=null),yu.forEach(W1),bu.forEach(W1)}function kc(i,s){i.blockedOn===s&&(i.blockedOn=null,xp||(xp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,xA)))}var Ic=null;function q1(i){Ic!==i&&(Ic=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Ic===i&&(Ic=null);for(var s=0;s<i.length;s+=3){var f=i[s],p=i[s+1],y=i[s+2];if(typeof p!="function"){if(bp(p||f)===null)continue;break}var b=co(f);b!==null&&(i.splice(s,3),s-=3,yd(b,{pending:!0,data:y,method:f.method,action:p},p,y))}}))}function qo(i){function s(z){return kc(z,i)}Qa!==null&&kc(Qa,i),Za!==null&&kc(Za,i),Ja!==null&&kc(Ja,i),yu.forEach(s),bu.forEach(s);for(var f=0;f<$a.length;f++){var p=$a[f];p.blockedOn===i&&(p.blockedOn=null)}for(;0<$a.length&&(f=$a[0],f.blockedOn===null);)j1(f),f.blockedOn===null&&$a.shift();if(f=(i.ownerDocument||i).$$reactFormReplay,f!=null)for(p=0;p<f.length;p+=3){var y=f[p],b=f[p+1],R=y[wn]||null;if(typeof b=="function")R||q1(f);else if(R){var M=null;if(b&&b.hasAttribute("formAction")){if(y=b,R=b[wn]||null)M=R.formAction;else if(bp(y)!==null)continue}else M=R.action;typeof M=="function"?f[p+1]=M:(f.splice(p,3),p-=3),q1(f)}}}function K1(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(R){return y=R})},focusReset:"manual",scroll:"manual"})}function s(){y!==null&&(y(),y=null),p||setTimeout(f,20)}function f(){if(!p&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var p=!1,y=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(f,100),function(){p=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),y!==null&&(y(),y=null)}}}function wp(i){this._internalRoot=i}Bc.prototype.render=wp.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(r(409));var f=s.current,p=Gn();P1(f,p,i,s,null,null)},Bc.prototype.unmount=wp.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;P1(i.current,2,null,i,null,null),vc(),s[uo]=null}};function Bc(i){this._internalRoot=i}Bc.prototype.unstable_scheduleHydration=function(i){if(i){var s=ry();i={blockedOn:null,target:i,priority:s};for(var f=0;f<$a.length&&s!==0&&s<$a[f].priority;f++);$a.splice(f,0,i),f===0&&j1(i)}};var X1=e.version;if(X1!=="19.2.3")throw Error(r(527,X1,"19.2.3"));G.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(s),i=i!==null?d(i):null,i=i===null?null:i.stateNode,i};var wA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{Jr=Fc.inject(wA),Ze=Fc}catch{}}return Eu.createRoot=function(i,s){if(!a(i))throw Error(r(299));var f=!1,p="",y=eb,b=nb,R=rb;return s!=null&&(s.unstable_strictMode===!0&&(f=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onUncaughtError!==void 0&&(y=s.onUncaughtError),s.onCaughtError!==void 0&&(b=s.onCaughtError),s.onRecoverableError!==void 0&&(R=s.onRecoverableError)),s=F1(i,1,!1,null,null,f,p,null,y,b,R,K1),i[uo]=s.current,np(i),new wp(s)},Eu.hydrateRoot=function(i,s,f){if(!a(i))throw Error(r(299));var p=!1,y="",b=eb,R=nb,M=rb,z=null;return f!=null&&(f.unstable_strictMode===!0&&(p=!0),f.identifierPrefix!==void 0&&(y=f.identifierPrefix),f.onUncaughtError!==void 0&&(b=f.onUncaughtError),f.onCaughtError!==void 0&&(R=f.onCaughtError),f.onRecoverableError!==void 0&&(M=f.onRecoverableError),f.formState!==void 0&&(z=f.formState)),s=F1(i,1,!0,s,f??null,p,y,z,b,R,M,K1),s.context=L1(null),f=s.current,p=Gn(),p=fh(p),y=Pa(p),y.callback=null,za(f,y,p),f=p,s.current.lanes=f,Ns(s,f),Br(s),i[uo]=s.current,np(i),new Bc(s)},Eu.version="19.2.3",Eu}var ax;function OA(){if(ax)return Sp.exports;ax=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sp.exports=NA(),Sp.exports}var kA=OA();var ix="popstate";function IA(n={}){function e(a,o){let{pathname:u="/",search:l="",hash:c=""}=to(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),yv("",{pathname:u,search:l,hash:c},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(a,o){let u=a.document.querySelector("base"),l="";if(u&&u.getAttribute("href")){let c=a.location.href,h=c.indexOf("#");l=h===-1?c:c.slice(0,h)}return l+"#"+(typeof o=="string"?o:Pu(o))}function r(a,o){pr(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return FA(e,t,r,n)}function we(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function pr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function BA(){return Math.random().toString(36).substring(2,10)}function ox(n,e){return{usr:n.state,key:n.key,idx:e}}function yv(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?to(e):e,state:t,key:e&&e.key||r||BA()}}function Pu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function to(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function FA(n,e,t,r={}){let{window:a=document.defaultView,v5Compat:o=!1}=r,u=a.history,l="POP",c=null,h=d();h==null&&(h=0,u.replaceState({...u.state,idx:h},""));function d(){return(u.state||{idx:null}).idx}function v(){l="POP";let w=d(),C=w==null?null:w-h;h=w,c&&c({action:l,location:E.location,delta:C})}function m(w,C){l="PUSH";let S=yv(E.location,w,C);t&&t(S,w),h=d()+1;let _=ox(S,h),T=E.createHref(S);try{u.pushState(_,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;a.location.assign(T)}o&&c&&c({action:l,location:E.location,delta:1})}function g(w,C){l="REPLACE";let S=yv(E.location,w,C);t&&t(S,w),h=d();let _=ox(S,h),T=E.createHref(S);u.replaceState(_,"",T),o&&c&&c({action:l,location:E.location,delta:0})}function x(w){return LA(w)}let E={get action(){return l},get location(){return n(a,u)},listen(w){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(ix,v),c=w,()=>{a.removeEventListener(ix,v),c=null}},createHref(w){return e(a,w)},createURL:x,encodeLocation(w){let C=x(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:m,replace:g,go(w){return u.go(w)}};return E}function LA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),we(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:Pu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Uw(n,e,t="/"){return PA(n,e,t,!1)}function PA(n,e,t,r){let a=typeof e=="string"?to(e):e,o=wa(a.pathname||"/",t);if(o==null)return null;let u=Vw(n);zA(u);let l=null;for(let c=0;l==null&&c<u.length;++c){let h=QA(o);l=XA(u[c],h,r)}return l}function Vw(n,e=[],t=[],r="",a=!1){let o=(u,l,c=a,h)=>{let d={relativePath:h===void 0?u.path||"":h,caseSensitive:u.caseSensitive===!0,childrenIndex:l,route:u};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(r)&&c)return;we(d.relativePath.startsWith(r),`Absolute route path "${d.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(r.length)}let v=xa([r,d.relativePath]),m=t.concat(d);u.children&&u.children.length>0&&(we(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),Vw(u.children,e,m,v,c)),!(u.path==null&&!u.index)&&e.push({path:v,score:qA(v,u.index),routesMeta:m})};return n.forEach((u,l)=>{if(u.path===""||!u.path?.includes("?"))o(u,l);else for(let c of Hw(u.path))o(u,l,!0,c)}),e}function Hw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return a?[o,""]:[o];let u=Hw(r.join("/")),l=[];return l.push(...u.map(c=>c===""?o:[o,c].join("/"))),a&&l.push(...u),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function zA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:KA(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var UA=/^:[\w-]+$/,VA=3,HA=2,GA=1,jA=10,WA=-2,sx=n=>n==="*";function qA(n,e){let t=n.split("/"),r=t.length;return t.some(sx)&&(r+=WA),e&&(r+=HA),t.filter(a=>!sx(a)).reduce((a,o)=>a+(UA.test(o)?VA:o===""?GA:jA),r)}function KA(n,e){return n.length===e.length&&n.slice(0,-1).every((r,a)=>r===e[a])?n[n.length-1]-e[e.length-1]:0}function XA(n,e,t=!1){let{routesMeta:r}=n,a={},o="/",u=[];for(let l=0;l<r.length;++l){let c=r[l],h=l===r.length-1,d=o==="/"?e:e.slice(o.length)||"/",v=cf({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},d),m=c.route;if(!v&&h&&t&&!r[r.length-1].route.index&&(v=cf({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:xa([o,v.pathname]),pathnameBase:eD(xa([o,v.pathnameBase])),route:m}),v.pathnameBase!=="/"&&(o=xa([o,v.pathnameBase]))}return u}function cf(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=YA(n.path,n.caseSensitive,n.end),a=e.match(t);if(!a)return null;let o=a[0],u=o.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:r.reduce((h,{paramName:d,isOptional:v},m)=>{if(d==="*"){let x=l[m]||"";u=o.slice(0,o.length-x.length).replace(/(.)\/+$/,"$1")}const g=l[m];return v&&!g?h[d]=void 0:h[d]=(g||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:u,pattern:n}}function YA(n,e=!1,t=!0){pr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],a="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),a+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":n!==""&&n!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function QA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return pr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function wa(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var ZA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,JA=n=>ZA.test(n);function $A(n,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof n=="string"?to(n):n,o;if(t)if(JA(t))o=t;else{if(t.includes("//")){let u=t;t=t.replace(/\/\/+/g,"/"),pr(!1,`Pathnames cannot have embedded double slashes - normalizing ${u} -> ${t}`)}t.startsWith("/")?o=ux(t.substring(1),"/"):o=ux(t,e)}else o=e;return{pathname:o,search:nD(r),hash:rD(a)}}function ux(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ap(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tD(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Gw(n){let e=tD(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function jw(n,e,t,r=!1){let a;typeof n=="string"?a=to(n):(a={...n},we(!a.pathname||!a.pathname.includes("?"),Ap("?","pathname","search",a)),we(!a.pathname||!a.pathname.includes("#"),Ap("#","pathname","hash",a)),we(!a.search||!a.search.includes("#"),Ap("#","search","hash",a)));let o=n===""||a.pathname==="",u=o?"/":a.pathname,l;if(u==null)l=t;else{let v=e.length-1;if(!r&&u.startsWith("..")){let m=u.split("/");for(;m[0]==="..";)m.shift(),v-=1;a.pathname=m.join("/")}l=v>=0?e[v]:"/"}let c=$A(a,l),h=u&&u!=="/"&&u.endsWith("/"),d=(o||u===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(h||d)&&(c.pathname+="/"),c}var xa=n=>n.join("/").replace(/\/\/+/g,"/"),eD=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),nD=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,rD=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function aD(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function iD(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Ww=["POST","PUT","PATCH","DELETE"];new Set(Ww);var oD=["GET",...Ww];new Set(oD);var Cs=Y.createContext(null);Cs.displayName="DataRouter";var Uf=Y.createContext(null);Uf.displayName="DataRouterState";Y.createContext(!1);var qw=Y.createContext({isTransitioning:!1});qw.displayName="ViewTransition";var sD=Y.createContext(new Map);sD.displayName="Fetchers";var uD=Y.createContext(null);uD.displayName="Await";var Tr=Y.createContext(null);Tr.displayName="Navigation";var el=Y.createContext(null);el.displayName="Location";var Sa=Y.createContext({outlet:null,matches:[],isDataRoute:!1});Sa.displayName="Route";var dm=Y.createContext(null);dm.displayName="RouteError";function lD(n,{relative:e}={}){we(nl(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=Y.useContext(Tr),{hash:a,pathname:o,search:u}=rl(n,{relative:e}),l=o;return t!=="/"&&(l=o==="/"?t:xa([t,o])),r.createHref({pathname:l,search:u,hash:a})}function nl(){return Y.useContext(el)!=null}function eo(){return we(nl(),"useLocation() may be used only in the context of a <Router> component."),Y.useContext(el).location}var Kw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Xw(n){Y.useContext(Tr).static||Y.useLayoutEffect(n)}function pm(){let{isDataRoute:n}=Y.useContext(Sa);return n?ED():cD()}function cD(){we(nl(),"useNavigate() may be used only in the context of a <Router> component.");let n=Y.useContext(Cs),{basename:e,navigator:t}=Y.useContext(Tr),{matches:r}=Y.useContext(Sa),{pathname:a}=eo(),o=JSON.stringify(Gw(r)),u=Y.useRef(!1);return Xw(()=>{u.current=!0}),Y.useCallback((c,h={})=>{if(pr(u.current,Kw),!u.current)return;if(typeof c=="number"){t.go(c);return}let d=jw(c,JSON.parse(o),a,h.relative==="path");n==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:xa([e,d.pathname])),(h.replace?t.replace:t.push)(d,h.state,h)},[e,t,o,a,n])}Y.createContext(null);function rl(n,{relative:e}={}){let{matches:t}=Y.useContext(Sa),{pathname:r}=eo(),a=JSON.stringify(Gw(t));return Y.useMemo(()=>jw(n,JSON.parse(a),r,e==="path"),[n,a,r,e])}function fD(n,e){return Yw(n,e)}function Yw(n,e,t,r,a){we(nl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=Y.useContext(Tr),{matches:u}=Y.useContext(Sa),l=u[u.length-1],c=l?l.params:{},h=l?l.pathname:"/",d=l?l.pathnameBase:"/",v=l&&l.route;{let S=v&&v.path||"";Qw(h,!v||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let m=eo(),g;if(e){let S=typeof e=="string"?to(e):e;we(d==="/"||S.pathname?.startsWith(d),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${S.pathname}" was given in the \`location\` prop.`),g=S}else g=m;let x=g.pathname||"/",E=x;if(d!=="/"){let S=d.replace(/^\//,"").split("/");E="/"+x.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=Uw(n,{pathname:E});pr(v||w!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),pr(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let C=mD(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},c,S.params),pathname:xa([d,o.encodeLocation?o.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?d:xa([d,o.encodeLocation?o.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),u,t,r,a);return e&&C?Y.createElement(el.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},C):C}function hD(){let n=wD(),e=aD(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=Y.createElement(Y.Fragment,null,Y.createElement("p",null," Hey developer "),Y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Y.createElement("code",{style:o},"ErrorBoundary")," or"," ",Y.createElement("code",{style:o},"errorElement")," prop on your route.")),Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:a},t):null,u)}var dD=Y.createElement(hD,null),pD=class extends Y.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?Y.createElement(Sa.Provider,{value:this.props.routeContext},Y.createElement(dm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vD({routeContext:n,match:e,children:t}){let r=Y.useContext(Cs);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),Y.createElement(Sa.Provider,{value:n},t)}function mD(n,e=[],t=null,r=null,a=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,u=t?.errors;if(u!=null){let d=o.findIndex(v=>v.route.id&&u?.[v.route.id]!==void 0);we(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),o=o.slice(0,Math.min(o.length,d+1))}let l=!1,c=-1;if(t)for(let d=0;d<o.length;d++){let v=o[d];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(c=d),v.route.id){let{loaderData:m,errors:g}=t,x=v.route.loader&&!m.hasOwnProperty(v.route.id)&&(!g||g[v.route.id]===void 0);if(v.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}let h=t&&r?(d,v)=>{r(d,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:iD(t.matches),errorInfo:v})}:void 0;return o.reduceRight((d,v,m)=>{let g,x=!1,E=null,w=null;t&&(g=u&&v.route.id?u[v.route.id]:void 0,E=v.route.errorElement||dD,l&&(c<0&&m===0?(Qw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),x=!0,w=null):c===m&&(x=!0,w=v.route.hydrateFallbackElement||null)));let C=e.concat(o.slice(0,m+1)),S=()=>{let _;return g?_=E:x?_=w:v.route.Component?_=Y.createElement(v.route.Component,null):v.route.element?_=v.route.element:_=d,Y.createElement(vD,{match:v,routeContext:{outlet:d,matches:C,isDataRoute:t!=null},children:_})};return t&&(v.route.ErrorBoundary||v.route.errorElement||m===0)?Y.createElement(pD,{location:t.location,revalidation:t.revalidation,component:E,error:g,children:S(),routeContext:{outlet:null,matches:C,isDataRoute:!0},onError:h}):S()},null)}function vm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gD(n){let e=Y.useContext(Cs);return we(e,vm(n)),e}function yD(n){let e=Y.useContext(Uf);return we(e,vm(n)),e}function bD(n){let e=Y.useContext(Sa);return we(e,vm(n)),e}function mm(n){let e=bD(n),t=e.matches[e.matches.length-1];return we(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function xD(){return mm("useRouteId")}function wD(){let n=Y.useContext(dm),e=yD("useRouteError"),t=mm("useRouteError");return n!==void 0?n:e.errors?.[t]}function ED(){let{router:n}=gD("useNavigate"),e=mm("useNavigate"),t=Y.useRef(!1);return Xw(()=>{t.current=!0}),Y.useCallback(async(a,o={})=>{pr(t.current,Kw),t.current&&(typeof a=="number"?await n.navigate(a):await n.navigate(a,{fromRouteId:e,...o}))},[n,e])}var lx={};function Qw(n,e,t){!e&&!lx[n]&&(lx[n]=!0,pr(!1,t))}Y.memo(CD);function CD({routes:n,future:e,state:t,unstable_onError:r}){return Yw(n,void 0,t,r,e)}function bv(n){we(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function SD({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:o=!1,unstable_useTransitions:u}){we(!nl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=n.replace(/^\/*/,"/"),c=Y.useMemo(()=>({basename:l,navigator:a,static:o,unstable_useTransitions:u,future:{}}),[l,a,o,u]);typeof t=="string"&&(t=to(t));let{pathname:h="/",search:d="",hash:v="",state:m=null,key:g="default"}=t,x=Y.useMemo(()=>{let E=wa(h,l);return E==null?null:{location:{pathname:E,search:d,hash:v,state:m,key:g},navigationType:r}},[l,h,d,v,m,g,r]);return pr(x!=null,`<Router basename="${l}"> is not able to match the URL "${h}${d}${v}" because it does not start with the basename, so the <Router> won't render anything.`),x==null?null:Y.createElement(Tr.Provider,{value:c},Y.createElement(el.Provider,{children:e,value:x}))}function _D({children:n,location:e}){return fD(xv(n),e)}function xv(n,e=[]){let t=[];return Y.Children.forEach(n,(r,a)=>{if(!Y.isValidElement(r))return;let o=[...e,a];if(r.type===Y.Fragment){t.push.apply(t,xv(r.props.children,o));return}we(r.type===bv,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),we(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=xv(r.props.children,o)),t.push(u)}),t}var ef="get",nf="application/x-www-form-urlencoded";function Vf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function TD(n){return Vf(n)&&n.tagName.toLowerCase()==="button"}function RD(n){return Vf(n)&&n.tagName.toLowerCase()==="form"}function AD(n){return Vf(n)&&n.tagName.toLowerCase()==="input"}function DD(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function MD(n,e){return n.button===0&&(!e||e==="_self")&&!DD(n)}var Lc=null;function ND(){if(Lc===null)try{new FormData(document.createElement("form"),0),Lc=!1}catch{Lc=!0}return Lc}var OD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dp(n){return n!=null&&!OD.has(n)?(pr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nf}"`),null):n}function kD(n,e){let t,r,a,o,u;if(RD(n)){let l=n.getAttribute("action");r=l?wa(l,e):null,t=n.getAttribute("method")||ef,a=Dp(n.getAttribute("enctype"))||nf,o=new FormData(n)}else if(TD(n)||AD(n)&&(n.type==="submit"||n.type==="image")){let l=n.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||l.getAttribute("action");if(r=c?wa(c,e):null,t=n.getAttribute("formmethod")||l.getAttribute("method")||ef,a=Dp(n.getAttribute("formenctype"))||Dp(l.getAttribute("enctype"))||nf,o=new FormData(l,n),!ND()){let{name:h,type:d,value:v}=n;if(d==="image"){let m=h?`${h}.`:"";o.append(`${m}x`,"0"),o.append(`${m}y`,"0")}else h&&o.append(h,v)}}else{if(Vf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ef,r=null,a=nf,u=n}return o&&a==="text/plain"&&(u=o,o=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:o,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function gm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function ID(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&wa(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function BD(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FD(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function LD(n,e,t){let r=await Promise.all(n.map(async a=>{let o=e.routes[a.route.id];if(o){let u=await BD(o,t);return u.links?u.links():[]}return[]}));return VD(r.flat(1).filter(FD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function cx(n,e,t,r,a,o){let u=(c,h)=>t[h]?c.route.id!==t[h].route.id:!0,l=(c,h)=>t[h].pathname!==c.pathname||t[h].route.path?.endsWith("*")&&t[h].params["*"]!==c.params["*"];return o==="assets"?e.filter((c,h)=>u(c,h)||l(c,h)):o==="data"?e.filter((c,h)=>{let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(u(c,h)||l(c,h))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function PD(n,e,{includeHydrateFallback:t}={}){return zD(n.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let o=[a.module];return a.clientActionModule&&(o=o.concat(a.clientActionModule)),a.clientLoaderModule&&(o=o.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(o=o.concat(a.hydrateFallbackModule)),a.imports&&(o=o.concat(a.imports)),o}).flat(1))}function zD(n){return[...new Set(n)]}function UD(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function VD(n,e){let t=new Set;return new Set(e),n.reduce((r,a)=>{let o=JSON.stringify(UD(a));return t.has(o)||(t.add(o),r.push({key:o,link:a})),r},[])}function Zw(){let n=Y.useContext(Cs);return gm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function HD(){let n=Y.useContext(Uf);return gm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var ym=Y.createContext(void 0);ym.displayName="FrameworkContext";function Jw(){let n=Y.useContext(ym);return gm(n,"You must render this element inside a <HydratedRouter> element"),n}function GD(n,e){let t=Y.useContext(ym),[r,a]=Y.useState(!1),[o,u]=Y.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:h,onMouseLeave:d,onTouchStart:v}=e,m=Y.useRef(null);Y.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let E=C=>{C.forEach(S=>{u(S.isIntersecting)})},w=new IntersectionObserver(E,{threshold:.5});return m.current&&w.observe(m.current),()=>{w.disconnect()}}},[n]),Y.useEffect(()=>{if(r){let E=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(E)}}},[r]);let g=()=>{a(!0)},x=()=>{a(!1),u(!1)};return t?n!=="intent"?[o,m,{}]:[o,m,{onFocus:Cu(l,g),onBlur:Cu(c,x),onMouseEnter:Cu(h,g),onMouseLeave:Cu(d,x),onTouchStart:Cu(v,g)}]:[!1,m,{}]}function Cu(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function jD({page:n,...e}){let{router:t}=Zw(),r=Y.useMemo(()=>Uw(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?Y.createElement(qD,{page:n,matches:r,...e}):null}function WD(n){let{manifest:e,routeModules:t}=Jw(),[r,a]=Y.useState([]);return Y.useEffect(()=>{let o=!1;return LD(n,e,t).then(u=>{o||a(u)}),()=>{o=!0}},[n,e,t]),r}function qD({page:n,matches:e,...t}){let r=eo(),{manifest:a,routeModules:o}=Jw(),{basename:u}=Zw(),{loaderData:l,matches:c}=HD(),h=Y.useMemo(()=>cx(n,e,c,a,r,"data"),[n,e,c,a,r]),d=Y.useMemo(()=>cx(n,e,c,a,r,"assets"),[n,e,c,a,r]),v=Y.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let x=new Set,E=!1;if(e.forEach(C=>{let S=a.routes[C.route.id];!S||!S.hasLoader||(!h.some(_=>_.route.id===C.route.id)&&C.route.id in l&&o[C.route.id]?.shouldRevalidate||S.hasClientLoader?E=!0:x.add(C.route.id))}),x.size===0)return[];let w=ID(n,u,"data");return E&&x.size>0&&w.searchParams.set("_routes",e.filter(C=>x.has(C.route.id)).map(C=>C.route.id).join(",")),[w.pathname+w.search]},[u,l,r,a,h,e,n,o]),m=Y.useMemo(()=>PD(d,a),[d,a]),g=WD(d);return Y.createElement(Y.Fragment,null,v.map(x=>Y.createElement("link",{key:x,rel:"prefetch",as:"fetch",href:x,...t})),m.map(x=>Y.createElement("link",{key:x,rel:"modulepreload",href:x,...t})),g.map(({key:x,link:E})=>Y.createElement("link",{key:x,nonce:t.nonce,...E})))}function KD(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var $w=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$w&&(window.__reactRouterVersion="7.10.1")}catch{}function XD({basename:n,children:e,unstable_useTransitions:t,window:r}){let a=Y.useRef();a.current==null&&(a.current=IA({window:r,v5Compat:!0}));let o=a.current,[u,l]=Y.useState({action:o.action,location:o.location}),c=Y.useCallback(h=>{t===!1?l(h):Y.startTransition(()=>l(h))},[t]);return Y.useLayoutEffect(()=>o.listen(c),[o,c]),Y.createElement(SD,{basename:n,children:e,location:u.location,navigationType:u.action,navigator:o,unstable_useTransitions:t===!0})}var tE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,eE=Y.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:o,replace:u,state:l,target:c,to:h,preventScrollReset:d,viewTransition:v,...m},g){let{basename:x,unstable_useTransitions:E}=Y.useContext(Tr),w=typeof h=="string"&&tE.test(h),C,S=!1;if(typeof h=="string"&&w&&(C=h,$w))try{let B=new URL(window.location.href),V=h.startsWith("//")?new URL(B.protocol+h):new URL(h),U=wa(V.pathname,x);V.origin===B.origin&&U!=null?h=U+V.search+V.hash:S=!0}catch{pr(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=lD(h,{relative:a}),[T,A,D]=GD(r,m),N=JD(h,{replace:u,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:v,unstable_useTransitions:E});function k(B){e&&e(B),B.defaultPrevented||N(B)}let O=Y.createElement("a",{...m,...D,href:C||_,onClick:S||o?e:k,ref:KD(g,A),target:c,"data-discover":!w&&t==="render"?"true":void 0});return T&&!w?Y.createElement(Y.Fragment,null,O,Y.createElement(jD,{page:_})):O});eE.displayName="Link";var YD=Y.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:o,to:u,viewTransition:l,children:c,...h},d){let v=rl(u,{relative:h.relative}),m=eo(),g=Y.useContext(Uf),{navigator:x,basename:E}=Y.useContext(Tr),w=g!=null&&rM(v)&&l===!0,C=x.encodeLocation?x.encodeLocation(v).pathname:v.pathname,S=m.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;t||(S=S.toLowerCase(),_=_?_.toLowerCase():null,C=C.toLowerCase()),_&&E&&(_=wa(_,E)||_);const T=C!=="/"&&C.endsWith("/")?C.length-1:C.length;let A=S===C||!a&&S.startsWith(C)&&S.charAt(T)==="/",D=_!=null&&(_===C||!a&&_.startsWith(C)&&_.charAt(C.length)==="/"),N={isActive:A,isPending:D,isTransitioning:w},k=A?e:void 0,O;typeof r=="function"?O=r(N):O=[r,A?"active":null,D?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let B=typeof o=="function"?o(N):o;return Y.createElement(eE,{...h,"aria-current":k,className:O,ref:d,style:B,to:u,viewTransition:l},typeof c=="function"?c(N):c)});YD.displayName="NavLink";var QD=Y.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:o,method:u=ef,action:l,onSubmit:c,relative:h,preventScrollReset:d,viewTransition:v,...m},g)=>{let{unstable_useTransitions:x}=Y.useContext(Tr),E=eM(),w=nM(l,{relative:h}),C=u.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&tE.test(l),_=T=>{if(c&&c(T),T.defaultPrevented)return;T.preventDefault();let A=T.nativeEvent.submitter,D=A?.getAttribute("formmethod")||u,N=()=>E(A||T.currentTarget,{fetcherKey:e,method:D,navigate:t,replace:a,state:o,relative:h,preventScrollReset:d,viewTransition:v});x&&t!==!1?Y.startTransition(()=>N()):N()};return Y.createElement("form",{ref:g,method:C,action:w,onSubmit:r?c:_,...m,"data-discover":!S&&n==="render"?"true":void 0})});QD.displayName="Form";function ZD(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nE(n){let e=Y.useContext(Cs);return we(e,ZD(n)),e}function JD(n,{target:e,replace:t,state:r,preventScrollReset:a,relative:o,viewTransition:u,unstable_useTransitions:l}={}){let c=pm(),h=eo(),d=rl(n,{relative:o});return Y.useCallback(v=>{if(MD(v,e)){v.preventDefault();let m=t!==void 0?t:Pu(h)===Pu(d),g=()=>c(n,{replace:m,state:r,preventScrollReset:a,relative:o,viewTransition:u});l?Y.startTransition(()=>g()):g()}},[h,c,d,t,r,e,n,a,o,u,l])}var $D=0,tM=()=>`__${String(++$D)}__`;function eM(){let{router:n}=nE("useSubmit"),{basename:e}=Y.useContext(Tr),t=xD(),r=n.fetch,a=n.navigate;return Y.useCallback(async(o,u={})=>{let{action:l,method:c,encType:h,formData:d,body:v}=kD(o,e);if(u.navigate===!1){let m=u.fetcherKey||tM();await r(m,t,u.action||l,{preventScrollReset:u.preventScrollReset,formData:d,body:v,formMethod:u.method||c,formEncType:u.encType||h,flushSync:u.flushSync})}else await a(u.action||l,{preventScrollReset:u.preventScrollReset,formData:d,body:v,formMethod:u.method||c,formEncType:u.encType||h,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,a,e,t])}function nM(n,{relative:e}={}){let{basename:t}=Y.useContext(Tr),r=Y.useContext(Sa);we(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),o={...rl(n||".",{relative:e})},u=eo();if(n==null){o.search=u.search;let l=new URLSearchParams(o.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(v=>v).forEach(v=>l.append("index",v));let d=l.toString();o.search=d?`?${d}`:""}}return(!n||n===".")&&a.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:xa([t,o.pathname])),Pu(o)}function rM(n,{relative:e}={}){let t=Y.useContext(qw);we(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=nE("useViewTransitionState"),a=rl(n,{relative:e});if(!t.isTransitioning)return!1;let o=wa(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=wa(t.nextLocation.pathname,r)||t.nextLocation.pathname;return cf(a.pathname,u)!=null||cf(a.pathname,o)!=null}const rE=Y.createContext({});function aM(n){const e=Y.useRef(null);return e.current===null&&(e.current=n()),e.current}const bm=typeof window<"u",iM=bm?Y.useLayoutEffect:Y.useEffect,xm=Y.createContext(null);function wm(n,e){n.indexOf(e)===-1&&n.push(e)}function Em(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Ea=(n,e,t)=>t>e?e:t<n?n:t;let Cm=()=>{};const Ca={},aE=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function iE(n){return typeof n=="object"&&n!==null}const oE=n=>/^0[^.\s]+$/u.test(n);function Sm(n){let e;return()=>(e===void 0&&(e=n()),e)}const dr=n=>n,oM=(n,e)=>t=>e(n(t)),al=(...n)=>n.reduce(oM),zu=(n,e,t)=>{const r=e-n;return r===0?1:(t-n)/r};class _m{constructor(){this.subscriptions=[]}add(e){return wm(this.subscriptions,e),()=>Em(this.subscriptions,e)}notify(e,t,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,t,r);else for(let o=0;o<a;o++){const u=this.subscriptions[o];u&&u(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Hr=n=>n*1e3,fr=n=>n/1e3;function sE(n,e){return e?n*(1e3/e):0}const uE=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,sM=1e-7,uM=12;function lM(n,e,t,r,a){let o,u,l=0;do u=e+(t-e)/2,o=uE(u,r,a)-n,o>0?t=u:e=u;while(Math.abs(o)>sM&&++l<uM);return u}function il(n,e,t,r){if(n===e&&t===r)return dr;const a=o=>lM(o,0,1,n,t);return o=>o===0||o===1?o:uE(a(o),e,r)}const lE=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,cE=n=>e=>1-n(1-e),fE=il(.33,1.53,.69,.99),Tm=cE(fE),hE=lE(Tm),dE=n=>(n*=2)<1?.5*Tm(n):.5*(2-Math.pow(2,-10*(n-1))),Rm=n=>1-Math.sin(Math.acos(n)),pE=cE(Rm),vE=lE(Rm),cM=il(.42,0,1,1),fM=il(0,0,.58,1),mE=il(.42,0,.58,1),hM=n=>Array.isArray(n)&&typeof n[0]!="number",gE=n=>Array.isArray(n)&&typeof n[0]=="number",dM={linear:dr,easeIn:cM,easeInOut:mE,easeOut:fM,circIn:Rm,circInOut:vE,circOut:pE,backIn:Tm,backInOut:hE,backOut:fE,anticipate:dE},pM=n=>typeof n=="string",fx=n=>{if(gE(n)){Cm(n.length===4);const[e,t,r,a]=n;return il(e,t,r,a)}else if(pM(n))return dM[n];return n},Pc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function vM(n,e){let t=new Set,r=new Set,a=!1,o=!1;const u=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){u.has(d)&&(h.schedule(d),n()),d(l)}const h={schedule:(d,v=!1,m=!1)=>{const x=m&&a?t:r;return v&&u.add(d),x.has(d)||x.add(d),d},cancel:d=>{r.delete(d),u.delete(d)},process:d=>{if(l=d,a){o=!0;return}a=!0,[t,r]=[r,t],t.forEach(c),t.clear(),a=!1,o&&(o=!1,h.process(d))}};return h}const mM=40;function yE(n,e){let t=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},o=()=>t=!0,u=Pc.reduce((_,T)=>(_[T]=vM(o),_),{}),{setup:l,read:c,resolveKeyframes:h,preUpdate:d,update:v,preRender:m,render:g,postRender:x}=u,E=()=>{const _=Ca.useManualTiming?a.timestamp:performance.now();t=!1,Ca.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(_-a.timestamp,mM),1)),a.timestamp=_,a.isProcessing=!0,l.process(a),c.process(a),h.process(a),d.process(a),v.process(a),m.process(a),g.process(a),x.process(a),a.isProcessing=!1,t&&e&&(r=!1,n(E))},w=()=>{t=!0,r=!0,a.isProcessing||n(E)};return{schedule:Pc.reduce((_,T)=>{const A=u[T];return _[T]=(D,N=!1,k=!1)=>(t||w(),A.schedule(D,N,k)),_},{}),cancel:_=>{for(let T=0;T<Pc.length;T++)u[Pc[T]].cancel(_)},state:a,steps:u}}const{schedule:ge,cancel:fi,state:rn,steps:Mp}=yE(typeof requestAnimationFrame<"u"?requestAnimationFrame:dr,!0);let rf;function gM(){rf=void 0}const Mn={now:()=>(rf===void 0&&Mn.set(rn.isProcessing||Ca.useManualTiming?rn.timestamp:performance.now()),rf),set:n=>{rf=n,queueMicrotask(gM)}},bE=n=>e=>typeof e=="string"&&e.startsWith(n),xE=bE("--"),yM=bE("var(--"),Am=n=>yM(n)?bM.test(n.split("/*")[0].trim()):!1,bM=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Ss={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},Uu={...Ss,transform:n=>Ea(0,1,n)},zc={...Ss,default:1},Mu=n=>Math.round(n*1e5)/1e5,Dm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function xM(n){return n==null}const wM=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Mm=(n,e)=>t=>!!(typeof t=="string"&&wM.test(t)&&t.startsWith(n)||e&&!xM(t)&&Object.prototype.hasOwnProperty.call(t,e)),wE=(n,e,t)=>r=>{if(typeof r!="string")return r;const[a,o,u,l]=r.match(Dm);return{[n]:parseFloat(a),[e]:parseFloat(o),[t]:parseFloat(u),alpha:l!==void 0?parseFloat(l):1}},EM=n=>Ea(0,255,n),Np={...Ss,transform:n=>Math.round(EM(n))},Gi={test:Mm("rgb","red"),parse:wE("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:r=1})=>"rgba("+Np.transform(n)+", "+Np.transform(e)+", "+Np.transform(t)+", "+Mu(Uu.transform(r))+")"};function CM(n){let e="",t="",r="",a="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),r=n.substring(5,7),a=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),r=n.substring(3,4),a=n.substring(4,5),e+=e,t+=t,r+=r,a+=a),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const wv={test:Mm("#"),parse:CM,transform:Gi.transform},ol=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),ri=ol("deg"),Gr=ol("%"),Ot=ol("px"),SM=ol("vh"),_M=ol("vw"),hx={...Gr,parse:n=>Gr.parse(n)/100,transform:n=>Gr.transform(n*100)},ns={test:Mm("hsl","hue"),parse:wE("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:r=1})=>"hsla("+Math.round(n)+", "+Gr.transform(Mu(e))+", "+Gr.transform(Mu(t))+", "+Mu(Uu.transform(r))+")"},Be={test:n=>Gi.test(n)||wv.test(n)||ns.test(n),parse:n=>Gi.test(n)?Gi.parse(n):ns.test(n)?ns.parse(n):wv.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Gi.transform(n):ns.transform(n),getAnimatableNone:n=>{const e=Be.parse(n);return e.alpha=0,Be.transform(e)}},TM=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function RM(n){return isNaN(n)&&typeof n=="string"&&(n.match(Dm)?.length||0)+(n.match(TM)?.length||0)>0}const EE="number",CE="color",AM="var",DM="var(",dx="${}",MM=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vu(n){const e=n.toString(),t=[],r={color:[],number:[],var:[]},a=[];let o=0;const l=e.replace(MM,c=>(Be.test(c)?(r.color.push(o),a.push(CE),t.push(Be.parse(c))):c.startsWith(DM)?(r.var.push(o),a.push(AM),t.push(c)):(r.number.push(o),a.push(EE),t.push(parseFloat(c))),++o,dx)).split(dx);return{values:t,split:l,indexes:r,types:a}}function SE(n){return Vu(n).values}function _E(n){const{split:e,types:t}=Vu(n),r=e.length;return a=>{let o="";for(let u=0;u<r;u++)if(o+=e[u],a[u]!==void 0){const l=t[u];l===EE?o+=Mu(a[u]):l===CE?o+=Be.transform(a[u]):o+=a[u]}return o}}const NM=n=>typeof n=="number"?0:Be.test(n)?Be.getAnimatableNone(n):n;function OM(n){const e=SE(n);return _E(n)(e.map(NM))}const hi={test:RM,parse:SE,createTransformer:_E,getAnimatableNone:OM};function Op(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function kM({hue:n,saturation:e,lightness:t,alpha:r}){n/=360,e/=100,t/=100;let a=0,o=0,u=0;if(!e)a=o=u=t;else{const l=t<.5?t*(1+e):t+e-t*e,c=2*t-l;a=Op(c,l,n+1/3),o=Op(c,l,n),u=Op(c,l,n-1/3)}return{red:Math.round(a*255),green:Math.round(o*255),blue:Math.round(u*255),alpha:r}}function ff(n,e){return t=>t>0?e:n}const be=(n,e,t)=>n+(e-n)*t,kp=(n,e,t)=>{const r=n*n,a=t*(e*e-r)+r;return a<0?0:Math.sqrt(a)},IM=[wv,Gi,ns],BM=n=>IM.find(e=>e.test(n));function px(n){const e=BM(n);if(!e)return!1;let t=e.parse(n);return e===ns&&(t=kM(t)),t}const vx=(n,e)=>{const t=px(n),r=px(e);if(!t||!r)return ff(n,e);const a={...t};return o=>(a.red=kp(t.red,r.red,o),a.green=kp(t.green,r.green,o),a.blue=kp(t.blue,r.blue,o),a.alpha=be(t.alpha,r.alpha,o),Gi.transform(a))},Ev=new Set(["none","hidden"]);function FM(n,e){return Ev.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function LM(n,e){return t=>be(n,e,t)}function Nm(n){return typeof n=="number"?LM:typeof n=="string"?Am(n)?ff:Be.test(n)?vx:UM:Array.isArray(n)?TE:typeof n=="object"?Be.test(n)?vx:PM:ff}function TE(n,e){const t=[...n],r=t.length,a=n.map((o,u)=>Nm(o)(o,e[u]));return o=>{for(let u=0;u<r;u++)t[u]=a[u](o);return t}}function PM(n,e){const t={...n,...e},r={};for(const a in t)n[a]!==void 0&&e[a]!==void 0&&(r[a]=Nm(n[a])(n[a],e[a]));return a=>{for(const o in r)t[o]=r[o](a);return t}}function zM(n,e){const t=[],r={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const o=e.types[a],u=n.indexes[o][r[o]],l=n.values[u]??0;t[a]=l,r[o]++}return t}const UM=(n,e)=>{const t=hi.createTransformer(e),r=Vu(n),a=Vu(e);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?Ev.has(n)&&!a.values.length||Ev.has(e)&&!r.values.length?FM(n,e):al(TE(zM(r,a),a.values),t):ff(n,e)};function RE(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?be(n,e,t):Nm(n)(n,e)}const VM=n=>{const e=({timestamp:t})=>n(t);return{start:(t=!0)=>ge.update(e,t),stop:()=>fi(e),now:()=>rn.isProcessing?rn.timestamp:Mn.now()}},AE=(n,e,t=10)=>{let r="";const a=Math.max(Math.round(e/t),2);for(let o=0;o<a;o++)r+=Math.round(n(o/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},hf=2e4;function Om(n){let e=0;const t=50;let r=n.next(e);for(;!r.done&&e<hf;)e+=t,r=n.next(e);return e>=hf?1/0:e}function HM(n,e=100,t){const r=t({...n,keyframes:[0,e]}),a=Math.min(Om(r),hf);return{type:"keyframes",ease:o=>r.next(a*o).value/e,duration:fr(a)}}const GM=5;function DE(n,e,t){const r=Math.max(e-GM,0);return sE(t-n(r),e-r)}const Te={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ip=.001;function jM({duration:n=Te.duration,bounce:e=Te.bounce,velocity:t=Te.velocity,mass:r=Te.mass}){let a,o,u=1-e;u=Ea(Te.minDamping,Te.maxDamping,u),n=Ea(Te.minDuration,Te.maxDuration,fr(n)),u<1?(a=h=>{const d=h*u,v=d*n,m=d-t,g=Cv(h,u),x=Math.exp(-v);return Ip-m/g*x},o=h=>{const v=h*u*n,m=v*t+t,g=Math.pow(u,2)*Math.pow(h,2)*n,x=Math.exp(-v),E=Cv(Math.pow(h,2),u);return(-a(h)+Ip>0?-1:1)*((m-g)*x)/E}):(a=h=>{const d=Math.exp(-h*n),v=(h-t)*n+1;return-Ip+d*v},o=h=>{const d=Math.exp(-h*n),v=(t-h)*(n*n);return d*v});const l=5/n,c=qM(a,o,l);if(n=Hr(n),isNaN(c))return{stiffness:Te.stiffness,damping:Te.damping,duration:n};{const h=Math.pow(c,2)*r;return{stiffness:h,damping:u*2*Math.sqrt(r*h),duration:n}}}const WM=12;function qM(n,e,t){let r=t;for(let a=1;a<WM;a++)r=r-n(r)/e(r);return r}function Cv(n,e){return n*Math.sqrt(1-e*e)}const KM=["duration","bounce"],XM=["stiffness","damping","mass"];function mx(n,e){return e.some(t=>n[t]!==void 0)}function YM(n){let e={velocity:Te.velocity,stiffness:Te.stiffness,damping:Te.damping,mass:Te.mass,isResolvedFromDuration:!1,...n};if(!mx(n,XM)&&mx(n,KM))if(n.visualDuration){const t=n.visualDuration,r=2*Math.PI/(t*1.2),a=r*r,o=2*Ea(.05,1,1-(n.bounce||0))*Math.sqrt(a);e={...e,mass:Te.mass,stiffness:a,damping:o}}else{const t=jM(n);e={...e,...t,mass:Te.mass},e.isResolvedFromDuration=!0}return e}function df(n=Te.visualDuration,e=Te.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:r,restDelta:a}=t;const o=t.keyframes[0],u=t.keyframes[t.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:h,mass:d,duration:v,velocity:m,isResolvedFromDuration:g}=YM({...t,velocity:-fr(t.velocity||0)}),x=m||0,E=h/(2*Math.sqrt(c*d)),w=u-o,C=fr(Math.sqrt(c/d)),S=Math.abs(w)<5;r||(r=S?Te.restSpeed.granular:Te.restSpeed.default),a||(a=S?Te.restDelta.granular:Te.restDelta.default);let _;if(E<1){const A=Cv(C,E);_=D=>{const N=Math.exp(-E*C*D);return u-N*((x+E*C*w)/A*Math.sin(A*D)+w*Math.cos(A*D))}}else if(E===1)_=A=>u-Math.exp(-C*A)*(w+(x+C*w)*A);else{const A=C*Math.sqrt(E*E-1);_=D=>{const N=Math.exp(-E*C*D),k=Math.min(A*D,300);return u-N*((x+E*C*w)*Math.sinh(k)+A*w*Math.cosh(k))/A}}const T={calculatedDuration:g&&v||null,next:A=>{const D=_(A);if(g)l.done=A>=v;else{let N=A===0?x:0;E<1&&(N=A===0?Hr(x):DE(_,A,D));const k=Math.abs(N)<=r,O=Math.abs(u-D)<=a;l.done=k&&O}return l.value=l.done?u:D,l},toString:()=>{const A=Math.min(Om(T),hf),D=AE(N=>T.next(A*N).value,A,30);return A+"ms "+D},toTransition:()=>{}};return T}df.applyToOptions=n=>{const e=HM(n,100,df);return n.ease=e.ease,n.duration=Hr(e.duration),n.type="keyframes",n};function Sv({keyframes:n,velocity:e=0,power:t=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:o=500,modifyTarget:u,min:l,max:c,restDelta:h=.5,restSpeed:d}){const v=n[0],m={done:!1,value:v},g=k=>l!==void 0&&k<l||c!==void 0&&k>c,x=k=>l===void 0?c:c===void 0||Math.abs(l-k)<Math.abs(c-k)?l:c;let E=t*e;const w=v+E,C=u===void 0?w:u(w);C!==w&&(E=C-v);const S=k=>-E*Math.exp(-k/r),_=k=>C+S(k),T=k=>{const O=S(k),B=_(k);m.done=Math.abs(O)<=h,m.value=m.done?C:B};let A,D;const N=k=>{g(m.value)&&(A=k,D=df({keyframes:[m.value,x(m.value)],velocity:DE(_,k,m.value),damping:a,stiffness:o,restDelta:h,restSpeed:d}))};return N(0),{calculatedDuration:null,next:k=>{let O=!1;return!D&&A===void 0&&(O=!0,T(k),N(k)),A!==void 0&&k>=A?D.next(k-A):(!O&&T(k),m)}}}function QM(n,e,t){const r=[],a=t||Ca.mix||RE,o=n.length-1;for(let u=0;u<o;u++){let l=a(n[u],n[u+1]);if(e){const c=Array.isArray(e)?e[u]||dr:e;l=al(c,l)}r.push(l)}return r}function ZM(n,e,{clamp:t=!0,ease:r,mixer:a}={}){const o=n.length;if(Cm(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const u=n[0]===n[1];n[0]>n[o-1]&&(n=[...n].reverse(),e=[...e].reverse());const l=QM(e,r,a),c=l.length,h=d=>{if(u&&d<n[0])return e[0];let v=0;if(c>1)for(;v<n.length-2&&!(d<n[v+1]);v++);const m=zu(n[v],n[v+1],d);return l[v](m)};return t?d=>h(Ea(n[0],n[o-1],d)):h}function JM(n,e){const t=n[n.length-1];for(let r=1;r<=e;r++){const a=zu(0,e,r);n.push(be(t,1,a))}}function $M(n){const e=[0];return JM(e,n.length-1),e}function tN(n,e){return n.map(t=>t*e)}function eN(n,e){return n.map(()=>e||mE).splice(0,n.length-1)}function Nu({duration:n=300,keyframes:e,times:t,ease:r="easeInOut"}){const a=hM(r)?r.map(fx):fx(r),o={done:!1,value:e[0]},u=tN(t&&t.length===e.length?t:$M(e),n),l=ZM(u,e,{ease:Array.isArray(a)?a:eN(e,a)});return{calculatedDuration:n,next:c=>(o.value=l(c),o.done=c>=n,o)}}const nN=n=>n!==null;function km(n,{repeat:e,repeatType:t="loop"},r,a=1){const o=n.filter(nN),l=a<0||e&&t!=="loop"&&e%2===1?0:o.length-1;return!l||r===void 0?o[l]:r}const rN={decay:Sv,inertia:Sv,tween:Nu,keyframes:Nu,spring:df};function ME(n){typeof n.type=="string"&&(n.type=rN[n.type])}class Im{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const aN=n=>n/100;class Bm extends Im{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:t}=this.options;t&&t.updatedAt!==Mn.now()&&this.tick(Mn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;ME(e);const{type:t=Nu,repeat:r=0,repeatDelay:a=0,repeatType:o,velocity:u=0}=e;let{keyframes:l}=e;const c=t||Nu;c!==Nu&&typeof l[0]!="number"&&(this.mixKeyframes=al(aN,RE(l[0],l[1])),l=[0,100]);const h=c({...e,keyframes:l});o==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...l].reverse(),velocity:-u})),h.calculatedDuration===null&&(h.calculatedDuration=Om(h));const{calculatedDuration:d}=h;this.calculatedDuration=d,this.resolvedDuration=d+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=h}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:a,mixKeyframes:o,mirroredGenerator:u,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:h=0,keyframes:d,repeat:v,repeatType:m,repeatDelay:g,type:x,onUpdate:E,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const C=this.currentTime-h*(this.playbackSpeed>=0?1:-1),S=this.playbackSpeed>=0?C<0:C>a;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let _=this.currentTime,T=r;if(v){const k=Math.min(this.currentTime,a)/l;let O=Math.floor(k),B=k%1;!B&&k>=1&&(B=1),B===1&&O--,O=Math.min(O,v+1),!!(O%2)&&(m==="reverse"?(B=1-B,g&&(B-=g/l)):m==="mirror"&&(T=u)),_=Ea(0,1,B)*l}const A=S?{done:!1,value:d[0]}:T.next(_);o&&(A.value=o(A.value));let{done:D}=A;!S&&c!==null&&(D=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return N&&x!==Sv&&(A.value=km(d,this.options,w,this.speed)),E&&E(A.value),N&&this.finish(),A}then(e,t){return this.finished.then(e,t)}get duration(){return fr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fr(e)}get time(){return fr(this.currentTime)}set time(e){e=Hr(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Mn.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=fr(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=VM,startTime:t}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Mn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function iN(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const ji=n=>n*180/Math.PI,_v=n=>{const e=ji(Math.atan2(n[1],n[0]));return Tv(e)},oN={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate:_v,rotateZ:_v,skewX:n=>ji(Math.atan(n[1])),skewY:n=>ji(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},Tv=n=>(n=n%360,n<0&&(n+=360),n),gx=_v,yx=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),bx=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),sN={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:yx,scaleY:bx,scale:n=>(yx(n)+bx(n))/2,rotateX:n=>Tv(ji(Math.atan2(n[6],n[5]))),rotateY:n=>Tv(ji(Math.atan2(-n[2],n[0]))),rotateZ:gx,rotate:gx,skewX:n=>ji(Math.atan(n[4])),skewY:n=>ji(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function Rv(n){return n.includes("scale")?1:0}function Av(n,e){if(!n||n==="none")return Rv(e);const t=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(t)r=sN,a=t;else{const l=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=oN,a=l}if(!a)return Rv(e);const o=r[e],u=a[1].split(",").map(lN);return typeof o=="function"?o(u):u[o]}const uN=(n,e)=>{const{transform:t="none"}=getComputedStyle(n);return Av(t,e)};function lN(n){return parseFloat(n.trim())}const _s=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ts=new Set(_s),xx=n=>n===Ss||n===Ot,cN=new Set(["x","y","z"]),fN=_s.filter(n=>!cN.has(n));function hN(n){const e=[];return fN.forEach(t=>{const r=n.getValue(t);r!==void 0&&(e.push([t,r.get()]),r.set(t.startsWith("scale")?1:0))}),e}const Ki={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>Av(e,"x"),y:(n,{transform:e})=>Av(e,"y")};Ki.translateX=Ki.x;Ki.translateY=Ki.y;const Xi=new Set;let Dv=!1,Mv=!1,Nv=!1;function NE(){if(Mv){const n=Array.from(Xi).filter(r=>r.needsMeasurement),e=new Set(n.map(r=>r.element)),t=new Map;e.forEach(r=>{const a=hN(r);a.length&&(t.set(r,a),r.render())}),n.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const a=t.get(r);a&&a.forEach(([o,u])=>{r.getValue(o)?.set(u)})}),n.forEach(r=>r.measureEndState()),n.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Mv=!1,Dv=!1,Xi.forEach(n=>n.complete(Nv)),Xi.clear()}function OE(){Xi.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(Mv=!0)})}function dN(){Nv=!0,OE(),NE(),Nv=!1}class Fm{constructor(e,t,r,a,o,u=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=a,this.element=o,this.isAsync=u}scheduleResolve(){this.state="scheduled",this.isAsync?(Xi.add(this),Dv||(Dv=!0,ge.read(OE),ge.resolveKeyframes(NE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:a}=this;if(e[0]===null){const o=a?.get(),u=e[e.length-1];if(o!==void 0)e[0]=o;else if(r&&t){const l=r.readValue(t,u);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=u),a&&o===void 0&&a.set(e[0])}iN(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Xi.delete(this)}cancel(){this.state==="scheduled"&&(Xi.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const pN=n=>n.startsWith("--");function vN(n,e,t){pN(e)?n.style.setProperty(e,t):n.style[e]=t}const mN=Sm(()=>window.ScrollTimeline!==void 0),gN={};function yN(n,e){const t=Sm(n);return()=>gN[e]??t()}const kE=yN(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Du=([n,e,t,r])=>`cubic-bezier(${n}, ${e}, ${t}, ${r})`,wx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Du([0,.65,.55,1]),circOut:Du([.55,0,1,.45]),backIn:Du([.31,.01,.66,-.59]),backOut:Du([.33,1.53,.69,.99])};function IE(n,e){if(n)return typeof n=="function"?kE()?AE(n,e):"ease-out":gE(n)?Du(n):Array.isArray(n)?n.map(t=>IE(t,e)||wx.easeOut):wx[n]}function bN(n,e,t,{delay:r=0,duration:a=300,repeat:o=0,repeatType:u="loop",ease:l="easeOut",times:c}={},h=void 0){const d={[e]:t};c&&(d.offset=c);const v=IE(l,a);Array.isArray(v)&&(d.easing=v);const m={delay:r,duration:a,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:o+1,direction:u==="reverse"?"alternate":"normal"};return h&&(m.pseudoElement=h),n.animate(d,m)}function BE(n){return typeof n=="function"&&"applyToOptions"in n}function xN({type:n,...e}){return BE(n)&&kE()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class wN extends Im{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:a,pseudoElement:o,allowFlatten:u=!1,finalKeyframe:l,onComplete:c}=e;this.isPseudoElement=!!o,this.allowFlatten=u,this.options=e,Cm(typeof e.type!="string");const h=xN(e);this.animation=bN(t,r,a,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const d=km(a,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):vN(t,r,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return fr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+fr(e)}get time(){return fr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Hr(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&mN()?(this.animation.timeline=e,dr):t(this)}}const FE={anticipate:dE,backInOut:hE,circInOut:vE};function EN(n){return n in FE}function CN(n){typeof n.ease=="string"&&EN(n.ease)&&(n.ease=FE[n.ease])}const Ex=10;class SN extends wN{constructor(e){CN(e),ME(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:a,element:o,...u}=this.options;if(!t)return;if(e!==void 0){t.set(e);return}const l=new Bm({...u,autoplay:!1}),c=Hr(this.finishedTime??this.time);t.setWithVelocity(l.sample(c-Ex).value,l.sample(c).value,Ex),l.stop()}}const Cx=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(hi.test(n)||n==="0")&&!n.startsWith("url("));function _N(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function TN(n,e,t,r){const a=n[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const o=n[n.length-1],u=Cx(a,e),l=Cx(o,e);return!u||!l?!1:_N(n)||(t==="spring"||BE(t))&&r}function Ov(n){n.duration=0,n.type="keyframes"}const RN=new Set(["opacity","clipPath","filter","transform"]),AN=Sm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function DN(n){const{motionValue:e,name:t,repeatDelay:r,repeatType:a,damping:o,type:u}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=e.owner.getProps();return AN()&&t&&RN.has(t)&&(t!=="transform"||!h)&&!c&&!r&&a!=="mirror"&&o!==0&&u!=="inertia"}const MN=40;class NN extends Im{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:u="loop",keyframes:l,name:c,motionValue:h,element:d,...v}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Mn.now();const m={autoplay:e,delay:t,type:r,repeat:a,repeatDelay:o,repeatType:u,name:c,motionValue:h,element:d,...v},g=d?.KeyframeResolver||Fm;this.keyframeResolver=new g(l,(x,E,w)=>this.onKeyframesResolved(x,E,m,!w),c,h,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,a){this.keyframeResolver=void 0;const{name:o,type:u,velocity:l,delay:c,isHandoff:h,onUpdate:d}=r;this.resolvedAt=Mn.now(),TN(e,o,u,l)||((Ca.instantAnimations||!c)&&d?.(km(e,r,t)),e[0]=e[e.length-1],Ov(r),r.repeat=0);const m={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>MN?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},g=!h&&DN(m)?new SN({...m,element:m.motionValue.owner.current}):new Bm(m);g.finished.then(()=>this.notifyFinished()).catch(dr),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),dN()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const ON=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function kN(n){const e=ON.exec(n);if(!e)return[,];const[,t,r,a]=e;return[`--${t??r}`,a]}function LE(n,e,t=1){const[r,a]=kN(n);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const u=o.trim();return aE(u)?parseFloat(u):u}return Am(a)?LE(a,e,t+1):a}function Lm(n,e){return n?.[e]??n?.default??n}const PE=new Set(["width","height","top","left","right","bottom",..._s]),IN={test:n=>n==="auto",parse:n=>n},zE=n=>e=>e.test(n),UE=[Ss,Ot,Gr,ri,_M,SM,IN],Sx=n=>UE.find(zE(n));function BN(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||oE(n):!0}const FN=new Set(["brightness","contrast","saturate","opacity"]);function LN(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[r]=t.match(Dm)||[];if(!r)return n;const a=t.replace(r,"");let o=FN.has(e)?1:0;return r!==t&&(o*=100),e+"("+o+a+")"}const PN=/\b([a-z-]*)\(.*?\)/gu,kv={...hi,getAnimatableNone:n=>{const e=n.match(PN);return e?e.map(LN).join(" "):n}},_x={...Ss,transform:Math.round},zN={rotate:ri,rotateX:ri,rotateY:ri,rotateZ:ri,scale:zc,scaleX:zc,scaleY:zc,scaleZ:zc,skew:ri,skewX:ri,skewY:ri,distance:Ot,translateX:Ot,translateY:Ot,translateZ:Ot,x:Ot,y:Ot,z:Ot,perspective:Ot,transformPerspective:Ot,opacity:Uu,originX:hx,originY:hx,originZ:Ot},Pm={borderWidth:Ot,borderTopWidth:Ot,borderRightWidth:Ot,borderBottomWidth:Ot,borderLeftWidth:Ot,borderRadius:Ot,radius:Ot,borderTopLeftRadius:Ot,borderTopRightRadius:Ot,borderBottomRightRadius:Ot,borderBottomLeftRadius:Ot,width:Ot,maxWidth:Ot,height:Ot,maxHeight:Ot,top:Ot,right:Ot,bottom:Ot,left:Ot,padding:Ot,paddingTop:Ot,paddingRight:Ot,paddingBottom:Ot,paddingLeft:Ot,margin:Ot,marginTop:Ot,marginRight:Ot,marginBottom:Ot,marginLeft:Ot,backgroundPositionX:Ot,backgroundPositionY:Ot,...zN,zIndex:_x,fillOpacity:Uu,strokeOpacity:Uu,numOctaves:_x},UN={...Pm,color:Be,backgroundColor:Be,outlineColor:Be,fill:Be,stroke:Be,borderColor:Be,borderTopColor:Be,borderRightColor:Be,borderBottomColor:Be,borderLeftColor:Be,filter:kv,WebkitFilter:kv},VE=n=>UN[n];function HE(n,e){let t=VE(n);return t!==kv&&(t=hi),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const VN=new Set(["auto","none","0"]);function HN(n,e,t){let r=0,a;for(;r<n.length&&!a;){const o=n[r];typeof o=="string"&&!VN.has(o)&&Vu(o).values.length&&(a=n[r]),r++}if(a&&t)for(const o of e)n[o]=HE(t,a)}class GN extends Fm{constructor(e,t,r,a,o){super(e,t,r,a,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let h=e[c];if(typeof h=="string"&&(h=h.trim(),Am(h))){const d=LE(h,t.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!PE.has(r)||e.length!==2)return;const[a,o]=e,u=Sx(a),l=Sx(o);if(u!==l)if(xx(u)&&xx(l))for(let c=0;c<e.length;c++){const h=e[c];typeof h=="string"&&(e[c]=parseFloat(h))}else Ki[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let a=0;a<e.length;a++)(e[a]===null||BN(e[a]))&&r.push(a);r.length&&HN(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ki[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const a=t[t.length-1];a!==void 0&&e.getValue(r,a).jump(a,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const a=e.getValue(t);a&&a.jump(this.measuredOrigin,!1);const o=r.length-1,u=r[o];r[o]=Ki[t](e.measureViewportBox(),window.getComputedStyle(e.current)),u!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=u),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function jN(n,e,t){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let r=document;const a=t?.[n]??r.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}const GE=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function WN(n){return iE(n)&&"offsetHeight"in n}const Tx=30,qN=n=>!isNaN(parseFloat(n));class KN{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const a=Mn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=Mn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=qN(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new _m);const r=this.events[e].add(t);return e==="change"?()=>{r(),ge.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Mn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Tx)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,Tx);return sE(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gs(n,e){return new KN(n,e)}const{schedule:zm}=yE(queueMicrotask,!1),Er={x:!1,y:!1};function jE(){return Er.x||Er.y}function XN(n){return n==="x"||n==="y"?Er[n]?null:(Er[n]=!0,()=>{Er[n]=!1}):Er.x||Er.y?null:(Er.x=Er.y=!0,()=>{Er.x=Er.y=!1})}function WE(n,e){const t=jN(n),r=new AbortController,a={passive:!0,...e,signal:r.signal};return[t,a,()=>r.abort()]}function Rx(n){return!(n.pointerType==="touch"||jE())}function YN(n,e,t={}){const[r,a,o]=WE(n,t),u=l=>{if(!Rx(l))return;const{target:c}=l,h=e(c,l);if(typeof h!="function"||!c)return;const d=v=>{Rx(v)&&(h(v),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,a)};return r.forEach(l=>{l.addEventListener("pointerenter",u,a)}),o}const qE=(n,e)=>e?n===e?!0:qE(n,e.parentElement):!1,Um=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,QN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function ZN(n){return QN.has(n.tagName)||n.tabIndex!==-1}const af=new WeakSet;function Ax(n){return e=>{e.key==="Enter"&&n(e)}}function Bp(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const JN=(n,e)=>{const t=n.currentTarget;if(!t)return;const r=Ax(()=>{if(af.has(t))return;Bp(t,"down");const a=Ax(()=>{Bp(t,"up")}),o=()=>Bp(t,"cancel");t.addEventListener("keyup",a,e),t.addEventListener("blur",o,e)});t.addEventListener("keydown",r,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",r),e)};function Dx(n){return Um(n)&&!jE()}function $N(n,e,t={}){const[r,a,o]=WE(n,t),u=l=>{const c=l.currentTarget;if(!Dx(l))return;af.add(c);const h=e(c,l),d=(g,x)=>{window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",m),af.has(c)&&af.delete(c),Dx(g)&&typeof h=="function"&&h(g,{success:x})},v=g=>{d(g,c===window||c===document||t.useGlobalTarget||qE(c,g.target))},m=g=>{d(g,!1)};window.addEventListener("pointerup",v,a),window.addEventListener("pointercancel",m,a)};return r.forEach(l=>{(t.useGlobalTarget?window:l).addEventListener("pointerdown",u,a),WN(l)&&(l.addEventListener("focus",h=>JN(h,a)),!ZN(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),o}function KE(n){return iE(n)&&"ownerSVGElement"in n}function t3(n){return KE(n)&&n.tagName==="svg"}const pn=n=>!!(n&&n.getVelocity),e3=[...UE,Be,hi],n3=n=>e3.find(zE(n)),XE=Y.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function r3(n=!0){const e=Y.useContext(xm);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:r,register:a}=e,o=Y.useId();Y.useEffect(()=>{if(n)return a(o)},[n]);const u=Y.useCallback(()=>n&&r&&r(o),[o,r,n]);return!t&&r?[!1,u]:[!0]}const YE=Y.createContext({strict:!1}),Mx={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ys={};for(const n in Mx)ys[n]={isEnabled:e=>Mx[n].some(t=>!!e[t])};function a3(n){for(const e in n)ys[e]={...ys[e],...n[e]}}const i3=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pf(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||i3.has(n)}let QE=n=>!pf(n);function o3(n){typeof n=="function"&&(QE=e=>e.startsWith("on")?!pf(e):n(e))}try{o3(require("@emotion/is-prop-valid").default)}catch{}function s3(n,e,t){const r={};for(const a in n)a==="values"&&typeof n.values=="object"||(QE(a)||t===!0&&pf(a)||!e&&!pf(a)||n.draggable&&a.startsWith("onDrag"))&&(r[a]=n[a]);return r}const Hf=Y.createContext({});function Gf(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function Hu(n){return typeof n=="string"||Array.isArray(n)}const Vm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Hm=["initial",...Vm];function jf(n){return Gf(n.animate)||Hm.some(e=>Hu(n[e]))}function ZE(n){return!!(jf(n)||n.variants)}function u3(n,e){if(jf(n)){const{initial:t,animate:r}=n;return{initial:t===!1||Hu(t)?t:void 0,animate:Hu(r)?r:void 0}}return n.inherit!==!1?e:{}}function l3(n){const{initial:e,animate:t}=u3(n,Y.useContext(Hf));return Y.useMemo(()=>({initial:e,animate:t}),[Nx(e),Nx(t)])}function Nx(n){return Array.isArray(n)?n.join(" "):n}function Ox(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Su={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ot.test(n))n=parseFloat(n);else return n;const t=Ox(n,e.target.x),r=Ox(n,e.target.y);return`${t}% ${r}%`}},c3={correct:(n,{treeScale:e,projectionDelta:t})=>{const r=n,a=hi.parse(n);if(a.length>5)return r;const o=hi.createTransformer(n),u=typeof a[0]!="number"?1:0,l=t.x.scale*e.x,c=t.y.scale*e.y;a[0+u]/=l,a[1+u]/=c;const h=be(l,c,.5);return typeof a[2+u]=="number"&&(a[2+u]/=h),typeof a[3+u]=="number"&&(a[3+u]/=h),o(a)}},Iv={borderRadius:{...Su,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Su,borderTopRightRadius:Su,borderBottomLeftRadius:Su,borderBottomRightRadius:Su,boxShadow:c3};function JE(n,{layout:e,layoutId:t}){return Ts.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!Iv[n]||n==="opacity")}const f3={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},h3=_s.length;function d3(n,e,t){let r="",a=!0;for(let o=0;o<h3;o++){const u=_s[o],l=n[u];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(u.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||t){const h=GE(l,Pm[u]);if(!c){a=!1;const d=f3[u]||u;r+=`${d}(${h}) `}t&&(e[u]=h)}}return r=r.trim(),t?r=t(e,a?"":r):a&&(r="none"),r}function Gm(n,e,t){const{style:r,vars:a,transformOrigin:o}=n;let u=!1,l=!1;for(const c in e){const h=e[c];if(Ts.has(c)){u=!0;continue}else if(xE(c)){a[c]=h;continue}else{const d=GE(h,Pm[c]);c.startsWith("origin")?(l=!0,o[c]=d):r[c]=d}}if(e.transform||(u||t?r.transform=d3(e,n.transform,t):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:h="50%",originZ:d=0}=o;r.transformOrigin=`${c} ${h} ${d}`}}const jm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function $E(n,e,t){for(const r in e)!pn(e[r])&&!JE(r,t)&&(n[r]=e[r])}function p3({transformTemplate:n},e){return Y.useMemo(()=>{const t=jm();return Gm(t,e,n),Object.assign({},t.vars,t.style)},[e])}function v3(n,e){const t=n.style||{},r={};return $E(r,t,n),Object.assign(r,p3(n,e)),r}function m3(n,e){const t={},r=v3(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=r,t}const g3={offset:"stroke-dashoffset",array:"stroke-dasharray"},y3={offset:"strokeDashoffset",array:"strokeDasharray"};function b3(n,e,t=1,r=0,a=!0){n.pathLength=1;const o=a?g3:y3;n[o.offset]=Ot.transform(-r);const u=Ot.transform(e),l=Ot.transform(t);n[o.array]=`${u} ${l}`}function tC(n,{attrX:e,attrY:t,attrScale:r,pathLength:a,pathSpacing:o=1,pathOffset:u=0,...l},c,h,d){if(Gm(n,l,h),c){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:v,style:m}=n;v.transform&&(m.transform=v.transform,delete v.transform),(m.transform||v.transformOrigin)&&(m.transformOrigin=v.transformOrigin??"50% 50%",delete v.transformOrigin),m.transform&&(m.transformBox=d?.transformBox??"fill-box",delete v.transformBox),e!==void 0&&(v.x=e),t!==void 0&&(v.y=t),r!==void 0&&(v.scale=r),a!==void 0&&b3(v,a,o,u,!1)}const eC=()=>({...jm(),attrs:{}}),nC=n=>typeof n=="string"&&n.toLowerCase()==="svg";function x3(n,e,t,r){const a=Y.useMemo(()=>{const o=eC();return tC(o,e,nC(r),n.transformTemplate,n.style),{...o.attrs,style:{...o.style}}},[e]);if(n.style){const o={};$E(o,n.style,n),a.style={...o,...a.style}}return a}const w3=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Wm(n){return typeof n!="string"||n.includes("-")?!1:!!(w3.indexOf(n)>-1||/[A-Z]/u.test(n))}function E3(n,e,t,{latestValues:r},a,o=!1){const l=(Wm(n)?x3:m3)(e,r,a,n),c=s3(e,typeof n=="string",o),h=n!==Y.Fragment?{...c,...l,ref:t}:{},{children:d}=e,v=Y.useMemo(()=>pn(d)?d.get():d,[d]);return Y.createElement(n,{...h,children:v})}function kx(n){const e=[{},{}];return n?.values.forEach((t,r)=>{e[0][r]=t.get(),e[1][r]=t.getVelocity()}),e}function qm(n,e,t,r){if(typeof e=="function"){const[a,o]=kx(r);e=e(t!==void 0?t:n.custom,a,o)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[a,o]=kx(r);e=e(t!==void 0?t:n.custom,a,o)}return e}function of(n){return pn(n)?n.get():n}function C3({scrapeMotionValuesFromProps:n,createRenderState:e},t,r,a){return{latestValues:S3(t,r,a,n),renderState:e()}}function S3(n,e,t,r){const a={},o=r(n,{});for(const m in o)a[m]=of(o[m]);let{initial:u,animate:l}=n;const c=jf(n),h=ZE(n);e&&h&&!c&&n.inherit!==!1&&(u===void 0&&(u=e.initial),l===void 0&&(l=e.animate));let d=t?t.initial===!1:!1;d=d||u===!1;const v=d?l:u;if(v&&typeof v!="boolean"&&!Gf(v)){const m=Array.isArray(v)?v:[v];for(let g=0;g<m.length;g++){const x=qm(n,m[g]);if(x){const{transitionEnd:E,transition:w,...C}=x;for(const S in C){let _=C[S];if(Array.isArray(_)){const T=d?_.length-1:0;_=_[T]}_!==null&&(a[S]=_)}for(const S in E)a[S]=E[S]}}}return a}const rC=n=>(e,t)=>{const r=Y.useContext(Hf),a=Y.useContext(xm),o=()=>C3(n,e,r,a);return t?o():aM(o)};function Km(n,e,t){const{style:r}=n,a={};for(const o in r)(pn(r[o])||e.style&&pn(e.style[o])||JE(o,n)||t?.getValue(o)?.liveStyle!==void 0)&&(a[o]=r[o]);return a}const _3=rC({scrapeMotionValuesFromProps:Km,createRenderState:jm});function aC(n,e,t){const r=Km(n,e,t);for(const a in n)if(pn(n[a])||pn(e[a])){const o=_s.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[o]=n[a]}return r}const T3=rC({scrapeMotionValuesFromProps:aC,createRenderState:eC}),R3=Symbol.for("motionComponentSymbol");function rs(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function A3(n,e,t){return Y.useCallback(r=>{r&&n.onMount&&n.onMount(r),e&&(r?e.mount(r):e.unmount()),t&&(typeof t=="function"?t(r):rs(t)&&(t.current=r))},[e])}const Xm=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),D3="framerAppearId",iC="data-"+Xm(D3),oC=Y.createContext({});function M3(n,e,t,r,a){const{visualElement:o}=Y.useContext(Hf),u=Y.useContext(YE),l=Y.useContext(xm),c=Y.useContext(XE).reducedMotion,h=Y.useRef(null);r=r||u.renderer,!h.current&&r&&(h.current=r(n,{visualState:e,parent:o,props:t,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=h.current,v=Y.useContext(oC);d&&!d.projection&&a&&(d.type==="html"||d.type==="svg")&&N3(h.current,t,a,v);const m=Y.useRef(!1);Y.useInsertionEffect(()=>{d&&m.current&&d.update(t,l)});const g=t[iC],x=Y.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return iM(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),x.current&&d.animationState&&d.animationState.animateChanges())}),Y.useEffect(()=>{d&&(!x.current&&d.animationState&&d.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),x.current=!1),d.enteringChildren=void 0)}),d}function N3(n,e,t,r){const{layoutId:a,layout:o,drag:u,dragConstraints:l,layoutScroll:c,layoutRoot:h,layoutCrossfade:d}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:sC(n.parent)),n.projection.setOptions({layoutId:a,layout:o,alwaysMeasureLayout:!!u||l&&rs(l),visualElement:n,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:h})}function sC(n){if(n)return n.options.allowProjection!==!1?n.projection:sC(n.parent)}function Fp(n,{forwardMotionProps:e=!1}={},t,r){t&&a3(t);const a=Wm(n)?T3:_3;function o(l,c){let h;const d={...Y.useContext(XE),...l,layoutId:O3(l)},{isStatic:v}=d,m=l3(l),g=a(l,v);if(!v&&bm){k3();const x=I3(d);h=x.MeasureLayout,m.visualElement=M3(n,g,d,r,x.ProjectionNode)}return Et.jsxs(Hf.Provider,{value:m,children:[h&&m.visualElement?Et.jsx(h,{visualElement:m.visualElement,...d}):null,E3(n,l,A3(g,m.visualElement,c),g,v,e)]})}o.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const u=Y.forwardRef(o);return u[R3]=n,u}function O3({layoutId:n}){const e=Y.useContext(rE).id;return e&&n!==void 0?e+"-"+n:n}function k3(n,e){Y.useContext(YE).strict}function I3(n){const{drag:e,layout:t}=ys;if(!e&&!t)return{};const r={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function B3(n,e){if(typeof Proxy>"u")return Fp;const t=new Map,r=(o,u)=>Fp(o,u,n,e),a=(o,u)=>r(o,u);return new Proxy(a,{get:(o,u)=>u==="create"?r:(t.has(u)||t.set(u,Fp(u,void 0,n,e)),t.get(u))})}function uC({top:n,left:e,right:t,bottom:r}){return{x:{min:e,max:t},y:{min:n,max:r}}}function F3({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function L3(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),r=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:r.y,right:r.x}}function Lp(n){return n===void 0||n===1}function Bv({scale:n,scaleX:e,scaleY:t}){return!Lp(n)||!Lp(e)||!Lp(t)}function zi(n){return Bv(n)||lC(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function lC(n){return Ix(n.x)||Ix(n.y)}function Ix(n){return n&&n!=="0%"}function vf(n,e,t){const r=n-t,a=e*r;return t+a}function Bx(n,e,t,r,a){return a!==void 0&&(n=vf(n,a,r)),vf(n,t,r)+e}function Fv(n,e=0,t=1,r,a){n.min=Bx(n.min,e,t,r,a),n.max=Bx(n.max,e,t,r,a)}function cC(n,{x:e,y:t}){Fv(n.x,e.translate,e.scale,e.originPoint),Fv(n.y,t.translate,t.scale,t.originPoint)}const Fx=.999999999999,Lx=1.0000000000001;function P3(n,e,t,r=!1){const a=t.length;if(!a)return;e.x=e.y=1;let o,u;for(let l=0;l<a;l++){o=t[l],u=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&is(n,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),u&&(e.x*=u.x.scale,e.y*=u.y.scale,cC(n,u)),r&&zi(o.latestValues)&&is(n,o.latestValues))}e.x<Lx&&e.x>Fx&&(e.x=1),e.y<Lx&&e.y>Fx&&(e.y=1)}function as(n,e){n.min=n.min+e,n.max=n.max+e}function Px(n,e,t,r,a=.5){const o=be(n.min,n.max,a);Fv(n,e,t,o,r)}function is(n,e){Px(n.x,e.x,e.scaleX,e.scale,e.originX),Px(n.y,e.y,e.scaleY,e.scale,e.originY)}function fC(n,e){return uC(L3(n.getBoundingClientRect(),e))}function z3(n,e,t){const r=fC(n,t),{scroll:a}=e;return a&&(as(r.x,a.offset.x),as(r.y,a.offset.y)),r}const zx=()=>({translate:0,scale:1,origin:0,originPoint:0}),os=()=>({x:zx(),y:zx()}),Ux=()=>({min:0,max:0}),ze=()=>({x:Ux(),y:Ux()}),Lv={current:null},hC={current:!1};function U3(){if(hC.current=!0,!!bm)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>Lv.current=n.matches;n.addEventListener("change",e),e()}else Lv.current=!1}const V3=new WeakMap;function H3(n,e,t){for(const r in e){const a=e[r],o=t[r];if(pn(a))n.addValue(r,a);else if(pn(o))n.addValue(r,gs(a,{owner:n}));else if(o!==a)if(n.hasValue(r)){const u=n.getValue(r);u.liveStyle===!0?u.jump(a):u.hasAnimated||u.set(a)}else{const u=n.getStaticValue(r);n.addValue(r,gs(u!==void 0?u:a,{owner:n}))}}for(const r in t)e[r]===void 0&&n.removeValue(r);return e}const Vx=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class G3{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:o,visualState:u},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Fm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Mn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,ge.render(this.render,!1,!0))};const{latestValues:c,renderState:h}=u;this.latestValues=c,this.baseTarget={...c},this.initialValues=t.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=jf(t),this.isVariantNode=ZE(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...v}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in v){const g=v[m];c[m]!==void 0&&pn(g)&&g.set(c[m])}}mount(e){this.current=e,V3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,r)=>this.bindToMotionValue(r,t)),hC.current||U3(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Lv.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fi(this.notifyUpdate),fi(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Ts.has(e);r&&this.onBindTransform&&this.onBindTransform();const a=t.on("change",u=>{this.latestValues[e]=u,this.props.onUpdate&&ge.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{a(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in ys){const t=ys[e];if(!t)continue;const{isEnabled:r,Feature:a}=t;if(!this.features[e]&&a&&r(this.props)&&(this.features[e]=new a(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ze()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<Vx.length;r++){const a=Vx[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const o="on"+a,u=e[o];u&&(this.propEventSubscriptions[a]=this.on(a,u))}this.prevMotionValues=H3(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&t!==void 0&&(r=gs(t===null?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(aE(r)||oE(r))?r=parseFloat(r):!n3(r)&&hi.test(t)&&(r=HE(e,t)),this.setBaseTarget(e,pn(r)?r.get():r)),pn(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if(typeof t=="string"||typeof t=="object"){const o=qm(this.props,t,this.presenceContext?.custom);o&&(r=o[e])}if(t&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!pn(a)?a:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new _m),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}scheduleRenderMicrotask(){zm.render(this.render)}}class dC extends G3{constructor(){super(...arguments),this.KeyframeResolver=GN}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;pn(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function pC(n,{style:e,vars:t},r,a){const o=n.style;let u;for(u in e)o[u]=e[u];a?.applyProjectionStyles(o,r);for(u in t)o.setProperty(u,t[u])}function j3(n){return window.getComputedStyle(n)}class W3 extends dC{constructor(){super(...arguments),this.type="html",this.renderInstance=pC}readValueFromInstance(e,t){if(Ts.has(t))return this.projection?.isProjecting?Rv(t):uN(e,t);{const r=j3(e),a=(xE(t)?r.getPropertyValue(t):r[t])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:t}){return fC(e,t)}build(e,t,r){Gm(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return Km(e,t,r)}}const vC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function q3(n,e,t,r){pC(n,e,void 0,r);for(const a in e.attrs)n.setAttribute(vC.has(a)?a:Xm(a),e.attrs[a])}class K3 extends dC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ze}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Ts.has(t)){const r=VE(t);return r&&r.default||0}return t=vC.has(t)?t:Xm(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return aC(e,t,r)}build(e,t,r){tC(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,a){q3(e,t,r,a)}mount(e){this.isSVGTag=nC(e.tagName),super.mount(e)}}const X3=(n,e)=>Wm(n)?new K3(e):new W3(e,{allowProjection:n!==Y.Fragment});function ls(n,e,t){const r=n.getProps();return qm(r,e,t!==void 0?t:r.custom,n)}const Pv=n=>Array.isArray(n);function Y3(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,gs(t))}function Q3(n){return Pv(n)?n[n.length-1]||0:n}function Z3(n,e){const t=ls(n,e);let{transitionEnd:r={},transition:a={},...o}=t||{};o={...o,...r};for(const u in o){const l=Q3(o[u]);Y3(n,u,l)}}function J3(n){return!!(pn(n)&&n.add)}function zv(n,e){const t=n.getValue("willChange");if(J3(t))return t.add(e);if(!t&&Ca.WillChange){const r=new Ca.WillChange("auto");n.addValue("willChange",r),r.add(e)}}function mC(n){return n.props[iC]}const $3=n=>n!==null;function tO(n,{repeat:e,repeatType:t="loop"},r){const a=n.filter($3),o=e&&t!=="loop"&&e%2===1?0:a.length-1;return a[o]}const eO={type:"spring",stiffness:500,damping:25,restSpeed:10},nO=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),rO={type:"keyframes",duration:.8},aO={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},iO=(n,{keyframes:e})=>e.length>2?rO:Ts.has(n)?n.startsWith("scale")?nO(e[1]):eO:aO;function oO({when:n,delay:e,delayChildren:t,staggerChildren:r,staggerDirection:a,repeat:o,repeatType:u,repeatDelay:l,from:c,elapsed:h,...d}){return!!Object.keys(d).length}const Ym=(n,e,t,r={},a,o)=>u=>{const l=Lm(r,n)||{},c=l.delay||r.delay||0;let{elapsed:h=0}=r;h=h-Hr(c);const d={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-h,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{u(),l.onComplete&&l.onComplete()},name:n,motionValue:e,element:o?void 0:a};oO(l)||Object.assign(d,iO(n,d)),d.duration&&(d.duration=Hr(d.duration)),d.repeatDelay&&(d.repeatDelay=Hr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let v=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Ov(d),d.delay===0&&(v=!0)),(Ca.instantAnimations||Ca.skipAnimations)&&(v=!0,Ov(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,v&&!o&&e.get()!==void 0){const m=tO(d.keyframes,l);if(m!==void 0){ge.update(()=>{d.onUpdate(m),d.onComplete()});return}}return l.isSync?new Bm(d):new NN(d)};function sO({protectedKeys:n,needsAnimating:e},t){const r=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,r}function gC(n,e,{delay:t=0,transitionOverride:r,type:a}={}){let{transition:o=n.getDefaultTransition(),transitionEnd:u,...l}=e;r&&(o=r);const c=[],h=a&&n.animationState&&n.animationState.getState()[a];for(const d in l){const v=n.getValue(d,n.latestValues[d]??null),m=l[d];if(m===void 0||h&&sO(h,d))continue;const g={delay:t,...Lm(o||{},d)},x=v.get();if(x!==void 0&&!v.isAnimating&&!Array.isArray(m)&&m===x&&!g.velocity)continue;let E=!1;if(window.MotionHandoffAnimation){const C=mC(n);if(C){const S=window.MotionHandoffAnimation(C,d,ge);S!==null&&(g.startTime=S,E=!0)}}zv(n,d),v.start(Ym(d,v,m,n.shouldReduceMotion&&PE.has(d)?{type:!1}:g,n,E));const w=v.animation;w&&c.push(w)}return u&&Promise.all(c).then(()=>{ge.update(()=>{u&&Z3(n,u)})}),c}function yC(n,e,t,r=0,a=1){const o=Array.from(n).sort((h,d)=>h.sortNodePosition(d)).indexOf(e),u=n.size,l=(u-1)*r;return typeof t=="function"?t(o,u):a===1?o*r:l-o*r}function Uv(n,e,t={}){const r=ls(n,e,t.type==="exit"?n.presenceContext?.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(a=t.transitionOverride);const o=r?()=>Promise.all(gC(n,r,t)):()=>Promise.resolve(),u=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:h=0,staggerChildren:d,staggerDirection:v}=a;return uO(n,e,c,h,d,v,t)}:()=>Promise.resolve(),{when:l}=a;if(l){const[c,h]=l==="beforeChildren"?[o,u]:[u,o];return c().then(()=>h())}else return Promise.all([o(),u(t.delay)])}function uO(n,e,t=0,r=0,a=0,o=1,u){const l=[];for(const c of n.variantChildren)c.notify("AnimationStart",e),l.push(Uv(c,e,{...u,delay:t+(typeof r=="function"?0:r)+yC(n.variantChildren,c,r,a,o)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(l)}function lO(n,e,t={}){n.notify("AnimationStart",e);let r;if(Array.isArray(e)){const a=e.map(o=>Uv(n,o,t));r=Promise.all(a)}else if(typeof e=="string")r=Uv(n,e,t);else{const a=typeof e=="function"?ls(n,e,t.custom):e;r=Promise.all(gC(n,a,t))}return r.then(()=>{n.notify("AnimationComplete",e)})}function bC(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let r=0;r<t;r++)if(e[r]!==n[r])return!1;return!0}const cO=Hm.length;function xC(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?xC(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<cO;t++){const r=Hm[t],a=n.props[r];(Hu(a)||a===!1)&&(e[r]=a)}return e}const fO=[...Vm].reverse(),hO=Vm.length;function dO(n){return e=>Promise.all(e.map(({animation:t,options:r})=>lO(n,t,r)))}function pO(n){let e=dO(n),t=Hx(),r=!0;const a=c=>(h,d)=>{const v=ls(n,d,c==="exit"?n.presenceContext?.custom:void 0);if(v){const{transition:m,transitionEnd:g,...x}=v;h={...h,...x,...g}}return h};function o(c){e=c(n)}function u(c){const{props:h}=n,d=xC(n.parent)||{},v=[],m=new Set;let g={},x=1/0;for(let w=0;w<hO;w++){const C=fO[w],S=t[C],_=h[C]!==void 0?h[C]:d[C],T=Hu(_),A=C===c?S.isActive:null;A===!1&&(x=w);let D=_===d[C]&&_!==h[C]&&T;if(D&&r&&n.manuallyAnimateOnMount&&(D=!1),S.protectedKeys={...g},!S.isActive&&A===null||!_&&!S.prevProp||Gf(_)||typeof _=="boolean")continue;const N=vO(S.prevProp,_);let k=N||C===c&&S.isActive&&!D&&T||w>x&&T,O=!1;const B=Array.isArray(_)?_:[_];let V=B.reduce(a(C),{});A===!1&&(V={});const{prevResolvedValues:U={}}=S,it={...U,...V},et=G=>{k=!0,m.has(G)&&(O=!0,m.delete(G)),S.needsAnimating[G]=!0;const q=n.getValue(G);q&&(q.liveStyle=!1)};for(const G in it){const q=V[G],nt=U[G];if(g.hasOwnProperty(G))continue;let ot=!1;Pv(q)&&Pv(nt)?ot=!bC(q,nt):ot=q!==nt,ot?q!=null?et(G):m.add(G):q!==void 0&&m.has(G)?et(G):S.protectedKeys[G]=!0}S.prevProp=_,S.prevResolvedValues=V,S.isActive&&(g={...g,...V}),r&&n.blockInitialAnimation&&(k=!1);const tt=D&&N;k&&(!tt||O)&&v.push(...B.map(G=>{const q={type:C};if(typeof G=="string"&&r&&!tt&&n.manuallyAnimateOnMount&&n.parent){const{parent:nt}=n,ot=ls(nt,G);if(nt.enteringChildren&&ot){const{delayChildren:L}=ot.transition||{};q.delay=yC(nt.enteringChildren,n,L)}}return{animation:G,options:q}}))}if(m.size){const w={};if(typeof h.initial!="boolean"){const C=ls(n,Array.isArray(h.initial)?h.initial[0]:h.initial);C&&C.transition&&(w.transition=C.transition)}m.forEach(C=>{const S=n.getBaseTarget(C),_=n.getValue(C);_&&(_.liveStyle=!0),w[C]=S??null}),v.push({animation:w})}let E=!!v.length;return r&&(h.initial===!1||h.initial===h.animate)&&!n.manuallyAnimateOnMount&&(E=!1),r=!1,E?e(v):Promise.resolve()}function l(c,h){if(t[c].isActive===h)return Promise.resolve();n.variantChildren?.forEach(v=>v.animationState?.setActive(c,h)),t[c].isActive=h;const d=u(c);for(const v in t)t[v].protectedKeys={};return d}return{animateChanges:u,setActive:l,setAnimateFunction:o,getState:()=>t,reset:()=>{t=Hx()}}}function vO(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!bC(e,n):!1}function Li(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Hx(){return{animate:Li(!0),whileInView:Li(),whileHover:Li(),whileTap:Li(),whileDrag:Li(),whileFocus:Li(),exit:Li()}}class vi{constructor(e){this.isMounted=!1,this.node=e}update(){}}class mO extends vi{constructor(e){super(e),e.animationState||(e.animationState=pO(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Gf(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let gO=0;class yO extends vi{constructor(){super(...arguments),this.id=gO++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const a=this.node.animationState.setActive("exit",!e);t&&!e&&a.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const bO={animation:{Feature:mO},exit:{Feature:yO}};function Gu(n,e,t,r={passive:!0}){return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t)}function sl(n){return{point:{x:n.pageX,y:n.pageY}}}const xO=n=>e=>Um(e)&&n(e,sl(e));function Ou(n,e,t,r){return Gu(n,e,xO(t),r)}const wC=1e-4,wO=1-wC,EO=1+wC,EC=.01,CO=0-EC,SO=0+EC;function bn(n){return n.max-n.min}function _O(n,e,t){return Math.abs(n-e)<=t}function Gx(n,e,t,r=.5){n.origin=r,n.originPoint=be(e.min,e.max,n.origin),n.scale=bn(t)/bn(e),n.translate=be(t.min,t.max,n.origin)-n.originPoint,(n.scale>=wO&&n.scale<=EO||isNaN(n.scale))&&(n.scale=1),(n.translate>=CO&&n.translate<=SO||isNaN(n.translate))&&(n.translate=0)}function ku(n,e,t,r){Gx(n.x,e.x,t.x,r?r.originX:void 0),Gx(n.y,e.y,t.y,r?r.originY:void 0)}function jx(n,e,t){n.min=t.min+e.min,n.max=n.min+bn(e)}function TO(n,e,t){jx(n.x,e.x,t.x),jx(n.y,e.y,t.y)}function Wx(n,e,t){n.min=e.min-t.min,n.max=n.min+bn(e)}function mf(n,e,t){Wx(n.x,e.x,t.x),Wx(n.y,e.y,t.y)}function ur(n){return[n("x"),n("y")]}const CC=({current:n})=>n?n.ownerDocument.defaultView:null,qx=(n,e)=>Math.abs(n-e);function RO(n,e){const t=qx(n.x,e.x),r=qx(n.y,e.y);return Math.sqrt(t**2+r**2)}class SC{constructor(e,t,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:o=!1,distanceThreshold:u=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=zp(this.lastMoveEventInfo,this.history),g=this.startEvent!==null,x=RO(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!g&&!x)return;const{point:E}=m,{timestamp:w}=rn;this.history.push({...E,timestamp:w});const{onStart:C,onMove:S}=this.handlers;g||(C&&C(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),S&&S(this.lastMoveEvent,m)},this.handlePointerMove=(m,g)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Pp(g,this.transformPagePoint),ge.update(this.updatePoint,!0)},this.handlePointerUp=(m,g)=>{this.end();const{onEnd:x,onSessionEnd:E,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=zp(m.type==="pointercancel"?this.lastMoveEventInfo:Pp(g,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,C),E&&E(m,C)},!Um(e))return;this.dragSnapToOrigin=o,this.handlers=t,this.transformPagePoint=r,this.distanceThreshold=u,this.contextWindow=a||window;const l=sl(e),c=Pp(l,this.transformPagePoint),{point:h}=c,{timestamp:d}=rn;this.history=[{...h,timestamp:d}];const{onSessionStart:v}=t;v&&v(e,zp(c,this.history)),this.removeListeners=al(Ou(this.contextWindow,"pointermove",this.handlePointerMove),Ou(this.contextWindow,"pointerup",this.handlePointerUp),Ou(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fi(this.updatePoint)}}function Pp(n,e){return e?{point:e(n.point)}:n}function Kx(n,e){return{x:n.x-e.x,y:n.y-e.y}}function zp({point:n},e){return{point:n,delta:Kx(n,_C(e)),offset:Kx(n,AO(e)),velocity:DO(e,.1)}}function AO(n){return n[0]}function _C(n){return n[n.length-1]}function DO(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,r=null;const a=_C(n);for(;t>=0&&(r=n[t],!(a.timestamp-r.timestamp>Hr(e)));)t--;if(!r)return{x:0,y:0};const o=fr(a.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const u={x:(a.x-r.x)/o,y:(a.y-r.y)/o};return u.x===1/0&&(u.x=0),u.y===1/0&&(u.y=0),u}function MO(n,{min:e,max:t},r){return e!==void 0&&n<e?n=r?be(e,n,r.min):Math.max(n,e):t!==void 0&&n>t&&(n=r?be(t,n,r.max):Math.min(n,t)),n}function Xx(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function NO(n,{top:e,left:t,bottom:r,right:a}){return{x:Xx(n.x,t,a),y:Xx(n.y,e,r)}}function Yx(n,e){let t=e.min-n.min,r=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,r]=[r,t]),{min:t,max:r}}function OO(n,e){return{x:Yx(n.x,e.x),y:Yx(n.y,e.y)}}function kO(n,e){let t=.5;const r=bn(n),a=bn(e);return a>r?t=zu(e.min,e.max-r,n.min):r>a&&(t=zu(n.min,n.max-a,e.min)),Ea(0,1,t)}function IO(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const Vv=.35;function BO(n=Vv){return n===!1?n=0:n===!0&&(n=Vv),{x:Qx(n,"left","right"),y:Qx(n,"top","bottom")}}function Qx(n,e,t){return{min:Zx(n,e),max:Zx(n,t)}}function Zx(n,e){return typeof n=="number"?n:n[e]||0}const FO=new WeakMap;class LO{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ze(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:t=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const o=v=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(sl(v).point)},u=(v,m)=>{const{drag:g,dragPropagation:x,onDragStart:E}=this.getProps();if(g&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=XN(g),!this.openDragLock))return;this.latestPointerEvent=v,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ur(C=>{let S=this.getAxisMotionValue(C).get()||0;if(Gr.test(S)){const{projection:_}=this.visualElement;if(_&&_.layout){const T=_.layout.layoutBox[C];T&&(S=bn(T)*(parseFloat(S)/100))}}this.originPoint[C]=S}),E&&ge.postRender(()=>E(v,m)),zv(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(v,m)=>{this.latestPointerEvent=v,this.latestPanInfo=m;const{dragPropagation:g,dragDirectionLock:x,onDirectionLock:E,onDrag:w}=this.getProps();if(!g&&!this.openDragLock)return;const{offset:C}=m;if(x&&this.currentDirection===null){this.currentDirection=PO(C),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",m.point,C),this.updateAxis("y",m.point,C),this.visualElement.render(),w&&w(v,m)},c=(v,m)=>{this.latestPointerEvent=v,this.latestPanInfo=m,this.stop(v,m),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>ur(v=>this.getAnimationState(v)==="paused"&&this.getAxisMotionValue(v).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new SC(e,{onSessionStart:o,onStart:u,onMove:l,onSessionEnd:c,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:CC(this.visualElement)})}stop(e,t){const r=e||this.latestPointerEvent,a=t||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!a||!r)return;const{velocity:u}=a;this.startAnimation(u);const{onDragEnd:l}=this.getProps();l&&ge.postRender(()=>l(r,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:a}=this.getProps();if(!r||!Uc(e,a,this.currentDirection))return;const o=this.getAxisMotionValue(e);let u=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(u=MO(u,this.constraints[e],this.elastic[e])),o.set(u)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&rs(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=NO(r.layoutBox,e):this.constraints=!1,this.elastic=BO(t),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ur(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=IO(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!rs(e))return!1;const r=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const o=z3(r,a.root,this.visualElement.getTransformPagePoint());let u=OO(a.layout.layoutBox,o);if(t){const l=t(F3(u));this.hasMutatedConstraints=!!l,l&&(u=uC(l))}return u}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:a,dragTransition:o,dragSnapToOrigin:u,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},h=ur(d=>{if(!Uc(d,t,this.currentDirection))return;let v=c&&c[d]||{};u&&(v={min:0,max:0});const m=a?200:1e6,g=a?40:1e7,x={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...v};return this.startAxisValueAnimation(d,x)});return Promise.all(h).then(l)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return zv(this.visualElement,e),r.start(Ym(e,r,0,t,this.visualElement,!1))}stopAnimation(){ur(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ur(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),a=r[t];return a||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ur(t=>{const{drag:r}=this.getProps();if(!Uc(t,r,this.currentDirection))return;const{projection:a}=this.visualElement,o=this.getAxisMotionValue(t);if(a&&a.layout){const{min:u,max:l}=a.layout.layoutBox[t];o.set(e[t]-be(u,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!rs(t)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};ur(u=>{const l=this.getAxisMotionValue(u);if(l&&this.constraints!==!1){const c=l.get();a[u]=kO({min:c,max:c},this.constraints[u])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ur(u=>{if(!Uc(u,e,null))return;const l=this.getAxisMotionValue(u),{min:c,max:h}=this.constraints[u];l.set(be(c,h,a[u]))})}addListeners(){if(!this.visualElement.current)return;FO.set(this.visualElement,this);const e=this.visualElement.current,t=Ou(e,"pointerdown",c=>{const{drag:h,dragListener:d=!0}=this.getProps();h&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();rs(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,o=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),ge.read(r);const u=Gu(window,"resize",()=>this.scalePositionWithinConstraints()),l=a.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(ur(d=>{const v=this.getAxisMotionValue(d);v&&(this.originPoint[d]+=c[d].translate,v.set(v.get()+c[d].translate))}),this.visualElement.render())}));return()=>{u(),t(),o(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:o=!1,dragElastic:u=Vv,dragMomentum:l=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:a,dragConstraints:o,dragElastic:u,dragMomentum:l}}}function Uc(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function PO(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class zO extends vi{constructor(e){super(e),this.removeGroupControls=dr,this.removeListeners=dr,this.controls=new LO(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||dr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Jx=n=>(e,t)=>{n&&ge.postRender(()=>n(e,t))};class UO extends vi{constructor(){super(...arguments),this.removePointerDownListener=dr}onPointerDown(e){this.session=new SC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:CC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:Jx(e),onStart:Jx(t),onMove:r,onEnd:(o,u)=>{delete this.session,a&&ge.postRender(()=>a(o,u))}}}mount(){this.removePointerDownListener=Ou(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const sf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};let Up=!1;class VO extends Y.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:a}=this.props,{projection:o}=e;o&&(t.group&&t.group.add(o),r&&r.register&&a&&r.register(o),Up&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),sf.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:a,isPresent:o}=this.props,{projection:u}=r;return u&&(u.isPresent=o,Up=!0,a||e.layoutDependency!==t||t===void 0||e.isPresent!==o?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||ge.postRender(()=>{const l=u.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),zm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:a}=e;Up=!0,a&&(a.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function TC(n){const[e,t]=r3(),r=Y.useContext(rE);return Et.jsx(VO,{...n,layoutGroup:r,switchLayoutGroup:Y.useContext(oC),isPresent:e,safeToRemove:t})}function HO(n,e,t){const r=pn(n)?n:gs(n);return r.start(Ym("",r,e,t)),r.animation}const GO=(n,e)=>n.depth-e.depth;class jO{constructor(){this.children=[],this.isDirty=!1}add(e){wm(this.children,e),this.isDirty=!0}remove(e){Em(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(GO),this.isDirty=!1,this.children.forEach(e)}}function WO(n,e){const t=Mn.now(),r=({timestamp:a})=>{const o=a-t;o>=e&&(fi(r),n(o-e))};return ge.setup(r,!0),()=>fi(r)}const RC=["TopLeft","TopRight","BottomLeft","BottomRight"],qO=RC.length,$x=n=>typeof n=="string"?parseFloat(n):n,t2=n=>typeof n=="number"||Ot.test(n);function KO(n,e,t,r,a,o){a?(n.opacity=be(0,t.opacity??1,XO(r)),n.opacityExit=be(e.opacity??1,0,YO(r))):o&&(n.opacity=be(e.opacity??1,t.opacity??1,r));for(let u=0;u<qO;u++){const l=`border${RC[u]}Radius`;let c=e2(e,l),h=e2(t,l);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||t2(c)===t2(h)?(n[l]=Math.max(be($x(c),$x(h),r),0),(Gr.test(h)||Gr.test(c))&&(n[l]+="%")):n[l]=h}(e.rotate||t.rotate)&&(n.rotate=be(e.rotate||0,t.rotate||0,r))}function e2(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const XO=AC(0,.5,pE),YO=AC(.5,.95,dr);function AC(n,e,t){return r=>r<n?0:r>e?1:t(zu(n,e,r))}function n2(n,e){n.min=e.min,n.max=e.max}function wr(n,e){n2(n.x,e.x),n2(n.y,e.y)}function r2(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function a2(n,e,t,r,a){return n-=e,n=vf(n,1/t,r),a!==void 0&&(n=vf(n,1/a,r)),n}function QO(n,e=0,t=1,r=.5,a,o=n,u=n){if(Gr.test(e)&&(e=parseFloat(e),e=be(u.min,u.max,e/100)-u.min),typeof e!="number")return;let l=be(o.min,o.max,r);n===o&&(l-=e),n.min=a2(n.min,e,t,l,a),n.max=a2(n.max,e,t,l,a)}function i2(n,e,[t,r,a],o,u){QO(n,e[t],e[r],e[a],e.scale,o,u)}const ZO=["x","scaleX","originX"],JO=["y","scaleY","originY"];function o2(n,e,t,r){i2(n.x,e,ZO,t?t.x:void 0,r?r.x:void 0),i2(n.y,e,JO,t?t.y:void 0,r?r.y:void 0)}function s2(n){return n.translate===0&&n.scale===1}function DC(n){return s2(n.x)&&s2(n.y)}function u2(n,e){return n.min===e.min&&n.max===e.max}function $O(n,e){return u2(n.x,e.x)&&u2(n.y,e.y)}function l2(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function MC(n,e){return l2(n.x,e.x)&&l2(n.y,e.y)}function c2(n){return bn(n.x)/bn(n.y)}function f2(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class t4{constructor(){this.members=[]}add(e){wm(this.members,e),e.scheduleRender()}remove(e){if(Em(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(a=>e===a);if(t===0)return!1;let r;for(let a=t;a>=0;a--){const o=this.members[a];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function e4(n,e,t){let r="";const a=n.x.translate/e.x,o=n.y.translate/e.y,u=t?.z||0;if((a||o||u)&&(r=`translate3d(${a}px, ${o}px, ${u}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:h,rotate:d,rotateX:v,rotateY:m,skewX:g,skewY:x}=t;h&&(r=`perspective(${h}px) ${r}`),d&&(r+=`rotate(${d}deg) `),v&&(r+=`rotateX(${v}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=n.x.scale*e.x,c=n.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Vp=["","X","Y","Z"],n4=1e3;let r4=0;function Hp(n,e,t,r){const{latestValues:a}=e;a[n]&&(t[n]=a[n],e.setStaticValue(n,0),r&&(r[n]=0))}function NC(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=mC(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:a,layoutId:o}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ge,!(a||o))}const{parent:r}=n;r&&!r.hasCheckedOptimisedAppear&&NC(r)}function OC({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(u={},l=e?.()){this.id=r4++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(o4),this.nodes.forEach(c4),this.nodes.forEach(f4),this.nodes.forEach(s4)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=u,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new jO)}addEventListener(u,l){return this.eventHandlers.has(u)||this.eventHandlers.set(u,new _m),this.eventHandlers.get(u).add(l)}notifyListeners(u,...l){const c=this.eventHandlers.get(u);c&&c.notify(...l)}hasListeners(u){return this.eventHandlers.has(u)}mount(u){if(this.instance)return;this.isSVG=KE(u)&&!t3(u),this.instance=u;const{layoutId:l,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(u),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),n){let d,v=0;const m=()=>this.root.updateBlockedByResize=!1;ge.read(()=>{v=window.innerWidth}),n(u,()=>{const g=window.innerWidth;g!==v&&(v=g,this.root.updateBlockedByResize=!0,d&&d(),d=WO(m,250),sf.hasAnimatedSinceResize&&(sf.hasAnimatedSinceResize=!1,this.nodes.forEach(p2)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&h&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:v,hasRelativeLayoutChanged:m,layout:g})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||h.getDefaultTransition()||m4,{onLayoutAnimationStart:E,onLayoutAnimationComplete:w}=h.getProps(),C=!this.targetLayout||!MC(this.targetLayout,g),S=!v&&m;if(this.options.layoutRoot||this.resumeFrom||S||v&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...Lm(x,"layout"),onPlay:E,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(d,S)}else v||p2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=g})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const u=this.getStack();u&&u.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fi(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(h4),this.animationId++)}getTransformTemplate(){const{visualElement:u}=this.options;return u&&u.getProps().transformTemplate}willUpdate(u=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&NC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const v=this.path[d];v.shouldResetTransform=!0,v.updateScroll("snapshot"),v.options.layoutRoot&&v.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),u&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(h2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(d2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(l4),this.nodes.forEach(a4),this.nodes.forEach(i4)):this.nodes.forEach(d2),this.clearAllSnapshots();const l=Mn.now();rn.delta=Ea(0,1e3/60,l-rn.timestamp),rn.timestamp=l,rn.isProcessing=!0,Mp.update.process(rn),Mp.preRender.process(rn),Mp.render.process(rn),rn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,zm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(u4),this.sharedNodes.forEach(d4)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ge.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ge.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!bn(this.snapshot.measuredBox.x)&&!bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const u=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=ze(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,u?u.layoutBox:void 0)}updateScroll(u="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===u&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:u,isRoot:c,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!a)return;const u=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!DC(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,d=h!==this.prevTransformTemplateValue;u&&this.instance&&(l||zi(this.latestValues)||d)&&(a(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(u=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return u&&(c=this.removeTransform(c)),g4(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:u}=this.options;if(!u)return ze();const l=u.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(y4))){const{scroll:h}=this.root;h&&(as(l.x,h.offset.x),as(l.y,h.offset.y))}return l}removeElementScroll(u){const l=ze();if(wr(l,u),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const h=this.path[c],{scroll:d,options:v}=h;h!==this.root&&d&&v.layoutScroll&&(d.wasRoot&&wr(l,u),as(l.x,d.offset.x),as(l.y,d.offset.y))}return l}applyTransform(u,l=!1){const c=ze();wr(c,u);for(let h=0;h<this.path.length;h++){const d=this.path[h];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&is(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),zi(d.latestValues)&&is(c,d.latestValues)}return zi(this.latestValues)&&is(c,this.latestValues),c}removeTransform(u){const l=ze();wr(l,u);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!zi(h.latestValues))continue;Bv(h.latestValues)&&h.updateSnapshot();const d=ze(),v=h.measurePageBox();wr(d,v),o2(l,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,d)}return zi(this.latestValues)&&o2(l,this.latestValues),l}setTargetDelta(u){this.targetDelta=u,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(u){this.options={...this.options,...u,crossfade:u.crossfade!==void 0?u.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==rn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(u=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(u||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:v}=this.options;if(!this.layout||!(d||v))return;this.resolvedRelativeTargetAt=rn.timestamp;const m=this.getClosestProjectingParent();m&&this.linkedParentVersion!==m.layoutVersion&&!m.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(m&&m.layout?this.createRelativeTarget(m,this.layout.layoutBox,m.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ze(),this.targetWithTransforms=ze()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),TO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wr(this.target,this.layout.layoutBox),cC(this.target,this.targetDelta)):wr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?this.createRelativeTarget(m,this.target,m.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||Bv(this.parent.latestValues)||lC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(u,l,c){this.relativeParent=u,this.linkedParentVersion=u.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ze(),this.relativeTargetOrigin=ze(),mf(this.relativeTargetOrigin,l,c),wr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const u=this.getLead(),l=!!this.resumingFrom||this!==u;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===rn.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;wr(this.layoutCorrected,this.layout.layoutBox);const v=this.treeScale.x,m=this.treeScale.y;P3(this.layoutCorrected,this.treeScale,this.path,l),u.layout&&!u.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(u.target=u.layout.layoutBox,u.targetWithTransforms=ze());const{target:g}=u;if(!g){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(r2(this.prevProjectionDelta.x,this.projectionDelta.x),r2(this.prevProjectionDelta.y,this.projectionDelta.y)),ku(this.projectionDelta,this.layoutCorrected,g,this.latestValues),(this.treeScale.x!==v||this.treeScale.y!==m||!f2(this.projectionDelta.x,this.prevProjectionDelta.x)||!f2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",g))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(u=!0){if(this.options.visualElement?.scheduleRender(),u){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=os(),this.projectionDelta=os(),this.projectionDeltaWithTransform=os()}setAnimationOrigin(u,l=!1){const c=this.snapshot,h=c?c.latestValues:{},d={...this.latestValues},v=os();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=ze(),g=c?c.source:void 0,x=this.layout?this.layout.source:void 0,E=g!==x,w=this.getStack(),C=!w||w.members.length<=1,S=!!(E&&!C&&this.options.crossfade===!0&&!this.path.some(v4));this.animationProgress=0;let _;this.mixTargetDelta=T=>{const A=T/1e3;v2(v.x,u.x,A),v2(v.y,u.y,A),this.setTargetDelta(v),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mf(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p4(this.relativeTarget,this.relativeTargetOrigin,m,A),_&&$O(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=ze()),wr(_,this.relativeTarget)),E&&(this.animationValues=d,KO(d,h,this.latestValues,A,S,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(u){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(fi(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ge.update(()=>{sf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=gs(0)),this.currentAnimation=HO(this.motionValue,[0,1e3],{...u,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),u.onUpdate&&u.onUpdate(l)},onStop:()=>{},onComplete:()=>{u.onComplete&&u.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const u=this.getStack();u&&u.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(n4),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const u=this.getLead();let{targetWithTransforms:l,target:c,layout:h,latestValues:d}=u;if(!(!l||!c||!h)){if(this!==u&&this.layout&&h&&kC(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||ze();const v=bn(this.layout.layoutBox.x);c.x.min=u.target.x.min,c.x.max=c.x.min+v;const m=bn(this.layout.layoutBox.y);c.y.min=u.target.y.min,c.y.max=c.y.min+m}wr(l,c),is(l,d),ku(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(u,l){this.sharedNodes.has(u)||this.sharedNodes.set(u,new t4),this.sharedNodes.get(u).add(l);const h=l.options.initialPromotionConfig;l.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(l):void 0})}isLead(){const u=this.getStack();return u?u.lead===this:!0}getLead(){const{layoutId:u}=this.options;return u?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:u}=this.options;return u?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:u}=this.options;if(u)return this.root.sharedNodes.get(u)}promote({needsReset:u,transition:l,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),u&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const u=this.getStack();return u?u.relegate(this):!1}resetSkewAndRotation(){const{visualElement:u}=this.options;if(!u)return;let l=!1;const{latestValues:c}=u;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const h={};c.z&&Hp("z",u,h,this.animationValues);for(let d=0;d<Vp.length;d++)Hp(`rotate${Vp[d]}`,u,h,this.animationValues),Hp(`skew${Vp[d]}`,u,h,this.animationValues);u.render();for(const d in h)u.setStaticValue(d,h[d]),this.animationValues&&(this.animationValues[d]=h[d]);u.scheduleRender()}applyProjectionStyles(u,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){u.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,u.visibility="",u.opacity="",u.pointerEvents=of(l?.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(u.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,u.pointerEvents=of(l?.pointerEvents)||""),this.hasProjected&&!zi(this.latestValues)&&(u.transform=c?c({},""):"none",this.hasProjected=!1);return}u.visibility="";const d=h.animationValues||h.latestValues;this.applyTransformsToTarget();let v=e4(this.projectionDeltaWithTransform,this.treeScale,d);c&&(v=c(d,v)),u.transform=v;const{x:m,y:g}=this.projectionDelta;u.transformOrigin=`${m.origin*100}% ${g.origin*100}% 0`,h.animationValues?u.opacity=h===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:u.opacity=h===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const x in Iv){if(d[x]===void 0)continue;const{correct:E,applyTo:w,isCSSVariable:C}=Iv[x],S=v==="none"?d[x]:E(d[x],h);if(w){const _=w.length;for(let T=0;T<_;T++)u[w[T]]=S}else C?this.options.visualElement.renderState.vars[x]=S:u[x]=S}this.options.layoutId&&(u.pointerEvents=h===this?of(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(u=>u.currentAnimation?.stop()),this.root.nodes.forEach(h2),this.root.sharedNodes.clear()}}}function a4(n){n.updateLayout()}function i4(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=n.layout,{animationType:a}=n.options,o=e.source!==n.layout.source;a==="size"?ur(d=>{const v=o?e.measuredBox[d]:e.layoutBox[d],m=bn(v);v.min=t[d].min,v.max=v.min+m}):kC(a,e.layoutBox,t)&&ur(d=>{const v=o?e.measuredBox[d]:e.layoutBox[d],m=bn(t[d]);v.max=v.min+m,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[d].max=n.relativeTarget[d].min+m)});const u=os();ku(u,t,e.layoutBox);const l=os();o?ku(l,n.applyTransform(r,!0),e.measuredBox):ku(l,t,e.layoutBox);const c=!DC(u);let h=!1;if(!n.resumeFrom){const d=n.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:v,layout:m}=d;if(v&&m){const g=ze();mf(g,e.layoutBox,v.layoutBox);const x=ze();mf(x,t,m.layoutBox),MC(g,x)||(h=!0),d.options.layoutRoot&&(n.relativeTarget=x,n.relativeTargetOrigin=g,n.relativeParent=d)}}}n.notifyListeners("didUpdate",{layout:t,snapshot:e,delta:l,layoutDelta:u,hasLayoutChanged:c,hasRelativeLayoutChanged:h})}else if(n.isLead()){const{onExitComplete:t}=n.options;t&&t()}n.options.transition=void 0}function o4(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function s4(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function u4(n){n.clearSnapshot()}function h2(n){n.clearMeasurements()}function d2(n){n.isLayoutDirty=!1}function l4(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function p2(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function c4(n){n.resolveTargetDelta()}function f4(n){n.calcProjection()}function h4(n){n.resetSkewAndRotation()}function d4(n){n.removeLeadSnapshot()}function v2(n,e,t){n.translate=be(e.translate,0,t),n.scale=be(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function m2(n,e,t,r){n.min=be(e.min,t.min,r),n.max=be(e.max,t.max,r)}function p4(n,e,t,r){m2(n.x,e.x,t.x,r),m2(n.y,e.y,t.y,r)}function v4(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const m4={duration:.45,ease:[.4,0,.1,1]},g2=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),y2=g2("applewebkit/")&&!g2("chrome/")?Math.round:dr;function b2(n){n.min=y2(n.min),n.max=y2(n.max)}function g4(n){b2(n.x),b2(n.y)}function kC(n,e,t){return n==="position"||n==="preserve-aspect"&&!_O(c2(e),c2(t),.2)}function y4(n){return n!==n.root&&n.scroll?.wasRoot}const b4=OC({attachResizeListener:(n,e)=>Gu(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gp={current:void 0},IC=OC({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!Gp.current){const n=new b4({});n.mount(window),n.setOptions({layoutScroll:!0}),Gp.current=n}return Gp.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),x4={pan:{Feature:UO},drag:{Feature:zO,ProjectionNode:IC,MeasureLayout:TC}};function x2(n,e,t){const{props:r}=n;n.animationState&&r.whileHover&&n.animationState.setActive("whileHover",t==="Start");const a="onHover"+t,o=r[a];o&&ge.postRender(()=>o(e,sl(e)))}class w4 extends vi{mount(){const{current:e}=this.node;e&&(this.unmount=YN(e,(t,r)=>(x2(this.node,r,"Start"),a=>x2(this.node,a,"End"))))}unmount(){}}class E4 extends vi{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=al(Gu(this.node.current,"focus",()=>this.onFocus()),Gu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function w2(n,e,t){const{props:r}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&r.whileTap&&n.animationState.setActive("whileTap",t==="Start");const a="onTap"+(t==="End"?"":t),o=r[a];o&&ge.postRender(()=>o(e,sl(e)))}class C4 extends vi{mount(){const{current:e}=this.node;e&&(this.unmount=$N(e,(t,r)=>(w2(this.node,r,"Start"),(a,{success:o})=>w2(this.node,a,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Hv=new WeakMap,jp=new WeakMap,S4=n=>{const e=Hv.get(n.target);e&&e(n)},_4=n=>{n.forEach(S4)};function T4({root:n,...e}){const t=n||document;jp.has(t)||jp.set(t,{});const r=jp.get(t),a=JSON.stringify(e);return r[a]||(r[a]=new IntersectionObserver(_4,{root:n,...e})),r[a]}function R4(n,e,t){const r=T4(e);return Hv.set(n,t),r.observe(n),()=>{Hv.delete(n),r.unobserve(n)}}const A4={some:0,all:1};class D4 extends vi{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:a="some",once:o}=e,u={root:t?t.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:A4[a]},l=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:d,onViewportLeave:v}=this.node.getProps(),m=h?d:v;m&&m(c)};return R4(this.node.current,u,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(M4(e,t))&&this.startObserver()}unmount(){}}function M4({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const N4={inView:{Feature:D4},tap:{Feature:C4},focus:{Feature:E4},hover:{Feature:w4}},O4={layout:{ProjectionNode:IC,MeasureLayout:TC}},k4={...bO,...N4,...x4,...O4},gf=B3(k4,X3);const I4=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),B4=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),E2=n=>{const e=B4(n);return e.charAt(0).toUpperCase()+e.slice(1)},BC=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),F4=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};var L4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const P4=Y.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:o,iconNode:u,...l},c)=>Y.createElement("svg",{ref:c,...L4,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:BC("lucide",a),...!o&&!F4(l)&&{"aria-hidden":"true"},...l},[...u.map(([h,d])=>Y.createElement(h,d)),...Array.isArray(o)?o:[o]]));const Wf=(n,e)=>{const t=Y.forwardRef(({className:r,...a},o)=>Y.createElement(P4,{ref:o,iconNode:e,className:BC(`lucide-${I4(E2(n))}`,`lucide-${n}`,r),...a}));return t.displayName=E2(n),t};const z4=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],U4=Wf("loader-circle",z4);const V4=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"M15 9h.01",key:"x1ddxp"}]],H4=Wf("scan-face",V4);const G4=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],j4=Wf("sparkles",G4);const W4=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],q4=Wf("triangle-alert",W4),K4=()=>{const n=pm(),[e,t]=Y.useState(""),[r,a]=Y.useState(!1),o=()=>{e.trim().length>0?(a(!0),setTimeout(()=>{n("/camera")},3e3)):n("/camera")};return Et.jsxs("div",{className:"relative w-full h-[100dvh] flex flex-col items-center justify-center bg-black overflow-hidden",children:[Et.jsxs("div",{className:"absolute inset-0 z-0",children:[Et.jsx("img",{src:"/age-predictor/skull_bg.jpg",alt:"Skull Background",className:"w-full h-full object-cover opacity-50",style:{filter:"grayscale(100%) contrast(120%)"}}),Et.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent"})]}),r&&Et.jsx(gf.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm p-6",children:Et.jsxs("div",{className:"bg-zinc-900 border border-red-500/50 p-6 rounded-xl max-w-sm text-center shadow-[0_0_30px_rgba(239,68,68,0.3)]",children:[Et.jsx("h3",{className:"text-xl font-bold text-red-500 mb-2",children:"NICE TRY."}),Et.jsxs("p",{className:"text-gray-300",children:["We don't believe you. ",Et.jsx("br",{}),Et.jsx("span",{className:"text-white font-medium italic",children:'"People judge you by your face, not your birthday."'})]}),Et.jsx("div",{className:"mt-4 text-xs text-gray-500 animate-pulse",children:"Analyzing the truth..."})]})}),Et.jsxs(gf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"z-10 bg-white/5 backdrop-blur-md border border-white/10 p-8 rounded-2xl shadow-2xl max-w-md w-full text-center",children:[Et.jsx("div",{className:"flex justify-center mb-6",children:Et.jsx("div",{className:"p-4 bg-white/10 rounded-full",children:Et.jsx(H4,{className:"w-12 h-12 text-cyan-400"})})}),Et.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-cyan-400 to-purple-500 bg-clip-text text-transparent mb-2",children:"Age predictor"}),Et.jsxs("p",{className:"text-gray-400 mb-8 text-sm",children:["Dare to face the truth? ",Et.jsx("br",{}),"My algorithms are colder than your ex's heart."]}),Et.jsxs("div",{className:"space-y-4",children:[Et.jsxs("div",{className:"text-center",children:[Et.jsx("label",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Date of Birth (Optional)"}),Et.jsx("input",{type:"text",placeholder:"e.g. 12/05/1998",value:e,onChange:u=>t(u.target.value),className:"w-full bg-white/5 border border-white/10 rounded-lg px-4 py-3 mt-1 text-white placeholder-gray-600 focus:outline-none focus:border-red-500 transition-colors text-center"}),Et.jsx("p",{className:"text-[10px] text-gray-600 mt-1",children:"*We probably won't use this."})]}),Et.jsx("button",{onClick:o,className:"w-full bg-gradient-to-r from-cyan-600/20 to-cyan-400/20 border border-cyan-500/50 hover:border-cyan-400 hover:bg-cyan-500/30 text-cyan-400 font-bold py-3 rounded-lg transition-all duration-300 tracking-wider shadow-[0_0_15px_rgba(6,182,212,0.15)] hover:shadow-[0_0_25px_rgba(6,182,212,0.3)]",children:"ANALYZE MY FACE"})]})]}),Et.jsx("div",{className:"absolute bottom-4 text-xs text-gray-600 z-10",children:"NO REFUNDS ON EMOTIONAL DAMAGE"})]})};var FC=function(n,e){return(FC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])})(n,e)};function Rr(n,e){function t(){this.constructor=n}FC(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function xt(n,e,t,r){return new(t||(t=Promise))((function(a,o){function u(h){try{c(r.next(h))}catch(d){o(d)}}function l(h){try{c(r.throw(h))}catch(d){o(d)}}function c(h){h.done?a(h.value):new t((function(d){d(h.value)})).then(u,l)}c((r=r.apply(n,[])).next())}))}function wt(n,e){var t,r,a,o,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(h){return(function(d){if(t)throw new TypeError("Generator is already executing.");for(;u;)try{if(t=1,r&&(a=2&d[0]?r.return:d[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,d[1])).done)return a;switch(r=0,a&&(d=[2&d[0],a.value]),d[0]){case 0:case 1:a=d;break;case 4:return u.label++,{value:d[1],done:!1};case 5:u.label++,r=d[1],d=[0];continue;case 7:d=u.ops.pop(),u.trys.pop();continue;default:if(!(a=(a=u.trys).length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){u=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){u.label=d[1];break}if(d[0]===6&&u.label<a[1]){u.label=a[1],a=d;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(d);break}a[2]&&u.ops.pop(),u.trys.pop();continue}d=e.call(n,u)}catch(v){d=[6,v],r=0}finally{t=a=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}})([c,h])}}}var X4=(function(){function n(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return n.prototype.setPlatform=function(e,t){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},n.prototype.registerFlag=function(e,t,r){if(this.flagRegistry[e]={evaluationFn:t,setHook:r},this.urlFlags[e]!=null){var a=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+a+"."),this.set(e,a)}},n.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},n.prototype.getNumber=function(e){return this.get(e)},n.prototype.getBool=function(e){return this.get(e)},n.prototype.getFlags=function(){return this.flags},Object.defineProperty(n.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),n.prototype.set=function(e,t){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(t)},n.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},n.prototype.setFlags=function(e){this.flags=Object.assign({},e)},n.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},n.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var t,r,a=(t=this.global.location.search,r={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(o){for(var u=[],l=1;l<arguments.length;l++)u[l-1]=arguments[l];return Y4(r,u[0],u[1]),u.join("=")})),r);"tfjsflags"in a&&a.tfjsflags.split(",").forEach((function(o){var u=o.split(":"),l=u[0],c=u[1];e.urlFlags[l]=(function(h,d){if((d=d.toLowerCase())==="true"||d==="false")return d==="true";if(""+ +d===d)return+d;throw new Error("Could not parse value flag value "+d+" for flag "+h+".")})(l,c)}))}},n})();function Y4(n,e,t){n[decodeURIComponent(e)]=decodeURIComponent(t||"")}function lt(){return LC}var LC=null,yf=new Map,Gv=new Map;function PC(n,e){var t=UC(n,e);return yf.get(t)}function Q4(n){return Gv.get(n)}function C2(n){for(var e=yf.entries(),t=[];;){var r=e.next(),a=r.done,o=r.value;if(a)break;var u=o[0],l=o[1];u.split("_")[0]===n&&t.push(l)}return t}function zC(n){var e=n.kernelName,t=n.backendName,r=UC(e,t);if(yf.has(r))throw new Error("The kernel '"+e+"' for backend '"+t+"' is already registered");yf.set(r,n)}function Z4(n){var e=n.kernelName;Gv.has(e)&&console.warn("Overriding the gradient for '"+e+"'"),Gv.set(e,n)}function UC(n,e){return e+"_"+n}function jv(n,e,t){return Math.max(n,Math.min(e,t))}function VC(n){return n%2==0?n:n+1}function J4(n){for(var e=0,t=0;t<n.length;t++)e+=n[t];return e}function F(n,e){if(!n)throw new Error(typeof e=="string"?e:e())}function ne(n,e,t){t===void 0&&(t=""),F(Xe(n,e),(function(){return t+" Shapes "+n+" and "+e+" must match"}))}function Rs(n){F(n!=null,(function(){return"The input to the tensor constructor must be a non-null value."}))}function bs(n,e,t){if(e===void 0&&(e=[]),t===void 0&&(t=!1),e==null&&(e=[]),Array.isArray(n)||jr(n)&&!t)for(var r=0;r<n.length;++r)bs(n[r],e,t);else e.push(n);return e}function St(n){if(n.length===0)return 1;for(var e=n[0],t=1;t<n.length;t++)e*=n[t];return e}function Xe(n,e){if(n===e)return!0;if(n==null||e==null||n.length!==e.length)return!1;for(var t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function De(n){return n%1==0}function $4(n){if(Math.tanh!=null)return Math.tanh(n);if(n===1/0)return 1;if(n===-1/0)return-1;var e=Math.exp(2*n);return(e-1)/(e+1)}function Wv(n){var e=Math.ceil(Math.sqrt(n));return[e,Math.ceil(n/e)]}function cs(n,e){return e<=n.length?n:n+" ".repeat(e-n.length)}function S2(n,e,t){return e===void 0&&(e=function(r){return 0}),new Promise((function(r,a){var o=0,u=function(){if(n())r();else{o++;var l=e(o);t!=null&&o>=t?a():setTimeout(u,l)}};u()}))}function tk(n,e){for(var t=1,r=-1,a=0;a<n.length;++a)if(n[a]>=0)t*=n[a];else if(n[a]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+a);r=a}else if(n[a]<0)throw Error("Shapes can not be < 0. Found "+n[a]+" at dim "+a);if(r===-1){if(e>0&&e!==t)throw Error("Size("+e+") must match the product of shape "+n);return n}if(t===0)throw Error("Cannot infer the missing size in ["+n+"] when there are 0 elements");if(e%t!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+t);var o=n.slice();return o[r]=e/t,o}function je(n,e){var t=e.length;return F((n=n==null?e.map((function(r,a){return a})):[].concat(n)).every((function(r){return r>=-t&&r<t})),(function(){return"All values in axis param must be in range [-"+t+", "+t+") but got axis "+n})),F(n.every((function(r){return De(r)})),(function(){return"All values in axis param must be integers but got axis "+n})),n.map((function(r){return r<0?t+r:r}))}function Hi(n,e){for(var t=[],r=[],a=e!=null&&Array.isArray(e)&&e.length===0,o=e==null||a?null:je(e,n).sort(),u=0,l=0;l<n.length;++l){if(o!=null){if(o[u]===l&&n[l]!==1)throw new Error("Can't squeeze axis "+l+" since its dim '"+n[l]+"' is not 1");(o[u]==null||o[u]>l)&&n[l]===1&&(t.push(n[l]),r.push(l)),o[u]<=l&&u++}n[l]!==1&&(t.push(n[l]),r.push(l))}return{newShape:t,keptDims:r}}function ju(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else{if(n!=="bool")throw new Error("Unknown data type "+n);t=new Uint8Array(e)}return t}function bf(n,e){var t=null;if(n==null||n==="float32")t=new Float32Array(e);else if(n==="int32")t=new Int32Array(e);else if(n==="bool")t=new Uint8Array(e);else{if(n!=="string")throw new Error("Unknown data type "+n);t=new Array(e)}return t}function ek(n,e){for(var t=0;t<n.length;t++){var r=n[t];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function nk(n){return n==="bool"||n==="complex64"||n==="float32"||n==="int32"||n==="string"}function rk(n,e){return e!=="complex64"&&(e!=="float32"||n==="complex64")&&(e!=="int32"||n==="float32"||n==="complex64")&&(e!=="bool"||n!=="bool")}function jr(n){return n instanceof Float32Array||n instanceof Int32Array||n instanceof Uint8Array}function HC(n){if(n==="float32"||n==="int32")return 4;if(n==="complex64")return 8;if(n==="bool")return 1;throw new Error("Unknown dtype "+n)}function ak(n){if(n==null)return 0;var e=0;return n.forEach((function(t){return e+=t.length})),e}function Qm(n){return typeof n=="string"||n instanceof String}function ik(n){return typeof n=="boolean"}function ok(n){return typeof n=="number"}function ul(n){return Array.isArray(n)?ul(n[0]):n instanceof Float32Array?"float32":n instanceof Int32Array||n instanceof Uint8Array?"int32":ok(n)?"float32":Qm(n)?"string":ik(n)?"bool":"float32"}function qv(n){return!!(n&&n.constructor&&n.call&&n.apply)}function Kv(n,e){for(var t=e;t<n;++t)if(n%t==0)return t;return n}function Wr(n){var e=n.length;if(e<2)return[];var t=new Array(e-1);t[e-2]=n[e-1];for(var r=e-3;r>=0;--r)t[r]=t[r+1]*n[r+1];return t}function GC(n,e,t){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(n)&&(n=bs(n)),t&&ek(n,e),(function(o,u){return o instanceof Float32Array&&u==="float32"||o instanceof Int32Array&&u==="int32"||o instanceof Uint8Array&&u==="bool"})(n,e))return n;if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool"){for(var r=new Uint8Array(n.length),a=0;a<r.length;++a)Math.round(n[a])!==0&&(r[a]=1);return r}throw new Error("Unknown data type "+e)}function _2(n,e){if(n.length===0)return e[0];var t=n.reduce((function(r,a){return r*a}));if(t===0)return[];if(t!==e.length)throw new Error("["+n+"] does not match the input size.");return(function r(a,o,u){var l=new Array;if(o.length===1)for(var c=o[0],h=0;h<c;h++)l[h]=u[a+h];else{c=o[0];var d=o.slice(1),v=d.reduce((function(m,g){return m*g}));for(h=0;h<c;h++)l[h]=r(a+h*v,d,u)}return l})(0,n,e)}function jC(n,e){for(var t=ll(n,e),r=0;r<t.length;r++)t[r]=1;return t}function ll(n,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(n);if(e==="int32")return new Int32Array(n);if(e==="bool")return new Uint8Array(n);throw new Error("Unknown data type "+e)}function Pr(){return lt().platform.now()}function WC(n){n.forEach((function(e){F(Number.isInteger(e)&&e>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+n+"]."}))}))}function sk(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",lt().platform.encode(n,e)}function xf(n,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",lt().platform.decode(n,e)}function T2(n,e,t){if(e===0)return 0;if(e===1)return n[0];for(var r=n[n.length-1],a=0;a<n.length-1;++a)r+=t[a]*n[a];return r}function uk(n,e,t){if(e===0)return[];if(e===1)return[n];for(var r=new Array(e),a=0;a<r.length-1;++a)r[a]=Math.floor(n/t[a]),n-=r[a]*t[a];return r[r.length-1]=n,r}var lk=(function(){function n(e,t){this.backendTimer=e,this.logger=t,t==null&&(this.logger=new ck)}return n.prototype.profileKernel=function(e,t,r){var a,o=this,u=this.backendTimer.time((function(){a=r()}));return a.forEach((function(l){l.data().then((function(c){(function(h,d,v){if(d!=="float32")return!1;for(var m=0;m<h.length;m++){var g=h[m];if(isNaN(g)||!isFinite(g))return console.warn("Found "+g+" in the result of '"+v+"'"),!0}})(c,l.dtype,e),u.then((function(h){var d="";h.getExtraProfileInfo!=null&&(d=h.getExtraProfileInfo()),o.logger.logKernelProfile(e,l,c,h.kernelMs,t,d)}))}))})),a},n})(),ck=(function(){function n(){}return n.prototype.logKernelProfile=function(e,t,r,a,o,u){var l=typeof a=="number"?cs(a+"ms",9):a.error,c=cs(e,25),h=t.rank,d=t.size,v=cs(t.shape.toString(),14),m="";for(var g in o){var x=o[g].shape||t.shape,E=x.length;m+=g+": "+E+"D "+(E>0?x:"")+" "}console.log("%c"+c+"	%c"+l+"	%c"+h+"D "+v+"	%c"+d+"	%c"+m+"	%c"+u,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},n})(),R2=20,_u=3,Wp=7;function fk(n,e,t,r){var a=Wr(e),o=(function(h,d,v,m){var g=St(d),x=m[m.length-1],E=new Array(x).fill(0),w=d.length,C=v==="complex64"?Ru(h):h;if(w>1)for(var S=0;S<g/x;S++)for(var _=S*x,T=0;T<x;T++)E[T]=Math.max(E[T],Tu(C[_+T],0,v).length);return E})(n,e,t,a),u=e.length,l=(function h(d,v,m,g,x,E){E===void 0&&(E=!0);var w=m==="complex64"?2:1,C=v[0],S=v.length;if(S===0)return m==="complex64"?[Tu(Ru(d)[0],0,m)]:m==="bool"?[qC(d[0])]:[d[0].toString()];if(S===1){if(C>R2){var _=_u*w,T=Array.from(d.slice(0,_)),A=Array.from(d.slice((C-_u)*w,C*w));return m==="complex64"&&(T=Ru(T),A=Ru(A)),["["+T.map((function(tt,P){return Tu(tt,x[P],m)})).join(", ")+", ..., "+A.map((function(tt,P){return Tu(tt,x[C-_u+P],m)})).join(", ")+"]"]}return["["+(m==="complex64"?Ru(d):Array.from(d)).map((function(tt,P){return Tu(tt,x[P],m)})).join(", ")+"]"]}var D=v.slice(1),N=g.slice(1),k=g[0]*w,O=[];if(C>R2){for(var B=0;B<_u;B++){var V=(U=B*k)+k;O.push.apply(O,h(d.slice(U,V),D,m,N,x,!1))}for(O.push("..."),B=C-_u;B<C;B++)V=(U=B*k)+k,O.push.apply(O,h(d.slice(U,V),D,m,N,x,B===C-1))}else for(B=0;B<C;B++){var U;V=(U=B*k)+k,O.push.apply(O,h(d.slice(U,V),D,m,N,x,B===C-1))}var it=S===2?",":"";for(O[0]="["+O[0]+it,B=1;B<O.length-1;B++)O[B]=" "+O[B]+it;var et=`,
`;for(B=2;B<S;B++)et+=`
`;return O[O.length-1]=" "+O[O.length-1]+"]"+(E?"":et),O})(n,e,t,a,o),c=["Tensor"];return r&&(c.push("  dtype: "+t),c.push("  rank: "+u),c.push("  shape: ["+e+"]"),c.push("  values:")),c.push(l.map((function(h){return"    "+h})).join(`
`)),c.join(`
`)}function Tu(n,e,t){return cs(Array.isArray(n)?parseFloat(n[0].toFixed(Wp))+" + "+parseFloat(n[1].toFixed(Wp))+"j":Qm(n)?"'"+n+"'":t==="bool"?qC(n):parseFloat(n.toFixed(Wp)).toString(),e)}function qC(n){return n===0?"false":"true"}function Ru(n){for(var e=[],t=0;t<n.length;t+=2)e.push([n[t],n[t+1]]);return e}var Wu=(function(){function n(e,t,r){var a=this;if(this.dtype=t,this.shape=e.slice(),this.size=St(e),r!=null){var o=r.length;F(o===this.size,(function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+a.size+"'."}))}if(t==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||bf(t,this.size),this.strides=Wr(e)}return n.prototype.set=function(e){for(var t=this,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];r.length===0&&(r=[0]),F(r.length===this.rank,(function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+t.rank+")"}));var o=this.locToIndex(r);this.values[o]=e},n.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.length===0&&(e=[0]);for(var r=0,a=0,o=e;a<o.length;a++){var u=o[a];if(u<0||u>=this.shape[r]){var l="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(l)}r++}for(var c=e[e.length-1],h=0;h<e.length-1;++h)c+=this.strides[h]*e[h];return this.values[c]},n.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var t=e[e.length-1],r=0;r<e.length-1;++r)t+=this.strides[r]*e[r];return t},n.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var t=new Array(this.shape.length),r=0;r<t.length-1;++r)t[r]=Math.floor(e/this.strides[r]),e-=t[r]*this.strides[r];return t[t.length-1]=e,t},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.toTensor=function(){return zr().makeTensor(this.values,this.shape,this.dtype)},n})(),zr=null,at=null,KC=null,ye=(function(){function n(e,t,r,a){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=St(e),this.strides=Wr(e),this.dataId=r,this.id=a,this.rankType=this.rank<5?this.rank.toString():"higher"}return n.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},n.prototype.asScalar=function(){return this.throwIfDisposed(),F(this.size===1,(function(){return"The array must have only 1 element."})),this.reshape([])},n.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},n.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},n.prototype.as3D=function(e,t,r){return this.throwIfDisposed(),this.reshape([e,t,r])},n.prototype.as4D=function(e,t,r,a){return this.throwIfDisposed(),this.reshape([e,t,r,a])},n.prototype.as5D=function(e,t,r,a,o){return this.throwIfDisposed(),this.reshape([e,t,r,a,o])},n.prototype.asType=function(e){return this.throwIfDisposed(),at.cast(this,e)},Object.defineProperty(n.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),n.prototype.buffer=function(){return xt(this,void 0,void 0,(function(){var e;return wt(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,at.buffer(this.shape,this.dtype,e)]}}))}))},n.prototype.bufferSync=function(){return at.buffer(this.shape,this.dtype,this.dataSync())},n.prototype.array=function(){return xt(this,void 0,void 0,(function(){var e;return wt(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,_2(this.shape,e)]}}))}))},n.prototype.arraySync=function(){return _2(this.shape,this.dataSync())},n.prototype.data=function(){return xt(this,void 0,void 0,(function(){var e,t;return wt(this,(function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=zr().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:t=r.sent();try{return[2,t.map((function(a){return xf(a)}))]}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}}))}))},n.prototype.dataSync=function(){this.throwIfDisposed();var e=zr().readSync(this.dataId);if(this.dtype==="string")try{return e.map((function(t){return xf(t)}))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},n.prototype.bytes=function(){return xt(this,void 0,void 0,(function(){var e;return wt(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,zr().read(this.dataId)];case 1:return e=t.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},n.prototype.dispose=function(){this.isDisposed||(zr().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(n.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),n.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},n.prototype.toFloat=function(){return this.asType("float32")},n.prototype.toInt=function(){return this.asType("int32")},n.prototype.toBool=function(){return this.asType("bool")},n.prototype.print=function(e){return e===void 0&&(e=!1),at.print(this,e)},n.prototype.reshape=function(e){return this.throwIfDisposed(),at.reshape(this,e)},n.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},n.prototype.expandDims=function(e){return e===void 0&&(e=0),at.expandDims(this,e)},n.prototype.cumsum=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1),at.cumsum(this,e,t,r)},n.prototype.squeeze=function(e){return this.throwIfDisposed(),at.squeeze(this,e)},n.prototype.clone=function(){return this.throwIfDisposed(),at.clone(this)},n.prototype.oneHot=function(e,t,r){return this.throwIfDisposed(),at.oneHot(this,e,t,r)},n.prototype.toString=function(e){return e===void 0&&(e=!1),fk(this.dataSync(),this.shape,this.dtype,e)},n.prototype.tile=function(e){return this.throwIfDisposed(),at.tile(this,e)},n.prototype.gather=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),at.gather(this,e,t)},n.prototype.matMul=function(e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!1),this.throwIfDisposed(),at.matMul(this,e,t,r)},n.prototype.dot=function(e){return this.throwIfDisposed(),at.dot(this,e)},n.prototype.norm=function(e,t,r){return e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1),this.throwIfDisposed(),at.norm(this,e,t,r)},n.prototype.slice=function(e,t){return this.throwIfDisposed(),at.slice(this,e,t)},n.prototype.reverse=function(e){return this.throwIfDisposed(),at.reverse(this,e)},n.prototype.concat=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),e instanceof n&&(e=[e]),at.concat([this].concat(e),t)},n.prototype.split=function(e,t){return t===void 0&&(t=0),this.throwIfDisposed(),at.split(this,e,t)},n.prototype.stack=function(e,t){return t===void 0&&(t=0),at.stack([this,e],t)},n.prototype.unstack=function(e){return e===void 0&&(e=0),at.unstack(this,e)},n.prototype.pad=function(e,t){return t===void 0&&(t=0),at.pad(this,e,t)},n.prototype.batchNormalization=function(e,t,r,a,o){return r===void 0&&(r=.001),KC("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,o,a,r)},n.prototype.batchNorm=function(e,t,r,a,o){return o===void 0&&(o=.001),this.throwIfDisposed(),at.batchNorm(this,e,t,r,a,o)},n.prototype.all=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),at.all(this,e,t)},n.prototype.any=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),at.any(this,e,t)},n.prototype.logSumExp=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),at.logSumExp(this,e,t)},n.prototype.sum=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),at.sum(this,e,t)},n.prototype.prod=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),at.prod(this,e,t)},n.prototype.mean=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),at.mean(this,e,t)},n.prototype.min=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),at.min(this,e,t)},n.prototype.max=function(e,t){return e===void 0&&(e=null),t===void 0&&(t=!1),this.throwIfDisposed(),at.max(this,e,t)},n.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),at.argMin(this,e)},n.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),at.argMax(this,e)},n.prototype.cast=function(e){return this.throwIfDisposed(),at.cast(this,e)},n.prototype.add=function(e){return this.throwIfDisposed(),at.add(this,e)},n.prototype.addStrict=function(e){return this.throwIfDisposed(),at.addStrict(this,e)},n.prototype.atan2=function(e){return this.throwIfDisposed(),at.atan2(this,e)},n.prototype.sub=function(e){return this.throwIfDisposed(),at.sub(this,e)},n.prototype.subStrict=function(e){return this.throwIfDisposed(),at.subStrict(this,e)},n.prototype.pow=function(e){return this.throwIfDisposed(),at.pow(this,e)},n.prototype.powStrict=function(e){return this.throwIfDisposed(),at.powStrict(this,e)},n.prototype.mul=function(e){return this.throwIfDisposed(),at.mul(this,e)},n.prototype.mulStrict=function(e){return this.throwIfDisposed(),at.mulStrict(this,e)},n.prototype.div=function(e){return this.throwIfDisposed(),at.div(this,e)},n.prototype.divNoNan=function(e){return this.throwIfDisposed(),at.divNoNan(this,e)},n.prototype.floorDiv=function(e){return this.throwIfDisposed(),at.floorDiv(this,e)},n.prototype.divStrict=function(e){return this.throwIfDisposed(),at.divStrict(this,e)},n.prototype.minimum=function(e){return this.throwIfDisposed(),at.minimum(this,e)},n.prototype.minimumStrict=function(e){return this.throwIfDisposed(),at.minimumStrict(this,e)},n.prototype.maximum=function(e){return this.throwIfDisposed(),at.maximum(this,e)},n.prototype.maximumStrict=function(e){return this.throwIfDisposed(),at.maximumStrict(this,e)},n.prototype.mod=function(e){return this.throwIfDisposed(),at.mod(this,e)},n.prototype.modStrict=function(e){return this.throwIfDisposed(),at.modStrict(this,e)},n.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),at.squaredDifferenceStrict(this,e)},n.prototype.transpose=function(e){return this.throwIfDisposed(),at.transpose(this,e)},n.prototype.notEqual=function(e){return this.throwIfDisposed(),at.notEqual(this,e)},n.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),at.notEqualStrict(this,e)},n.prototype.less=function(e){return this.throwIfDisposed(),at.less(this,e)},n.prototype.lessStrict=function(e){return this.throwIfDisposed(),at.lessStrict(this,e)},n.prototype.equal=function(e){return this.throwIfDisposed(),at.equal(this,e)},n.prototype.equalStrict=function(e){return this.throwIfDisposed(),at.equalStrict(this,e)},n.prototype.lessEqual=function(e){return this.throwIfDisposed(),at.lessEqual(this,e)},n.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),at.lessEqualStrict(this,e)},n.prototype.greater=function(e){return this.throwIfDisposed(),at.greater(this,e)},n.prototype.greaterStrict=function(e){return this.throwIfDisposed(),at.greaterStrict(this,e)},n.prototype.greaterEqual=function(e){return this.throwIfDisposed(),at.greaterEqual(this,e)},n.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),at.greaterEqualStrict(this,e)},n.prototype.logicalAnd=function(e){return this.throwIfDisposed(),at.logicalAnd(this,e)},n.prototype.logicalOr=function(e){return this.throwIfDisposed(),at.logicalOr(this,e)},n.prototype.logicalNot=function(){return this.throwIfDisposed(),at.logicalNot(this)},n.prototype.logicalXor=function(e){return this.throwIfDisposed(),at.logicalXor(this,e)},n.prototype.where=function(e,t){return this.throwIfDisposed(),at.where(e,this,t)},n.prototype.neg=function(){return this.throwIfDisposed(),at.neg(this)},n.prototype.ceil=function(){return this.throwIfDisposed(),at.ceil(this)},n.prototype.floor=function(){return this.throwIfDisposed(),at.floor(this)},n.prototype.sign=function(){return this.throwIfDisposed(),at.sign(this)},n.prototype.isNaN=function(){return this.throwIfDisposed(),at.isNaN(this)},n.prototype.isInf=function(){return this.throwIfDisposed(),at.isInf(this)},n.prototype.isFinite=function(){return this.throwIfDisposed(),at.isFinite(this)},n.prototype.exp=function(){return this.throwIfDisposed(),at.exp(this)},n.prototype.expm1=function(){return this.throwIfDisposed(),at.expm1(this)},n.prototype.log=function(){return this.throwIfDisposed(),at.log(this)},n.prototype.log1p=function(){return this.throwIfDisposed(),at.log1p(this)},n.prototype.sqrt=function(){return this.throwIfDisposed(),at.sqrt(this)},n.prototype.rsqrt=function(){return this.throwIfDisposed(),at.rsqrt(this)},n.prototype.square=function(){return this.throwIfDisposed(),at.square(this)},n.prototype.reciprocal=function(){return this.throwIfDisposed(),at.reciprocal(this)},n.prototype.abs=function(){return this.throwIfDisposed(),at.abs(this)},n.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),at.clipByValue(this,e,t)},n.prototype.relu=function(){return this.throwIfDisposed(),at.relu(this)},n.prototype.relu6=function(){return this.throwIfDisposed(),at.relu6(this)},n.prototype.elu=function(){return this.throwIfDisposed(),at.elu(this)},n.prototype.selu=function(){return this.throwIfDisposed(),at.selu(this)},n.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),at.leakyRelu(this,e)},n.prototype.prelu=function(e){return this.throwIfDisposed(),at.prelu(this,e)},n.prototype.sigmoid=function(){return this.throwIfDisposed(),at.sigmoid(this)},n.prototype.logSigmoid=function(){return this.throwIfDisposed(),at.logSigmoid(this)},n.prototype.softplus=function(){return this.throwIfDisposed(),at.softplus(this)},n.prototype.zerosLike=function(){return this.throwIfDisposed(),at.zerosLike(this)},n.prototype.onesLike=function(){return this.throwIfDisposed(),at.onesLike(this)},n.prototype.sin=function(){return this.throwIfDisposed(),at.sin(this)},n.prototype.cos=function(){return this.throwIfDisposed(),at.cos(this)},n.prototype.tan=function(){return this.throwIfDisposed(),at.tan(this)},n.prototype.asin=function(){return this.throwIfDisposed(),at.asin(this)},n.prototype.acos=function(){return this.throwIfDisposed(),at.acos(this)},n.prototype.atan=function(){return this.throwIfDisposed(),at.atan(this)},n.prototype.sinh=function(){return this.throwIfDisposed(),at.sinh(this)},n.prototype.cosh=function(){return this.throwIfDisposed(),at.cosh(this)},n.prototype.tanh=function(){return this.throwIfDisposed(),at.tanh(this)},n.prototype.asinh=function(){return this.throwIfDisposed(),at.asinh(this)},n.prototype.acosh=function(){return this.throwIfDisposed(),at.acosh(this)},n.prototype.atanh=function(){return this.throwIfDisposed(),at.atanh(this)},n.prototype.erf=function(){return this.throwIfDisposed(),at.erf(this)},n.prototype.round=function(){return this.throwIfDisposed(),at.round(this)},n.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),at.step(this,e)},n.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),at.softmax(this,e)},n.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),at.logSoftmax(this,e)},n.prototype.resizeBilinear=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),at.image.resizeBilinear(this,e,t)},n.prototype.resizeNearestNeighbor=function(e,t){return t===void 0&&(t=!1),this.throwIfDisposed(),at.image.resizeNearestNeighbor(this,e,t)},n.prototype.conv1d=function(e,t,r,a,o,u){return a===void 0&&(a="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),at.conv1d(this,e,t,r,a,o,u)},n.prototype.conv2d=function(e,t,r,a,o,u){return a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),at.conv2d(this,e,t,r,a,o,u)},n.prototype.conv2dTranspose=function(e,t,r,a,o){return this.throwIfDisposed(),at.conv2dTranspose(this,e,t,r,a,o)},n.prototype.depthwiseConv2D=function(e,t,r,a,o,u){return a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),at.depthwiseConv2d(this,e,t,r,a,o,u)},n.prototype.separableConv2d=function(e,t,r,a,o,u){return o===void 0&&(o=[1,1]),u===void 0&&(u="NHWC"),this.throwIfDisposed(),at.separableConv2d(this,e,t,r,a,o,u)},n.prototype.avgPool=function(e,t,r,a){return this.throwIfDisposed(),at.avgPool(this,e,t,r,a)},n.prototype.maxPool=function(e,t,r,a){return this.throwIfDisposed(),at.maxPool(this,e,t,r,a)},n.prototype.localResponseNormalization=function(e,t,r,a){return e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5),at.localResponseNormalization(this,e,t,r,a)},n.prototype.pool=function(e,t,r,a,o){return this.throwIfDisposed(),at.pool(this,e,t,r,a,o)},n.prototype.variable=function(e,t,r){return e===void 0&&(e=!0),this.throwIfDisposed(),zr().makeVariable(this,e,t,r)},n.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),at.unsortedSegmentSum(this,e,t)},n.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),at.batchToSpaceND(this,e,t)},n.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),at.spaceToBatchND(this,e,t)},n.prototype.topk=function(e,t){return e===void 0&&(e=1),t===void 0&&(t=!0),this.throwIfDisposed(),at.topk(this,e,t)},n.prototype.stridedSlice=function(e,t,r,a,o,u,l,c){return a===void 0&&(a=0),o===void 0&&(o=0),u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=0),this.throwIfDisposed(),at.stridedSlice(this,e,t,r,a,o,u,l,c)},n.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),at.depthToSpace(this,e,t)},n.prototype.fft=function(){return this.throwIfDisposed(),at.spectral.fft(this)},n.prototype.ifft=function(){return this.throwIfDisposed(),at.spectral.ifft(this)},n.prototype.rfft=function(){return this.throwIfDisposed(),at.spectral.rfft(this)},n.prototype.irfft=function(){return this.throwIfDisposed(),at.spectral.irfft(this)},n})();Object.defineProperty(ye,Symbol.hasInstance,{value:function(n){return!!n&&n.dataId!=null&&n.shape!=null&&n.dtype!=null}});var A2,Xv,Yv,Qv,Zv,xs=(function(n){function e(t,r,a,o){var u=n.call(this,t.shape,t.dtype,t.dataId,o)||this;return u.trainable=r,u.name=a,u}return Rr(e,n),e.prototype.assign=function(t){if(t.dtype!==this.dtype)throw new Error("dtype of the new value ("+t.dtype+") and previous value ("+this.dtype+") must match");if(!Xe(t.shape,this.shape))throw new Error("shape of the new value ("+t.shape+") and previous value ("+this.shape+") must match");zr().disposeTensor(this),this.dataId=t.dataId,zr().incRef(this,null)},e.prototype.dispose=function(){zr().disposeVariable(this),this.isDisposedInternal=!0},e})(ye);Object.defineProperty(xs,Symbol.hasInstance,{value:function(n){return n instanceof ye&&n.assign!=null&&n.assign instanceof Function}}),(function(n){n.R0="R0",n.R1="R1",n.R2="R2",n.R3="R3",n.R4="R4",n.R5="R5",n.R6="R6"})(A2||(A2={})),(function(n){n.float32="float32",n.int32="int32",n.bool="int32",n.complex64="complex64"})(Xv||(Xv={})),(function(n){n.float32="float32",n.int32="int32",n.bool="bool",n.complex64="complex64"})(Yv||(Yv={})),(function(n){n.float32="float32",n.int32="float32",n.bool="float32",n.complex64="complex64"})(Qv||(Qv={})),(function(n){n.float32="complex64",n.int32="complex64",n.bool="complex64",n.complex64="complex64"})(Zv||(Zv={}));var hk={float32:Qv,int32:Xv,bool:Yv,complex64:Zv};function on(n,e){if(n==="string"||e==="string"){if(n==="string"&&e==="string")return"string";throw new Error("Can not upcast "+n+" with "+e)}return hk[n][e]}function qp(n){return on(n,"int32")}function Ee(n,e){if(n.dtype===e.dtype)return[n,e];var t=on(n.dtype,e.dtype);return[n.cast(t),e.cast(t)]}function dk(n,e){F(n.dtype===e.dtype,(function(){return"The dtypes of the first("+n.dtype+") and second("+e.dtype+") input must match"}))}function XC(n){var e=[];return(function t(r,a,o){if(r!=null){if(r instanceof ye)return void a.push(r);if(u=r,!(!Array.isArray(u)&&typeof u!="object")){var u,l=r;for(var c in l){var h=l[c];o.has(h)||(o.add(h),t(h,a,o))}}}})(n,e,new Set),e}var Kp,D2=(function(){function n(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return n.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},n})(),pk=(function(){function n(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new D2}return n.prototype.ready=function(){return xt(this,void 0,void 0,(function(){var e,t,r;return wt(this,(function(a){switch(a.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then((function(){}))];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),t=0,a.label=1;case 1:return t<e.length?(r=e[t],[4,this.initializeBackend(r).success]):[3,5];case 2:return a.sent()?[4,this.setBackend(r)]:[3,4];case 3:return a.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(n.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),n.prototype.backendNames=function(){return Object.keys(this.registryFactory)},n.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},n.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},n.prototype.registerBackend=function(e,t,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:r},!0)},n.prototype.setBackend=function(e){return xt(this,void 0,void 0,(function(){var t,r,a;return wt(this,(function(o){switch(o.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),r=t.success,t.asyncInit?[4,r]:[3,2]);case 1:return a=o.sent(),[3,3];case 2:a=r,o.label=3;case 3:if(!a)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new lk(this.backendInstance),[2,!0]}}))}))},n.prototype.setupRegisteredKernels=function(){var e=this;C2(this.backendName).forEach((function(t){t.setupFunc!=null&&t.setupFunc(e.backendInstance)}))},n.prototype.disposeRegisteredKernels=function(e){var t=this;C2(e).forEach((function(r){r.disposeFunc!=null&&r.disposeFunc(t.registry[e])}))},n.prototype.initializeBackend=function(e){var t=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var a=r.factory();if(Promise.resolve(a)===a){var o=++this.pendingBackendInitId,u=a.then((function(l){return!(o<t.pendingBackendInitId)&&(t.registry[e]=l,t.pendingBackendInit=null,!0)})).catch((function(l){return!(o<t.pendingBackendInitId)&&(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(l.stack||l.message),!1)}));return this.pendingBackendInit=u,{success:u,asyncInit:!0}}return this.registry[e]=a,{success:!0,asyncInit:!1}}catch(l){return console.warn("Initialization of backend "+e+" failed"),console.warn(l.stack||l.message),{success:!1,asyncInit:!1}}},n.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},n.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,r){return e.registryFactory[r].priority-e.registryFactory[t].priority}))},n.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var r=e[t],a=this.initializeBackend(r),o=a.success,u=a.asyncInit;if(u||o)return{name:r,asyncInit:u}}throw new Error("Could not initialize any backends, all backend initializations failed.")},n.prototype.moveData=function(e,t){var r=this.state.tensorInfo.get(t),a=r.backend,o=this.readSync(t);a.disposeData(t),r.backend=e,e.move(t,o,r.shape,r.dtype),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++},n.prototype.tidy=function(e,t){var r,a=this,o=null;if(t==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");t=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof t!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}return this.scopedRun((function(){return a.startScope(o)}),(function(){return a.endScope(r)}),(function(){return(r=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r}))},n.prototype.scopedRun=function(e,t,r){e();try{var a=r();return t(),a}catch(o){throw t(),o}},n.prototype.nextTensorId=function(){return n.nextTensorId++},n.prototype.nextVariableId=function(){return n.nextVariableId++},n.prototype.clone=function(e){var t=this.makeTensorFromDataId(e.dataId,e.shape,e.dtype),r={x:e};return this.addTapeNode(this.state.activeScope.name,r,[t],(function(a){return{x:function(){return a.toFloat()}}}),[]),t},n.prototype.runKernel=function(e,t,r,a,o){return this.runKernelFunc(null,t,null,e,r,a,o)},n.prototype.shouldCheckForMemLeaks=function(){return this.ENV.getBool("IS_TEST")},n.prototype.checkKernelForMemLeak=function(e,t,r){var a=this.backend.numDataIds(),o=0;r.forEach((function(c){o+=c.dtype==="complex64"?3:1}));var u=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],l=a-t-o-u;if(l>0)throw new Error("Backend '"+this.backendName+"' has an internal memory leak ("+l+" data ids) after running '"+e+"'")},n.prototype.runKernelFunc=function(e,t,r,a,o,u,l){var c,h=this;u===void 0&&(u=[]),l===void 0&&(l=[]);var d=[],v=this.isTapeOn();a==null&&(a=this.state.activeScope!=null?this.state.activeScope.name:"");var m,g=function(S){v&&(d=S.map((function(_){return h.keep(h.clone(_))})))},x=this.state.numBytes,E=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);var w,C=PC(a,this.backendName);return m=C!=null?function(){var S=h.backend.numDataIds();w=C.kernelFunc({inputs:t,attrs:o,backend:h.backend});var _=Array.isArray(w)?w:[w];h.shouldCheckForMemLeaks()&&h.checkKernelForMemLeak(a,S,_);var T=_.map((function(D){var N=D.dataId,k=D.shape,O=D.dtype;return h.makeTensorFromDataId(N,k,O)})),A=T.filter((function(D,N){return l[N]}));return g((u||[]).slice().concat(A)),T}:function(){var S=h.backend.numDataIds();w=h.tidy((function(){return e(h.backend,g)}));var _=Array.isArray(w)?w:[w];return h.shouldCheckForMemLeaks()&&h.checkKernelForMemLeak(a,S,_),_},this.scopedRun((function(){return h.state.kernelDepth++}),(function(){return h.state.kernelDepth--}),(function(){c=h.ENV.getBool("DEBUG")?h.profiler.profileKernel(a,t,(function(){return m()})):m()})),v&&this.addTapeNode(a,t,c,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:a,bytesAdded:this.state.numBytes-x,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-E,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(S){return t[S].shape})),outputShapes:c.map((function(S){return S.shape}))}),Array.isArray(w)?c:c[0]},n.prototype.makeTensor=function(e,t,r,a){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",a=a||this.backend;var o=e;r==="string"&&Qm(e[0])&&(o=e.map((function(d){return sk(d)})));var u=a.write(o,t,r),l=new ye(t,r,u,this.nextTensorId());if(this.incRef(l,a),r==="string"){var c=this.state.tensorInfo.get(u),h=ak(o);this.state.numBytes+=h-c.bytes,c.bytes=h}return l},n.prototype.makeTensorFromDataId=function(e,t,r,a){var o=new ye(t,r=r||"float32",e,this.nextTensorId());return this.incRef(o,a),o},n.prototype.makeVariable=function(e,t,r,a){t===void 0&&(t=!0),r=r||this.nextVariableId().toString(),a!=null&&a!==e.dtype&&(e=e.asType(a));var o=new xs(e,t,r,this.nextTensorId());if(this.state.registeredVariables[o.name]!=null)throw new Error("Variable with name "+o.name+" was already registered");return this.state.registeredVariables[o.name]=o,this.incRef(o,this.backend),o},n.prototype.incRef=function(e,t){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var a=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(a=e.size*HC(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:t||this.backend,dtype:e.dtype,shape:e.shape,bytes:a,refCount:0}),this.state.numBytes+=a}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof xs||this.track(e)},n.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},n.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},n.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},n.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},n.prototype.profile=function(e){return xt(this,void 0,void 0,(function(){var t,r;return wt(this,(function(a){return this.state.profiling=!0,t=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(o){return o.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]}))}))},n.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},n.prototype.addTapeNode=function(e,t,r,a,o){var u=this,l={id:this.state.nextTapeNodeId++,kernelName:e,inputs:t,outputs:r,saved:o},c=Q4(e);c!=null&&(a=c.gradFunc),a!=null&&(l.gradient=function(h){return h=h.map((function(d,v){if(d==null){var m=r[v],g=ll(m.size,m.dtype);return u.makeTensor(g,m.shape,m.dtype)}return d})),a(h.length>1?h:h[0],o)}),this.state.activeTape.push(l)},n.prototype.keep=function(e){return e.kept=!0,e},n.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},n.prototype.endTape=function(){this.state.gradientDepth--},n.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},n.prototype.endScope=function(e){for(var t=this,r=XC(e),a=new Set(r.map((function(c){return c.id}))),o=0;o<this.state.activeScope.track.length;o++){var u=this.state.activeScope.track[o];u.kept||a.has(u.id)||u.dispose()}var l=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach((function(c){c.kept||c.scopeId!==l.id||t.track(c)}))},n.prototype.gradients=function(e,t,r,a){var o=this;if(a===void 0&&(a=!1),F(t.length>0,(function(){return"gradients() received an empty list of xs."})),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var u=this.scopedRun((function(){return o.startTape()}),(function(){return o.endTape()}),(function(){return o.tidy("forward",e)}));F(u instanceof ye,(function(){return"The result y returned by f() must be a tensor."}));var l=(function(c,h,d){for(var v={},m={},g=0;g<h.length;g++)v[h[g].id]=!0;for(g=0;g<c.length;g++){var x=(D=c[g]).inputs;for(var E in x){for(var w=x[E],C=!1,S=0;S<h.length;S++)if(v[w.id]){D.outputs.forEach((function(B){return v[B.id]=!0})),C=!0,m[D.id]=!0;break}if(C)break}}var _={};_[d.id]=!0;var T={};for(g=c.length-1;g>=0;g--)for(x=(D=c[g]).inputs,S=0;S<D.outputs.length;S++)if(_[D.outputs[S].id]){for(var E in x)_[x[E].id]=!0,T[D.id]=!0;break}var A=[];for(g=0;g<c.length;g++){var D;if(m[(D=c[g]).id]&&T[D.id]){var N={};for(var E in D.inputs){var k=D.inputs[E];v[k.id]&&(N[E]=k)}var O=Object.assign({},D);O.inputs=N,O.outputs=D.outputs,A.push(O)}}return A})(this.state.activeTape,t,u);if(!a&&l.length===0&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var c,h,d={};d[u.id]=r??(c=u.shape,h=jC(St(c),"float32"),W.makeTensor(h,c,"float32")),(function(m,g,x){for(var E=function(C){var S=g[C],_=[];if(S.outputs.forEach((function(N){var k=m[N.id];k!=null?_.push(k):_.push(null)})),S.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+S.kernelName+".");var T=S.gradient(_),A=function(N){if(!(N in T))throw new Error("Cannot backprop through input "+N+". Available gradients found: "+Object.keys(T)+".");var k=x((function(){return T[N]()}));if(k.dtype!=="float32")throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input "+N+" must have 'float32' dtype, but has '"+k.dtype+"'");var O=S.inputs[N];if(!Xe(k.shape,O.shape))throw new Error("Error in gradient for op "+S.kernelName+". The gradient of input '"+N+"' has shape '"+k.shape+"', which does not match the shape of the input '"+O.shape+"'");if(m[O.id]==null)m[O.id]=k;else{var B=m[O.id];m[O.id]=B.add(k),B.dispose()}};for(var D in S.inputs)A(D)},w=g.length-1;w>=0;w--)E(w)})(d,l,(function(m){return o.tidy(m)}));var v=t.map((function(m){return d[m.id]}));return o.state.gradientDepth===0&&(o.state.activeTape.forEach((function(m){for(var g=0,x=m.saved;g<x.length;g++)x[g].dispose()})),o.state.activeTape=null),{value:u,grads:v}}))},n.prototype.customGrad=function(e){var t=this;return F(qv(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var r,a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];F(a.every((function(l){return l instanceof ye})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var u={};return a.forEach((function(l,c){u[c]=l})),t.runKernelFunc((function(l,c){return F((r=e.apply(void 0,a.concat([c]))).value instanceof ye,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),F(qv(r.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),r.value}),u,(function(l,c){var h=r.gradFunc(l,c),d=Array.isArray(h)?h:[h];F(d.length===a.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),F(d.every((function(m){return m instanceof ye})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var v={};return d.forEach((function(m,g){v[g]=function(){return m}})),v}))}},n.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},n.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},n.prototype.time=function(e){return xt(this,void 0,void 0,(function(){var t,r;return wt(this,(function(a){switch(a.label){case 0:return t=Pr(),[4,this.backend.time(e)];case 1:return(r=a.sent()).wallMs=Pr()-t,[2,r]}}))}))},n.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(n.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),n.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new D2,this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},n.nextTensorId=0,n.nextVariableId=0,n})(),W=(function(){var n=(function(){if(Kp==null){var t=void 0;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else{if(typeof self>"u")throw new Error("Could not find a global object");t=self}Kp=t}return Kp})();if(n._tfengine==null){var e=new X4(n);n._tfengine=new pk(e)}return(function(t){LC=t})(n._tfengine.ENV),zr=function(){return n._tfengine},n._tfengine})();function YC(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var ga=lt();ga.registerFlag("DEBUG",(function(){return!1}),(function(n){n&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),ga.registerFlag("IS_BROWSER",(function(){return YC()})),ga.registerFlag("IS_NODE",(function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0})),ga.registerFlag("IS_CHROME",(function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),ga.registerFlag("PROD",(function(){return!1})),ga.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return ga.getBool("DEBUG")})),ga.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),ga.registerFlag("IS_TEST",(function(){return!1}));var qu,qn,Wn,Ui={},Xp={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function vk(n,e){Ui[n]=e}function Xr(n){n in Ui||(Ui[n]=(function(t){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=(function(a){if(typeof OffscreenCanvas<"u"&&a===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")})(t);return r.addEventListener("webglcontextlost",(function(a){a.preventDefault(),delete Ui[t]}),!1),t===1?r.getContext("webgl",Xp)||r.getContext("experimental-webgl",Xp):r.getContext("webgl2",Xp)})(n));var e=Ui[n];return e.isContextLost()?(delete Ui[n],Xr(n)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Ui[n])}function qf(n,e){return[e,n]}function Iu(n){var e=St(n);return Wv(Math.ceil(e/4))}function cl(n,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(n/2))]}function Zm(n,e){var t,r,a,o,u,l,c,h,d,v=n;return lt().getNumber("WEBGL_VERSION")===2?(t=v.R32F,r=v.R16F,a=v.RGBA16F,o=v.RGBA32F,u=v.RED,l=4,c=1,h=v.HALF_FLOAT,d=v.FLOAT):(t=n.RGBA,r=n.RGBA,a=n.RGBA,o=v.RGBA,u=n.RGBA,l=4,c=4,h=e!=null?e.HALF_FLOAT_OES:null,d=n.FLOAT),{internalFormatFloat:t,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:a,internalFormatPackedFloat:o,textureFormatFloat:u,downloadTextureFormat:n.RGBA,downloadUnpackNumChannels:l,defaultNumChannels:c,textureTypeHalfFloat:h,textureTypeFloat:d}}function _t(n,e,t){var r=t();return e&&(function(a){var o=a.getError();if(o!==a.NO_ERROR)throw new Error("WebGL Error: "+bk(a,o))})(n),r}(function(n){n[n.DENSE=0]="DENSE",n[n.SHARED_BATCH=1]="SHARED_BATCH"})(qu||(qu={})),(function(n){n[n.RENDER=0]="RENDER",n[n.UPLOAD=1]="UPLOAD",n[n.PIXELS=2]="PIXELS",n[n.DOWNLOAD=3]="DOWNLOAD"})(qn||(qn={})),(function(n){n[n.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",n[n.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",n[n.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",n[n.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",n[n.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Wn||(Wn={}));var mk=596e-10,gk=65504;function yk(n){return!!(lt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||n===0||mk<Math.abs(n)&&Math.abs(n)<gk)}function bk(n,e){switch(e){case n.NO_ERROR:return"NO_ERROR";case n.INVALID_ENUM:return"INVALID_ENUM";case n.INVALID_VALUE:return"INVALID_VALUE";case n.INVALID_OPERATION:return"INVALID_OPERATION";case n.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case n.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case n.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function Vc(n,e,t){return _a(n,e,(function(){return n.getExtension(t)}),'Extension "'+t+'" not supported on this browser.')}function xk(n,e,t){var r=_a(n,e,(function(){return n.createShader(n.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(_t(n,e,(function(){return n.shaderSource(r,t)})),_t(n,e,(function(){return n.compileShader(r)})),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw console.log(n.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function wk(n,e,t){var r=_a(n,e,(function(){return n.createShader(n.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(_t(n,e,(function(){return n.shaderSource(r,t)})),_t(n,e,(function(){return n.compileShader(r)})),n.getShaderParameter(r,n.COMPILE_STATUS)===!1)throw(function(a,o){var u=Ek.exec(o);if(u==null)return console.log("Couldn't parse line number in error: "+o),void console.log(a);for(var l=+u[1],c=a.split(`
`),h=c.length.toString().length+2,d=c.map((function(w,C){return cs((C+1).toString(),h)+w})),v=0,m=0;m<d.length;m++)v=Math.max(d[m].length,v);var g=d.slice(0,l-1),x=d.slice(l-1,l),E=d.slice(l);console.log(g.join(`
`)),console.log(o.split(`
`)[0]),console.log("%c "+cs(x[0],v),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(E.join(`
`))})(t,n.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Yp,Qp,Ek=/ERROR: [0-9]+:([0-9]+):/g;function Ck(n,e){return _a(n,e,(function(){return n.createProgram()}),"Unable to create WebGLProgram.")}function Sk(n,e,t){if(_t(n,e,(function(){return n.linkProgram(t)})),n.getProgramParameter(t,n.LINK_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Failed to link vertex and fragment shaders.")}function Zp(n,e,t){if(_t(n,e,(function(){return n.validateProgram(t)})),n.getProgramParameter(t,n.VALIDATE_STATUS)===!1)throw console.log(n.getProgramInfoLog(t)),new Error("Shader program validation failed.")}function _k(n,e,t){var r=_a(n,e,(function(){return n.createBuffer()}),"Unable to create WebGLBuffer");return _t(n,e,(function(){return n.bindBuffer(n.ARRAY_BUFFER,r)})),_t(n,e,(function(){return n.bufferData(n.ARRAY_BUFFER,t,n.STATIC_DRAW)})),r}function Tk(n,e,t){var r=_a(n,e,(function(){return n.createBuffer()}),"Unable to create WebGLBuffer");return _t(n,e,(function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,r)})),_t(n,e,(function(){return n.bufferData(n.ELEMENT_ARRAY_BUFFER,t,n.STATIC_DRAW)})),r}function Rk(n,e){return _a(n,e,(function(){return n.createTexture()}),"Unable to create WebGLTexture.")}function Ak(n,e){var t=lt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(n<=0||e<=0){var r="["+n+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(n>t||e>t)throw r="["+n+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+t+"x"+t+"]")+".")}function Dk(n,e){return _a(n,e,(function(){return n.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function M2(n,e,t,r,a,o,u,l){var c=n.getAttribLocation(t,r);return c!==-1&&(_t(n,e,(function(){return n.bindBuffer(n.ARRAY_BUFFER,a)})),_t(n,e,(function(){return n.vertexAttribPointer(c,o,n.FLOAT,!1,u,l)})),_t(n,e,(function(){return n.enableVertexAttribArray(c)})),!0)}function Mk(n,e,t,r){Bk(n,r),_t(n,e,(function(){return n.activeTexture(n.TEXTURE0+r)})),_t(n,e,(function(){return n.bindTexture(n.TEXTURE_2D,t)}))}function Nk(n,e,t,r){return _a(n,e,(function(){return n.getUniformLocation(t,r)}),'uniform "'+r+'" not present in program.')}function Ok(n,e,t){return n.getUniformLocation(e,t)}function kk(n,e,t,r,a,o){_t(n,e,(function(){return Mk(n,e,r,o)})),_t(n,e,(function(){return n.uniform1i(a,o)}))}function Jp(n,e,t,r){_t(n,e,(function(){return n.bindFramebuffer(n.FRAMEBUFFER,r)})),_t(n,e,(function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0)}))}function N2(n,e,t){_t(n,e,(function(){return n.bindFramebuffer(n.FRAMEBUFFER,t)})),_t(n,e,(function(){return n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,null,0)}))}function Hc(n){var e=n.checkFramebufferStatus(n.FRAMEBUFFER);if(e!==n.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+Ik(n,e))}function Ik(n,e){switch(e){case n.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case n.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case n.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function _a(n,e,t,r){var a=_t(n,e,(function(){return t()}));if(a==null)throw new Error(r);return a}function Bk(n,e){var t=n.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+n.TEXTURE0;if(r<n.TEXTURE0||r>t)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+t+"]")+".")}function wf(n,e){return e===void 0&&(e=2),St(n.slice(0,n.length-e))}function Ef(n){if(n.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[n.length>1?n[n.length-2]:1,n[n.length-1]]}function $p(n){var e=[1,1,1];return n.length===0||n.length===1&&n[0]===1||(e=[wf(n)].concat(Ef(n))),e}function Fk(n,e){var t;e===void 0&&(e=!1);var r=lt().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(n=n.map((function(h,d){return d>=n.length-2?VC(n[d]):n[d]}))).length===1&&(n=[2,n[0]])),n.length!==2){var a=Hi(n);n=a.newShape}var o=St(n);if(n.length<=1&&o<=r)return[1,o];if(n.length===2&&n[0]<=r&&n[1]<=r)return n;if(n.length===3&&n[0]*n[1]<=r&&n[2]<=r)return[n[0]*n[1],n[2]];if(n.length===3&&n[0]<=r&&n[1]*n[2]<=r)return[n[0],n[1]*n[2]];if(n.length===4&&n[0]*n[1]*n[2]<=r&&n[3]<=r)return[n[0]*n[1]*n[2],n[3]];if(n.length===4&&n[0]<=r&&n[1]*n[2]*n[3]<=r)return[n[0],n[1]*n[2]*n[3]];if(e){var u=wf(n),l=2,c=2;return n.length&&(l=(t=Ef(n))[0],c=t[1]),Wv(o=u*(l/2)*(c/2)).map((function(h){return 2*h}))}return Wv(o)}function Gc(n){return n%2==0}function jc(n,e){if(Xe(n=n.slice(-2),e=e.slice(-2))||!n.length||!e.length||n[0]===0||n[1]===0||e[0]===0||e[1]===0)return!0;if(n.length!==e.length){var t=n.slice(-1)[0],r=e.slice(-1)[0];if(t===r||Gc(t)&&Gc(r)&&(n[0]===1||e[0]===1))return!0}return n[1]===e[1]&&Gc(n[0])&&Gc(e[0])}function Lk(n){if(Yp==null){var e=Xr(n);Yp=e.getParameter(e.MAX_TEXTURE_SIZE)}return Yp}function Pk(n){if(Qp==null){var e=Xr(n);Qp=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,Qp)}function zk(n){if(n===0)return 0;var e=Xr(n);return hr(e,"EXT_disjoint_timer_query_webgl2")&&n===2?2:hr(e,"EXT_disjoint_timer_query")?1:0}function hr(n,e){return n.getExtension(e)!=null}function O2(n){try{if(Xr(n)!=null)return!0}catch{return!1}return!1}function Uk(n){if(n===0)return!1;var e=Xr(n);if(n===1){if(!hr(e,"OES_texture_float"))return!1}else if(!hr(e,"EXT_color_buffer_float"))return!1;return Jv(e)}function Vk(n){if(n===0)return!1;var e=Xr(n);if(n!==1){if(hr(e,"EXT_color_buffer_float"))return Jv(e);if(hr(e,"EXT_color_buffer_half_float")){var t=e.getExtension("EXT_color_buffer_half_float");return(function(r,a){var o=Zm(r,a),u=r.createTexture();r.bindTexture(r.TEXTURE_2D,u),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var l=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,l),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,u,0);var c=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(u),r.deleteFramebuffer(l),c})(e,t)}return!1}return!!hr(e,"OES_texture_float")&&!!hr(e,"WEBGL_color_buffer_float")&&Jv(e)}function Jv(n){var e=Zm(n),t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texImage2D(n.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=n.createFramebuffer();n.bindFramebuffer(n.FRAMEBUFFER,r),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0);var a=n.checkFramebufferStatus(n.FRAMEBUFFER)===n.FRAMEBUFFER_COMPLETE;return n.bindTexture(n.TEXTURE_2D,null),n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteTexture(t),n.deleteFramebuffer(r),a}function Hk(n){return n===2&&Xr(n).fenceSync!=null}var kt=lt();function QC(n){lt().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(n+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function gt(n,e){return W.tidy(n,e)}function Nn(n){XC(n).forEach((function(e){return e.dispose()}))}function Gk(n){return W.keep(n)}function Cf(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];lt().getBool("IS_TEST")||console.warn.apply(console,n)}function mi(n,e){var t=n;if(jr(n))return e==="string"?[]:[n.length];if(!Array.isArray(n))return[];for(var r=[];Array.isArray(t)||jr(t)&&e!=="string";)r.push(t.length),t=t[0];return Array.isArray(n)&&lt().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&(function a(o,u,l){if(l=l||[],!Array.isArray(o)&&!jr(o))return void F(u.length===0,(function(){return"Element arr["+l.join("][")+"] is a primitive, but should be an array/TypedArray of "+u[0]+" elements"}));F(u.length>0,(function(){return"Element arr["+l.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"})),F(o.length===u[0],(function(){return"Element arr["+l.join("][")+"] should have "+u[0]+" elements, but has "+o.length+" elements"}));for(var c=u.slice(1),h=0;h<o.length;++h)a(o[h],c,l.concat(h))})(n,r,[]),r}function k2(n,e,t,r){if(n!=null&&(n!=="numeric"&&n!==e||n==="numeric"&&e==="string"))throw new Error("Argument '"+t+"' passed to '"+r+"' must be "+n+" tensor, but got "+e+" tensor")}function I(n,e,t,r){if(r===void 0&&(r="numeric"),n instanceof ye)return k2(r,n.dtype,e,t),n;var a=ul(n);if(a!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(a=r),k2(r,a,e,t),n==null||!jr(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string"){var o=n==null?"null":n.constructor.name;throw new Error("Argument '"+e+"' passed to '"+t+"' must be a Tensor or TensorLike, but got '"+o+"'")}var u=mi(n,a);jr(n)||Array.isArray(n)||(n=[n]);var l=a!=="string"?GC(n,a,lt().getBool("DEBUG")):bs(n,[],!0);return W.makeTensor(l,u,a)}function Sf(n,e,t,r){if(r===void 0&&(r="numeric"),!Array.isArray(n))throw new Error("Argument "+e+" passed to "+t+" must be a `Tensor[]` or `TensorLike[]`");return n.map((function(a,o){return I(a,e+"["+o+"]",t)}),r)}function ZC(n,e){for(var t=0;t<n.length;++t)if(n[n.length-t-1]!==e-1-t)return!1;return!0}function jk(n,e,t){for(var r=n.length+e.length,a=[],o=0,u=0,l=0;l<r;l++)t.indexOf(l)===-1?a.push(n[o++]):a.push(e[u++]);return a}function ln(n,e){for(var t=[],r=n.length,a=0;a<r;a++)e.indexOf(a)===-1&&t.push(n[a]);return[t,e.map((function(o){return n[o]}))]}function On(n,e){return jk(n,e.map((function(t){return 1})),e)}function jn(n,e,t){F(ZC(e,t),(function(){return n+" supports only inner-most axes for now. Got axes "+e+" and rank-"+t+" input."}))}function Yr(n,e){if(ZC(n,e))return null;for(var t=[],r=0;r<e;++r)n.indexOf(r)===-1&&t.push(r);return n.forEach((function(a){return t.push(a)})),t}function Jm(n){return n.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function Qr(n,e){for(var t=[],r=e-n;r<e;++r)t.push(r);return t}function Wk(n,e){var t=n[0].length;n.forEach((function(a,o){F(a.length===t,(function(){return"Error in concat"+t+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+t+")"}))})),F(e>=0&&e<t,(function(){return"Error in concat"+t+"D: axis must be between 0 and "+(t-1)+"."}));var r=n[0];n.forEach((function(a,o){for(var u=0;u<t;u++)F(u===e||a[u]===r[u],(function(){return"Error in concat"+t+"D: Shape of tensors["+o+"] ("+a+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."}))}))}function ws(n,e){for(var t=n[0].slice(),r=1;r<n.length;r++)t[e]+=n[r][e];return t}function H(n){var e=Object.keys(n);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var t=e[0],r=n[t];t.endsWith("_")&&(t=t.substring(0,t.length-1));var a=function(){for(var o=[],u=0;u<arguments.length;u++)o[u]=arguments[u];W.startScope(t);try{var l=r.apply(void 0,o);return l instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),W.endScope(l),l}catch(c){throw W.endScope(null),c}};return Object.defineProperty(a,"name",{value:t,configurable:!0}),a}kt.registerFlag("HAS_WEBGL",(function(){return kt.getNumber("WEBGL_VERSION")>0})),kt.registerFlag("WEBGL_VERSION",(function(){return O2(2)?2:O2(1)?1:0})),kt.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return kt.get("WEBGL_VERSION")===2})),kt.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),kt.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),kt.registerFlag("WEBGL_PACK",(function(){return kt.getBool("HAS_WEBGL")})),kt.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return kt.getBool("WEBGL_PACK")})),kt.registerFlag("WEBGL_PACK_CLIP",(function(){return kt.getBool("WEBGL_PACK")})),kt.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),kt.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return kt.getBool("WEBGL_PACK")})),kt.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return kt.getBool("WEBGL_PACK")})),kt.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return kt.getBool("WEBGL_PACK")})),kt.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return kt.getBool("WEBGL_PACK")})),kt.registerFlag("WEBGL_PACK_REDUCE",(function(){return kt.getBool("WEBGL_PACK")})),kt.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return kt.getBool("WEBGL_PACK")})),kt.registerFlag("WEBGL_CONV_IM2COL",(function(){return kt.getBool("WEBGL_PACK")})),kt.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return Lk(kt.getNumber("WEBGL_VERSION"))})),kt.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return Pk(kt.getNumber("WEBGL_VERSION"))})),kt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var n=kt.getNumber("WEBGL_VERSION");return n===0?0:zk(n)})),kt.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return kt.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(n=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(n)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(n.substr(0,4))));var n})),kt.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return Uk(kt.getNumber("WEBGL_VERSION"))})),kt.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!kt.getBool("WEBGL_FORCE_F16_TEXTURES")&&kt.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),kt.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return Vk(kt.getNumber("WEBGL_VERSION"))})),kt.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return Hk(kt.getNumber("WEBGL_VERSION"))})),kt.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return kt.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),KC=QC;var an=H({complex_:function(n,e){var t=I(n,"real","complex"),r=I(e,"imag","complex");return ne(t.shape,r.shape,"real and imag shapes, "+t.shape+" and "+r.shape+", must match in call to tf.complex()."),W.runKernelFunc((function(a){return a.complex(t,r)}),{$real:t,$imag:r})}}),cr=H({real_:function(n){var e=I(n,"input","real");return W.runKernelFunc((function(t){return t.real(e)}),{$input:e})}}),Ur=H({imag_:function(n){var e=I(n,"input","imag");return W.runKernelFunc((function(t){return t.imag(e)}),{$input:e})}});function sn(n,e,t){return gi(n,e,mi(n,t),t)}function gi(n,e,t,r){if(r==null&&(r=ul(n)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!jr(n)&&!Array.isArray(n)&&typeof n!="number"&&typeof n!="boolean"&&typeof n!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){WC(e);var a=St(e),o=St(t);F(a===o,(function(){return"Based on the provided shape, ["+e+"], the tensor should have "+a+" values but has "+o}));for(var u=0;u<t.length;++u){var l=t[u],c=u!==t.length-1||l!==St(e.slice(u));F(t[u]===e[u]||!c,(function(){return"Error creating a new Tensor. Inferred shape ("+t+") does not match the provided shape ("+e+"). "}))}}return jr(n)||Array.isArray(n)||(n=[n]),e=e||t,n=r!=="string"?GC(n,r,lt().getBool("DEBUG")):bs(n,[],!0),W.makeTensor(n,e,r)}function vt(n,e){if((jr(n)&&e!=="string"||Array.isArray(n))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&jr(n)&&!(n instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return gi(n,[],[],e)}function Fe(n,e){Rs(n);var t=mi(n,e);if(t.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return gi(n,null,t,e)}function si(n,e,t){if(Rs(n),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=mi(n,t);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return gi(n,e,r,t)}function $m(n,e,t){if(Rs(n),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=mi(n,t);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return gi(n,e,r,t)}function An(n,e,t){if(Rs(n),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=mi(n,t);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return gi(n,e,r,t)}function qk(n,e,t){if(Rs(n),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=mi(n,t);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return gi(n,e,r,t)}function Kk(n,e,t){if(Rs(n),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=mi(n,t);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return gi(n,e=e||r,r,t)}function Xk(n,e,t,r){return e===void 0&&(e=!0),W.makeVariable(n,e,t,r)}function As(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=As(n,"float32"),r=ve(n,"float32");return an(t,r)}var a=jC(St(n),e);return W.makeTensor(a,n,e)}function ve(n,e){if(e===void 0&&(e="float32"),e==="complex64"){var t=ve(n,"float32"),r=ve(n,"float32");return an(t,r)}var a=ll(St(n),e);return W.makeTensor(a,n,e)}function qr(n,e,t){return W.runKernelFunc((function(r){return r.fill(n,e,t)}),{})}function Yk(n,e,t){if(t<=0)throw new Error("The number of values should be positive.");return W.runKernelFunc((function(r){return r.linspace(n,e,t)}),{})}function _f(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t===0)throw new Error("Cannot have a step of zero");if(n===e||n<e&&t<0||e<n&&t>1)return ve([0],r);var a=ll(Math.abs(Math.ceil((e-n)/t)),r);e<n&&t===1&&(t=-1),a[0]=n;for(var o=1;o<a.length;o++)a[o]=a[o-1]+t;return Fe(a,r)}var JC=H({onesLike_:function(n){var e=I(n,"x","onesLike");if(e.dtype==="complex64"){var t=JC(cr(e)),r=Yt(Ur(e));return an(t,r)}return W.runKernelFunc((function(a){return a.onesLike(e)}),{$x:e},(function(a,o){return{$x:function(){return Yt(a)}}}))}}),Yt=H({zerosLike_:function(n){var e=I(n,"x","zerosLike");return W.runKernelFunc((function(t){return t.zerosLike(e)}),{$x:e},(function(t,r){return{$x:function(){return Yt(t)}}}))}}),Ue=H({concat_:function(n,e){e===void 0&&(e=0),F(n.length>=1,(function(){return"Pass at least one tensor to concat"}));var t=Sf(n,"tensors","concat");t[0].dtype==="complex64"&&t.forEach((function(l){if(l.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype `+l.dtype+". ")})),e=je(e,t[0].shape)[0];var r=ws(t.map((function(l){return l.shape})),e);if(St(r)===0)return sn([],r);if((t=t.filter((function(l){return l.size>0}))).length===1)return t[0];var a=t.map((function(l){return l.shape}));Wk(a,e);var o=t,u={axis:e};return W.runKernelFunc((function(l){return l.concat(t,e)}),o,(function(l){var c=a.map((function(h){return h[e]}));return tg(l,c,e).map((function(h){return function(){return h}}))}),"Concat",u)}}),Qk=H({concat1d_:function(n){return Ue(n,0)}}),Zk=H({concat2d_:function(n,e){return Ue(n,e)}}),Jk=H({concat3d_:function(n,e){return Ue(n,e)}}),$k=H({concat4d_:function(n,e){return Ue(n,e)}}),tg=H({split_:function(n,e,t){t===void 0&&(t=0);var r,a=I(n,"x","split");return t=je(t,a.shape)[0],typeof e=="number"?(F(a.shape[t]%e==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(e).fill(a.shape[t]/e)):(F(a.shape[t]===e.reduce((function(o,u){return o+u})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=e),W.runKernelFunc((function(o){return o.split(a,r,t)}),{$x:a},(function(o){return{$x:function(){return Ue(o,t)}}}))}});function no(n,e){return n(e={exports:{}},e.exports),e.exports}var tI=no((function(n){(function(e,t,r){function a(l){var c,h=this,d=(c=4022871197,function(v){v=v.toString();for(var m=0;m<v.length;m++){var g=.02519603282416938*(c+=v.charCodeAt(m));g-=c=g>>>0,c=(g*=c)>>>0,c+=4294967296*(g-=c)}return 23283064365386963e-26*(c>>>0)});h.next=function(){var v=2091639*h.s0+23283064365386963e-26*h.c;return h.s0=h.s1,h.s1=h.s2,h.s2=v-(h.c=0|v)},h.c=1,h.s0=d(" "),h.s1=d(" "),h.s2=d(" "),h.s0-=d(l),h.s0<0&&(h.s0+=1),h.s1-=d(l),h.s1<0&&(h.s1+=1),h.s2-=d(l),h.s2<0&&(h.s2+=1),d=null}function o(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function u(l,c){var h=new a(l),d=c&&c.state,v=h.next;return v.int32=function(){return 4294967296*h.next()|0},v.double=function(){return v()+11102230246251565e-32*(2097152*v()|0)},v.quick=v,d&&(typeof d=="object"&&o(d,h),v.state=function(){return o(h,{})}),v}t&&t.exports?t.exports=u:this.alea=u})(0,n)})),eI=no((function(n){(function(e,t,r){function a(l){var c=this,h="";c.x=0,c.y=0,c.z=0,c.w=0,c.next=function(){var v=c.x^c.x<<11;return c.x=c.y,c.y=c.z,c.z=c.w,c.w^=c.w>>>19^v^v>>>8},l===(0|l)?c.x=l:h+=l;for(var d=0;d<h.length+64;d++)c.x^=0|h.charCodeAt(d),c.next()}function o(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c}function u(l,c){var h=new a(l),d=c&&c.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var m=((h.next()>>>11)+(h.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=h.next,v.quick=v,d&&(typeof d=="object"&&o(d,h),v.state=function(){return o(h,{})}),v}t&&t.exports?t.exports=u:this.xor128=u})(0,n)})),nI=no((function(n){(function(e,t,r){function a(l){var c=this,h="";c.next=function(){var v=c.x^c.x>>>2;return c.x=c.y,c.y=c.z,c.z=c.w,c.w=c.v,(c.d=c.d+362437|0)+(c.v=c.v^c.v<<4^v^v<<1)|0},c.x=0,c.y=0,c.z=0,c.w=0,c.v=0,l===(0|l)?c.x=l:h+=l;for(var d=0;d<h.length+64;d++)c.x^=0|h.charCodeAt(d),d==h.length&&(c.d=c.x<<10^c.x>>>4),c.next()}function o(l,c){return c.x=l.x,c.y=l.y,c.z=l.z,c.w=l.w,c.v=l.v,c.d=l.d,c}function u(l,c){var h=new a(l),d=c&&c.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var m=((h.next()>>>11)+(h.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=h.next,v.quick=v,d&&(typeof d=="object"&&o(d,h),v.state=function(){return o(h,{})}),v}t&&t.exports?t.exports=u:this.xorwow=u})(0,n)})),rI=no((function(n){(function(e,t,r){function a(l){var c=this;c.next=function(){var h,d,v=c.x,m=c.i;return h=v[m],d=(h^=h>>>7)^h<<24,d^=(h=v[m+1&7])^h>>>10,d^=(h=v[m+3&7])^h>>>3,d^=(h=v[m+4&7])^h<<7,h=v[m+7&7],d^=(h^=h<<13)^h<<9,v[m]=d,c.i=m+1&7,d},(function(h,d){var v,m=[];if(d===(0|d))m[0]=d;else for(d=""+d,v=0;v<d.length;++v)m[7&v]=m[7&v]<<15^d.charCodeAt(v)+m[v+1&7]<<13;for(;m.length<8;)m.push(0);for(v=0;v<8&&m[v]===0;++v);for(v==8?m[7]=-1:m[v],h.x=m,h.i=0,v=256;v>0;--v)h.next()})(c,l)}function o(l,c){return c.x=l.x.slice(),c.i=l.i,c}function u(l,c){l==null&&(l=+new Date);var h=new a(l),d=c&&c.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var m=((h.next()>>>11)+(h.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=h.next,v.quick=v,d&&(d.x&&o(d,h),v.state=function(){return o(h,{})}),v}t&&t.exports?t.exports=u:this.xorshift7=u})(0,n)})),aI=no((function(n){(function(e,t,r){function a(l){var c=this;c.next=function(){var h,d,v=c.w,m=c.X,g=c.i;return c.w=v=v+1640531527|0,d=m[g+34&127],h=m[g=g+1&127],d^=d<<13,h^=h<<17,d^=d>>>15,h^=h>>>12,d=m[g]=d^h,c.i=g,d+(v^v>>>16)|0},(function(h,d){var v,m,g,x,E,w=[],C=128;for(d===(0|d)?(m=d,d=null):(d+="\0",m=0,C=Math.max(C,d.length)),g=0,x=-32;x<C;++x)d&&(m^=d.charCodeAt((x+32)%d.length)),x===0&&(E=m),m^=m<<10,m^=m>>>15,m^=m<<4,m^=m>>>13,x>=0&&(E=E+1640531527|0,g=(v=w[127&x]^=m+E)==0?g+1:0);for(g>=128&&(w[127&(d&&d.length||0)]=-1),g=127,x=512;x>0;--x)m=w[g+34&127],v=w[g=g+1&127],m^=m<<13,v^=v<<17,m^=m>>>15,v^=v>>>12,w[g]=m^v;h.w=E,h.X=w,h.i=g})(c,l)}function o(l,c){return c.i=l.i,c.w=l.w,c.X=l.X.slice(),c}function u(l,c){l==null&&(l=+new Date);var h=new a(l),d=c&&c.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var m=((h.next()>>>11)+(h.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=h.next,v.quick=v,d&&(d.X&&o(d,h),v.state=function(){return o(h,{})}),v}t&&t.exports?t.exports=u:this.xor4096=u})(0,n)})),iI=no((function(n){(function(e,t,r){function a(l){var c=this,h="";c.next=function(){var v=c.b,m=c.c,g=c.d,x=c.a;return v=v<<25^v>>>7^m,m=m-g|0,g=g<<24^g>>>8^x,x=x-v|0,c.b=v=v<<20^v>>>12^m,c.c=m=m-g|0,c.d=g<<16^m>>>16^x,c.a=x-v|0},c.a=0,c.b=0,c.c=-1640531527,c.d=1367130551,l===Math.floor(l)?(c.a=l/4294967296|0,c.b=0|l):h+=l;for(var d=0;d<h.length+20;d++)c.b^=0|h.charCodeAt(d),c.next()}function o(l,c){return c.a=l.a,c.b=l.b,c.c=l.c,c.d=l.d,c}function u(l,c){var h=new a(l),d=c&&c.state,v=function(){return(h.next()>>>0)/4294967296};return v.double=function(){do var m=((h.next()>>>11)+(h.next()>>>0)/4294967296)/2097152;while(m===0);return m},v.int32=h.next,v.quick=v,d&&(typeof d=="object"&&o(d,h),v.state=function(){return o(h,{})}),v}t&&t.exports?t.exports=u:this.tychei=u})(0,n)})),Vi=no((function(n){(function(e,t){var r,a=this,o=256,u=6,l="random",c=t.pow(o,u),h=t.pow(2,52),d=2*h,v=o-1;function m(C,S,_){var T=[],A=E((function k(O,B){var V,U=[],it=typeof O;if(B&&it=="object")for(V in O)try{U.push(k(O[V],B-1))}catch{}return U.length?U:it=="string"?O:O+"\0"})((S=S==1?{entropy:!0}:S||{}).entropy?[C,w(e)]:C??(function(){try{var k;return r&&(k=r.randomBytes)?k=k(o):(k=new Uint8Array(o),(a.crypto||a.msCrypto).getRandomValues(k)),w(k)}catch{var O=a.navigator,B=O&&O.plugins;return[+new Date,a,B,a.screen,w(e)]}})(),3),T),D=new g(T),N=function(){for(var k=D.g(u),O=c,B=0;k<h;)k=(k+B)*o,O*=o,B=D.g(1);for(;k>=d;)k/=2,O/=2,B>>>=1;return(k+B)/O};return N.int32=function(){return 0|D.g(4)},N.quick=function(){return D.g(4)/4294967296},N.double=N,E(w(D.S),e),(S.pass||_||function(k,O,B,V){return V&&(V.S&&x(V,D),k.state=function(){return x(D,{})}),B?(t[l]=k,O):k})(N,A,"global"in S?S.global:this==t,S.state)}function g(C){var S,_=C.length,T=this,A=0,D=T.i=T.j=0,N=T.S=[];for(_||(C=[_++]);A<o;)N[A]=A++;for(A=0;A<o;A++)N[A]=N[D=v&D+C[A%_]+(S=N[A])],N[D]=S;(T.g=function(k){for(var O,B=0,V=T.i,U=T.j,it=T.S;k--;)O=it[V=v&V+1],B=B*o+it[v&(it[V]=it[U=v&U+O])+(it[U]=O)];return T.i=V,T.j=U,B})(o)}function x(C,S){return S.i=C.i,S.j=C.j,S.S=C.S.slice(),S}function E(C,S){for(var _,T=C+"",A=0;A<T.length;)S[v&A]=v&(_^=19*S[v&A])+T.charCodeAt(A++);return w(S)}function w(C){return String.fromCharCode.apply(0,C)}if(t["seed"+l]=m,E(t.random(),e),n.exports){n.exports=m;try{r=require("crypto")}catch{}}})([],Math)}));Vi.alea=tI,Vi.xor128=eI,Vi.xorwow=nI,Vi.xorshift7=rI,Vi.xor4096=aI,Vi.tychei=iI;var Kf=Vi.alea,eg=(function(){function n(e,t,r,a,o){this.mean=e,this.stdDev=t,this.dtype=r,this.nextVal=NaN,this.truncated=a,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var u=o||Math.random();this.random=Kf(u.toString())}return n.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,r,a=!1;!a;){var o=void 0,u=void 0,l=void 0;do l=(o=2*this.random()-1)*o+(u=2*this.random()-1)*u;while(l>=1||l===0);var c=Math.sqrt(-2*Math.log(l)/l);t=this.mean+this.stdDev*o*c,r=this.mean+this.stdDev*u*c,this.truncated&&!this.isValidTruncated(t)||(a=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(t)},n.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},n.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},n})(),oI=(function(){function n(e,t,r,a){this.alpha=e,this.beta=1/t,this.dtype=r;var o=a||Math.random();this.randu=Kf(o.toString()),this.randn=new eg(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return n.prototype.nextValue=function(){for(var e,t,r,a,o,u;;){do a=this.randn.nextValue(),u=1+this.c*a;while(u<=0);if(u*=u*u,t=1-.331*(e=a*a)*e,r=.5*e+this.d*(1-u+Math.log(u)),(o=this.randu())<t||Math.log(o)<r)break}return u=1/this.beta*this.d*u,this.alpha<1&&(u*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(u)},n.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},n})(),sI=(function(){function n(e,t,r,a){var o=this;if(e===void 0&&(e=0),t===void 0&&(t=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=e,this.range=t-e,this.dtype=r,a==null&&(a=Math.random()),typeof a=="number"&&(a=a.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=Kf(a)}return n.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},n.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},n})();function Ft(n,e,t){return e===void 0&&(e="float32"),e=e||"float32",WC(n),new Wu(n,e,t)}function uI(n,e){e===void 0&&(e=!1),console.log(n.toString(e))}var $C=H({batchToSpaceND_:function(n,e,t){var r=I(n,"x","batchToSpaceND"),a=e.reduce((function(o,u){return o*u}));return F(r.rank>=1+e.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length})),F(t.length===e.length,(function(){return"crops.length is "+t.length+" but should be equal to blockShape.length  "+e.length})),F(r.shape[0]%a==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+a})),W.runKernelFunc((function(o){return o.batchToSpaceND(r,e,t)}),{$x:r},(function(o){return{$x:function(){return o.spaceToBatchND(e,t)}}}))}}),lI=H({broadcastTo_:function(n,e){var t=I(n,"broadcastTo","x"),r=t.shape;if(e.some((function(c){return!(c>0)||c%1!=0})))throw new Error("broadcastTo(): Invalid broadcast shape ["+e+"].");if(e.length<t.rank)throw new Error("broadcastTo(): shape.length="+e.length+" < input.rank="+t.rank+".");if(e.length>t.rank){for(var a=t.shape.slice();a.length<e.length;)a.unshift(1);t=t.reshape(a)}for(var o=Array.from(e),u=e.length-1;u>=0;u--)if(t.shape[u]===e[u])o[u]=1;else if(t.shape[u]!==1)throw new Error("broadcastTo(): ["+r+"] cannot be broadcast to ["+e+"].");var l=o.map((function(c,h){return c>1?h:-1})).filter((function(c){return c>=0}));return l.length===0?t.clone():W.runKernelFunc((function(c){return c.tile(t,o)}),{input:t},(function(c){return{input:function(){return c.sum(l,!0)}}}))}}),cI=H({cast_:function(n,e){var t=I(n,"x","cast");if(!nk(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&t.dtype!=="string"||e!=="string"&&t.dtype==="string")throw new Error("Only strings can be casted to strings");var r={dtype:e};return W.runKernelFunc((function(a){return a.cast(t,e)}),{x:t},(function(a){return{x:function(){return a.clone()}}}),"Cast",r)}}),fI=H({clone_:function(n){var e=I(n,"x","clone",null);return W.runKernelFunc((function(){return W.makeTensorFromDataId(e.dataId,e.shape,e.dtype)}),{$x:e},(function(t){return{$x:function(){return t.toFloat()}}}))}}),hI=H({cumsum_:function(n,e,t,r){e===void 0&&(e=0),t===void 0&&(t=!1),r===void 0&&(r=!1);var a=I(n,"x","cumsum"),o=Yr([e|=0],a.rank),u=a;o!=null&&(u=a.transpose(o));var l=Qr(1,a.rank)[0],c=W.runKernelFunc((function(h){return h.cumsum(u,l,t,r)}),{permutedX:u},(function(h){return{permutedX:function(){return h.cumsum(e,t,!r)}}}));return o!=null&&(c=c.transpose(o)),c}}),dI=H({depthToSpace_:function(n,e,t){t===void 0&&(t="NHWC");var r=I(n,"x","depthToSpace"),a=t==="NHWC"?r.shape[1]:r.shape[2],o=t==="NHWC"?r.shape[2]:r.shape[3],u=t==="NHWC"?r.shape[3]:r.shape[1];return F(a*e>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+a+" and "+e+`  for depthToSpace with input shape
      `+r.shape})),F(o*e>=0,(function(){return`Negative dimension size caused by overflow when multiplying
      `+o+" and "+e+` for depthToSpace with input shape
          `+r.shape})),F(u%(e*e)==0,(function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+u+" for depthToSpace with input shape "+r.shape})),W.runKernelFunc((function(l){return l.depthToSpace(r,e,t)}),{$x:r})}}),lr=H({expandDims_:function(n,e){e===void 0&&(e=0);var t=I(n,"x","expandDims",null);F(e<=t.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=t.shape.slice();return e<0&&(F(-(t.rank+1)<=e,(function(){return"Axis must be in the interval ["+-(t.rank+1)+", "+t.rank+"]"})),e=t.rank+e+1),r.splice(e,0,1),Sr(t,r)}}),tS=H({eye_:function(n,e,t,r){r===void 0&&(r="float32"),e==null&&(e=n);for(var a=Ft([n,e],r),o=n<=e?n:e,u=0;u<o;++u)a.set(1,u,u);var l=a.toTensor().as2D(n,e);if(t==null)return l;if(t.length===1)return fs(lr(l,0),[t[0],1,1]);if(t.length===2)return fs(lr(lr(l,0),0),[t[0],t[1],1,1]);if(t.length===3)return fs(lr(lr(lr(l,0),0),0),[t[0],t[1],t[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+t.length+"D.")}}),pI=H({multinomial_:function(n,e,t,r){r===void 0&&(r=!1);var a=I(n,"logits","multinomial"),o=a.size,u=a.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(u>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+u);t=t||Math.random();var l=u===1?a.as2D(1,-1):a,c=W.runKernelFunc((function(h){return h.multinomial(l,r,e,t)}),{logits2D:l});return u===1?c.as1D():c}}),$v=H({oneHot_:function(n,e,t,r){if(t===void 0&&(t=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var a=I(n,"indices","oneHot","int32"),o=a.shape.concat([e]);return a=a.flatten(),W.runKernelFunc((function(u){return u.oneHot(a,e,t,r)}),{$indices:a},(function(u){return{$indices:function(){return ve(a.shape,"float32")}}})).reshape(o)}}),ro=H({pad_:function(n,e,t){t===void 0&&(t=0);var r=I(n,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var a={paddings:e,constantValue:t};return W.runKernelFunc((function(o){return o.pad(r,e,t)}),{x:r},(function(o){var u=e.map((function(l){return l[0]}));return{x:function(){return o.slice(u,r.shape)}}}),"PadV2",a)}}),vI=H({pad1d_:function(n,e,t){return t===void 0&&(t=0),F(e.length===2,(function(){return"Invalid number of paddings. Must be length of 2."})),ro(n,[e],t)}}),mI=H({pad2d_:function(n,e,t){return t===void 0&&(t=0),F(e.length===2&&e[0].length===2&&e[1].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ro(n,e,t)}}),gI=H({pad3d_:function(n,e,t){return t===void 0&&(t=0),F(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ro(n,e,t)}}),yI=H({pad4d_:function(n,e,t){return t===void 0&&(t=0),F(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,(function(){return"Invalid number of paddings. Must be length of 2 each."})),ro(n,e,t)}}),bI=H({rand_:function(n,e,t){var r=St(n),a=null;if(t==null||t==="float32")a=new Float32Array(r);else if(t==="int32")a=new Int32Array(r);else{if(t!=="bool")throw new Error("Unknown data type "+t);a=new Uint8Array(r)}for(var o=0;o<r;o++)a[o]=e();return W.makeTensor(a,n,t)}}),xI=H({randomNormal_:function(n,e,t,r,a){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new eg(e,t,r,!1,a),u=Ft(n,r),l=0;l<u.values.length;l++)u.values[l]=o.nextValue();return u.toTensor()}}),wI=H({randomGamma_:function(n,e,t,r,a){if(t===void 0&&(t=1),r===void 0&&(r="float32"),t==null&&(t=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new oI(e,t,r,a),u=Ft(n,r),l=0;l<u.values.length;l++)u.values[l]=o.nextValue();return u.toTensor()}}),eS=H({randomUniform_:function(n,e,t,r,a){e===void 0&&(e=0),t===void 0&&(t=1),r===void 0&&(r="float32");for(var o=Ft(n,r),u=new sI(e,t,null,a),l=0;l<o.values.length;l++)o.values[l]=u.nextValue();return o.toTensor()}}),Sr=H({reshape_:function(n,e){var t=I(n,"x","reshape",null);e=tk(e,t.size),F(t.size===St(e),(function(){return"new shape and old shape must have the same number of elements."}));var r={shape:e};return W.runKernelFunc((function(a){return a.reshape(t,e)}),{x:t},(function(a){return{x:function(){return a.reshape(t.shape)}}}),"Reshape",r)}}),nS=H({spaceToBatchND_:function(n,e,t){var r=I(n,"x","spaceToBatchND");return F(r.rank>=1+e.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length})),F(t.length===e.length,(function(){return"paddings.shape[0] "+t.length+" must be equal to [blockShape] "+e.length})),F(r.shape.reduce((function(a,o,u){return u>0&&u<=e.length?a&&(o+t[u-1][0]+t[u-1][1])%e[u-1]==0:a}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+t.toString()+" must be divisible by blockShapes "+e.toString()})),W.runKernelFunc((function(a){return a.spaceToBatchND(r,e,t)}),{$x:r},(function(a){return{$x:function(){return a.batchToSpaceND(e,t)}}}))}}),rS=H({squeeze_:function(n,e){var t=I(n,"x","squeeze");return Sr(t,Hi(t.shape,e).newShape)}}),Yn=H({stack_:function(n,e){e===void 0&&(e=0);var t=Sf(n,"tensors","stack");if(F(t.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),t.length===1)return t[0].expandDims(e);var r=t[0].rank,a=t[0].shape,o=t[0].dtype;F(e<=r,(function(){return"Axis must be <= rank of the tensor"})),t.forEach((function(l){ne(a,l.shape,"All tensors passed to stack must have matching shapes")})),t.forEach((function(l){F(o===l.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var u=t.map((function(l){return l.expandDims(e)}));return Ue(u,e)}}),fs=H({tile_:function(n,e){var t=I(n,"x","tile",null);F(t.rank===e.length,(function(){return"Error in transpose: rank of input "+t.rank+" must match length of reps "+e+"."}));var r=[t],a={reps:e};return W.runKernelFunc((function(o,u){var l=o.tile(t,e);return u([t]),l}),{x:t},(function(o,u){var l=u[0];return{x:function(){var c=Yt(l);if(l.rank===1)for(var h=0;h<e[0];++h)c=c.add(o.slice([h*l.shape[0]],[l.shape[0]]));else if(l.rank===2)for(h=0;h<e[0];++h)for(var d=0;d<e[1];++d)c=c.add(o.slice([h*l.shape[0],d*l.shape[1]],[l.shape[0],l.shape[1]]));else if(l.rank===3)for(h=0;h<e[0];++h)for(d=0;d<e[1];++d)for(var v=0;v<e[2];++v)c=c.add(o.slice([h*l.shape[0],d*l.shape[1],v*l.shape[2]],[l.shape[0],l.shape[1],l.shape[2]]));else{if(l.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+l.rank+" tensors yet.");for(h=0;h<e[0];++h)for(d=0;d<e[1];++d)for(v=0;v<e[2];++v)for(var m=0;m<e[3];++m)c=c.add(o.slice([h*l.shape[0],d*l.shape[1],v*l.shape[2],m*l.shape[3]],[l.shape[0],l.shape[1],l.shape[2],l.shape[3]]))}return c}}}),"Tile",a,r)}}),EI=H({truncatedNormal_:function(n,e,t,r,a){if(e===void 0&&(e=0),t===void 0&&(t=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new eg(e,t,r,!0,a),u=Ft(n,r),l=0;l<u.values.length;l++)u.values[l]=o.nextValue();return u.toTensor()}}),Ve=H({unstack_:function(n,e){e===void 0&&(e=0),e=e||0;var t=I(n,"x","unstack");F(e>=-t.shape.length&&e<t.shape.length,(function(){return"Axis = "+e+" is not in [-"+t.shape.length+", "+t.shape.length+")"})),e<0&&(e+=t.shape.length);var r={axis:e};return W.runKernelFunc((function(a){return a.unstack(t,e)}),{x:t},(function(a){return{x:function(){return Yn(a,e)}}}),"Unpack",r)}}),CI=function(n,e){return xt(this,void 0,void 0,(function(){var t,r,a,o,u,l,c,h,d,v;return wt(this,(function(m){switch(m.label){case 0:return t=I(n,"x","setdiff1d"),r=I(e,"y","setdiff1d"),F(t.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+t.dtype+") and y ("+r.dtype+")."})),F(t.rank===1,(function(){return"x should be 1D tensor, but got x ("+t.shape+")."})),F(r.rank===1,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,t.data()];case 1:return a=m.sent(),[4,r.data()];case 2:for(o=m.sent(),u=new Set(o),l=0,d=0;d<a.length;d++)u.has(a[d])||l++;for(c=new Wu([l],t.dtype),h=new Wu([l],"int32"),d=0,v=0;d<a.length;d++)u.has(a[d])||(c.values[v]=a[d],h.values[v]=d,v++);return[2,[c.toTensor(),h.toTensor()]]}}))}))};function Tf(n,e,t,r){r===void 0&&(r=!0);var a=[];if(r)(a=a.concat(e.slice(0))).push(n[0]/t),a=a.concat(n.slice(1));else{a=a.concat(n[0]);for(var o=e.length,u=0;u<o;++u)a=a.concat([n[u+1]/e[u],e[u]]);a=a.concat(n.slice(o+1))}return a}function Rf(n,e,t){t===void 0&&(t=!0);var r=[];if(t){r.push(e);for(var a=e+1;a<n;++a)a<=2*e?(r.push(a),r.push(a-(e+1))):r.push(a)}else{var o=[],u=[];for(a=1;a<n;++a)a>=2*e+1||a%2==1?u.push(a):o.push(a);r.push.apply(r,o),r.push(0),r.push.apply(r,u)}return r}function Af(n,e,t,r){r===void 0&&(r=!0);var a=[];r?a.push(n[0]/t):a.push(n[0]*t);for(var o=1;o<n.length;++o)o<=e.length?r?a.push(e[o-1]*n[o]):a.push(n[o]/e[o-1]):a.push(n[o]);return a}function aS(n,e){for(var t=[0],r=0;r<e;++r)t.push(n[r][0]);return t}function iS(n,e,t){for(var r=n.slice(0,1),a=0;a<t;++a)r.push(n[a+1]-e[a][0]-e[a][1]);return r}function oS(n,e){if(n.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+n.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>n.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+n.rank);if(n.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+n.shape+".");for(var t=e.shape,r=t[t.length-1],a=1,o=0;o<t.length-1;++o)a*=t[o];var u=n.shape,l=t.slice();l.pop();var c=1;for(o=r;o<n.rank;++o)c*=u[o],l.push(u[o]);var h=Wr(n.shape).map((function(d){return d/c})).concat([1]).slice(0,r);return[l,a,c,h]}var sS=30;function tv(n){return n<=sS?n:Kv(n,Math.floor(Math.sqrt(n)))}function SI(n,e,t){var r=e.rank>1?e.shape[e.rank-1]:1,a=e.rank>1?e.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+t.shape+", indices.shape: "+e.shape+", shape: "+n+", sliceDim: "+r+", and batchDim: "+a+".";if(t.rank<a)throw new Error(o+" update.rank < "+a+". ");if(n.length<r+(t.rank-a))throw new Error(o+" Output shape length < "+(r+(t.rank-a)));if(t.rank!==a+n.length-r)throw new Error(o+" update.rank != "+(a+n.length-r));for(var u=0;u<a;++u)if(t.shape[u]!==e.shape[u])throw new Error(o+" updates.shape["+u+"] ("+t.shape[u]+") != indices.shape["+u+"] ("+e.shape[u]+").");for(u=0;u<t.rank-a;++u)if(t.shape[u+a]!==n[u+r])throw new Error(o+" updates.shape["+(u+a)+"] ("+t.shape[u+a]+") != shape["+(u+a)+"] ("+n[u+a]+")")}function _I(n,e,t){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(n.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+n.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(t.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+t);if(t.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(n.size===0)throw new Error("Updates specified for empty output. updates shape: "+n.shape)}SI(t,e,n)}function Df(n,e,t){for(var r=e.shape.length,a=r>1?e.shape[r-1]:1,o=t.length,u=1,l=a;l<o;++l)u*=t[l];var c=a<1?1:a;return{sliceRank:a,numUpdates:St(e.shape)/c,sliceSize:u,strides:Wr(t.slice(0,a)).concat([1]),outputSize:St(t)}}function TI(n,e,t){F(n.rank===e.length,(function(){return"Error in slice"+n.rank+"D: Length of begin "+e+" must match the rank of the array ("+n.rank+")."})),F(n.rank===t.length,(function(){return"Error in slice"+n.rank+"D: Length of size "+t+" must match the rank of the array ("+n.rank+")."}));for(var r=function(o){F(e[o]+t[o]<=n.shape[o],(function(){return"Error in slice"+n.rank+"D: begin["+o+"] + size["+o+"] ("+(e[o]+t[o])+") would overflow input.shape["+o+"] ("+n.shape[o]+")"}))},a=0;a<n.rank;++a)r(a)}function I2(n){for(var e=[],t=0;n>0;)1&n&&e.push(t),n/=2,t++;return e}function ng(n,e,t){for(var r=[],a=0;a<n.length;a++)r[a]=Math.ceil((e[a]-n[a])/t[a]);return r}function RI(n,e,t,r,a){var o=e[a],u=t[a]||1;(n&1<<a||o==null)&&(o=u>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var l=r[a];return o<0&&(o+=l),o=jv(0,o,l-1)}function AI(n,e,t,r,a){var o=e[a],u=t[a]||1;(n&1<<a||o==null)&&(o=u>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var l=r[a];return o<0&&(o+=l),o=u>0?jv(0,o,l):jv(-1,o,l-1)}function uS(n,e,t){for(var r=t.length,a=0;a<t.length;a++)if(t[a]>1){r=a;break}for(a=r+1;a<t.length;a++)if(e[a]>0||t[a]!==n[a])return!1;return!0}function lS(n,e){for(var t=n.length>0?n[n.length-1]:1,r=0;r<n.length-1;r++)t+=n[r]*e[r];return t}function DI(n,e){F(qv(n),(function(){return"The f passed in variableGrads(f) must be a function"})),F(e==null||Array.isArray(e)&&e.every((function(d){return d instanceof xs})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var t=e!=null;if(!t)for(var r in e=[],W.registeredVariables)e.push(W.registeredVariables[r]);var a=t?e.filter((function(d){return!d.trainable})):null,o=e.length;F((e=e.filter((function(d){return d.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."}));var u=W.gradients(n,e,null,!0),l=u.value,c=u.grads;F(c.some((function(d){return d!=null})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),F(l.rank===0,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+l.rank+" tensor"}));var h={};return e.forEach((function(d,v){c[v]!=null&&(h[d.name]=c[v])})),a?.forEach((function(d){return h[d.name]=null})),{value:l,grads:h}}function Xf(n){return W.customGrad(n)}var Ta=H({softmax_:function(n,e){e===void 0&&(e=-1);var t=I(n,"logits","softmax","float32");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and dim was "+e);return W.runKernelFunc((function(r,a){var o=r.softmax(t,e);return a([o]),o}),{logits:t},(function(r,a){var o=a[0],u=r.mul(o);return{logits:function(){return u.sub(u.sum([e],!0).mul(o))}}}),"Softmax",{dim:e},[],[!0])}}),MI=H({logSoftmax_:function(n,e){e===void 0&&(e=-1);var t=I(n,"logits","logSoftmax");if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+t.rank+" and axis was "+e);return Xf((function(r,a){var o=r.max(e,!0),u=r.sub(o),l=u.toFloat().sub(u.exp().sum(e,!0).log());return a([l]),{value:l,gradFunc:function(c,h){var d=h[0].exp();return c.sub(c.sum(e,!0).mul(d))}}}))(t)}}),cS=(function(){function n(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap,this.dataIdsCount=0}return n.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},n.prototype.set=function(e,t){this.dataIdsCount++,this.data.set(e,t)},n.prototype.has=function(e){return this.data.has(e)},n.prototype.delete=function(e){return this.dataIdsCount--,this.data.delete(e)},n.prototype.numDataIds=function(){return this.dataIdsCount},n})(),fS=(function(){function n(){}return n.prototype.time=function(e){return $("time")},n.prototype.read=function(e){return $("read")},n.prototype.readSync=function(e){return $("readSync")},n.prototype.numDataIds=function(){return $("numDataIds")},n.prototype.disposeData=function(e){return $("disposeData")},n.prototype.write=function(e,t,r){return $("write")},n.prototype.move=function(e,t,r,a){return $("move")},n.prototype.memory=function(){return $("memory")},n.prototype.floatPrecision=function(){return $("floatPrecision")},n.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},n.prototype.batchMatMul=function(e,t,r,a){return $("batchMatMul")},n.prototype.fusedBatchMatMul=function(e){return e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,$("fusedBatchMatMul")},n.prototype.slice=function(e,t,r){return $("slice")},n.prototype.stridedSlice=function(e,t,r,a){return $("stridedSlice")},n.prototype.unstack=function(e,t){return $("unstack")},n.prototype.reverse=function(e,t){return $("reverse")},n.prototype.concat=function(e,t){return $("concat")},n.prototype.neg=function(e){return $("neg")},n.prototype.add=function(e,t){return $("add")},n.prototype.addN=function(e){return $("addN")},n.prototype.subtract=function(e,t){return $("subtract")},n.prototype.multiply=function(e,t){return $("multiply")},n.prototype.realDivide=function(e,t){return $("realDivide")},n.prototype.floorDiv=function(e,t){return $("floorDiv")},n.prototype.sum=function(e,t){return $("sum")},n.prototype.prod=function(e,t){return $("prod")},n.prototype.unsortedSegmentSum=function(e,t,r){return $("unsortedSegmentSum")},n.prototype.argMin=function(e,t){return $("argMin")},n.prototype.argMax=function(e,t){return $("argMax")},n.prototype.equal=function(e,t){return $("equal")},n.prototype.notEqual=function(e,t){return $("notEqual")},n.prototype.less=function(e,t){return $("less")},n.prototype.lessEqual=function(e,t){return $("lessEqual")},n.prototype.greater=function(e,t){return $("greater")},n.prototype.greaterEqual=function(e,t){return $("greaterEqual")},n.prototype.logicalNot=function(e){return $("logicalNot")},n.prototype.logicalAnd=function(e,t){return $("logicalAnd")},n.prototype.logicalOr=function(e,t){return $("logicalOr")},n.prototype.where=function(e){return $("where")},n.prototype.select=function(e,t,r){return $("select")},n.prototype.topk=function(e,t,r){return $("topk")},n.prototype.min=function(e,t){return $("min")},n.prototype.minimum=function(e,t){return $("minimum")},n.prototype.mod=function(e,t){return $("mod")},n.prototype.max=function(e,t){return $("max")},n.prototype.maximum=function(e,t){return $("maximum")},n.prototype.all=function(e,t){return $("all")},n.prototype.any=function(e,t){return $("any")},n.prototype.squaredDifference=function(e,t){return $("squaredDifference")},n.prototype.ceil=function(e){return $("ceil")},n.prototype.floor=function(e){return $("floor")},n.prototype.round=function(e){return $("round")},n.prototype.sign=function(e){return $("sign")},n.prototype.isNaN=function(e){return $("isNaN")},n.prototype.isInf=function(e){return $("isInf")},n.prototype.isFinite=function(e){return $("isFinite")},n.prototype.pow=function(e,t){return $("pow")},n.prototype.exp=function(e){return $("exp")},n.prototype.expm1=function(e){return $("expm1")},n.prototype.softmax=function(e,t){return $("softmax")},n.prototype.log=function(e){return $("log")},n.prototype.log1p=function(e){return $("log1p")},n.prototype.sqrt=function(e){return $("sqrt")},n.prototype.rsqrt=function(e){return $("rsqrt")},n.prototype.square=function(e){return $("square")},n.prototype.reciprocal=function(e){return $("reciprocal")},n.prototype.relu=function(e){return $("relu")},n.prototype.relu6=function(e){return $("relu6")},n.prototype.prelu=function(e,t){return $("prelu")},n.prototype.elu=function(e){return $("elu")},n.prototype.eluDer=function(e,t){return $("eluDer")},n.prototype.selu=function(e){return $("selu")},n.prototype.int=function(e){return $("int")},n.prototype.clip=function(e,t,r){return $("clip")},n.prototype.abs=function(e){return $("abs")},n.prototype.complexAbs=function(e){return $("complexAbs")},n.prototype.sigmoid=function(e){return $("sigmoid")},n.prototype.softplus=function(e){return $("softplus")},n.prototype.sin=function(e){return $("sin")},n.prototype.cos=function(e){return $("cos")},n.prototype.tan=function(e){return $("tan")},n.prototype.asin=function(e){return $("asin")},n.prototype.acos=function(e){return $("acos")},n.prototype.atan=function(e){return $("atan")},n.prototype.atan2=function(e,t){return $("atan2")},n.prototype.sinh=function(e){return $("sinh")},n.prototype.cosh=function(e){return $("cosh")},n.prototype.tanh=function(e){return $("tanh")},n.prototype.asinh=function(e){return $("asinh")},n.prototype.acosh=function(e){return $("acosh")},n.prototype.atanh=function(e){return $("atanh")},n.prototype.erf=function(e){return $("erf")},n.prototype.step=function(e,t){return $("step")},n.prototype.fusedConv2d=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,$("fusedConv2d")},n.prototype.conv2d=function(e,t,r){return $("conv2d")},n.prototype.conv2dDerInput=function(e,t,r){return $("conv2dDerInput")},n.prototype.conv2dDerFilter=function(e,t,r){return $("conv2dDerFilter")},n.prototype.fusedDepthwiseConv2D=function(e){return e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,$("fusedDepthwiseConv2D")},n.prototype.depthwiseConv2D=function(e,t,r){return $("depthwiseConv2D")},n.prototype.depthwiseConv2DDerInput=function(e,t,r){return $("depthwiseConv2DDerInput")},n.prototype.depthwiseConv2DDerFilter=function(e,t,r){return $("depthwiseConv2DDerFilter")},n.prototype.conv3d=function(e,t,r){return $("conv3d")},n.prototype.conv3dDerInput=function(e,t,r){return $("conv3dDerInput")},n.prototype.conv3dDerFilter=function(e,t,r){return $("conv3dDerFilter")},n.prototype.maxPool=function(e,t){return $("maxPool")},n.prototype.maxPoolBackprop=function(e,t,r,a){return $("maxPoolBackprop")},n.prototype.avgPool=function(e,t){return $("avgPool")},n.prototype.avgPoolBackprop=function(e,t,r){return $("avgPoolBackprop")},n.prototype.avgPool3d=function(e,t){return $("avgPool3d")},n.prototype.avgPool3dBackprop=function(e,t,r){return $("avgPool3dBackprop")},n.prototype.maxPool3d=function(e,t){return $("maxPool3d")},n.prototype.maxPool3dBackprop=function(e,t,r,a){return $("maxPool3dBackprop")},n.prototype.reshape=function(e,t){return $("reshape")},n.prototype.cast=function(e,t){return $("cast")},n.prototype.tile=function(e,t){return $("tile")},n.prototype.pad=function(e,t,r){return $("pad")},n.prototype.transpose=function(e,t){return $("transpose")},n.prototype.gather=function(e,t,r){return $("gather")},n.prototype.gatherND=function(e,t){return $("gatherND")},n.prototype.scatterND=function(e,t,r){return $("scatterND")},n.prototype.batchToSpaceND=function(e,t,r){return $("batchToSpaceND")},n.prototype.spaceToBatchND=function(e,t,r){return $("spaceToBatchND")},n.prototype.resizeBilinear=function(e,t,r,a){return $("resizeBilinear")},n.prototype.resizeBilinearBackprop=function(e,t,r){return $("resizeBilinearBackprop")},n.prototype.resizeNearestNeighbor=function(e,t,r,a){return $("resizeNearestNeighbor")},n.prototype.resizeNearestNeighborBackprop=function(e,t,r){return $("resizeNearestNeighborBackprop")},n.prototype.batchNormalization=function(e,t,r,a,o,u){return $("batchNormalization")},n.prototype.localResponseNormalization4D=function(e,t,r,a,o){return $("localResponseNormalization4D")},n.prototype.LRNGrad=function(e,t,r,a,o,u,l){return $("LRNGrad")},n.prototype.multinomial=function(e,t,r,a){return $("multinomial")},n.prototype.oneHot=function(e,t,r,a){return $("oneHot")},n.prototype.cumsum=function(e,t,r,a){return $("cumsum")},n.prototype.nonMaxSuppression=function(e,t,r,a,o){return $("nonMaxSuppression")},n.prototype.fft=function(e){return $("fft")},n.prototype.ifft=function(e){return $("ifft")},n.prototype.complex=function(e,t){return $("complex")},n.prototype.real=function(e){return $("real")},n.prototype.imag=function(e){return $("imag")},n.prototype.cropAndResize=function(e,t,r,a,o,u){return $("cropAndResize")},n.prototype.depthToSpace=function(e,t,r){return $("depthToSpace")},n.prototype.split=function(e,t,r){return $("split")},n.prototype.sparseToDense=function(e,t,r,a){return $("sparseToDense")},n.prototype.diag=function(e){return $("diag")},n.prototype.fill=function(e,t,r){return $("fill")},n.prototype.onesLike=function(e){return $("onesLike")},n.prototype.zerosLike=function(e){return $("zerosLike")},n.prototype.linspace=function(e,t,r){return $("linspace")},n.prototype.dispose=function(){return $("dispose")},n})();function $(n){throw new Error("'"+n+"' not yet implemented or not found in the registry. Did you forget to import the kernel?")}function ii(n,e){for(var t=n.length,r=[],a=0;a<t;a++){var o=t-1-a,u=n[o]||1;(e[e.length-1-a]||1)>1&&u===1&&r.unshift(o)}return r}function He(n,e){for(var t=[],r=0;r<e.length;r++){var a=n[n.length-r-1],o=e.length-r-1,u=e[o];(a==null||a===1&&u>1)&&t.unshift(o)}return t}function jt(n,e){for(var t=[],r=Math.max(n.length,e.length),a=0;a<r;a++){var o=n[n.length-a-1];o==null&&(o=1);var u=e[e.length-a-1];if(u==null&&(u=1),o===1)t.unshift(u);else if(u===1)t.unshift(o);else{if(o!==u)throw Error("Operands could not be broadcast together with shapes "+n+" and "+e+".");t.unshift(o)}}return t}function Ku(n,e,t,r,a,o,u){u===void 0&&(u="channelsLast");var l,c=Of(e),h=c[0],d=c[1];if(u==="channelsLast")l=[h,d,n[3],n[3]];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);l=[h,d,n[1],n[1]]}return ao(n,l,t,r,a,o,!1,u)}function Mf(n,e,t,r,a,o,u){u===void 0&&(u="NDHWC");var l,c,h=tm(e),d=h[0],v=h[1],m=h[2];if(u==="NDHWC")c="channelsLast",l=[d,v,m,n[4],n[4]];else{if(u!=="NCDHW")throw new Error("Unknown dataFormat "+u);c="channelsFirst",l=[d,v,m,n[1],n[1]]}return Nf(n,l,t,r,a,!1,c,o)}function ao(n,e,t,r,a,o,u,l){u===void 0&&(u=!1),l===void 0&&(l="channelsLast");var c=[-1,-1,-1,-1],h=c[0],d=c[1],v=c[2],m=c[3];if(l==="channelsLast")h=n[0],d=n[1],v=n[2],m=n[3];else{if(l!=="channelsFirst")throw new Error("Unknown dataFormat "+l);h=n[0],m=n[1],d=n[2],v=n[3]}var g,x=e[0],E=e[1],w=e[3],C=Of(t),S=C[0],_=C[1],T=Of(r),A=T[0],D=T[1],N=hs(x,A),k=hs(E,D),O=(function(et,tt,P,G,q,nt,ot,L){var X,st,dt;if(typeof et=="number"){X={top:et,bottom:et,left:et,right:et,type:et===0?"VALID":"NUMBER"};var pt=(function(Ut,Qt,Xt,ee,le){ee==null&&(ee=hS(Ut,Qt,Xt));var ce=Ut[0],Qn=Ut[1],In=Bu((ce-Qt+2*ee)/Xt+1,le);F(De(In),(function(){return"The output # of rows ("+In+") must be an integer. Change the stride and/or zero pad parameters"}));var Qe=Bu((Qn-Qt+2*ee)/Xt+1,le);return F(De(Qe),(function(){return"The output # of columns ("+Qe+") must be an integer. Change the stride and/or zero pad parameters"})),[In,Qe]})([tt,P],nt,G,et,L);st=pt[0],dt=pt[1]}else if(et==="same"){st=Math.ceil(tt/G),dt=Math.ceil(P/q);var mt=Math.max(0,(st-1)*G+nt-tt),yt=Math.max(0,(dt-1)*q+ot-P),Mt=Math.floor(mt/2),At=mt-Mt,ue=Math.floor(yt/2);X={top:Mt,bottom:At,left:ue,right:yt-ue,type:"SAME"}}else{if(et!=="valid")throw Error("Unknown padding parameter: "+et);X={top:0,bottom:0,left:0,right:0,type:"VALID"},st=Math.ceil((tt-nt+1)/G),dt=Math.ceil((P-ot+1)/q)}return{padInfo:X,outHeight:st,outWidth:dt}})(a,d,v,S,_,N,k,o),B=O.padInfo,V=O.outHeight,U=O.outWidth,it=u?w*m:w;return l==="channelsFirst"?g=[h,it,V,U]:l==="channelsLast"&&(g=[h,V,U,it]),{batchSize:h,dataFormat:l,inHeight:d,inWidth:v,inChannels:m,outHeight:V,outWidth:U,outChannels:it,padInfo:B,strideHeight:S,strideWidth:_,filterHeight:x,filterWidth:E,effectiveFilterHeight:N,effectiveFilterWidth:k,dilationHeight:A,dilationWidth:D,inShape:n,outShape:g,filterShape:e}}function Nf(n,e,t,r,a,o,u,l){o===void 0&&(o=!1),u===void 0&&(u="channelsLast");var c=[-1,-1,-1,-1,-1],h=c[0],d=c[1],v=c[2],m=c[3],g=c[4];if(u==="channelsLast")h=n[0],d=n[1],v=n[2],m=n[3],g=n[4];else{if(u!=="channelsFirst")throw new Error("Unknown dataFormat "+u);h=n[0],g=n[1],d=n[2],v=n[3],m=n[4]}var x,E=e[0],w=e[1],C=e[2],S=e[4],_=tm(t),T=_[0],A=_[1],D=_[2],N=tm(r),k=N[0],O=N[1],B=N[2],V=hs(E,k),U=hs(w,O),it=hs(C,B),et=(function(ot,L,X,st,dt,pt,mt,yt,Mt,At,ue){var Ut,Qt,Xt,ee;if(typeof ot=="number"){Ut={top:ot,bottom:ot,left:ot,right:ot,front:ot,back:ot,type:ot===0?"VALID":"NUMBER"};var le=(function(Me,gr,so,Zr,gn,Ds){gn==null&&(gn=hS(Me,gr,Zr));var xl=Me[0],uh=Me[1],lh=Me[2],Jr=Bu((xl-gr+2*gn)/Zr+1,Ds);F(De(Jr),(function(){return"The output # of depths ("+Jr+") must be an integer. Change the stride and/or zero pad parameters"}));var Ze=Bu((uh-gr+2*gn)/Zr+1,Ds);F(De(Ze),(function(){return"The output # of rows ("+Ze+") must be an integer. Change the stride and/or zero pad parameters"}));var Zn=Bu((lh-gr+2*gn)/Zr+1,Ds);return F(De(Zn),(function(){return"The output # of columns ("+Zn+") must be an integer. Change the stride and/or zero pad parameters"})),[Jr,Ze,Zn,so]})([L,X,st,1],yt,1,dt,ot,ue);Qt=le[0],Xt=le[1],ee=le[2]}else if(ot==="same"){Qt=Math.ceil(L/dt),Xt=Math.ceil(X/pt),ee=Math.ceil(st/mt);var ce=(Qt-1)*dt+yt-L,Qn=(Xt-1)*pt+Mt-X,In=(ee-1)*mt+At-st,Qe=Math.floor(ce/2),Mr=ce-Qe,Bn=Math.floor(Qn/2),Nr=Qn-Bn,mr=Math.floor(In/2);Ut={top:Bn,bottom:Nr,left:mr,right:In-mr,front:Qe,back:Mr,type:"SAME"}}else{if(ot!=="valid")throw Error("Unknown padding parameter: "+ot);Ut={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},Qt=Math.ceil((L-yt+1)/dt),Xt=Math.ceil((X-Mt+1)/pt),ee=Math.ceil((st-At+1)/mt)}return{padInfo:Ut,outDepth:Qt,outHeight:Xt,outWidth:ee}})(a,d,v,m,T,A,D,V,U,it,l),tt=et.padInfo,P=et.outDepth,G=et.outHeight,q=et.outWidth,nt=o?S*g:S;return u==="channelsFirst"?x=[h,nt,P,G,q]:u==="channelsLast"&&(x=[h,P,G,q,nt]),{batchSize:h,dataFormat:u,inDepth:d,inHeight:v,inWidth:m,inChannels:g,outDepth:P,outHeight:G,outWidth:q,outChannels:nt,padInfo:tt,strideDepth:T,strideHeight:A,strideWidth:D,filterDepth:E,filterHeight:w,filterWidth:C,effectiveFilterDepth:V,effectiveFilterHeight:U,effectiveFilterWidth:it,dilationDepth:k,dilationHeight:O,dilationWidth:B,inShape:n,outShape:x,filterShape:e}}function hS(n,e,t,r){r===void 0&&(r=1);var a=hs(e,r);return Math.floor((n[0]*(t-1)-t+a)/2)}function Of(n){return typeof n=="number"?[n,n,n]:n.length===2?[n[0],n[1],1]:n}function tm(n){return typeof n=="number"?[n,n,n]:n}function hs(n,e){return e<=1?n:n+(n-1)*(e-1)}function Bu(n,e){if(!e)return n;switch(e){case"round":return Math.round(n);case"ceil":return Math.ceil(n);case"floor":return Math.floor(n);default:throw new Error("Unknown roundingMode "+e)}}function Es(n){var e=Of(n),t=e[0],r=e[1],a=e[2];return t===1&&r===1&&a===1}function kn(n,e){return Es(n)||Es(e)}function rg(n){if(n==="NHWC")return"channelsLast";if(n==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+n)}function dS(n,e,t){if(e==="complex64"){if(n.dtype==="complex64")return n.clone();var r=ve(n.shape),a=n.toFloat(),o=t.complex(a,r);return r.dispose(),a.dispose(),o}if(!rk(n.dtype,e))return W.makeTensorFromDataId(n.dataId,n.shape,e);if(n.dtype==="complex64"){var u=t.real(n);return o=u.cast(e),u.dispose(),o}if(e==="int32")return t.int(n);if(e==="bool"){var l=vt(0,n.dtype);return o=t.notEqual(n,l),l.dispose(),o}throw new Error("Error in Cast: failed to cast "+n.dtype+" to "+e)}function em(n,e){return W.makeTensorFromDataId(n.dataId,e,n.dtype)}function pS(n,e,t){var r=(e-n)/(t-1),a=ll(t,"float32");a[0]=n;for(var o=1;o<a.length;o++)a[o]=a[o-1]+r;return Fe(a,"float32")}function nm(n,e){if(n.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+n.length+", imag: "+e.length+".");for(var t=new Float32Array(2*n.length),r=0;r<t.length;r+=2)t[r]=n[r/2],t[r+1]=e[r/2];return t}function B2(n,e){return{real:n[2*e],imag:n[2*e+1]}}function NI(n,e,t,r){n[2*r]=e,n[2*r+1]=t}function OI(n,e,t){var r=(t?2:-2)*Math.PI*(n/e);return{real:Math.cos(r),imag:Math.sin(r)}}function kI(n,e,t){var r=(function(o,u,l){return(function(c,h,d){for(var v=0,m=c.length,g=0,x=!1;v<m;){var E=d(h,c[g=v+(m-v>>>1)]);E>0?v=g+1:(m=g,x=!E)}return x?v:-v-1})(o,u,l||II)})(n,e,t),a=r<0?-(r+1):r;n.splice(a,0,e)}function II(n,e){return n>e?1:n<e?-1:0}function ag(n,e,t,r,a){return vS(n,e,t,r,a,0).selectedIndices}function ig(n,e,t,r,a,o){var u=vS(n,e,t,r,a,o);return u.numValidOutputs.dispose(),{selectedIndices:u.selectedIndices,selectedScores:u.selectedScores}}function vS(n,e,t,r,a,o,u,l){l===void 0&&(l=!1);for(var c=Array.from(e).map((function(T,A){return{score:T,boxIndex:A,suppressBeginIndex:0}})).filter((function(T){return T.score>a})).sort(F2),h=o>0?-.5/o:0,d=[],v=[];d.length<t&&c.length>0;){var m=c.pop(),g=m.score,x=m.boxIndex,E=m.suppressBeginIndex;if(g<a)break;for(var w=!1,C=d.length-1;C>=E;--C){var S=BI(n,x,d[C]);if(S>=r){w=!0;break}if(m.score=m.score*FI(r,h,S),m.score<=a)break}m.suppressBeginIndex=d.length,w||(m.score===g?(d.push(x),v.push(m.score)):m.score>a&&kI(c,m,F2))}var _=d.length;return l&&(d.fill(0,_),v.fill(0,_)),{selectedIndices:Fe(d,"int32"),selectedScores:Fe(v,"float32"),numValidOutputs:vt(_,"int32")}}function BI(n,e,t){var r=n.subarray(4*e,4*e+4),a=n.subarray(4*t,4*t+4),o=Math.min(r[0],r[2]),u=Math.min(r[1],r[3]),l=Math.max(r[0],r[2]),c=Math.max(r[1],r[3]),h=Math.min(a[0],a[2]),d=Math.min(a[1],a[3]),v=Math.max(a[0],a[2]),m=Math.max(a[1],a[3]),g=(l-o)*(c-u),x=(v-h)*(m-d);if(g<=0||x<=0)return 0;var E=Math.max(o,h),w=Math.max(u,d),C=Math.min(l,v),S=Math.min(c,m),_=Math.max(C-E,0)*Math.max(S-w,0);return _/(g+x-_)}function FI(n,e,t){var r=Math.exp(e*t*t);return t<=n?r:0}function F2(n,e){return n.score-e.score||n.score===e.score&&e.boxIndex-n.boxIndex}function mS(n,e,t){var r=new Array(n.rank).fill(0),a=n.shape.slice();return e.map((function(o){a[t]=o;var u=n.slice(r,a);return r[t]+=o,u}))}function gS(n,e){for(var t=new Array(n.rank),r=0;r<t.length;r++)t[r]=n.shape[r]*e[r];var a=Ft(t,n.dtype);for(r=0;r<a.values.length;++r){for(var o=a.indexToLoc(r),u=new Array(n.rank),l=0;l<u.length;l++)u[l]=o[l]%n.shape[l];var c=n.locToIndex(u);a.values[r]=n.values[c]}return a.toTensor()}function yS(n,e,t,r,a){for(var o=e[e.length-1],u=[n.length/o,o],l=u[0],c=u[1],h=ju(t,l*r),d=ju("int32",l*r),v=0;v<l;v++){for(var m=v*c,g=n.subarray(m,m+c),x=[],E=0;E<g.length;E++)x.push({value:g[E],index:E});x.sort((function(T,A){return A.value-T.value}));var w=v*r,C=h.subarray(w,w+r),S=d.subarray(w,w+r);for(E=0;E<r;E++)C[E]=x[E].value,S[E]=x[E].index}var _=e.slice();return _[_.length-1]=r,[sn(h,_,t),sn(d,_,"int32")]}function og(n,e){for(var t=[],r=0;r<e.length;r++)e[r]&&t.push(r);var a=Ft(n,"int32"),o=Ft([t.length,n.length],"int32");for(r=0;r<t.length;r++){var u=a.indexToLoc(t[r]),l=r*n.length;o.values.set(u,l)}return o.toTensor()}var LI=function(n,e){this.outputShape=[],this.outputShape=n,this.variableNames=e.map((function(a,o){return"T"+o}));var t=[];this.variableNames.forEach((function(a){t.push("float v"+a+" = get"+a+"AtOutCoords();")}));var r=this.variableNames.map((function(a){return"v"+a})).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        float result = `+r+`;
        setOutput(result);
      }
    `},PI=function(n,e){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.variableNames=e.map((function(a,o){return"T"+o}));var t=[];this.variableNames.forEach((function(a){t.push("vec4 v"+a+" = get"+a+"AtOutCoords();")}));var r=this.variableNames.map((function(a){return"v"+a})).join(" + ");this.userCode=`
      void main() {
        `+t.join(`
        `)+`

        vec4 result = `+r+`;
        setOutput(result);
      }
    `},zI=function(n,e,t){this.variableNames=["A"];var r=n.windowSize,a=n.batchSize,o=n.inSize,u=Math.ceil(o/r);t||this.variableNames.push("bestIndicesA"),this.outputShape=[a,u];var l=e==="max"?">":"<",c=t?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+r+`;

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < `+r+`; i++) {
          int inIdx = `+c+`;
          float candidate = getA(batch, inIdx);
          if (candidate `+l+` bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `};function bS(n,e){return["x","y","z","w","u","v"].slice(0,e).map((function(t){return n+"."+t}))}function Dn(n,e){return e===1?[n]:bS(n,e)}function fn(){var n,e,t,r,a,o,u,l,c,h;return lt().getNumber("WEBGL_VERSION")===2?(n="#version 300 es",e="in",t="out",r="in",a="texture",o="outputColor",u="out vec4 outputColor;",l=`
      bool isnan_custom(float val) {
        return (val > 0.0 || val < 0.0) ? false : val != 0.0;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `,c="",h=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(n="",e="attribute",t="varying",r="varying",a="texture2D",o="gl_FragColor",u="",l=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,c=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,h=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:n,attribute:e,varyingVs:t,varyingFs:r,texture2D:a,output:o,defineOutput:u,defineSpecialNaN:l,defineSpecialInf:c,defineRound:h}}function Wi(n,e,t){t===void 0&&(t="index");var r=Wr(e);return r.map((function(a,o){return"int "+n[o]+" = "+t+" / "+a+"; "+(o===r.length-1?"int "+n[o+1]+" = "+t+" - "+n[o]+" * "+a:"index -= "+n[o]+" * "+a)+";"})).join("")}function sg(n){var e=Wr(n).map((function(t){return t.toString()}));return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * `+e[0]+" + coords.y * "+e[1]+` + coords.z;
  }
`}var xS=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;function UI(n,e,t,r){var a=[];n.forEach((function(g){var x=St(g.shapeInfo.logicalShape);g.shapeInfo.isUniform?a.push("uniform float "+g.name+(x>1?"["+x+"]":"")+";"):(a.push("uniform sampler2D "+g.name+";"),a.push("uniform int offset"+g.name+";"))}));var o,u,l=a.join(`
`),c=n.map((function(g){return(function(x,E,w){w===void 0&&(w=!1);var C="";C+=w?wS(x):Jo(x);var S=x.shapeInfo.logicalShape,_=E.logicalShape;return S.length<=_.length&&(C+=w?(function(T,A){var D,N=T.name,k=N.charAt(0).toUpperCase()+N.slice(1),O="get"+k+"AtOutCoords",B=T.shapeInfo.logicalShape.length,V=A.logicalShape.length,U=ii(T.shapeInfo.logicalShape,A.logicalShape),it=he(V),et=V-B,tt=["x","y","z","w","u","v"];D=B===0?"":V<2&&U.length>=1?"coords = 0;":U.map((function(X){return"coords."+tt[X+et]+" = 0;"})).join(`
`);var P="";P=V<2&&B>0?"coords":T.shapeInfo.logicalShape.map((function(X,st){return"coords."+tt[st+et]})).join(", ");var G="return outputValue;",q=St(T.shapeInfo.logicalShape)===1,nt=St(A.logicalShape)===1;if(B!==1||q||nt){if(q&&!nt)G=V===1?`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:`
        return vec4(outputValue.x);
      `;else if(U.length){var ot=B-2,L=B-1;U.indexOf(ot)>-1&&U.indexOf(L)>-1?G="return vec4(outputValue.x);":U.indexOf(ot)>-1?G="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":U.indexOf(L)>-1&&(G="return vec4(outputValue.xx, outputValue.zz);")}}else G=`
      return vec4(outputValue.xy, outputValue.xy);
    `;return`
    vec4 `+O+`() {
      `+it+` coords = getOutputCoords();
      `+D+`
      vec4 outputValue = get`+k+"("+P+`);
      `+G+`
    }
  `})(x,E):(function(T,A){var D=T.name,N=D.charAt(0).toUpperCase()+D.slice(1),k="get"+N+"AtOutCoords",O=A.texShape,B=T.shapeInfo.texShape,V=T.shapeInfo.logicalShape.length,U=A.logicalShape.length;if(!T.shapeInfo.isUniform&&V===U&&T.shapeInfo.flatOffset==null&&Xe(B,O))return`
      float `+k+`() {
        return sampleTexture(`+D+`, resultUV);
      }
    `;var it,et=he(U),tt=ii(T.shapeInfo.logicalShape,A.logicalShape),P=U-V,G=["x","y","z","w","u","v"];it=V===0?"":U<2&&tt.length>=1?"coords = 0;":tt.map((function(nt){return"coords."+G[nt+P]+" = 0;"})).join(`
`);var q="";return q=U<2&&V>0?"coords":T.shapeInfo.logicalShape.map((function(nt,ot){return"coords."+G[ot+P]})).join(", "),`
    float `+k+`() {
      `+et+` coords = getOutputCoords();
      `+it+`
      return get`+N+"("+q+`);
    }
  `})(x,E)),C})(g,e,r)})).join(`
`),h=e.texShape,d=fn(),v=(function(g){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return `+g.texture2D+`(textureSampler, uv).r;
    }
  `})(d),m=(function(g){return g.version+`
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    `+g.varyingFs+` vec2 resultUV;
    `+g.defineOutput+`
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    `+g.defineSpecialNaN+`
    `+g.defineSpecialInf+`
    `+g.defineRound+`

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    `+VI+`
    `+HI+`
    `+GI+`
  `})(d);return e.isPacked?(o=(function(g,x){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(T,A){var D=[Math.ceil(A[0]/2),Math.ceil(A[1]/2)];return D[0]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * `+D[1]+`.0);
      }
    `:D[1]===1?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * `+D[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      return 2 * (resTexRC.x * `+D[1]+` + resTexRC.y);
    }
  `})(0,x);case 2:return(function(T,A){var D=[Math.ceil(A[0]/2),Math.ceil(A[1]/2)];if(Xe(T,A))return`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(`+D[0]+", "+D[1]+`));
      }
    `;var N=Math.ceil(T[1]/2);return`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));

      int index = resTexRC.x * `+D[1]+` + resTexRC.y;
      int r = 2 * (index / `+N+`);
      int c = imod(index, `+N+`) * 2;

      return ivec2(r, c);
    }
  `})(g,x);case 3:return E=g,w=x,C=[Math.ceil(w[0]/2),Math.ceil(w[1]/2)],S=Math.ceil(E[2]/2),_=S*Math.ceil(E[1]/2),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+C[0]+", "+C[1]+`));
      int index = resTexRC.x * `+C[1]+` + resTexRC.y;

      int b = index / `+_+`;
      index -= b * `+_+`;

      int r = 2 * (index / `+S+`);
      int c = imod(index, `+S+`) * 2;

      return ivec3(b, r, c);
    }
  `;default:return(function(T,A){for(var D=[Math.ceil(A[0]/2),Math.ceil(A[1]/2)],N=Math.ceil(T[T.length-1]/2),k=N*Math.ceil(T[T.length-2]/2),O=k,B="",V="b, r, c",U=2;U<T.length-1;U++)O*=T[T.length-U-1],B=`
      int b`+U+" = index / "+O+`;
      index -= b`+U+" * "+O+`;
    `+B,V="b"+U+", "+V;return`
    ivec`+T.length+` getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+D[0]+", "+D[1]+`));
      int index = resTexRC.x * `+D[1]+` + resTexRC.y;

      `+B+`

      int b = index / `+k+`;
      index -= b * `+k+`;

      int r = 2 * (index / `+N+`);
      int c = imod(index, `+N+`) * 2;

      return ivec`+T.length+"("+V+`);
    }
  `})(g,x)}var E,w,C,S,_})(e.logicalShape,h),u=(function(g){return`
    void setOutput(vec4 val) {
      `+g.output+` = val;
    }
  `})(d)):(o=(function(g,x){switch(g.length){case 0:return`
    int getOutputCoords() {
      return 0;
    }
  `;case 1:return(function(C,S){return S[0]===1?`
      int getOutputCoords() {
        return int(resultUV.x * `+S[1]+`.0);
      }
    `:S[1]===1?`
      int getOutputCoords() {
        return int(resultUV.y * `+S[0]+`.0);
      }
    `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      return resTexRC.x * `+S[1]+` + resTexRC.y;
    }
  `})(0,x);case 2:return(function(C,S){return Xe(C,S)?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(`+S[0]+", "+S[1]+`));
      }
    `:C[1]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(index, 0);
      }
    `:C[0]===1?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(`+S[0]+", "+S[1]+`));
        int index = resTexRC.x * `+S[1]+` + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      int r = index / `+C[1]+`;
      int c = index - r * `+C[1]+`;
      return ivec2(r, c);
    }
  `})(g,x);case 3:return E=x,w=Wi(["r","c","d"],g),`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(`+E[0]+", "+E[1]+`));
      int index = resTexRC.x * `+E[1]+` + resTexRC.y;
      `+w+`
      return ivec3(r, c, d);
    }
  `;case 4:return(function(C,S){var _=Wi(["r","c","d","d2"],C);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;
      `+_+`
      return ivec4(r, c, d, d2);
    }
  `})(g,x);case 5:return(function(C,S){var _=Wi(["r","c","d","d2","d3"],C);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(`+S[0]+`,
                             `+S[1]+`));

      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+_+`

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `})(g,x);case 6:return(function(C,S){var _=Wi(["r","c","d","d2","d3","d4"],C);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(`+S[0]+", "+S[1]+`));
      int index = resTexRC.x * `+S[1]+` + resTexRC.y;

      `+_+`

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `})(g,x);default:throw new Error(g.length+"-D output sampling is not yet supported")}var E,w})(e.logicalShape,h),u=(function(g){return`
    void setOutput(float val) {
      `+g.output+` = vec4(val, 0, 0, 0);
    }
  `})(d)),r&&(m+=jI),[m,v,u,l,o,c,t].join(`
`)}function Jo(n){var e=n.shapeInfo.logicalShape;switch(e.length){case 0:return(function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return"float "+a+"() {return "+r+";}";var o=t.shapeInfo.texShape,u=o[0],l=o[1];if(u===1&&l===1)return`
      float `+a+`() {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=t.shapeInfo.texShape,h=c[0],d=c[1],v=Pi(r);return`
    float `+a+`() {
      vec2 uv = uvFromFlat(`+h+", "+d+", "+v+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(n);case 1:return(function(t){var r=t.name,a="get"+r.charAt(0).toUpperCase()+r.slice(1);if(t.shapeInfo.isUniform)return`
      float `+a+`(int index) {
        `+Ko(t)+`
      }
    `;var o=t.shapeInfo.texShape,u=o[0],l=o[1];if(l===1&&u===1)return`
      float `+a+`(int index) {
        return sampleTexture(`+r+`, halfCR);
      }
    `;var c=Pi(r);return l===1?`
      float `+a+`(int index) {
        vec2 uv = vec2(0.5, (float(index + `+c+") + 0.5) / "+u+`.0);
        return sampleTexture(`+r+`, uv);
      }
    `:u===1?`
      float `+a+`(int index) {
        vec2 uv = vec2((float(index + `+c+") + 0.5) / "+l+`.0, 0.5);
        return sampleTexture(`+r+`, uv);
      }
    `:`
    float `+a+`(int index) {
      vec2 uv = uvFromFlat(`+u+", "+l+", index + "+c+`);
      return sampleTexture(`+r+`, uv);
    }
  `})(n);case 2:return(function(t){var r=t.shapeInfo.logicalShape,a=t.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=t.shapeInfo.texShape;if(u!=null&&Xe(r,u)){var l=u[0],c=u[1];return`
    float `+o+`(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(`+c+".0, "+l+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `}var h=Hi(r),d=h.newShape,v=h.keptDims,m=d;if(m.length<r.length){var g=$o(t,m);return`
      `+Jo(g)+`
      float `+o+`(int row, int col) {
        return `+o+"("+ts(["row","col"],v)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+o+`(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(`+r[1]+`, 1)));
        `+Ko(t)+`
      }
    `;var x=u[0],E=u[1],w=Pi(a);return E===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / `+x+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `:x===1?`
    float `+o+`(int row, int col) {
      float index = dot(vec3(row, col, `+w+"), vec3("+r[1]+`, 1, 1));
      vec2 uv = vec2((index + 0.5) / `+E+`.0, 0.5);
      return sampleTexture(`+a+`, uv);
    }
  `:`
  float `+o+`(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * `+r[1]+" + col + "+w+`;
    vec2 uv = uvFromFlat(`+x+", "+E+`, index);
    return sampleTexture(`+a+`, uv);
  }
`})(n);case 3:return(function(t){var r=t.shapeInfo.logicalShape,a=t.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=r[1]*r[2],l=r[2],c=Hi(r),h=c.newShape,d=c.keptDims,v=h;if(v.length<r.length){var m=$o(t,v);return`
        `+Jo(m)+`
        float `+o+`(int row, int col, int depth) {
          return `+o+"("+ts(["row","col","depth"],d)+`);
        }
      `}if(t.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(`+u+", "+l+`, 1)));
        `+Ko(t)+`
      }
    `;var g=t.shapeInfo.texShape,x=g[0],E=g[1],w=t.shapeInfo.flatOffset;if(E===u&&w==null)return`
        float `+o+`(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(`+l+`, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(`+E+".0, "+x+`.0);
          return sampleTexture(`+a+`, uv);
        }
      `;if(E===l&&w==null)return`
    float `+o+`(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(`+r[1]+`, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+E+".0, "+x+`.0);
      return sampleTexture(`+a+`, uv);
    }
  `;var C=Pi(a);return`
      float `+o+`(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * `+u+" + col * "+l+" + depth + "+C+`;
        vec2 uv = uvFromFlat(`+x+", "+E+`, index);
        return sampleTexture(`+a+`, uv);
      }
  `})(n);case 4:return(function(t){var r=t.shapeInfo.logicalShape,a=t.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=r[3],l=r[2]*u,c=r[1]*l,h=Hi(r),d=h.newShape,v=h.keptDims;if(d.length<r.length){var m=$o(t,d);return`
      `+Jo(m)+`
      float `+o+`(int row, int col, int depth, int depth2) {
        return `+o+"("+ts(["row","col","depth","depth2"],v)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(`+c+", "+l+", "+u+`, 1)));
        `+Ko(t)+`
      }
    `;var g=t.shapeInfo.flatOffset,x=t.shapeInfo.texShape,E=x[0],w=x[1];if(w===c&&g==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(`+l+", "+u+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+w+".0, "+E+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(w===u&&g==null)return`
      float `+o+`(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(`+r[1]*r[2]+", "+r[2]+`, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+w+".0, "+E+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var C=Pi(a);return`
    float `+o+`(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+c+" + col * "+l+` +
          depth * `+u+` + depth2;
      vec2 uv = uvFromFlat(`+E+", "+w+", index + "+C+`);
      return sampleTexture(`+a+`, uv);
    }
  `})(n);case 5:return(function(t){var r=t.shapeInfo.logicalShape,a=t.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=r[4],l=r[3]*u,c=r[2]*l,h=r[1]*c,d=Hi(r),v=d.newShape,m=d.keptDims;if(v.length<r.length){var g=$o(t,v);return`
      `+Jo(g)+`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        return `+o+"("+ts(["row","col","depth","depth2","depth3"],m)+`);
      }
    `}if(t.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(`+h+", "+c+", "+l+", "+u+`)) +
          depth3;
        `+Ko(t)+`
      }
    `;var x=t.shapeInfo.flatOffset,E=t.shapeInfo.texShape,w=E[0],C=E[1];if(C===h&&x==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(`+c+", "+l+", "+u+`, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+C+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(C===u&&x==null)return`
      float `+o+`(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]+`,
               `+r[2]*r[3]+", "+r[3]+`, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+C+".0, "+w+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var S=Pi(a);return`
    float `+o+`(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+h+" + col * "+c+" + depth * "+l+` +
          depth2 * `+u+" + depth3 + "+S+`;
      vec2 uv = uvFromFlat(`+w+", "+C+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `})(n);case 6:return(function(t){var r=t.shapeInfo.logicalShape,a=t.name,o="get"+a.charAt(0).toUpperCase()+a.slice(1),u=Hi(r),l=u.newShape,c=u.keptDims;if(l.length<r.length){var h=$o(t,l);return`
      `+Jo(h)+`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return `+o+"("+ts(["row","col","depth","depth2","depth3","depth4"],c)+`);
      }
    `}var d=r[5],v=r[4]*d,m=r[3]*v,g=r[2]*m,x=r[1]*g;if(t.shapeInfo.isUniform)return`
      float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(`+x+", "+g+", "+m+", "+v+`)) +
          dot(
            vec2(depth3, depth4),
            vec2(`+d+`, 1)));
        `+Ko(t)+`
      }
    `;var E=t.shapeInfo.flatOffset,w=t.shapeInfo.texShape,C=w[0],S=w[1];if(S===x&&E==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(`+g+", "+m+", "+v+", "+d+`)) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(`+S+".0, "+C+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;if(S===d&&E==null)return`
      float `+o+`(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(`+r[1]*r[2]*r[3]*r[4]+`,
               `+r[2]*r[3]*r[4]+`,
               `+r[3]*r[4]+`,
               `+r[4]+`)) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(`+S+".0, "+C+`.0);
        return sampleTexture(`+a+`, uv);
      }
    `;var _=Pi(a);return`
    float `+o+`(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * `+x+" + col * "+g+" + depth * "+m+` +
          depth2 * `+v+" + depth3 * "+d+" + depth4 + "+_+`;
      vec2 uv = uvFromFlat(`+C+", "+S+`, index);
      return sampleTexture(`+a+`, uv);
    }
  `})(n);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function wS(n){var e,t,r;switch(n.shapeInfo.logicalShape.length){case 0:return e=n.name,t="get"+e.charAt(0).toUpperCase()+e.slice(1),r=fn(),`
    vec4 `+t+`() {
      return `+r.texture2D+"("+e+`, halfCR);
    }
  `;case 1:return(function(a){var o=a.name,u="get"+o.charAt(0).toUpperCase()+o.slice(1),l=a.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],h=fn();return`
    vec4 `+u+`(int index) {
      vec2 uv = packedUVfrom1D(
        `+c[0]+", "+c[1]+`, index);
      return `+h.texture2D+"("+o+`, uv);
    }
  `})(n);case 2:return(function(a){var o=a.shapeInfo.logicalShape,u=a.name,l="get"+u.charAt(0).toUpperCase()+u.slice(1),c=a.shapeInfo.texShape,h=c[0],d=c[1],v=fn();if(c!=null&&Xe(o,c))return`
      vec4 `+l+`(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(`+d+".0, "+h+`.0);

        return `+v.texture2D+"("+u+`, uv);
      }
    `;var m=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)],g=Math.ceil(o[1]/2);return`
    vec4 `+l+`(int row, int col) {
      vec2 uv = packedUVfrom2D(`+g+", "+m[0]+", "+m[1]+`, row, col);
      return `+v.texture2D+"("+u+`, uv);
    }
  `})(n);case 3:return(function(a){var o=a.shapeInfo.logicalShape,u=a.name,l="get"+u.charAt(0).toUpperCase()+u.slice(1),c=a.shapeInfo.texShape,h=[Math.ceil(c[0]/2),Math.ceil(c[1]/2)];if(o[0]===1){var d=o.slice(1),v=$o(a,d);return`
        `+wS(v)+`
        vec4 `+l+`(int b, int row, int col) {
          return `+l+"("+ts(["b","row","col"],[1,2])+`);
        }
      `}var m=h[0],g=h[1],x=Math.ceil(o[2]/2),E=x*Math.ceil(o[1]/2),w=fn();return`
    vec4 `+l+`(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        `+m+", "+g+", "+E+", "+x+`, b, row, col);
      return `+w.texture2D+"("+u+`, uv);
    }
  `})(n);default:return(function(a){for(var o=a.shapeInfo.logicalShape,u=o.length,l=a.name,c="get"+l.charAt(0).toUpperCase()+l.slice(1),h=a.shapeInfo.texShape,d=[Math.ceil(h[0]/2),Math.ceil(h[1]/2)],v=d[0],m=d[1],g=Math.ceil(o[u-1]/2),x=g*Math.ceil(o[u-2]/2),E="int b, int row, int col",w="b * "+x+" + (row / 2) * "+g+" + (col / 2)",C=2;C<u-1;C++)E="int b"+C+", "+E,x*=o[u-C-1],w="b"+C+" * "+x+" + "+w;var S=fn();return`
    vec4 `+c+"("+E+`) {
      int index = `+w+`;
      int texR = index / `+m+`;
      int texC = index - texR * `+m+`;
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+m+", "+v+`);
      return `+S.texture2D+"("+l+`, uv);
    }
  `})(n)}}var VI=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,HI=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,GI=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,jI=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Pi(n){return"offset"+n}function Ko(n){var e=n.name,t=St(n.shapeInfo.logicalShape);return t<2?"return "+e+";":`
    for (int i = 0; i < `+t+`; i++) {
      if (i == index) {
        return `+e+`[i];
      }
    }
  `}function he(n){if(n<=1)return"int";if(n===2)return"ivec2";if(n===3)return"ivec3";if(n===4)return"ivec4";if(n===5)return"ivec5";if(n===6)return"ivec6";throw Error("GPU for rank "+n+" is not yet supported")}function $o(n,e){var t=JSON.parse(JSON.stringify(n));return t.shapeInfo.logicalShape=e,t}function ts(n,e){return e.map((function(t){return n[t]})).join(", ")}var WI=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,F(n.length>2,(function(){return"Packed arg"+(t.charAt(0).toUpperCase()+t.slice(1))+" supports only inputs with rank above 2."}));var a=n[n.length-1],o=Math.ceil(a/e);this.outputShape=n.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var u,l,c=this.outputShape,h=c.length,d=he(h),v=Dn("coords",h);if(o===1){var m=he(l=h+1);u=`
        `+m+" sourceLocR = "+m+"("+v.join()+`, 0);
        ++`+v[h-1]+`;
        `+m+" sourceLocG = "+m+"("+v.join()+`, 0);
        ++`+v[h-2]+`;
        `+m+" sourceLocA = "+m+"("+v.join()+`, 0);
        --`+v[h-1]+`;
        `+m+" sourceLocB = "+m+"("+v.join()+`, 0);
        --`+v[h-2]+";"}else l=h,u=`
        `+d+` sourceLocR = coords;
        ++`+v[h-1]+`;
        `+d+` sourceLocG = coords;
        ++`+v[h-2]+`;
        `+d+` sourceLocA = coords;
        --`+v[h-1]+`;
        `+d+` sourceLocB = coords;
        --`+v[h-2]+";";var g=["x","y","z","w","u","v"].slice(0,l),x="."+g[l-1],E=g.map((function(k){return"int "+k})),w=Dn("sourceLocR",l-1).concat("inIdx.r"),C=Dn("sourceLocG",l-1).concat("inIdx.g"),S=Dn("sourceLocB",l-1).concat("inIdx.b"),_=Dn("sourceLocA",l-1).concat("inIdx.a"),T=t==="max"?"greaterThan":"lessThan",A=r?"":`
          inIdx = round(vec4(getBestIndicesAChannel(`+w.join()+`),
                             getBestIndicesAChannel(`+C.join()+`),
                             getBestIndicesAChannel(`+S.join()+`),
                             getBestIndicesAChannel(`+_.join()+")));",D=`vec4(
            getAChannel(`+w.join()+`),
            hasNextCol ? getAChannel(`+C.join()+`) : 0.,
            hasNextRow ? getAChannel(`+S.join()+`) : 0.,
            hasNextRow && hasNextCol ? getAChannel(`+_.join()+") : 0.)",N=r?"":`
      float getBestIndicesAChannel(`+E.join()+`) {
        return getChannel(getBestIndicesA(`+g.join()+`),
                                          vec2(`+g.slice(-2).join()+`));
      }`;this.userCode=`
      float getAChannel(`+E.join()+`) {
        return getChannel(getA(`+g.join()+`),
                               vec2(`+g.slice(-2).join()+`));
      }
      `+N+`
      void main() {
        `+d+` coords = getOutputCoords();
        bool hasNextCol = `+v[h-1]+" < "+(c[h-1]-1)+`;
        bool hasNextRow = `+v[h-2]+" < "+(c[h-2]-1)+`;
        `+u+`
        ivec4 srcIdx = ivec4(sourceLocR`+x+", sourceLocG"+x+`,
          sourceLocB`+x+", sourceLocA"+x+") * "+e+`;
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = `+D+`;

        for (int i = 0; i < `+e+`; i++) {
          inIdx = srcIdx;
          `+A+`
          vec4 candidate = `+D+`;
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(`+T+`(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `},qI=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,o=n.dilationHeight,u=n.dilationWidth,l=n.effectiveFilterHeight,c=n.effectiveFilterWidth,h=l-1-n.padInfo.top,d=c-1-n.padInfo.left,v=1/(e*t);this.userCode=`
      const ivec2 pads = ivec2(`+h+", "+d+`);
      const float avgMultiplier = float(`+v+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+l+`;
            wR += `+o+`) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+c+`;
            wC+= `+u+`) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `},KI=function(n){this.variableNames=["dy"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,a=n.strideDepth,o=n.strideHeight,u=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,h=n.dilationWidth,d=n.effectiveFilterDepth,v=n.effectiveFilterHeight,m=n.effectiveFilterWidth,g=d-1-n.padInfo.front,x=v-1-n.padInfo.top,E=m-1-n.padInfo.left,w=1/(e*t*r);this.userCode=`
      const ivec3 pads = ivec3(`+g+", "+x+", "+E+`);
      const float avgMultiplier = float(`+w+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+l+`) {
          float dyD = float(dyDCorner + wD) / `+a+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+v+`;
              wR += `+c+`) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+m+`;
                wC += `+h+`) {
              float dyC = float(dyCCorner + wC) / `+u+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `},XI=function(n,e,t,r,a,o){this.outputShape=[],this.variableNames=["x","mean","variance"],jt(n,e),jt(n,t);var u="0.0";r!=null&&(jt(n,r),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var l="1.0";a!=null&&(jt(n,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = `+u+`;
        float scale = `+l+`;
        float inv = scale * inversesqrt(variance + float(`+o+`));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `},YI=function(n,e,t,r,a,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],jt(n,e),jt(n,t);var u="vec4(0.0)";r!=null&&(jt(n,r),this.variableNames.push("offset"),u="getOffsetAtOutCoords()");var l="vec4(1.0)";a!=null&&(jt(n,a),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=n,this.userCode=`
      void main() {
        vec4 offset = `+u+`;
        vec4 scale = `+l+`;

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(`+o+`));

        setOutput((x - mean) * inv + offset);
      }
    `},QI="return areal * breal - aimag * bimag;",ZI="return areal * bimag + aimag * breal;",L2=function(n,e,t){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=jt(e,t),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        `+n+`
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `},ev="return a + b;",nv="return a - b;",P2="return a * b;",ES="return (a < 0.) ? b * a : a;",_e=function(n,e,t){this.variableNames=["A","B"],this.outputShape=jt(e,t),this.userCode=`
      float binaryOperation(float a, float b) {
        `+n+`
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `},CS=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`,ya=function(n,e,t,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=jt(e,t);var a=this.outputShape.length,o="";if(r)if(a===0||St(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          `+he(a)+` coords = getOutputCoords();
        `,a===1)o+=`
            result.y = (coords + 1) >= `+this.outputShape[0]+` ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{var u=Dn("coords",a);o+=`
            bool nextRowOutOfBounds =
              (`+u[a-2]+" + 1) >= "+this.outputShape[a-2]+`;
            bool nextColOutOfBounds =
              (`+u[a-1]+" + 1) >= "+this.outputShape[a-1]+`;
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        `+n+`
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        `+o+`

        setOutput(result);
      }
    `},JI=(function(){function n(e){this.variableNames=["A"],this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(a,o){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(o,"maxVal")),a.gl.uniform1f(r.minLoc,e),a.gl.uniform1f(r.maxLoc,t)}},n})(),$I=(function(){function n(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.userCode=`
      uniform float minVal;
      uniform float maxVal;

      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}return n.prototype.getCustomSetupFunc=function(e,t){var r=this;return function(a,o){r.minLoc==null&&(r.minLoc=a.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=a.getUniformLocationNoThrow(o,"maxVal")),a.gl.uniform1f(r.minLoc,e),a.gl.uniform1f(r.maxLoc,t)}},n})(),tB=function(n){this.variableNames=["real","imag"],this.outputShape=n,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `},eB=function(n){this.outputShape=[],this.outputShape=ws(n,1),this.variableNames=n.map((function(l,c){return"T"+c}));var e=new Array(n.length-1);e[0]=n[0][1];for(var t=1;t<e.length;t++)e[t]=e[t-1]+n[t][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(t=1;t<e.length;t++){var a=e[t-1];r.push("else if (yC < "+e[t]+") setOutput(getT"+t+"(yR, yC-"+a+"));")}var o=e.length,u=e[e.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+u+"));"),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        `+r.join(`
        `)+`
      }
    `},nB=function(n,e){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=ws(n,e);var t=this.outputShape,r=t.length,a=he(r),o=Dn("coords",r),u=["x","y","z","w","u","v"].slice(0,r);this.variableNames=n.map((function(w,C){return"T"+C}));var l=new Array(n.length-1);l[0]=n[0][e];for(var c=1;c<l.length;c++)l[c]=l[c-1]+n[c][e];var h=u[e],d=u.slice(-2),v=u.join(),m="if ("+h+" < "+l[0]+`) {
        return getChannel(
            getT0(`+v+"), vec2("+d.join()+`));
        }`;for(c=1;c<l.length;c++){var g=l[c-1];m+=`
        if (`+h+" < "+l[c]+"  && "+h+" >= "+l[c-1]+`) {
          return getChannel(
            getT`+c+"("+Wc(u,h,g)+`),
            vec2(`+Wc(d,h,g)+`));
        }`}var x=l.length,E=l[l.length-1];m+=`
        return getChannel(
          getT`+x+"("+Wc(u,h,E)+`),
          vec2(`+Wc(d,h,E)+"));",this.userCode=`
      float getValue(`+u.map((function(w){return"int "+w}))+`) {
        `+m+`
      }

      void main() {
        `+a+` coords = getOutputCoords();
        vec4 result = vec4(getValue(`+o+`), 0., 0., 0.);

        `+o[r-1]+" = "+o[r-1]+` + 1;
        if (`+o[r-1]+" < "+t[r-1]+`) {
          result.g = getValue(`+o+`);
        }

        `+o[r-2]+" = "+o[r-2]+` + 1;
        if (`+o[r-2]+" < "+t[r-2]+`) {
          result.a = getValue(`+o+`);
        }

        `+o[r-1]+" = "+o[r-1]+` - 1;
        if (`+o[r-2]+" < "+t[r-2]+` &&
            `+o[r-1]+" < "+t[r-1]+`) {
          result.b = getValue(`+o+`);
        }
        setOutput(result);
      }
    `};function Wc(n,e,t){var r=n.indexOf(e);return n.map((function(a,o){return o===r?a+" - "+t:a})).join()}var rB=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,a=n.padInfo.left,o=n.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              if (`+o+`) {
                float dyValue = getDy(b, yR, yC, d2);
                float xValue = getX(b, xR, xC, d1);
                dotProd += (xValue * dyValue);
              } else {
                float dyValue = getDy(b, d2, yR, yC);
                float xValue = getX(b, d1, xR, xC);
                dotProd += (xValue * dyValue);
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},aB=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,o=n.dataFormat==="channelsLast",u=e-1-n.padInfo.top,l=t-1-n.padInfo.left,c=o?1:2,h=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[`+d+`];

        ivec2 dyCorner = ivec2(coords[`+c+"], coords["+h+`]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {

              if (`+o+`) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `},iB=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,a=n.padInfo.front,o=n.padInfo.top,u=n.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yF = 0; yF < `+n.outDepth+`; yF++) {
            int xF = wF + yF * `+e+" - "+a+`;

            if (xF < 0 || xF >= `+n.inDepth+`) {
              continue;
            }

            for (int yR = 0; yR < `+n.outHeight+`; yR++) {
              int xR = wR + yR * `+t+" - "+o+`;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int yC = 0; yC < `+n.outWidth+`; yC++) {
                int xC = wC + yC * `+r+" - "+u+`;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},oB=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterDepth,t=n.filterHeight,r=n.filterWidth,a=n.strideDepth,o=n.strideHeight,u=n.strideWidth,l=e-1-n.padInfo.front,c=t-1-n.padInfo.top,h=r-1-n.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(`+l+", "+c+", "+h+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < `+e+`; wF++) {
          float dyF = float(dyFCorner + wF) / `+a+`.0;

          if (dyF < 0.0 || dyF >= `+n.outDepth+`.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = `+e+` - 1 - wF;

          for (int wR = 0; wR < `+t+`; wR++) {
            float dyR = float(dyRCorner + wR) / `+o+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = `+t+` - 1 - wR;

            for (int wC = 0; wC < `+r+`; wC++) {
              float dyC = float(dyCCorner + wC) / `+u+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = `+r+` - 1 - wC;

              for (int d2 = 0; d2 < `+n.outChannels+`; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},sB=function(n){this.variableNames=["x","dy"],this.outputShape=n.filterShape;var e=n.strideHeight,t=n.strideWidth,r=n.padInfo.top,a=n.padInfo.left,o=n.outChannels/n.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * `+o+` + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < `+n.batchSize+`; b++) {
          for (int yR = 0; yR < `+n.outHeight+`; yR++) {
            int xR = wR + yR * `+e+" - "+r+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int yC = 0; yC < `+n.outWidth+`; yC++) {
              int xC = wC + yC * `+t+" - "+a+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `},uB=function(n){this.variableNames=["dy","W"],this.outputShape=n.inShape;var e=n.filterHeight,t=n.filterWidth,r=n.strideHeight,a=n.strideWidth,o=e-1-n.padInfo.top,u=t-1-n.padInfo.left,l=n.outChannels/n.inChannels;this.userCode=`
      const ivec2 pads = ivec2(`+o+", "+u+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < `+e+`; wR++) {
          float dyR = float(dyRCorner + wR) / `+r+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = `+e+` - 1 - wR;

          for (int wC = 0; wC < `+t+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+a+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = `+t+` - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < `+l+`; dm++) {
              int d2 = d1 * `+l+` + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `},z2=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var a=n.padInfo.top,o=n.padInfo.left,u=n.strideHeight,l=n.strideWidth,c=n.dilationHeight,h=n.dilationWidth,d=n.filterHeight,v=n.filterWidth,m=4*Math.floor(n.inChannels/4),g=n.inChannels%4,x=n.dataFormat==="channelsLast",E=x?1:2,w=x?2:3,C=x?3:1,S="",_="";t&&(S=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,_="result = activation(result);");var T=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+S+`

      const ivec2 strides = ivec2(`+u+", "+l+`);
      const ivec2 pads = ivec2(`+a+", "+o+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[`+C+`];

        ivec2 xRCCorner =
            ivec2(coords[`+E+"], coords["+w+`]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+d+`; wR++) {
          int xR = xRCorner + wR * `+c+`;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+v+`; wC++) {
            int xC = xCCorner + wC * `+h+`;

            if (xC < 0 || xC >= `+n.inWidth+`) {
              continue;
            }

            for (int d1 = 0; d1 < `+m+`; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (`+x+`) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (`+(g===1)+`) {

              if (`+x+`) {
                dotProd +=
                    getX(batch, xR, xC, `+m+`) *
                    getW(wR, wC, `+m+`, d2);
              } else {
                dotProd +=
                    getX(batch, `+m+`, xR, xC) *
                    getW(wR, wC, `+m+`, d2);
              }

            } else if (`+(g===2)+`) {
              vec2 wValues = vec2(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2)
              );

              if (`+x+`) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (`+(g===3)+`) {
              vec3 wValues = vec3(
                getW(wR, wC, `+m+`, d2),
                getW(wR, wC, `+m+` + 1, d2),
                getW(wR, wC, `+m+` + 2, d2)
              );

              if (`+x+`) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, `+m+`),
                  getX(batch, xR, xC, `+m+` + 1),
                  getX(batch, xR, xC, `+m+` + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, `+m+`, xR, xC),
                  getX(batch, `+m+` + 1, xR, xC),
                  getX(batch, `+m+` + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        `+T+`
        `+_+`
        setOutput(result);
      }
    `},lB=function(n){this.variableNames=["x","W"],this.outputShape=n.outShape;var e=n.padInfo.front,t=n.padInfo.top,r=n.padInfo.left,a=n.strideDepth,o=n.strideHeight,u=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,h=n.dilationWidth,d=n.filterDepth,v=n.filterHeight,m=n.filterWidth,g=4*Math.floor(n.inChannels/4),x=n.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(`+a+", "+o+", "+u+`);
      const ivec3 pads = ivec3(`+e+", "+t+", "+r+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < `+d+`; wF++) {
          int xF = xFCorner + wF * `+l+`;

          if (xF < 0 || xF >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+v+`; wR++) {
            int xR = xRCorner + wR * `+c+`;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+m+`; wC++) {
              int xC = xCCorner + wC * `+h+`;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              for (int d1 = 0; d1 < `+g+`; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (`+(x===1)+`) {
                dotProd +=
                  getX(batch, xF, xR, xC, `+g+`) *
                  getW(wF, wR, wC, `+g+`, d2);
              } else if (`+(x===2)+`) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (`+(x===3)+`) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, `+g+`),
                  getX(batch, xF, xR, xC, `+g+` + 1),
                  getX(batch, xF, xR, xC, `+g+` + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, `+g+`, d2),
                  getW(wF, wR, wC, `+g+` + 1, d2),
                  getW(wF, wR, wC, `+g+` + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `},U2=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=n.outShape;var a=n.inHeight,o=n.inWidth,u=n.padInfo.top,l=n.padInfo.left,c=n.strideHeight,h=n.strideWidth,d=n.dilationHeight,v=n.dilationWidth,m=n.filterHeight,g=n.filterWidth,x=n.outChannels/n.inChannels,E="",w="";t&&(E=r?`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`
          float activation(float x) {
            `+t+`
          }
        `,w="result = activation(result);");var C=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+E+`

      const ivec2 strides = ivec2(`+c+", "+h+`);
      const ivec2 pads = ivec2(`+u+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / `+x+`;
        int q = d2 - d1 * `+x+`;

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < `+m+`; wR++) {
          int xR = xRCorner + wR * `+d+`;

          if (xR < 0 || xR >= `+a+`) {
            continue;
          }

          for (int wC = 0; wC < `+g+`; wC++) {
            int xC = xCCorner + wC * `+v+`;

            if (xC < 0 || xC >= `+o+`) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        `+C+`
        `+w+`
        setOutput(result);
      }
    `},V2=function(n,e,t,r){e===void 0&&(e=!1),t===void 0&&(t=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.outShape;for(var a=n.inHeight,o=n.inWidth,u=n.padInfo.top,l=n.padInfo.left,c=n.strideHeight,h=n.strideWidth,d=n.dilationHeight,v=n.dilationWidth,m=n.filterHeight,g=n.filterWidth,x=g,E="int xR; int xC; int xCOffset;",w=0;w<m;w++)for(var C=0;C<g;C++)E+=`
          vec4 xTexelR`+w+"C"+2*C+` = vec4(0.);
          vec4 wR`+w+"C"+C+` = vec4(0.);
          vec4 xR`+w+"C"+C+" = vec4(0.);";for(w=0;w<m;w++)for(var S=0;S<x;S++){if(E+=`
          xR = xRCorner + `+w*d+`;
          xC = xCCorner + `+(C=2*S)*v+`;
        `,h===1){if(C<g&&(E+=l%2==1?`
                xCOffset = xC + 1;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  xTexelR`+w+"C"+C+` = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    xTexelR`+w+"C"+C+`.zw = vec2(0.);
                  }
                } else {
                  xTexelR`+w+"C"+C+` = vec4(0.);
                }

                xCOffset = xC + 1 - 2;
                if(xR >= 0 && xR < `+a+" && xCOffset >= 0 && xCOffset < "+o+`) {
                  vec4 previous = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if(xCOffset + 1 >= `+o+`) {
                    previous.zw = vec2(0.);
                  }

                  xR`+w+"C"+C+" = vec4(previous.zw, xTexelR"+w+"C"+C+`.xy);
                } else {
                  xR`+w+"C"+C+" = vec4(0, 0, xTexelR"+w+"C"+C+`.xy);
                }
              `:`
                if(xR >= 0 && xR < `+a+" && xC >= 0 && xC < "+o+`) {
                  xTexelR`+w+"C"+C+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+C+` = vec4(0.);
                }

                xR`+w+"C"+C+" = xTexelR"+w+"C"+C+`;
              `,C+1<g)){var _=l%2==0?VC(v):v;v%2==0&&l%2==1||v%2!=0&&l%2!=1?(E+=`
                  xCOffset = xC + `+l%2+" + "+_+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+w+"C"+(C+2)+` = getX(batch, xR, xCOffset, d1);
                  }
                `,v>1&&(E+=`
                    xCOffset -= 2;
                    if(xR >= 0 && xR < `+a+` &&
                      xCOffset >= 0 && xCOffset < `+o+`) {
                      xTexelR`+w+"C"+C+` = getX(batch, xR, xCOffset, d1);
                    } else {
                      xTexelR`+w+"C"+C+` = vec4(0.);
                    }
                  `),E+=`
                  xR`+w+"C"+(C+1)+` = vec4(
                    xTexelR`+w+"C"+C+".zw, xTexelR"+w+"C"+(C+2)+`.xy);
                `):E+=`
                  xCOffset = xC + `+_+`;

                  if(xR >= 0 && xR < `+a+` &&
                    xCOffset >= 0 && xCOffset < `+o+`) {
                    xTexelR`+w+"C"+(C+2)+` = getX(batch, xR, xCOffset, d1);
                  }

                  xR`+w+"C"+(C+1)+" = xTexelR"+w+"C"+(C+2)+`;
                `}}else C<g&&(E+=`
              if(xR >= 0 && xR < `+a+`) {
            `,l%2==1?(E+=`
                xCOffset = xC + 1 - `+h+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+w+"C"+C+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+C+` = vec4(0.);
                }

                if(xC + 1 >= 0 && xC + 1 < `+o+`) {
                  xTexelR`+w+"C"+(C+2)+` = getX(batch, xR, xC + 1, d1);
                } else {
                  xTexelR`+w+"C"+(C+2)+` = vec4(0.);
                }

                xR`+w+"C"+C+` = vec4(
                  xTexelR`+w+"C"+C+".zw, xTexelR"+w+"C"+(C+2)+`.zw);
              `,C+1<g&&(E+=`
                  vec4 final = vec4(0.);
                  xCOffset = xC + 1 + `+h+`;
                  if(xCOffset >= 0 && xCOffset < `+o+`) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xR`+w+"C"+(C+1)+" = vec4(xTexelR"+w+"C"+(C+2)+`.xy, final.xy);
                `)):(E+=`
                if(xC >= 0 && xC < `+o+`) {
                  xTexelR`+w+"C"+C+` = getX(batch, xR, xC, d1);
                } else {
                  xTexelR`+w+"C"+C+` = vec4(0.);
                }

                xCOffset = xC + `+h+`;
                if(xCOffset >= 0 && xCOffset < `+o+`) {
                  xTexelR`+w+"C"+(C+2)+` = getX(batch, xR, xCOffset, d1);
                } else {
                  xTexelR`+w+"C"+(C+2)+` = vec4(0.);
                }

                xR`+w+"C"+C+` = vec4(
                  xTexelR`+w+"C"+C+".xy, xTexelR"+w+"C"+(C+2)+`.xy);
              `,C+1<g&&(E+=`
                  xR`+w+"C"+(C+1)+` = vec4(
                    xTexelR`+w+"C"+C+".zw, xTexelR"+w+"C"+(C+2)+`.zw);
                `)),E+="}");C<g&&(E+=`
            vec4 wTexelR`+w+"C"+C+" = getW("+w+", "+C+`, d1, q);
            wR`+w+"C"+C+" = vec4(wTexelR"+w+"C"+C+".xz, wTexelR"+w+"C"+C+`.xz);
          `,C+1<g&&(E+=`
              vec4 wTexelR`+w+"C"+(C+1)+" = getW("+w+", "+(C+1)+`, d1, q);
              wR`+w+"C"+(C+1)+` =
                vec4(wTexelR`+w+"C"+(C+1)+".xz, wTexelR"+w+"C"+(C+1)+".xz);"))}for(w=0;w<m;w++)for(C=0;C<g;C++)E+="dotProd += xR"+w+"C"+C+" * wR"+w+"C"+C+";";var T="",A="";t&&(T=r?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+t+`
        }`:`vec4 activation(vec4 x) {
          `+t+`
        }`,A="result = activation(result);");var D=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+T+`

      const ivec2 strides = ivec2(`+c+", "+h+`);
      const ivec2 pads = ivec2(`+u+", "+l+`);

      void main() {

        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2;
        int q = 0;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        vec4 dotProd = vec4(0.);

        `+E+`

        vec4 result = dotProd;
        `+D+`
        `+A+`
        setOutput(result);
      }
    `},cB=function(n,e,t,r,a){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=n[0],u=n[1],l=n[2],c=n[3],h=e[0],d=t[0],v=t[1];this.outputShape=[h,d,v,c];var m=r==="bilinear"?1:0,g=[u-1+".0",l-1+".0"],x=g[0],E=g[1],w=d>1?[""+(u-1)/(d-1),"(y2-y1) * height_ratio","y1*"+x+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+x],C=w[0],S=w[1],_=w[2],T=v>1?[""+(l-1)/(v-1),"(x2-x1) * width_ratio","x1*"+E+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+E],A=T[0],D=T[1],N=T[2];this.userCode=`
      const float height_ratio = float(`+C+`);
      const float width_ratio = float(`+A+`);
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= `+o+`) {
          return;
        }

        float height_scale = `+S+`;
        float width_scale = `+D+`;

        float in_y = `+_+`;
        if( in_y < 0.0 || in_y > `+x+` ) {
          setOutput(float(`+a+`));
          return;
        }
        float in_x = `+N+`;
        if( in_x < 0.0 || in_x > `+E+` ) {
          setOutput(float(`+a+`));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(`+m+` == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `},fB=function(n,e,t){this.variableNames=["x"],this.outputShape=n;var r=n.length,a=n[n.length-1],o=t?"<":">";this.userCode=`
      int getIndex(int i) {
        `+(t?"return "+a+" -i - 1;":"return i;")+`
      }

      void main() {
        `+he(r)+` coords = getOutputCoords();
        int end = `+H2(r,"coords")+`;
        float val = 0.0;
        for (int i = `+a+` - 1; i >= 0; i -= 1) {
          int idx = getIndex(i);
          if (idx `+o+` end) {
            continue;
          }
          if (idx == end && `+e+`) {
            continue;
          }
          `+H2(r,"coords")+` = idx;
          val += getX(`+(function(u,l){if(u===1)return""+l;if(u===2)return l+".x, "+l+".y";if(u===3)return l+".x, "+l+".y, "+l+".z";if(u===4)return l+".x, "+l+".y, "+l+".z, "+l+".w";throw Error("Cumulative sum for rank "+u+" is not yet supported")})(r,"coords")+`);
        }
        setOutput(val);
      }
    `};function H2(n,e){if(n===1)return""+e;if(n===2)return e+".y";if(n===3)return e+".z";if(n===4)return e+".w";throw Error("Cumulative sum for rank "+n+" is not yet supported")}var hB=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=qu.DENSE;var e=Iu(n),t=fn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Wi(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        `+t.output+` = result;
      }
    `},dB=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=qu.DENSE;var e=Iu(n),t=fn();this.outputShape=n,this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        `+Wi(["r","c","d"],n)+`
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx *
          vec2(`+e[0]+", "+e[1]+`));
        int index = 4 * (resTexRC.x * `+e[1]+` + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        `+t.output+` = result;
      }
    `},pB=(function(){function n(e,t,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = `+this.getHeightCoordString()+`;
      int w = `+this.getWidthCoordString()+`;
      int d = `+this.getDepthCoordString()+`;

      int in_h = h / `+t+`;
      int offset_h = imod(h, `+t+`);
      int in_w = w / `+t+`;
      int offset_w = imod(w, `+t+`);
      int offset_d = (offset_h * `+t+` + offset_w) *
        `+this.getOutputDepthSize()+`;
      int in_d = d + offset_d;

      float result = `+this.getInputSamplingString()+`;
      setOutput(result);
    }
  `}return n.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},n.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},n.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},n.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},n.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},n})(),vB=function(n){this.variableNames=["X"],this.outputShape=[n,n],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `},mB=function(n){this.variableNames=["A"],this.outTexUsage=qn.DOWNLOAD;var e=fn();this.outputShape=n,this.userCode=`
      `+xS+`

      void main() {
        float x = getAAtOutCoords();
        `+e.output+` = encode_float(x);
      }
    `},gB=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=qn.DOWNLOAD;var e=fn();this.outputShape=n,this.userCode=`
      `+xS+`

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        `+e.output+` = encode_float(x);
      }
    `},yB=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"];var r=fn(),a=e[0],o=e[1];this.outputShape=n;var u="result";t&&(u="floor(result * 255. + 0.5)"),this.userCode=`
      `+sg(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        int flatIndex = getFlatIndex(coords);
        int offset = imod(flatIndex, 4);

        flatIndex = idiv(flatIndex, 4, 1.);
        
        int r = flatIndex / `+o+`;
        int c = imod(flatIndex, `+o+`);
        vec2 uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+a+`.0);
        vec4 values = `+r.texture2D+`(A, uv);

        float result;

        if(offset == 0) {
          result = values[0];
        } else if(offset == 1) {
          result = values[1];
        } else if(offset == 2) {
          result = values[2];
        } else {
          result = values[3];
        }

        `+r.output+" = vec4("+u+`, 0., 0., 0.);
      }
    `},bB=function(n,e,t){t===void 0&&(t=!1),this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var r=fn(),a=e[0],o=e[1];this.outputShape=n;var u="",l="result";t&&(l="floor(result * 255. + 0.5)");for(var c=0;c<=1;c++)for(var h=0;h<=1;h++){var d=2*c+h;u+=`
          localCoords = coords;
          if(localCoords[2] + `+h+" < "+n[2]+`) {
            localCoords[2] += `+h+`;
            if(localCoords[1] + `+c+" < "+n[1]+`) {
              localCoords[1] += `+c+`;

              flatIndex = getFlatIndex(localCoords);
              offset = imod(flatIndex, 4);

              flatIndex = idiv(flatIndex, 4, 1.);

              r = flatIndex / `+o+`;
              c = imod(flatIndex, `+o+`);
              uv = (vec2(c, r) + halfCR) / vec2(`+o+".0, "+a+`.0);
              values = `+r.texture2D+`(A, uv);

              if(offset == 0) {
                result[`+d+`] = values[0];
              } else if(offset == 1) {
                result[`+d+`] = values[1];
              } else if(offset == 2) {
                result[`+d+`] = values[2];
              } else {
                result[`+d+`] = values[3];
              }
            }
          }
        `}this.userCode=`
      `+sg(n)+`

      void main() {
        ivec3 coords = getOutputCoords();

        vec4 result = vec4(0.);
        int flatIndex, r, c, offset;
        ivec3 localCoords;
        vec2 uv;
        vec4 values;

        `+u+`

        `+r.output+" = "+l+`;
      }
    `},xB="return real * expR - imag * expI;",wB="return real * expI + imag * expR;",G2=function(n,e,t){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var a=t?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=t?r+".0":"1.0";this.userCode=`
      const float exponentMultiplier = `+a+`;

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        `+n+`
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(`+r+`);
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < `+r+`; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / `+o+`;
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `},EB=(function(){function n(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      uniform float value;
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,a){t.valueLoc==null&&(t.valueLoc=r.getUniformLocationNoThrow(a,"value")),r.gl.uniform1f(t.valueLoc,e)}},n})(),CB=function(n,e,t){this.variableNames=["A","indices"];var r=n.slice();r[t]=e,this.outputShape=r,this.rank=r.length;var a=he(this.rank),o=(function(u,l){var c=u.length;if(c>4)throw Error("Gather for rank "+c+" is not yet supported");if(c===1)return"int(getIndices(resRC))";for(var h=["resRC.x","resRC.y","resRC.z","resRC.w"],d=[],v=0;v<u.length;v++)v===l?d.push("int(getIndices("+h[v]+"))"):d.push(""+h[v]);return d.join()})(n,t);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},SB=function(n,e,t){this.sliceDim=n,this.strides=e,this.variableNames=["x","indices"],this.outputShape=t;var r=he(e.length),a=he(t.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode=`
        `+r+" strides = "+r+"("+this.strides+`);
         void main() {
          `+a+` coords = getOutputCoords();
          int flattenIndex = 0;
          for (int j = 0; j < `+this.sliceDim+`; j++) {
            int index = round(getIndices(coords[0], j));
            flattenIndex += index * `+o+`;
          }
          setOutput(getX(flattenIndex, coords[1]));
        }
      `};function _B(n,e){var t=fn();return xk(n,e,t.version+`
    precision highp float;
    `+t.attribute+` vec3 clipSpacePos;
    `+t.attribute+` vec2 uv;
    `+t.varyingVs+` vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`)}function TB(n,e){return _k(n,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function RB(n,e){return Tk(n,e,new Uint16Array([0,1,2,2,1,3]))}function fl(n,e,t,r,a,o,u){Ak(t,r);var l=Rk(n,e),c=n.TEXTURE_2D;return _t(n,e,(function(){return n.bindTexture(c,l)})),_t(n,e,(function(){return n.texParameteri(c,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE)})),_t(n,e,(function(){return n.texParameteri(c,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE)})),_t(n,e,(function(){return n.texParameteri(c,n.TEXTURE_MIN_FILTER,n.NEAREST)})),_t(n,e,(function(){return n.texParameteri(c,n.TEXTURE_MAG_FILTER,n.NEAREST)})),_t(n,e,(function(){return n.texImage2D(c,0,a,t,r,0,o,u,null)})),_t(n,e,(function(){return n.bindTexture(n.TEXTURE_2D,null)})),l}function AB(n,e,t,r,a){var o=qf(t,r);return fl(n,e,o[0],o[1],a.internalFormatFloat,a.textureFormatFloat,n.FLOAT)}function DB(n,e,t,r,a){var o=qf(t,r);return fl(n,e,o[0],o[1],a.internalFormatHalfFloat,a.textureFormatFloat,a.textureTypeHalfFloat)}function MB(n,e,t,r,a){var o=qf(t,r);return fl(n,e,o[0],o[1],n.RGBA,n.RGBA,n.UNSIGNED_BYTE)}function NB(n,e,t,r,a){var o=cl(t,r);return fl(n,e,o[0],o[1],a.internalFormatPackedFloat,n.RGBA,n.FLOAT)}function OB(n,e,t,r,a){var o=cl(t,r);return fl(n,e,o[0],o[1],a.internalFormatPackedHalfFloat,n.RGBA,a.textureTypeHalfFloat)}function kB(n,e,t,r){return _t(n,e,(function(){return n.bindBuffer(n.ARRAY_BUFFER,r)})),M2(n,e,t,"clipSpacePos",r,3,20,0)&&M2(n,e,t,"uv",r,2,20,12)}function IB(n,e,t,r,a,o,u){var l,c,h;_t(n,e,(function(){return n.bindTexture(n.TEXTURE_2D,t)})),o instanceof Uint8Array?(l=new Uint8Array(r*a*4),c=n.UNSIGNED_BYTE,h=n.RGBA):(l=new Float32Array(r*a*4),c=n.FLOAT,h=u.internalFormatPackedFloat),l.set(o),_t(n,e,(function(){return n.texImage2D(n.TEXTURE_2D,0,h,r,a,0,n.RGBA,c,l)})),_t(n,e,(function(){return n.bindTexture(n.TEXTURE_2D,null)}))}function BB(n,e,t,r){_t(n,e,(function(){return n.bindTexture(n.TEXTURE_2D,t)})),r.data instanceof Uint8Array?_t(n,e,(function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,r.width,r.height,0,n.RGBA,n.UNSIGNED_BYTE,r.data)})):_t(n,e,(function(){return n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,r)})),_t(n,e,(function(){return n.bindTexture(n.TEXTURE_2D,null)}))}function FB(n,e,t,r,a){var o=n.createBuffer();_t(n,e,(function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,o)}));var u=16*t*r;return _t(n,e,(function(){return n.bufferData(n.PIXEL_PACK_BUFFER,u,n.STREAM_READ)})),_t(n,e,(function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,0)})),_t(n,e,(function(){return n.bindBuffer(n.PIXEL_PACK_BUFFER,null)})),o}function LB(n,e,t){var r=n,a=new Float32Array(t);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,a),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),a}function PB(n,e,t,r,a){var o=qf(t,r),u=o[0],l=o[1],c=new Uint8Array(t*r*4);return _t(n,e,(function(){return n.readPixels(0,0,u,l,a.downloadTextureFormat,n.UNSIGNED_BYTE,c)})),new Float32Array(c.buffer)}function zB(n,e,t,r,a,o,u,l){var c=n,h=new Float32Array((function(d,v){var m=cl(d,v);return m[0]*m[1]*4})(o,u));return c.bindBuffer(c.PIXEL_PACK_BUFFER,e),c.getBufferSubData(c.PIXEL_PACK_BUFFER,0,h),c.bindBuffer(c.PIXEL_PACK_BUFFER,null),h}function UB(n,e,t,r){var a=new Float32Array(t*r*4);return _t(n,e,(function(){return n.readPixels(0,0,r,t,n.RGBA,n.FLOAT,a)})),a}var VB=(function(){function n(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=lt().getNumber("WEBGL_VERSION");e!=null?(this.gl=e,vk(t,e)):this.gl=Xr(t);var r="WEBGL_color_buffer_float";if(lt().getNumber("WEBGL_VERSION")===1){if(this.textureFloatExtension=Vc(this.gl,this.debug,"OES_texture_float"),hr(this.gl,"OES_texture_half_float"))this.textureHalfFloatExtension=Vc(this.gl,this.debug,"OES_texture_half_float");else if(lt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),hr(this.gl,"EXT_color_buffer_half_float"))this.colorBufferHalfFloatExtension=Vc(this.gl,this.debug,"EXT_color_buffer_half_float");else if(lt().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",hr(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else{if(!hr(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=TB(this.gl,this.debug),this.indexBuffer=RB(this.gl,this.debug),this.framebuffer=Dk(this.gl,this.debug),this.textureConfig=Zm(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(n.prototype,"debug",{get:function(){return lt().getBool("DEBUG")},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;_t(t,this.debug,(function(){return t.finish()})),_t(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),_t(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),_t(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),_t(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),_t(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},n.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),AB(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),DB(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),MB(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),BB(this.gl,this.debug,e,t)},n.prototype.uploadDenseMatrixToTexture=function(e,t,r,a){this.throwIfDisposed(),IB(this.gl,this.debug,e,t,r,a,this.textureConfig)},n.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),OB(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),NB(this.gl,this.debug,e,t,this.textureConfig)},n.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(N2(this.gl,this.debug,this.framebuffer),this.outputTexture=null),_t(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},n.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,r){var a=this;return this.downloadMatrixDriver(e,(function(){return PB(a.gl,a.debug,t,r,a.textureConfig)}))},n.prototype.downloadPackedMatrixFromBuffer=function(e,t,r,a,o,u){return zB(this.gl,e,0,0,0,o,u,this.textureConfig)},n.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return LB(this.gl,e,t)},n.prototype.createBufferFromTexture=function(e,t,r){this.bindTextureToFrameBuffer(e);var a=FB(this.gl,this.debug,t,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),a},n.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},n.prototype.createFence=function(e){var t,r,a=this;if(lt().getBool("WEBGL_FENCE_API_ENABLED")){var o=e,u=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var l=o.clientWaitSync(u,0,0);return l===o.ALREADY_SIGNALED||l===o.CONDITION_SATISFIED},t=u}else lt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),r=function(){return a.isQueryAvailable(t,lt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:t,isFencePassed:r}},n.prototype.downloadMatrixFromPackedTexture=function(e,t,r){var a=this;return this.downloadMatrixDriver(e,(function(){return UB(a.gl,a.debug,t,r)}))},n.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,r=wk(t,this.debug,e),a=_B(t,this.debug),o=Ck(t,this.debug);return _t(t,this.debug,(function(){return t.attachShader(o,a)})),_t(t,this.debug,(function(){return t.attachShader(o,r)})),Sk(t,this.debug,o),this.debug&&Zp(t,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=kB(t,this.debug,this.program,this.vertexBuffer)),o},n.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&_t(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},n.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Zp(this.gl,this.debug,this.program),_t(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},n.prototype.getUniformLocation=function(e,t,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?Nk(this.gl,this.debug,e,t):Ok(this.gl,e,t)},n.prototype.getAttributeLocation=function(e,t){var r=this;return this.throwIfDisposed(),_t(this.gl,this.debug,(function(){return r.gl.getAttribLocation(e,t)}))},n.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},n.prototype.setInputMatrixTexture=function(e,t,r){this.throwIfDisposed(),this.throwIfNoProgram(),kk(this.gl,this.debug,this.program,e,t,r)},n.prototype.setOutputMatrixTexture=function(e,t,r){this.setOutputMatrixTextureDriver(e,r,t)},n.prototype.setOutputPackedMatrixTexture=function(e,t,r){this.throwIfDisposed();var a=cl(t,r),o=a[0],u=a[1];this.setOutputMatrixTextureDriver(e,o,u)},n.prototype.setOutputMatrixWriteRegion=function(e,t,r,a){this.setOutputMatrixWriteRegionDriver(r,e,a,t)},n.prototype.setOutputPackedMatrixWriteRegion=function(e,t,r,a){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},n.prototype.debugValidate=function(){this.program!=null&&Zp(this.gl,this.debug,this.program),Hc(this.gl)},n.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),_t(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},n.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),_t(this.gl,this.debug,(function(){return e.gl.finish()}))},n.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Vc(this.gl,this.debug,lt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},n.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},n.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},n.prototype.beginQuery=function(){if(lt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,r),r}var a=this.getQueryTimerExtensionWebGL1(),o=a.createQueryEXT();return a.beginQueryEXT(a.TIME_ELAPSED_EXT,o),o},n.prototype.endQuery=function(){if(lt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,r=this.getQueryTimerExtensionWebGL2();t.endQuery(r.TIME_ELAPSED_EXT)}},n.prototype.waitForQueryAndGetTime=function(e){return xt(this,void 0,void 0,(function(){var t=this;return wt(this,(function(r){switch(r.label){case 0:return[4,S2((function(){return t.disposed||t.isQueryAvailable(e,lt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return r.sent(),[2,this.getQueryTime(e,lt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},n.prototype.getQueryTime=function(e,t){if(t===0)return null;if(t===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var a=this.getQueryTimerExtensionWebGL1();return a.getQueryObjectEXT(e,a.QUERY_RESULT_EXT)/1e6},n.prototype.isQueryAvailable=function(e,t){if(t===0)return!0;if(t===2){var r=this.gl,a=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(a=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,a.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(a.GPU_DISJOINT_EXT)),o&&!this.disjoint},n.prototype.pollFence=function(e){var t=this;return new Promise((function(r){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return r()}))}))},n.prototype.pollItems=function(){for(var e=(function(r){for(var a=0;a<r.length&&r[a]();++a);return a-1})(this.itemsToPoll.map((function(r){return r.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},n.prototype.addItemToPoll=function(e,t){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||S2((function(){return r.pollItems(),r.itemsToPoll.length===0}))},n.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),Jp(this.gl,this.debug,e,this.framebuffer),this.debug&&Hc(this.gl)},n.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(Jp(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&Hc(this.gl)):N2(this.gl,this.debug,this.framebuffer)},n.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var r=t();return this.unbindTextureToFrameBuffer(),r},n.prototype.setOutputMatrixTextureDriver=function(e,t,r){this.throwIfDisposed();var a=this.gl;Jp(a,this.debug,e,this.framebuffer),this.debug&&Hc(a),this.outputTexture=e,_t(a,this.debug,(function(){return a.viewport(0,0,t,r)})),_t(a,this.debug,(function(){return a.scissor(0,0,t,r)}))},n.prototype.setOutputMatrixWriteRegionDriver=function(e,t,r,a){var o=this;this.throwIfDisposed(),_t(this.gl,this.debug,(function(){return o.gl.scissor(e,t,r,a)}))},n.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},n.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},n})();function j2(n,e){if(n.length!==e.length)throw Error("Binary was compiled with "+n.length+" inputs, but was executed with "+e.length+" inputs");n.forEach((function(t,r){var a=t.logicalShape,o=e[r],u=o.shape;if(!Xe(a,u))throw Error("Binary was compiled with different shapes than the current args. Shapes "+a+" and "+u+" must match");if(!t.isUniform||!o.isUniform){var l=t.texShape,c=o.isUniform?null:o.texData.texShape;if(!Xe(l,c))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+l+" and "+c+" must match")}}))}var HB=function(n,e,t){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var r=t.filterWidth,a=t.inChannels,o=t.strideWidth,u=t.strideHeight,l=t.padInfo,c=t.outWidth,h=t.dilationWidth,d=t.dilationHeight,v=t.dataFormat,m=l.left,g=l.top,x=a*r,E=fn(),w=v==="channelsLast",C=w?0:1,S=w?1:2,_="",T=0;T<=1;T++)for(var A=0;A<=1;A++)_+=`
          blockIndex = rc.y + `+A+`;
          pos = rc.x + `+T+`;

          if(blockIndex < `+n[1]+" && pos < "+n[0]+`) {
            offsetY = int(blockIndex / (`+c+")) * "+u+" - "+g+`;
            d0 = offsetY + `+d+" * (pos / "+x+`);

            if(d0 < `+e[C]+` && d0 >= 0) {

              offsetX = int(mod(float(blockIndex), `+c+".) * "+o+". - "+m+`.);
              d1 = offsetX + `+h+" * (int(mod(float(pos), "+x+".) / "+a+`.));

              if(d1 < `+e[S]+` && d1 >= 0) {

                ch = int(mod(float(pos), `+a+`.));

                if (`+w+`) {
                  innerDims = vec2(d1, ch);
                  result[`+(2*T+A)+`] = getChannel(
                    getA(d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[`+(2*T+A)+`] = getChannel(
                    getA(ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec2 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        `+_+`

        `+E.output+` = result;
      }
    `},GB=function(n,e,t,r,a){this.variableNames=["x"],this.outputShape=[];var o,u=e,l=n[3]-1;this.outputShape=n;var c="float("+t+") + float("+r+") * sum";o=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -`+u+"; j <= "+u+`; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  `+l+`) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * `+o+`;
        setOutput(val);
      }
    `},jB=function(n,e,t,r,a){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=n,this.depth=n[3],this.depthRadius=e,this.bias=t,this.alpha=r,this.beta=a,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < `+this.depth+`; ++d) {
          int depthBegin = int(max(0.0, float(d - `+e+`)));
          int depthEnd = int(min(float(`+this.depth+`),
              float(d + `+e+` + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = `+this.depth+`;

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(`+r+") * norm + float("+t+`);

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(`+r+`)
                * float(`+a+`)
                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * `+a+`);
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `},WB=function(n,e,t,r,a){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;var o,u=e,l=n[3]-1;this.outputShape=n;var c="float("+t+") + float("+r+") * sum";o=a===.5?"inversesqrt("+c+")":a===1?"1.0/("+c+")":"exp(log("+c+") * float(-"+a+"));",this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < `+this.outputShape[3]+`;
        bool hasNextRow = c < `+this.outputShape[2]+`;

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - `+u+`;
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - `+u+"; j <= "+u+`; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(`+l+`));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * `+o+`;
        setOutput(result);
      }
    `},qB=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideHeight,t=n.strideWidth,r=n.dilationHeight,a=n.effectiveFilterHeight,o=n.effectiveFilterWidth,u=a-1-n.padInfo.top,l=o-1-n.padInfo.left,c=a*o-1;this.userCode=`
      const ivec2 pads = ivec2(`+u+", "+l+`);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < `+a+`;
          wR += `+r+`) {
          float dyR = float(dyRCorner + wR) / `+e+`.0;

          if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < `+o+`; wC++) {
            float dyC = float(dyCCorner + wC) / `+t+`.0;

            if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = `+c+` - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * `+o+` + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `},KB=function(n){this.variableNames=["dy","maxPos"],this.outputShape=n.inShape;var e=n.strideDepth,t=n.strideHeight,r=n.strideWidth,a=n.dilationDepth,o=n.dilationHeight,u=n.dilationWidth,l=n.effectiveFilterDepth,c=n.effectiveFilterHeight,h=n.effectiveFilterWidth,d=l-1-n.padInfo.front,v=c-1-n.padInfo.top,m=h-1-n.padInfo.left,g=l*c*h-1;this.userCode=`
      const ivec3 pads = ivec3(`+d+", "+v+", "+m+`);

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < `+l+`;
           wD += `+a+`) {
          float dyD = float(dyDCorner + wD) / `+e+`.0;

          if (dyD < 0.0 || dyD >= `+n.outDepth+`.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < `+c+`;
              wR += `+o+`) {
            float dyR = float(dyRCorner + wR) / `+t+`.0;

            if (dyR < 0.0 || dyR >= `+n.outHeight+`.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < `+h+`;
                wC += `+u+`) {
              float dyC = float(dyCCorner + wC) / `+r+`.0;

              if (dyC < 0.0 || dyC >= `+n.outWidth+`.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = `+g+` -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * `+c+" * "+h+` +
                  wR * `+h+` + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `},rv=function(n,e,t,r,a,o,u){t===void 0&&(t=!1),r===void 0&&(r=!1),a===void 0&&(a=!1),o===void 0&&(o=null),u===void 0&&(u=!1),this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e;var l=t?n[1]:n[2],c=Math.ceil(l/2),h=t?"i * 2, rc.y":"rc.y, i * 2",d=r?"rc.z, i * 2":"i * 2, rc.z",v=t?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],g="",x="";o&&(g=u?`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          `+o+`
        }`:`vec4 activation(vec4 x) {
          `+o+`
        }`,x="result = activation(result);");var E=a?"result += getBiasAtOutCoords();":"";a&&this.variableNames.push("bias"),u&&this.variableNames.push("preluActivationWeights"),this.userCode=`
      `+g+`

      const float sharedDimension = `+c+`.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        for (int i = 0; i < `+c+`; i++) {
          vec4 a = getMatrixA(rc.x, `+h+`);
          vec4 b = getMatrixB(rc.x, `+d+`);

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (`+v[0]+" * "+m[0]+`);
          result += (`+v[1]+" * "+m[1]+`);
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        `+E+`

        `+x+`

        setOutput(result);
      }
    `},XB=(function(){function n(e,t,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode=`
      uniform float seed;

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < `+(t-1)+`; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(`+(t-1)+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;return function(r,a){t.seedLoc==null&&(t.seedLoc=r.getUniformLocation(a,"seed")),r.gl.uniform1f(t.seedLoc,e)}},n})(),YB=function(n,e,t,r){this.variableNames=["indices"],this.outputShape=[n,e],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(`+r+"), float("+t+`),
                      float(index == coords.y)));
      }
    `},QB=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=n;var e=n.length;if(e===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{var t=Dn("rc",e),r=he(e),a=(function(l,c,h){if(l===1)return"rc > "+c[0];for(var d="",v=l-2;v<l;v++)d+=h[v]+" >= "+c[v],v<l-1&&(d+="||");return d})(e,n,t),o=(function(l,c,h,d){if(l===1)return"";var v=d.slice(-2);return`
    int r = `+v[0]+`;
    int c = `+v[1]+`;
    int rp1 = r + 1;
    int cp1 = c + 1;

    bool cEdge = cp1 >= `+c+`;
    bool rEdge = rp1 >= `+h+`;
  `})(e,n[n.length-1],n[n.length-2],t),u=(function(l,c){var h=l.length,d=(function(v,m){for(var g=[],x=0;x<=1;x++)for(var E=0;E<=1;E++){for(var w=(x===0?"r":"rp1")+", "+(E===0?"c":"cp1"),C=2;C<v;C++)w=m[m.length-1-C]+","+w;g.push(w)}return g})(h,c);return h===1?`getA(rc),
            rc + 1 >= `+l[0]+` ? 0. : getA(rc + 1),
            0, 0`:"getA("+d[0]+`),
          cEdge ? 0. : getA(`+d[1]+`),
          rEdge ? 0. : getA(`+d[2]+`),
          rEdge || cEdge ? 0. : getA(`+d[3]+")"})(n,t);this.userCode=`
        void main() {
          `+r+` rc = getOutputCoords();

          if(`+a+`) {
            setOutput(vec4(0));
          } else {
            `+o+`

            setOutput(vec4(`+u+`));
          }
        }
      `}},ZB=function(n,e,t){this.variableNames=["x"],this.outputShape=e.map((function(c,h){return c[0]+n[h]+c[1]}));var r=n.length,a=he(r),o=e.map((function(c){return c[0]})).join(","),u=e.map((function(c,h){return c[0]+n[h]})).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?`
      `+a+" start = "+a+"("+o+`);
      `+a+" end = "+a+"("+u+`);

      void main() {
        `+a+` outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(float(`+t+`));
        } else {
          `+a+` coords = outC - start;
          setOutput(getX(`+l+`));
        }
      }
    `:`
        int start = `+o+`;
        int end = `+u+`;

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(float(`+t+`));
          } else {
            setOutput(getX(outC - start));
          }
        }
      `},JB=function(n,e,t){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e.map((function(w,C){return w[0]+n[C]+w[1]}));for(var r=n.length,a=he(r),o=e.map((function(w){return w[0]})).join(","),u=e.map((function(w,C){return w[0]+n[C]})).join(","),l=Dn("rc",r),c=Dn("source",r),h=l[r-1]+" < "+this.outputShape[r-1],d=r===1?"source":"vec2("+c.slice(-2).join()+")",v=[a+" rc = outputLoc;",l[r-1]+` += 1;
       if(`+h+`) {
      `,r===1?"":`}
       rc = outputLoc;
       `+l[r-2]+` += 1;
       if(`+l[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+l[r-1]+` += 1;
         if(`+h+") {"],m=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",g="",x=0,E=r===1?2:4;x<E;x++)g+=`
        `+v[x]+`
        if (`+m+`) {
          result[`+x+"] = float("+t+`);
        } else {
          `+a+` source = rc - start;
          result[`+x+"] = getChannel(getX("+c.join()+"), "+d+`);
        }
      `;g+=r===1?"} ":"}}",this.userCode=`
      const `+a+" start = "+a+"("+o+`);
      const `+a+" end = "+a+"("+u+`);

      void main() {
        `+a+` outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        `+g+`
        setOutput(result);
      }
    `},av=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,a=n.strideHeight,o=n.strideWidth,u=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterHeight,h=n.effectiveFilterWidth,d=n.padInfo.top,v=n.padInfo.left;this.outputShape=n.outShape;var m=e==="avg",g="0.0";if(m||(g="-1.0 / 1e-20"),t)this.userCode=`
        const ivec2 strides = ivec2(`+a+", "+o+`);
        const ivec2 pads = ivec2(`+d+", "+v+`);

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < `+c+`;
              wR += `+u+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+h+`;
                wC += `+l+`) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= `+n.inWidth+`) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value >= currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = wR * `+h+` + wC;
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var x=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(x="avgValue / count");var E=4*Math.floor(r/4),w=r%4,C=`
      if (`+m+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(`+a+", "+o+`);
      const ivec2 pads = ivec2(`+d+", "+v+`);
      const float initializationValue = `+g+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+g+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < `+c+`;
            wR += `+u+`) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= `+n.inHeight+`) {
            continue;
          }

          for (int wC = 0; wC < `+E+`; wC += 4) {
            int xC = xCCorner + wC * `+l+`;

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              getValue(batch, xR, xC + 3 * `+l+`, d)
            );

            `+C+`
          }

          int xC = xCCorner + `+E+`;
          if (`+(w===1)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            `+C+`
          } else if (`+(w===2)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              initializationValue,
              initializationValue
            );

            `+C+`
          } else if (`+(w===3)+`) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + `+l+`, d),
              getValue(batch, xR, xC + 2 * `+l+`, d),
              initializationValue
            );

            `+C+`
          }
        }
        setOutput(`+x+`);
      }
    `}},iv=function(n,e,t){if(this.variableNames=["x"],e==="avg"&&t)throw new Error("Cannot compute positions for average pool.");var r=n.filterWidth,a=n.strideDepth,o=n.strideHeight,u=n.strideWidth,l=n.dilationDepth,c=n.dilationHeight,h=n.dilationWidth,d=n.effectiveFilterDepth,v=n.effectiveFilterHeight,m=n.effectiveFilterWidth,g=n.padInfo.front,x=n.padInfo.top,E=n.padInfo.left;this.outputShape=n.outShape;var w=e==="avg",C="0.0";if(w||(C="-1.0 / 1e-20"),t)this.userCode=`
        const ivec3 strides =
            ivec3(`+a+", "+o+", "+u+`);
        const ivec3 pads = ivec3(`+g+", "+x+", "+E+`);

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < `+d+`;
              wD += `+l+`) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= `+n.inDepth+`) {
              continue;
            }

            for (int wR = 0; wR < `+v+`;
                wR += `+c+`) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= `+n.inHeight+`) {
                continue;
              }

              for (int wC = 0; wC < `+m+`;
                  wC += `+h+`) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= `+n.inWidth+`) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value >= currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition =
                      wD * `+v+" * "+m+` +
                      wR * `+m+` + wC;;
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;else{var S=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(S="avgValue / count");var _=4*Math.floor(r/4),T=r%4,A=`
      if (`+w+`) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = max(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(`+a+", "+o+", "+u+`);
      const ivec3 pads = ivec3(`+g+", "+x+", "+E+`);
      const float initializationValue = `+C+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= `+n.inWidth+`) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(`+C+`);
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < `+d+`;
            wD += `+l+`) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= `+n.inDepth+`) {
            continue;
          }

          for (int wR = 0; wR < `+v+`;
            wR += `+c+`) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= `+n.inHeight+`) {
              continue;
            }

            for (int wC = 0; wC < `+_+`; wC += 4) {
              int xC = xCCorner + wC * `+h+`;

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+h+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+h+`, ch),
                getValue(batch, xD, xR, xC + 3 * `+h+`, ch)
              );

              `+A+`
            }

            int xC = xCCorner + `+_+`;
            if (`+(T===1)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              `+A+`
            } else if (`+(T===2)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+h+`, ch),
                initializationValue,
                initializationValue
              );

              `+A+`
            } else if (`+(T===3)+`) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + `+h+`, ch),
                getValue(batch, xD, xR, xC + 2 * `+h+`, ch),
                initializationValue
              );

              `+A+`
            }
          }
          setOutput(`+S+`);
        }
      }
    `}},$B=function(n,e){this.variableNames=["x"];var t=n.windowSize,r=n.batchSize,a=n.inSize,o=Math.ceil(a/t);this.outputShape=[r,o];var u="0.0",l="";e==="prod"?u="1.0":e==="min"?(u="1.0 / 1e-20",l="min"):e==="max"&&(u="-1.0 / 1e-20",l="max");var c=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?c="sumValue":e==="prod"?c="prodValue":e==="all"?c="allValue":e==="any"&&(c="anyValue");var h=4*Math.floor(t/4),d=t%4,v=`
      if (`+(e==="sum")+`) {
        sumValue += dot(values, ones);
      } else if (`+(e==="prod")+`) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = `+l+`(values, minMaxValue);
      }
    `,m="vec4";e==="all"?(u="1.0",v=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,m="bvec4"):e==="any"&&(u="0.0",v=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,m="bvec4");var g="";a%t>0&&(g=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = `+u+`;
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        `+g+`
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * `+t+`;

        vec4 minMaxValue = vec4(`+u+`);
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < `+h+`; i += 4) {
          int inIdx = inOffset + i;
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          `+v+`
        }

        int inIdx = inOffset + `+h+`;
        if (`+(d===1)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          `+v+`
        } else if (`+(d===2)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          `+v+`
        } else if (`+(d===3)+`) {
          `+m+" values = "+m+`(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          `+v+`
        }
        setOutput(`+c+`);
      }
    `},tF=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n;for(var t="",r=0;r<4;r++){var a="thisRC = rc;";r%2==1&&(a+="thisRC.z += 1;"),r>1&&(a+="thisRC.y += 1;"),t+=`
        `+a+`
        `+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+`
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[`+r+`] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        `+(r>0?"}":"")+`
      `}this.userCode=`
      
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      `+Wi(["r","c","d"],e)+`
      return ivec3(r, c, d);
    }
  
      `+sg(n)+`

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = `+n[1]+`;
        int cols = `+n[2]+`;

        `+t+`

        setOutput(result);
      }
    `},eF=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,a=r[1],o=r[2],u=n.shape,l=u[1],c=u[2],h=[t&&l>1?a-1:a,t&&c>1?o-1:o],d=[t&&l>1?l-1:l,t&&c>1?c-1:c],v=h[0]/d[0],m=h[1]/d[1],g=1/v,x=1/m,E=2*Math.ceil(g)+2,w=2*Math.ceil(x)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+v+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+x+`);

        const int winHeight = int(`+E+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), `+(a-1)+`.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), `+(o-1)+`.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},nF=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var a=n[0],o=n[1],u=n[2],l=n[3];this.outputShape=[a,e,t,l];var c=[r&&e>1?o-1:o,r&&t>1?u-1:u],h=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/h[0]+`,
          `+c[1]/h[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+u+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `},rF=function(n,e,t,r){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];var a=n[0],o=n[1],u=n[2],l=n[3];this.outputShape=[a,e,t,l];var c=[r&&e>1?o-1:o,r&&t>1?u-1:u],h=[r&&e>1?e-1:e,r&&t>1?t-1:t];this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          `+c[0]/h[0]+`,
          `+c[1]/h[1]+`,
          `+c[1]/h[1]+`);
      const vec3 inputShapeRC = vec3(`+o+".0, "+u+`.0,
                                     `+u+`.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < `+(l-1)+`;
        bool hasNextRow = coords.z < `+(t-1)+`;

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `},aF=function(n,e,t){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,a=r[1],o=r[2],u=n.shape,l=u[1],c=u[2],h=[t&&l>1?a-1:a,t&&c>1?o-1:o],d=[t&&l>1?l-1:l,t&&c>1?c-1:c],v=h[0]/d[0],m=h[1]/d[1],g=1/v,x=1/m,E=2*Math.ceil(g)+2,w=2*Math.ceil(x)+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(`+v+`);
        const float widthScale = float(`+m+`);

        const float invHeightScale = float(`+g+`);
        const float invWidthScale = float(`+x+`);

        const int winHeight = int(`+E+`);
        const int winWidth = int(`+w+`);

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= `+l+`) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= `+c+`) {
              continue;
            }

            float sourceFracRow =
              float(`+h[0]+`) *
                (float(dyR) / float(`+d[0]+`));

            float sourceFracCol =
                float(`+h[1]+`) *
                  (float(dyC) / float(`+d[1]+`));

            int sourceNearestRow = int(min(
                float(int(`+a+`) - 1),
                `+t+` ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(`+o+`) - 1),
                `+t+` ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `},iF=function(n,e,t,r){this.variableNames=["A"],this.outputShape=[];var a=n[0],o=n[1],u=n[2],l=n[3];this.outputShape=[a,e,t,l];var c=[r&&e>1?o-1:o,r&&t>1?u-1:u],h=[r&&e>1?e-1:e,r&&t>1?t-1:t],d=r?"0.5":"0.0";this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          `+c[0]/h[0]+`,
          `+c[1]/h[1]+`);
      const vec2 inputShapeRC = vec2(`+o+".0, "+u+`.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + `+d+`)));

        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `},oF=function(n,e){this.variableNames=["x"];var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");if(this.outputShape=n,t!==1){var r=n.map((function(o,u){return(function(l){return e.indexOf(l)!==-1&&n[l]!==1?n[l]+" - coords["+l+"] - 1":"coords["+l+"]"})(u)})).join(","),a=he(t);this.userCode=`
      void main() {
        `+a+` coords = getOutputCoords();
        setOutput(getX(`+r+`));
      }
    `}else this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(`+n[0]+` - coord - 1));
        }
      `},sF=function(n,e){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;var t=n.length;if(t>4)throw new Error("WebGL backend: Reverse of rank-"+t+" tensor is not yet supported");this.outputShape=n;var r=Dn("rc",t),a=r[t-1]+" + 1 < "+this.outputShape[t-1],o=r[t-2]+" + 1 < "+this.outputShape[t-2],u=he(t);function l(c){var h=n.map((function(d,v){return(function(m,g){return e.indexOf(m)!==-1&&n[m]!==1?n[m]+" - "+g[m]+" - 1":""+g[m]})(v,c)}));return"getChannel(getX("+h.join(",")+"), vec2("+h.slice(-2).join(",")+"))"}this.userCode=t===1?`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(`+n[0]+` - rc - 1),
            `+n[0]+` - rc - 1);
          if(`+a+`){
              result.g = getChannel(getX(`+n[0]+` - (rc  + 1) - 1),
                `+n[0]+` - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:`
        void main() {
          `+u+` rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = `+(function(c){return l(c)})(r.slice())+`;
          if(`+a+`){
            result.g = `+(function(c){return c[t-1]="("+c[t-1]+" + 1)",l(c)})(r.slice())+`;
          }
          if(`+o+`) {
            result.b = `+(function(c){return c[t-2]="("+c[t-2]+" + 1)",l(c)})(r.slice())+`;
            if(`+a+`) {
              result.a = `+(function(c){return c[t-1]="("+c[t-1]+" + 1)",c[t-2]="("+c[t-2]+" + 1)",l(c)})(r.slice())+`;
            }
          }
          setOutput(result);
        }
    `},W2=function(n,e,t,r,a,o,u){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var l=he(a.length),c=he(o.length),h="";t===1?h="i":t===2&&(h="i, j");var d="getIndices("+h+")",v="";r===1?v="i":r===2&&(v="i, coords[1]");var m="getUpdates("+v+")",g=e>1?"strides[j]":"strides";this.userCode=`
        `+l+" strides = "+l+"("+a+`);

        void main() {
          `+c+` coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < `+n+`; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < `+e+`; j++) {
              int index = round(`+d+`);
              flattenedIndex += index * `+g+`;
            }
            if (flattenedIndex == coords[0]) {
              sum += `+m+`;
              found = true;
            }
          }
          setOutput(mix(getDefaultValue(), sum, float(found)));
        }
      `},uF=function(n,e){this.variableNames=["x","segmentIds"];var t=n.windowSize,r=n.batchSize,a=n.inSize,o=n.numSegments,u=o*Math.ceil(a/t);this.outputShape=[r,u];var l=4*Math.floor(t/4),c=t%4,h=`
        sumValue += dot(values, segFilter);
    `,d="";a%t>0&&(d=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return initializationValue;
        }
      `);var v="";a%t>0&&(v=`
        if (inIdx < 0 || inIdx >= `+a+`) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = 0.0;

      float getValue(int batch, int inIdx) {
        `+d+`
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        `+v+`
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          `+o+")) * float("+t+`));
        int currentSeg = int(mod(float(outIdx), float(`+o+`)));

        float sumValue = 0.0;

        for (int i = 0; i < `+l+`; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          `+h+`
        }

        int inIdx = inOffset + `+l+`;
        if (`+(c===1)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          `+h+`
        } else if (`+(c===2)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          `+h+`
        } else if (`+(c===3)+`) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          `+h+`
        }
        setOutput(sumValue);
      }
    `},lF=function(n,e,t){var r,a;if(this.variableNames=["c","a","b"],this.outputShape=e,t>4)throw Error("Where for rank "+t+" is not yet supported");if(t===1)a="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],u=[],l=[],c=0;c<e.length;c++)l.push(""+o[c]),c<n&&u.push(""+o[c]);r=u.join(),a=l.join()}var h=he(t);this.userCode=`
      void main() {
        `+h+` resRC = getOutputCoords();
        float cVal = getC(`+r+`);
        if (cVal >= 1.0) {
          setOutput(getA(`+a+`));
        } else {
          setOutput(getB(`+a+`));
        }
      }
    `},cF=(function(){function n(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,r=he(this.rank),a="uniform int start["+this.rank+"];",o=(function(u){if(u===1)return"sourceLoc";if(u<=6)return ov.slice(0,u).map((function(l){return"sourceLoc."+l})).join(",");throw Error("Slicing for rank "+u+" is not yet supported")})(this.rank);t=`
        `+r+` sourceLoc;
        `+r+` coords = getOutputCoords();
        `+e.map((function(u,l){return"sourceLoc."+ov[l]+" = start["+l+"] + coords."+ov[l]+";"})).join(`
`)+`
      `,this.userCode=`
      `+a+`
      void main() {
        `+t+`
        setOutput(getSource(`+o+`));
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n})(),ov=["x","y","z","w","u","v"],fF=(function(){function n(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length;var t=he(this.rank),r=Dn("coords",this.rank),a=Dn("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+a.slice(-2).join()+")",u="getChannel(getSource("+a.join()+"), "+o+")",l=`
      result.x = `+u+`;
      if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
        ++`+a[this.rank-1]+`;
        result.y = `+u+`;
        --`+a[this.rank-1]+`;
      }
    `,c=this.rank===1?"":`
      --`+r[this.rank-1]+`;
      if (++`+r[this.rank-2]+" < "+e[this.rank-2]+`) {
        ++`+a[this.rank-2]+`;
        result.z = `+u+`;
        if (++`+r[this.rank-1]+" < "+e[this.rank-1]+`) {
          ++`+a[this.rank-1]+`;
          result.w = `+u+`;
        }
      }
    `,h=this.rank<=4?`sourceLoc = coords +
            `+t+"("+e.map((function(d,v){return"start["+v+"]"})).join()+");":e.map((function(d,v){return a[v]+" = "+r[v]+" + start["+v+"];"})).join(`
`);this.userCode=`
      uniform int start[`+this.rank+`];
      void main() {
        `+t+` coords = getOutputCoords();
        `+t+` sourceLoc;
        `+h+`
        vec4 result = vec4(0.);
        `+l+`
        `+c+`
        setOutput(result);
      }
    `}return n.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,a){t.startLoc==null&&(t.startLoc=r.getUniformLocationNoThrow(a,"start"),t.startLoc==null)||r.gl.uniform1iv(t.startLoc,e)}},n})(),hF=function(n,e,t){this.variableNames=["x"],this.outputShape=t;var r=t.length,a=he(t.length),o=he(t.length),u="";if(r===1)u="coords * strides + begin";else{var l=0;u=t.map((function(c,h){return l++,t.length===1?"coords * strides["+h+"] + begin["+h+"]":"coords["+(l-1)+"] * strides["+h+"] + begin["+h+"]"})).join(",")}this.userCode=`
      `+a+" begin = "+a+"("+n+`);
      `+a+" strides = "+a+"("+e+`);

      void main() {
        `+o+` coords = getOutputCoords();
        setOutput(getX(`+u+`));
      }
    `},dF=(function(){function n(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return n.prototype.acquireTexture=function(e,t,r){var a,o=q2(t,r),u=K2(e,o,r);if(u in this.freeTextures||(this.freeTextures[u]=[]),u in this.usedTextures||(this.usedTextures[u]=[]),this.freeTextures[u].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var l=this.freeTextures[u].shift();return this.usedTextures[u].push(l),l}return this.numUsedTextures++,this.log(),o===Wn.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===Wn.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===Wn.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===Wn.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===Wn.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[u].push(a),a},n.prototype.releaseTexture=function(e,t,r,a){if(this.freeTextures!=null){var o=K2(t,q2(r,a),a);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--;var u=this.usedTextures[o],l=u.indexOf(e);if(l<0)throw new Error("Cannot release a texture that was never provided by this texture manager");u.splice(l,1),this.log()}},n.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},n.prototype.getNumUsedTextures=function(){return this.numUsedTextures},n.prototype.getNumFreeTextures=function(){return this.numFreeTextures},n.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(r){e.gpgpu.deleteMatrixTexture(r)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(a){e.gpgpu.deleteMatrixTexture(a)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},n})();function q2(n,e){if(n===qn.UPLOAD)return Wn.PACKED_2X2_FLOAT32;if(n===qn.RENDER||n==null)return(function(t){return lt().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Wn.PACKED_2X2_FLOAT32:Wn.UNPACKED_FLOAT32:t?Wn.PACKED_2X2_FLOAT16:Wn.UNPACKED_FLOAT16})(e);if(n===qn.DOWNLOAD||n===qn.PIXELS)return Wn.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+n)}function K2(n,e,t){return n[0]+"_"+n[1]+"_"+e+"_"+t}var pF=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[r]*e[r];this.outputShape=t,this.rank=t.length;var a=he(this.rank),o=(function(u){var l=u.length;if(l>5)throw Error("Tile for rank "+l+" is not yet supported");if(l===1)return"imod(resRC, "+u[0]+")";for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],h=[],d=0;d<u.length;d++)h.push("imod("+c[d]+", "+u[d]+")");return h.join()})(n);this.userCode=`
      void main() {
        `+a+` resRC = getOutputCoords();
        setOutput(getA(`+o+`));
      }
    `},vF=function(n,e){this.variableNames=["A"];for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];this.outputShape=t,this.rank=t.length;var a=he(this.rank),o=(function(u){var l=u.length;if(l>6)throw Error("Transpose for rank "+l+" is not yet supported");for(var c=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],h=new Array(l),d=0;d<u.length;d++)h[u[d]]=c[d];return h.join()})(e);this.userCode=`
    void main() {
      `+a+` resRC = getOutputCoords();
      setOutput(getA(`+o+`));
    }
    `},mF=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;for(var t=new Array(n.length),r=0;r<t.length;r++)t[r]=n[e[r]];if(this.outputShape=t,this.rank=t.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var a=he(this.rank),o=bS("rc",this.rank),u=new Array(this.rank);for(r=0;r<e.length;r++)u[e[r]]=o[r];var l="vec2("+u.slice(-2).join()+")",c="++"+o[this.rank-1]+" < "+t[this.rank-1],h="getChannel(getA("+u.join()+"), "+l+")";this.userCode=`
    void main() {
      `+a+` rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = `+h+`;
      if(`+c+`) {
        result[1] = `+h+`;
      }
      --`+o[this.rank-1]+`;
      if(++`+o[this.rank-2]+" < "+t[this.rank-2]+`) {
        result[2] = `+h+`;
        if(`+c+`) {
          result[3] = `+h+`;
        }
      }
      setOutput(result);
    }
    `},ug=1.7580993408473768,lg=1.0507009873554805,zt=function(n,e){this.variableNames=["A"],this.outputShape=n,this.userCode=`
      float unaryOperation(float x) {
        `+e+`
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `},Ar="if (isnan(x)) return x;",gF="return x;",X2="return abs(x);",SS=Ar+`
  return (x < 0.0) ? 0.0 : x;
`,_S=Ar+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,TS="return (x >= 0.0) ? x : (exp(x) - 1.0);",yF=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = `+ug+`;
  float scale = `+lg+`;
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,Y2="return -x;",Q2="return ceil(x);",Z2="return floor(x);",J2="return exp(x);",$2="return exp(x) - 1.0;",bF=Ar+`
  return sin(x);
`,xF=Ar+`
  return cos(x);
`,wF=Ar+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,EF=Ar+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,CF=Ar+`
  return atan(x);
`,SF=Ar+"return log(x + sqrt(x * x + 1.0));",_F=Ar+`
  if (x < 1.0) return NAN;
  return log(x + sqrt(x * x - 1.0));`,TF=Ar+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
  return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,qc="return x;",RF="return x;",RS=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,AS=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,DS=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,Au=function(n,e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n,this.userCode=`
      vec4 unaryOperation(vec4 x) {
        `+e+`
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `},AF=function(n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=n;var e=n.length,t=Dn("rc",e),r=he(e),a=(function(l,c){if(l===1)return"rc";for(var h="",d=0;d<l;d++)h+=c[d],d<l-1&&(h+=",");return h})(e,t),o=t.slice(-2),u=e<=1?"rc":"vec2("+o.join(",")+")";this.userCode=`
      void main() {
        `+r+` rc = getOutputCoords();
        vec4 packedInput = getA(`+a+`);

        setOutput(getChannel(packedInput, `+u+`));
      }
    `},Kc={};function Xc(n,e){if(e===void 0&&(e=!1),n==="linear")return e?RF:gF;if(n==="relu")return e?RS:SS;if(n==="elu")return e?DS:TS;if(n==="relu6")return e?AS:_S;if(n==="prelu")return e?CS:ES;throw new Error("Activation "+n+" has not been implemented for the WebGL backend.")}var DF=600,MF=(function(n){function e(t){var r,a=n.call(this)||this;if(a.pendingRead=new WeakMap,a.pendingDisposal=new WeakSet,a.dataRefCount=new WeakMap,a.numBytesInGPU=0,a.uploadWaitMs=0,a.downloadWaitMs=0,a.warnedAboutMemory=!1,a.pendingDeletes=0,a.disposed=!1,!lt().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(t==null){var o=Xr(lt().getNumber("WEBGL_VERSION"));a.binaryCache=((r=lt().getNumber("WEBGL_VERSION"))in Kc||(Kc[r]={}),Kc[r]),a.gpgpu=new VB(o),a.canvas=o.canvas,a.gpgpuCreatedLocally=!0}else a.gpgpu=t,a.binaryCache={},a.gpgpuCreatedLocally=!1,a.canvas=t.gl.canvas;return a.textureManager=new dF(a.gpgpu),a.numMBBeforeWarning=lt().global.screen==null?1024:lt().global.screen.height*lt().global.screen.width*window.devicePixelRatio*DF/1024/1024,a.texData=new cS(a,W),a}return Rr(e,n),e.prototype.numDataIds=function(){return this.texData.numDataIds()+(this.cpuBackend?this.cpuBackend.numDataIds():0)-this.pendingDeletes},e.prototype.write=function(t,r,a){if(lt().getBool("DEBUG")&&this.checkNumericalProblems(t),a==="complex64"&&t!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");var o={};return this.texData.set(o,{shape:r,dtype:a,values:t,usage:qn.UPLOAD}),o},e.prototype.move=function(t,r,a,o){if(lt().getBool("DEBUG")&&this.checkNumericalProblems(r),o==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(t,{shape:a,dtype:o,values:r,usage:qn.UPLOAD})},e.prototype.readSync=function(t){var r=this.texData.get(t),a=r.values,o=r.dtype,u=r.complexTensors,l=r.slice,c=r.shape,h=r.isPacked;if(l!=null){var d=void 0;d=h?new Au(c,qc):new zt(c,qc);var v=this.runWebGLProgram(d,[{dataId:t,shape:c,dtype:o}],o),m=this.readSync(v.dataId);return this.disposeData(v.dataId),m}if(a!=null)return this.convertAndCacheOnCPU(t);if(o==="string")return a;var g,x,E=this.activeTimers!=null;return E&&(g=Pr()),o==="complex64"?x=nm(u.real.dataSync(),u.imag.dataSync()):x=this.getValuesFromTexture(t),E&&(this.downloadWaitMs+=Pr()-g),this.convertAndCacheOnCPU(t,x)},e.prototype.read=function(t){return xt(this,void 0,void 0,(function(){var r,a,o,u,l,c,h,d,v,m,g,x,E,w,C,S,_,T,A,D,N,k;return wt(this,(function(O){switch(O.label){case 0:if(this.pendingRead.has(t))return r=this.pendingRead.get(t),[2,new Promise((function(B){return r.push(B)}))];if(a=this.texData.get(t),o=a.values,u=a.shape,l=a.slice,c=a.dtype,h=a.complexTensors,d=a.isPacked,l!=null)return v=void 0,v=d?new Au(u,qc):new zt(u,qc),m=this.runWebGLProgram(v,[{dataId:t,shape:u,dtype:c}],c),g=this.read(m.dataId),this.disposeData(m.dataId),[2,g];if(o!=null)return[2,this.convertAndCacheOnCPU(t)];if(!lt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&lt().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return x=null,c!=="complex64"&&lt().get("WEBGL_BUFFER_SUPPORTED")&&(E=this.decode(t),w=this.texData.get(E.dataId),x=(k=this.gpgpu).createBufferFromTexture.apply(k,[w.texture].concat(Iu(u)))),this.pendingRead.set(t,[]),c==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:O.sent(),O.label=2;case 2:return c!=="complex64"?[3,4]:[4,Promise.all([h.real.data(),h.imag.data()])];case 3:return S=O.sent(),_=S[0],T=S[1],C=nm(_,T),[3,5];case 4:x==null?C=this.getValuesFromTexture(t):(A=St(u),C=this.gpgpu.downloadFloat32MatrixFromBuffer(x,A)),O.label=5;case 5:return E!=null&&this.disposeData(E.dataId),D=this.convertAndCacheOnCPU(t,C),N=this.pendingRead.get(t),this.pendingRead.delete(t),N.forEach((function(B){return B(D)})),this.pendingDisposal.has(t)&&(this.pendingDisposal.delete(t),this.disposeData(t),this.pendingDeletes--),[2,D]}}))}))},e.prototype.checkNumericalProblems=function(t){if(t!=null)for(var r=0;r<t.length;r++){var a=t[r];if(!yk(a))throw lt().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+a+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+a+" cannot be represented on this device.")}},e.prototype.getValuesFromTexture=function(t){var r,a=this.texData.get(t),o=a.shape,u=a.dtype,l=a.isPacked,c=St(o);if(lt().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var h=this.decode(t),d=this.texData.get(h.dataId),v=(r=this.gpgpu).downloadMatrixFromPackedTexture.apply(r,[d.texture].concat(Iu(o))).subarray(0,c);return this.disposeData(h.dataId),v}var m=lt().getBool("WEBGL_PACK")&&l===!0,g=m?$p(o):o,x=m?new gB(g):new mB(g),E=this.runWebGLProgram(x,[{shape:g,dtype:u,dataId:t}],"float32"),w=this.texData.get(E.dataId),C=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(w.texture,w.texShape[0],w.texShape[1]).subarray(0,c);return this.disposeData(E.dataId),C},e.prototype.time=function(t){return xt(this,void 0,void 0,(function(){var r,a,o,u,l,c,h;return wt(this,(function(d){switch(d.label){case 0:return r=this.activeTimers,a=[],o=!1,this.programTimersStack==null?(this.programTimersStack=a,o=!0):this.activeTimers.push(a),this.activeTimers=a,t(),u=bs(this.activeTimers.map((function(v){return v.query}))).filter((function(v){return v!=null})),l=bs(this.activeTimers.map((function(v){return v.name}))).filter((function(v){return v!=null})),this.activeTimers=r,o&&(this.programTimersStack=null),c={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null},lt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[4,Promise.all(u)]:[3,2];case 1:return h=d.sent(),c.kernelMs=J4(h),c.getExtraProfileInfo=function(){return h.map((function(v,m){return{name:l[m],ms:v}})).map((function(v){return v.name+": "+v.ms})).join(", ")},[3,3];case 2:c.kernelMs={error:"WebGL query timers are not supported in this environment."},d.label=3;case 3:return this.uploadWaitMs=0,this.downloadWaitMs=0,[2,c]}}))}))},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return lt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:Pr(),endMs:null}},e.prototype.endTimer=function(t){return lt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),t):(t.endMs=Pr(),t)},e.prototype.getQueryTime=function(t){return xt(this,void 0,void 0,(function(){var r;return wt(this,(function(a){return lt().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?[2,this.gpgpu.waitForQueryAndGetTime(t)]:[2,(r=t).endMs-r.startMs]}))}))},e.prototype.disposeData=function(t){if(!this.pendingDisposal.has(t)){if(this.pendingRead.has(t))return this.pendingDisposal.add(t),void this.pendingDeletes++;if(this.texData.has(t)){this.releaseGPUData(t);var r=this.texData.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.texData.delete(t)}}},e.prototype.releaseGPUData=function(t){var r=this.texData.get(t),a=r.texture,o=r.dtype,u=r.texShape,l=r.usage,c=r.isPacked,h=r.slice,d=h&&h.origDataId||t,v=this.dataRefCount.get(d);v>1?this.dataRefCount.set(d,v-1):(this.dataRefCount.delete(d),a!=null&&(this.numBytesInGPU-=this.computeBytes(u,o),this.textureManager.releaseTexture(a,u,l,c)));var m=this.texData.get(t);m.texture=null,m.texShape=null,m.isPacked=!1,m.slice=null},e.prototype.getTexture=function(t){return this.uploadToGPU(t),this.texData.get(t).texture},e.prototype.getDataInfo=function(t){return this.texData.get(t)},e.prototype.getCPUBackend=function(){return lt().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=W.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(t,r){var a=this;return r===void 0&&(r=128),this.getCPUBackend()!=null&&t.every((function(o){return a.texData.get(o.dataId).texture==null&&o.size<r}))},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(t,r){var a=this.makeOutput(t.shape,"complex64");return this.texData.get(a.dataId).complexTensors={real:W.keep(t.clone()),imag:W.keep(r.clone())},a},e.prototype.real=function(t){return this.texData.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.texData.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,a){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.slice(t,r,a);if(St(a)===0)return sn([],a,t.dtype);var o=this.texData.get(t.dataId).isPacked,u=uS(t.shape,r,a);if(o||!u){var l=lt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fF(a):new cF(a),c=l.getCustomSetupFunc(r);return this.compileAndRun(l,[t],null,c)}return this.uploadToGPU(t.dataId),this.shallowSlice(t,r,a)},e.prototype.shallowSlice=function(t,r,a){var o=this.texData.get(t.dataId),u=this.makeOutput(a,t.dtype),l=this.texData.get(u.dataId);Object.assign(l,o),l.shape=a,l.dtype=t.dtype;var c=lS(r,t.strides);o.slice&&(c+=o.slice.flatOffset),l.slice={flatOffset:c,origDataId:o.slice&&o.slice.origDataId||t.dataId};var h=this.dataRefCount.get(l.slice.origDataId)||1;return this.dataRefCount.set(l.slice.origDataId,h+1),u},e.prototype.stridedSlice=function(t,r,a,o){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.stridedSlice(t,r,a,o);var u=ng(r,a,o);if(u.some((function(c){return c===0})))return sn([],u);var l=new hF(r,o,u);return this.compileAndRun(l,[t])},e.prototype.reverse=function(t,r){var a=lt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new sF(t.shape,r):new oF(t.shape,r);return this.compileAndRun(a,[t])},e.prototype.concat=function(t,r){if(t[0].dtype==="complex64"){var a=t.map((function(g){return cr(g)})),o=t.map((function(g){return Ur(g)}));return an(this.concat(a,r),this.concat(o,r))}if(this.shouldExecuteOnCPU(t))return this.cpuBackend.concat(t,r);if(t.length===1)return t[0];if(t.length>lt().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var u=Math.floor(t.length/2),l=this.concat(t.slice(0,u),r),c=this.concat(t.slice(u),r);return this.concat([l,c],r)}if(lt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&t[0].rank>1){var h=new nB(t.map((function(g){return g.shape})),r);return this.compileAndRun(h,t)}var d=ws(t.map((function(g){return g.shape})),r),v=t.map((function(g){return g.as2D(-1,St(g.shape.slice(r)))})),m=new eB(v.map((function(g){return g.shape})));return this.compileAndRun(m,v).reshape(d)},e.prototype.neg=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.neg(t);if(lt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Y2,t.dtype);var r=new zt(t.shape,Y2);return this.compileAndRun(r,[t])},e.prototype.batchMatMul=function(t,r,a,o){var u=a?t.shape[2]:t.shape[1],l=o?r.shape[1]:r.shape[2],c=a?t.shape[1]:t.shape[2],h=t.shape[0];if((u===1||l===1)&&c>1e3){a&&(t=t.transpose([0,2,1])),o&&(r=r.transpose([0,2,1]));var d=l===1?t:t.as3D(h,c,1),v=l===1?2:1,m=l===1?r.as3D(h,1,c):r;return this.multiply(d,m).sum(v,!0)}var g=on(t.dtype,r.dtype),x=new rv(t.shape,[h,u,l],a,o);return this.compileAndRun(x,[t,r],g)},e.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,o=t.transposeA,u=t.transposeB,l=t.bias,c=t.activation,h=t.preluActivationWeights,d=o?r.shape[2]:r.shape[1],v=u?a.shape[1]:a.shape[2],m=r.shape[0],g=on(r.dtype,a.dtype),x=l!=null,E=h!=null,w=c?Xc(c,!0):null,C=new rv(r.shape,[m,d,v],o,u,x,w,E),S=[r,a];return l&&S.push(l),h&&S.push(h),this.compileAndRun(C,S,g)},e.prototype.multiply=function(t,r){if(t.dtype==="complex64"){var a=this.texData.get(t.dataId),o=this.texData.get(r.dataId),u=new L2(QI,t.shape,r.shape),l=new L2(ZI,t.shape,r.shape),c=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag),this.makeComplexComponentTensorInfo(r,o.complexTensors.real),this.makeComplexComponentTensorInfo(r,o.complexTensors.imag)],h=this.compileAndRun(u,c),d=this.compileAndRun(l,c),v=this.complex(h,d);return h.dispose(),d.dispose(),v}if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.multiply(t,r);if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,P2,t.dtype);var m=new _e(P2,t.shape,r.shape);return this.compileAndRun(m,[t,r],t.dtype)},e.prototype.batchNormalization=function(t,r,a,o,u,l){var c=[t,r,a],h=null;l!=null&&(h=l.shape,c.push(l));var d=null;if(u!=null&&(d=u.shape,c.push(u)),lt().getBool("WEBGL_PACK_NORMALIZATION")){var v=new YI(t.shape,r.shape,a.shape,h,d,o);return this.compileAndRun(v,c)}var m=new XI(t.shape,r.shape,a.shape,h,d,o);return this.compileAndRun(m,c)},e.prototype.localResponseNormalization4D=function(t,r,a,o,u){var l=lt().getBool("WEBGL_PACK_NORMALIZATION")?new WB(t.shape,r,a,o,u):new GB(t.shape,r,a,o,u);return this.compileAndRun(l,[t])},e.prototype.LRNGrad=function(t,r,a,o,u,l,c){var h=new jB(r.shape,o,u,l,c);return this.compileAndRun(h,[r,a,t])},e.prototype.tile=function(t,r){if(t.dtype==="string"){var a=this.readSync(t.dataId).map((function(u){return xf(u)}));return gS(Ft(t.shape,t.dtype,a),r)}var o=new pF(t.shape,r);return this.compileAndRun(o,[t])},e.prototype.pad=function(t,r,a){var o=lt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new JB(t.shape,r,a):new ZB(t.shape,r,a);return this.compileAndRun(o,[t])},e.prototype.transpose=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.transpose(t,r);var a=lt().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new mF(t.shape,r):new vF(t.shape,r);return this.compileAndRun(a,[t])},e.prototype.gather=function(t,r,a){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.gather(t,r,a);var o=new CB(t.shape,r.size,a);return this.compileAndRun(o,[t,r])},e.prototype.batchToSpaceND=function(t,r,a){F(t.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var o=r.reduce((function(v,m){return v*m})),u=Tf(t.shape,r,o),l=Rf(u.length,r.length),c=Af(t.shape,r,o),h=aS(a,r.length),d=iS(c,a,r.length);return t.reshape(u).transpose(l).reshape(c).slice(h,d)},e.prototype.spaceToBatchND=function(t,r,a){F(t.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var o=r.reduce((function(m,g){return m*g})),u=[[0,0]];u.push.apply(u,a);for(var l=1+r.length;l<t.shape.length;++l)u.push([0,0]);var c=t.pad(u),h=Tf(c.shape,r,o,!1),d=Rf(h.length,r.length,!1),v=Af(c.shape,r,o,!1);return c.reshape(h).transpose(d).reshape(v)},e.prototype.reduce=function(t,r,a){var o=t.shape[0],u=t.shape[1],l=tv(u),c=new $B({windowSize:l,inSize:u,batchSize:o},r),h=this.compileAndRun(c,[t],a);return h.shape[1]===1?h:this.reduce(h,r,a)},e.prototype.argReduce=function(t,r,a){a===void 0&&(a=null);var o=t.shape[0],u=t.shape[1];a!=null&&(o=a.shape[0],u=a.shape[1]);var l=tv(u),c=new zI({windowSize:l,inSize:u,batchSize:o},r,a==null),h=[t];a!=null&&h.push(a);var d=this.compileAndRun(c,h,"int32");return d.shape[1]===1?d:this.argReduce(t,r,d)},e.prototype.argReducePacked=function(t,r,a){a===void 0&&(a=null);var o=a!=null?a.shape:t.shape,u=tv(o[o.length-1]),l=new WI(o,u,r,a==null),c=a==null?[t]:[t,a],h=this.compileAndRun(l,c,"int32");return h.rank===t.rank?this.argReducePacked(t,r,h):h},e.prototype.sum=function(t,r){jn("sum",r,t.rank);var a=ln(t.shape,r),o=a[0],u=St(a[1]),l=t.as2D(-1,u),c=qp(t.dtype);return this.reduce(l,"sum",c).reshape(o)},e.prototype.prod=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.prod(t,r);var a=ln(t.shape,r),o=a[0],u=St(a[1]),l=t.as2D(-1,u),c=qp(t.dtype);return this.reduce(l,"prod",c).reshape(o)},e.prototype.unsortedSegmentSum=function(t,r,a){var o=0,u=Yr([o],t.rank),l=t;u!=null&&(l=t.transpose(u),o=Qr(1,t.rank)[0]);var c=(function(g,x,E){for(var w=[],C=g.length,S=0;S<C;S++)S!==x?w.push(g[S]):w.push(E);return w})(l.shape,o,a),h=St([l.shape[o]]),d=l.as2D(-1,h),v=qp(t.dtype),m=this.segOpCompute(d,"unsortedSegmentSum",r,v,a).reshape(c);return u!=null&&(m=m.transpose(Jm(u))),m},e.prototype.segOpCompute=function(t,r,a,o,u){var l=t.shape[0],c=t.shape[1],h=(function(m,g){var x,E=!1;for(m<=sS?(x=m,E=!0):x=Kv(m,Math.floor(Math.sqrt(m)));!E;)x>g||x===m?E=!0:x=Kv(m,x+1);return x})(c,u),d=new uF({windowSize:h,inSize:c,batchSize:l,numSegments:u}),v=this.compileAndRun(d,[t,a],o);return v.shape[1]===u?v:(a=_f(0,u).tile([c/h]),this.segOpCompute(v,r,a,o,u))},e.prototype.argMinMaxReduce=function(t,r,a){var o=[r];if(jn("arg"+a.charAt(0).toUpperCase()+a.slice(1),o,t.rank),!lt().getBool("WEBGL_PACK_REDUCE")||t.rank<=2){var u=ln(t.shape,o),l=u[0],c=St(u[1]),h=t.as2D(-1,c);return this.argReduce(h,a).reshape(l)}return this.argReducePacked(t,a)},e.prototype.argMin=function(t,r){return this.argMinMaxReduce(t,r,"min")},e.prototype.argMax=function(t,r){return this.argMinMaxReduce(t,r,"max")},e.prototype.cumsum=function(t,r,a,o){if(r!==t.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(t.rank-1)+" but got axis="+r);var u=new fB(t.shape,a,o);return this.compileAndRun(u,[t])},e.prototype.equal=function(t,r){if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(equal(a, b));
`,"bool");var a=new _e("return float(a == b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.notEqual=function(t,r){if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(notEqual(a, b));
`,"bool");var a=new _e("return float(a != b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.less=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.less(t,r);if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThan(a, b));
`,"bool");var a=new _e("return float(a < b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.lessEqual=function(t,r){if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(lessThanEqual(a, b));
`,"bool");var a=new _e("return float(a <= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.greater=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.greater(t,r);if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThan(a, b));
`,"bool");var a=new _e("return float(a > b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.greaterEqual=function(t,r){if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(greaterThanEqual(a, b));
`,"bool");var a=new _e("return float(a >= b);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.logicalNot=function(t){var r=new zt(t.shape,"return float(!(x >= 1.0));");return this.compileAndRun(r,[t])},e.prototype.logicalAnd=function(t,r){if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,"bool");var a=new _e("return float(a >= 1.0 && b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.logicalOr=function(t,r){if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,"bool");var a=new _e("return float(a >= 1.0 || b >= 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r],"bool")},e.prototype.select=function(t,r,a){var o=new lF(t.rank,r.shape,r.rank);return this.compileAndRun(o,[t,r,a],on(r.dtype,a.dtype))},e.prototype.where=function(t){Cf("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var r=t.dataSync();return og(t.shape,r)},e.prototype.topk=function(t,r,a){return yS(t.dataSync(),t.shape,t.dtype,r)},e.prototype.min=function(t,r){jn("min",r,t.rank);var a=ln(t.shape,r),o=a[0],u=St(a[1]),l=t.as2D(-1,u);return this.reduce(l,"min",l.dtype).reshape(o)},e.prototype.minimum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.minimum(t,r);var a=lt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ya(`
  vec4 result = vec4(min(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new _e(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return min(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.mod=function(t,r){var a=lt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ya(`
  vec4 result = mod(a, b);
  vec4 isNaN = vec4(equal(b, vec4(0.0)));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new _e(`if (b == 0.0) return NAN;
  return mod(a, b);`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.max=function(t,r){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.max(t,r);jn("max",r,t.rank);var a=ln(t.shape,r),o=a[0],u=St(a[1]),l=t.as2D(-1,u);return this.reduce(l,"max",l.dtype).reshape(o)},e.prototype.maximum=function(t,r){if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.maximum(t,r);var a=lt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ya(`
  vec4 result = vec4(max(a, b));
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new _e(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return max(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.all=function(t,r){jn("all",r,t.rank);var a=ln(t.shape,r),o=a[0],u=St(a[1]),l=t.as2D(-1,u);return this.reduce(l,"all",l.dtype).reshape(o)},e.prototype.any=function(t,r){jn("any",r,t.rank);var a=ln(t.shape,r),o=a[0],u=St(a[1]),l=t.as2D(-1,u);return this.reduce(l,"any",l.dtype).reshape(o)},e.prototype.realDivide=function(t,r){if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,"float32",!0);var a=new _e(`
if (a == b) {
  return 1.0;
};
return a / b;`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"float32")},e.prototype.floorDiv=function(t,r){if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,"int32");var a=new _e(`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,t.shape,r.shape);return this.compileAndRun(a,[t,r],"int32")},e.prototype.add=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,ev);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.add(t,r);var a=on(t.dtype,r.dtype);if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,ev,a);var o=new _e(ev,t.shape,r.shape);return this.compileAndRun(o,[t,r],a)},e.prototype.packedUnaryOp=function(t,r,a){var o=new Au(t.shape,r);return this.compileAndRun(o,[t],a)},e.prototype.packedBinaryOp=function(t,r,a,o,u){u===void 0&&(u=!1);var l=new ya(a,t.shape,r.shape,u);return this.compileAndRun(l,[t,r],o)},e.prototype.complexSeparableBinaryOp=function(t,r,a){var o=this,u=this.texData.get(t.dataId),l=this.texData.get(r.dataId),c=[[u.complexTensors.real,l.complexTensors.real],[u.complexTensors.imag,l.complexTensors.imag]].map((function(m){var g=m[0],x=m[1],E=o.makeComplexComponentTensorInfo(t,g),w=o.makeComplexComponentTensorInfo(r,x),C=new _e(a,t.shape,r.shape);return o.compileAndRun(C,[E,w],on(g.dtype,x.dtype))})),h=c[0],d=c[1],v=this.complex(h,d);return h.dispose(),d.dispose(),v},e.prototype.makeComplexComponentTensorInfo=function(t,r){return{dataId:r.dataId,dtype:r.dtype,shape:t.shape}},e.prototype.addN=function(t){if(t.length===1)return t[0];if(t.length>lt().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var r=Math.floor(t.length/2),a=this.addN(t.slice(0,r)),o=this.addN(t.slice(r));return this.addN([a,o])}var u=t.map((function(h){return h.dtype})).reduce((function(h,d){return on(h,d)})),l=t.map((function(h){return h.shape})),c=lt().getBool("WEBGL_PACK")?new PI(t[0].shape,l):new LI(t[0].shape,l);return this.compileAndRun(c,t,u)},e.prototype.subtract=function(t,r){if(t.dtype==="complex64"&&r.dtype==="complex64")return this.complexSeparableBinaryOp(t,r,nv);if(this.shouldExecuteOnCPU([t,r]))return this.cpuBackend.subtract(t,r);var a=on(t.dtype,r.dtype);if(lt().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(t,r,nv,t.dtype);var o=new _e(nv,t.shape,r.shape);return this.compileAndRun(o,[t,r],a)},e.prototype.pow=function(t,r){var a=lt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ya(`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new _e(`
if(a < 0.0 && floor(b) < b){
  return NAN;
}
if (b == 0.0) {
  return 1.0;
}
return (round(mod(b, 2.0)) != 1) ?
    pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,t.shape,r.shape),o=on(t.dtype,r.dtype);return this.compileAndRun(a,[t,r],o)},e.prototype.ceil=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.ceil(t);if(lt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Q2,t.dtype);var r=new zt(t.shape,Q2);return this.compileAndRun(r,[t])},e.prototype.floor=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.floor(t);if(lt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,Z2,t.dtype);var r=new zt(t.shape,Z2);return this.compileAndRun(r,[t])},e.prototype.sign=function(t){var r=new zt(t.shape,`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`);return this.compileAndRun(r,[t])},e.prototype.isNaN=function(t){var r=new zt(t.shape,"return float(isnan(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isInf=function(t){var r=new zt(t.shape,"return float(isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.isFinite=function(t){var r=new zt(t.shape,"return float(!isnan(x) && !isinf(x));");return this.compileAndRun(r,[t],"bool")},e.prototype.round=function(t){var r=new zt(t.shape,`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`);return this.compileAndRun(r,[t])},e.prototype.exp=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.exp(t);if(lt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,J2,t.dtype);var r=new zt(t.shape,J2);return this.compileAndRun(r,[t])},e.prototype.expm1=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.expm1(t);if(lt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,$2,t.dtype);var r=new zt(t.shape,$2);return this.compileAndRun(r,[t])},e.prototype.softmax=function(t,r){var a=je([r],t.shape),o=this.max(t,a),u=On(o.shape,a),l=this.subtract(t,o.reshape(u)),c=this.exp(l),h=this.sum(c,a).reshape(u);return this.realDivide(c,h)},e.prototype.log=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.log(t);if(lt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,`
  vec4 result = log(x);
  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));
  result.r = isNaN.r == 1.0 ? NAN : result.r;
  result.g = isNaN.g == 1.0 ? NAN : result.g;
  result.b = isNaN.b == 1.0 ? NAN : result.b;
  result.a = isNaN.a == 1.0 ? NAN : result.a;

  return result;
`,t.dtype);var r=new zt(t.shape,`if (x < 0.0) return NAN;
  return log(x);`);return this.compileAndRun(r,[t])},e.prototype.log1p=function(t){var r=new zt(t.shape,"return log(1.0 + x);");return this.compileAndRun(r,[t])},e.prototype.sqrt=function(t){var r=new zt(t.shape,"return sqrt(x);");return this.compileAndRun(r,[t])},e.prototype.rsqrt=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.rsqrt(t);var r=new zt(t.shape,"return inversesqrt(x);");return this.compileAndRun(r,[t])},e.prototype.reciprocal=function(t){var r=new zt(t.shape,"return 1.0 / x;");return this.compileAndRun(r,[t])},e.prototype.relu=function(t){var r;return r=lt().getBool("WEBGL_PACK")?new Au(t.shape,RS):new zt(t.shape,SS),this.compileAndRun(r,[t])},e.prototype.relu6=function(t){var r;return r=lt().getBool("WEBGL_PACK")?new Au(t.shape,AS):new zt(t.shape,_S),this.compileAndRun(r,[t])},e.prototype.prelu=function(t,r){var a=lt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ya(CS,t.shape,r.shape):new _e(ES,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.elu=function(t){if(lt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,DS,t.dtype);var r=new zt(t.shape,TS);return this.compileAndRun(r,[t])},e.prototype.eluDer=function(t,r){var a=lt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ya(`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,t.shape,r.shape):new _e("return (b >= 1.0) ? a : a * (b + 1.0);",t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.selu=function(t){var r=new zt(t.shape,yF);return this.compileAndRun(r,[t])},e.prototype.int=function(t){var r=new zt(t.shape,"return float(int(x));");return this.compileAndRun(r,[t],"int32")},e.prototype.clip=function(t,r,a){var o,u=(o=lt().getBool("WEBGL_PACK_CLIP")?new $I(t.shape):new JI(t.shape)).getCustomSetupFunc(r,a);return this.compileAndRun(o,[t],null,u)},e.prototype.abs=function(t){if(this.shouldExecuteOnCPU([t]))return this.cpuBackend.abs(t);if(lt().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(t,X2,t.dtype);var r=new zt(t.shape,X2);return this.compileAndRun(r,[t])},e.prototype.complexAbs=function(t){var r=this.texData.get(t.dataId),a=new tB(t.shape),o=[this.makeComplexComponentTensorInfo(t,r.complexTensors.real),this.makeComplexComponentTensorInfo(t,r.complexTensors.imag)];return this.compileAndRun(a,o)},e.prototype.sigmoid=function(t){var r=new zt(t.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(r,[t])},e.prototype.softplus=function(t){var r=new zt(t.shape,`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`);return this.compileAndRun(r,[t])},e.prototype.sin=function(t){var r=new zt(t.shape,bF);return this.compileAndRun(r,[t])},e.prototype.cos=function(t){var r=new zt(t.shape,xF);return this.compileAndRun(r,[t])},e.prototype.tan=function(t){var r=new zt(t.shape,"return tan(x);");return this.compileAndRun(r,[t])},e.prototype.asin=function(t){var r=new zt(t.shape,wF);return this.compileAndRun(r,[t])},e.prototype.acos=function(t){var r=new zt(t.shape,EF);return this.compileAndRun(r,[t])},e.prototype.atan=function(t){var r=new zt(t.shape,CF);return this.compileAndRun(r,[t])},e.prototype.atan2=function(t,r){var a=lt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ya(`
  vec4 result = atan(a, b);
  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));
  
  result.r = isNaN.r > 0. ? NAN : result.r;
  result.g = isNaN.g > 0. ? NAN : result.g;
  result.b = isNaN.b > 0. ? NAN : result.b;
  result.a = isNaN.a > 0. ? NAN : result.a;

  return result;
`,t.shape,r.shape):new _e(`
  if (isnan(a)) return a;
  if (isnan(b)) return b;

  return atan(a, b);
`,t.shape,r.shape);return this.compileAndRun(a,[t,r])},e.prototype.sinh=function(t){var r=new zt(t.shape,`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.cosh=function(t){var r=new zt(t.shape,`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`);return this.compileAndRun(r,[t])},e.prototype.tanh=function(t){var r=new zt(t.shape,`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`);return this.compileAndRun(r,[t])},e.prototype.asinh=function(t){var r=new zt(t.shape,SF);return this.compileAndRun(r,[t])},e.prototype.acosh=function(t){var r=new zt(t.shape,_F);return this.compileAndRun(r,[t])},e.prototype.atanh=function(t){var r=new zt(t.shape,TF);return this.compileAndRun(r,[t])},e.prototype.erf=function(t){var r=new zt(t.shape,`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = 0.3275911;
  float a1 = 0.254829592;
  float a2 = -0.284496736;
  float a3 = 1.421413741;
  float a4 = -1.453152027;
  float a5 = 1.061405429;

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`);return this.compileAndRun(r,[t])},e.prototype.step=function(t,r){var a=new zt(t.shape,(function(o){return o===void 0&&(o=0),Ar+`
    return x > 0.0 ? 1.0 : float(`+o+`);
  `})(r));return this.compileAndRun(a,[t])},e.prototype.conv2dByMatMul=function(t,r,a,o,u,l){var c=t.shape,h=this.texData.get(t.dataId),d=a.inChannels,v=c[0]*c[1]*c[2],m=a.outChannels,g=a.dataFormat==="channelsLast",x=(v===1||m===1)&&d>1e3,E=c[2]%2!=0&&!!h.isPacked;if(x||!lt().getBool("WEBGL_LAZILY_UNPACK")||!lt().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!E){var w=g?c[0]*c[1]*c[2]:c[0]*c[2]*c[3],C=this.reshape(t,[1,w,a.inChannels]),S=this.reshape(r,[1,a.inChannels,a.outChannels]);return this.reshape(this.fusedBatchMatMul({a:C,b:S,transposeA:!1,transposeB:!1,bias:o,activation:u,preluActivationWeights:l}),a.outShape)}var _=g?c[0]*c[1]*(c[2]+1):c[0]*c[2]*(c[3]+1),T={dataId:t.dataId,shape:[1,_,a.inChannels],dtype:t.dtype},A=h.shape;h.shape=h.shape.slice(),h.shape[h.shape.length-2]++,F(jc(h.shape,T.shape),(function(){return"packed reshape "+h.shape+" to "+T.shape+" isn't free"}));var D=this.reshape(r,[1,a.inChannels,a.outChannels]),N=this.fusedBatchMatMul({a:T,b:D,transposeA:!1,transposeB:!1,bias:o,activation:u,preluActivationWeights:l}),k=this.texData.get(N.dataId);return F(k.isPacked,(function(){return"batchMatMul result is expected to be packed"})),h.shape=A,k.shape=a.outShape,W.makeTensorFromDataId(N.dataId,a.outShape,N.dtype)},e.prototype.conv2dWithIm2Row=function(t,r,a,o,u,l){var c=a.filterWidth,h=a.filterHeight,d=a.inChannels,v=a.outWidth,m=a.outHeight,g=a.dataFormat==="channelsLast",x=c*h*d,E=m*v,w=[x,E],C=t.squeeze([0]),S=r.reshape([1,x,-1]),_=new HB(w,C.shape,a),T=this.compileAndRun(_,[C]).reshape([1,w[0],w[1]]),A=o!=null,D=l!=null,N=u?Xc(u,!0):null,k=new rv(T.shape,[1,E,a.outChannels],!0,!1,A,N,D),O=[T,S];o&&O.push(o),D&&O.push(l);var B=this.compileAndRun(k,O);return g?B.reshape([1,m,v,a.outChannels]):B.reshape([1,a.outChannels,m,v])},e.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,o=t.convInfo,u=t.bias,l=t.activation,c=t.preluActivationWeights;if(o.filterHeight===1&&o.filterWidth===1&&o.dilationHeight===1&&o.dilationWidth===1&&o.strideHeight===1&&o.strideWidth===1&&(o.padInfo.type==="SAME"||o.padInfo.type==="VALID"))return this.conv2dByMatMul(r,a,o,u,l,c);if(lt().getBool("WEBGL_CONV_IM2COL")&&r.shape[0]===1)return this.conv2dWithIm2Row(r,a,o,u,l,c);var h=u!=null,d=c!=null,v=l?Xc(l,!1):null,m=new z2(o,h,v,d),g=[r,a];return u&&g.push(u),c&&g.push(c),this.compileAndRun(m,g)},e.prototype.conv2d=function(t,r,a){if(a.filterHeight===1&&a.filterWidth===1&&a.dilationHeight===1&&a.dilationWidth===1&&a.strideHeight===1&&a.strideWidth===1&&(a.padInfo.type==="SAME"||a.padInfo.type==="VALID"))return this.conv2dByMatMul(t,r,a);if(lt().getBool("WEBGL_CONV_IM2COL")&&t.shape[0]===1)return this.conv2dWithIm2Row(t,r,a);var o=new z2(a);return this.compileAndRun(o,[t,r])},e.prototype.conv2dDerInput=function(t,r,a){var o=new aB(a);return this.compileAndRun(o,[t,r])},e.prototype.conv2dDerFilter=function(t,r,a){var o=new rB(a);return this.compileAndRun(o,[t,r])},e.prototype.fusedDepthwiseConv2D=function(t){var r,a=t.input,o=t.filter,u=t.convInfo,l=t.bias,c=t.activation,h=t.preluActivationWeights,d=lt().getBool("WEBGL_PACK_DEPTHWISECONV")&&u.strideWidth<=2&&u.outChannels/u.inChannels==1,v=c?Xc(c,d):null,m=[a,o],g=l!=null,x=h!=null;return g&&m.push(l),x&&m.push(h),d?(r=new V2(u,g,v,x),this.compileAndRun(r,m)):(r=new U2(u,g,v,x),this.compileAndRun(r,m))},e.prototype.depthwiseConv2D=function(t,r,a){var o;return lt().getBool("WEBGL_PACK_DEPTHWISECONV")&&a.strideWidth<=2&&a.outChannels/a.inChannels==1?(o=new V2(a),this.compileAndRun(o,[t,r])):(o=new U2(a),this.compileAndRun(o,[t,r]))},e.prototype.depthwiseConv2DDerInput=function(t,r,a){var o=new uB(a);return this.compileAndRun(o,[t,r])},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){var o=new sB(a);return this.compileAndRun(o,[t,r])},e.prototype.conv3d=function(t,r,a){var o=new lB(a);return this.compileAndRun(o,[t,r])},e.prototype.conv3dDerInput=function(t,r,a){var o=new oB(a);return this.compileAndRun(o,[t,r])},e.prototype.conv3dDerFilter=function(t,r,a){var o=new iB(a);return this.compileAndRun(o,[t,r])},e.prototype.maxPool=function(t,r){var a=new av(r,"max",!1);return this.compileAndRun(a,[t])},e.prototype.avgPool=function(t,r){var a=new av(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.maxPoolBackprop=function(t,r,a,o){var u=new av(o,"max",!0),l=this.compileAndRun(u,[r]),c=new qB(o),h=this.compileAndRun(c,[t,l],r.dtype);return l.dispose(),h},e.prototype.avgPoolBackprop=function(t,r,a){var o=new qI(a);return this.compileAndRun(o,[t],r.dtype)},e.prototype.cast=function(t,r){return dS(t,r,this)},e.prototype.unstack=function(t,r){for(var a=t.shape[r],o=new Array(t.rank-1),u=0,l=0;l<t.rank;l++)l!==r&&(o[u++]=t.shape[l]);var c=new Array(t.rank).fill(0),h=t.shape.slice();h[r]=1;var d=new Array(a);for(l=0;l<d.length;l++)c[r]=l,d[l]=this.slice(t,c,h).reshape(o);return d},e.prototype.avgPool3d=function(t,r){var a=new iv(r,"avg",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.avgPool3dBackprop=function(t,r,a){var o=new KI(a);return this.compileAndRun(o,[t],r.dtype)},e.prototype.maxPool3d=function(t,r){var a=new iv(r,"max",!1);return this.compileAndRun(a,[t],"float32")},e.prototype.maxPool3dBackprop=function(t,r,a,o){var u=new iv(o,"max",!0),l=this.compileAndRun(u,[r]),c=new KB(o),h=this.compileAndRun(c,[t,l],r.dtype);return l.dispose(),h},e.prototype.reshape=function(t,r){var a=this.texData.get(t.dataId);if(a.isPacked&&!jc(t.shape,r)&&(a.texture===null||!jc(a.shape,r))){var o=this.packedReshape(t,r);return W.makeTensorFromDataId(o.dataId,o.shape,o.dtype)}return em(t,r)},e.prototype.resizeBilinear=function(t,r,a,o){var u=lt().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new rF(t.shape,r,a,o):new nF(t.shape,r,a,o);return this.compileAndRun(u,[t],"float32")},e.prototype.resizeBilinearBackprop=function(t,r,a){var o=new eF(t,r,a);return this.compileAndRun(o,[t])},e.prototype.resizeNearestNeighbor=function(t,r,a,o){var u=new iF(t.shape,r,a,o);return this.compileAndRun(u,[t])},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){var o=new aF(t,r,a);return this.compileAndRun(o,[t])},e.prototype.multinomial=function(t,r,a,o){var u=r?t:Ta(t),l=u.shape[0],c=u.shape[1],h=new XB(l,c,a),d=h.getCustomSetupFunc(o);return this.compileAndRun(h,[u],"int32",d)},e.prototype.oneHot=function(t,r,a,o){var u=new YB(t.size,r,a,o);return this.compileAndRun(u,[t])},e.prototype.diag=function(t){var r=new vB(t.size);return this.compileAndRun(r,[t])},e.prototype.nonMaxSuppression=function(t,r,a,o,u){return Cf("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),ag(t.dataSync(),r.dataSync(),a,o,u)},e.prototype.cropAndResize=function(t,r,a,o,u,l){var c=new cB(t.shape,r.shape,o,u,l);return this.compileAndRun(c,[t,r,a],"float32")},e.prototype.depthToSpace=function(t,r,a){F(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));var o=t.shape[0],u=a==="NHWC"?t.shape[1]:t.shape[2],l=a==="NHWC"?t.shape[2]:t.shape[3],c=a==="NHWC"?t.shape[3]:t.shape[1],h=u*r,d=l*r,v=c/(r*r),m=new pB(a==="NHWC"?[o,h,d,v]:[o,v,h,d],r,a);return this.compileAndRun(m,[t])},e.prototype.split=function(t,r,a){return mS(t,r,a)},e.prototype.scatterND=function(t,r,a){var o=Df(0,t,a),u=o.sliceRank,l=o.numUpdates,c=o.sliceSize,h=o.strides,d=o.outputSize,v=[d/c,c],m=t.reshape([l,u]),g=r.reshape([l,c]);if(d===0)return em(sn([]),a);var x=vt(0),E=new W2(l,u,m.rank,g.rank,h,v);return this.compileAndRun(E,[g,m,x]).reshape(a)},e.prototype.sparseToDense=function(t,r,a,o){var u=Df(0,t,a),l=u.sliceRank,c=u.numUpdates,h=u.strides,d=u.outputSize,v=new W2(c,l,t.rank,r.rank,h,[d,1]);return this.compileAndRun(v,[r,t,o]).reshape(a)},e.prototype.fft=function(t){return this.fftImpl(t,!1)},e.prototype.ifft=function(t){return this.fftImpl(t,!0)},e.prototype.fftImpl=function(t,r){var a=this.texData.get(t.dataId),o=new G2(xB,t.shape,r),u=new G2(wB,t.shape,r),l=[this.makeComplexComponentTensorInfo(t,a.complexTensors.real),this.makeComplexComponentTensorInfo(t,a.complexTensors.imag)],c=this.compileAndRun(o,l),h=this.compileAndRun(u,l),d=this.complex(c,h).as2D(t.shape[0],t.shape[1]);return c.dispose(),h.dispose(),d},e.prototype.gatherND=function(t,r){var a=r.shape,o=a[a.length-1],u=oS(t,r),l=u[0],c=u[1],h=u[2],d=u[3],v=r.reshape([c,o]),m=t.reshape([t.size/h,h]),g=new SB(o,d,[c,h]);return this.compileAndRun(g,[m,v]).reshape(l)},e.prototype.fill=function(t,r,a){if((a=a||ul(r))==="string"){var o=bf(a,St(t));return o.fill(r),W.makeTensor(o,t,a,this)}var u=new EB(t,r),l=u.getCustomSetupFunc(r);return this.compileAndRun(u,[],a,l)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){return this.fill(t.shape,t.dtype==="string"?"":0,t.dtype)},e.prototype.linspace=function(t,r,a){return pS(t,r,a)},e.prototype.makeTensorInfo=function(t,r){var a=this.write(null,t,r);return this.texData.get(a).usage=null,{dataId:a,shape:t,dtype:r}},e.prototype.makeOutput=function(t,r){var a=this.makeTensorInfo(t,r).dataId;return W.makeTensorFromDataId(a,t,r,this)},e.prototype.unpackTensor=function(t){var r=new AF(t.shape);return this.runWebGLProgram(r,[t],t.dtype)},e.prototype.packTensor=function(t){var r=new QB(t.shape);return this.runWebGLProgram(r,[t],t.dtype,null,!0)},e.prototype.packedReshape=function(t,r){var a=[wf(t.shape)].concat(Ef(t.shape)),o={dtype:t.dtype,shape:a,dataId:t.dataId},u=[wf(r)].concat(Ef(r)),l=new tF(u,a),c=this.runWebGLProgram(l,[o],t.dtype,null,!0);return{dataId:c.dataId,shape:r,dtype:c.dtype}},e.prototype.decode=function(t){var r,a=this.texData.get(t),o=a.isPacked,u=a.shape,l=a.dtype,c=$p(u);return r=o?new dB(c):new hB(c),{dtype:l,shape:u,dataId:this.runWebGLProgram(r,[{shape:c,dtype:l,dataId:t}],l,null,!0).dataId}},e.prototype.runWebGLProgram=function(t,r,a,o,u){var l=this;u===void 0&&(u=!1);var c=this.makeTensorInfo(t.outputShape,a),h=this.texData.get(c.dataId);if(t.packedOutput&&(h.isPacked=!0),t.outPackingScheme===qu.DENSE){var d=Iu(t.outputShape);h.texShape=d.map((function(_){return 2*_}))}if(t.outTexUsage!=null&&(h.usage=t.outTexUsage),St(c.shape)===0)return h.values=ju(c.dtype,0),c;var v=[],m=r.map((function(_){if(_.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var T=l.texData.get(_.dataId);if(T.texture==null){if(!t.packedInputs&&St(_.shape)<=lt().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:_.shape,texData:null,isUniform:!0,uniformValues:T.values};t.packedInputs&&(T.isPacked=!0,T.shape=_.shape)}else if(!!T.isPacked!=!!t.packedInputs)_=T.isPacked?l.unpackTensor(_):l.packTensor(_),v.push(_),T=l.texData.get(_.dataId);else if(T.isPacked&&!jc(T.shape,_.shape)){var A=_,D=_.shape;_.shape=T.shape,_=l.packedReshape(_,D),v.push(_),T=l.texData.get(_.dataId),A.shape=D}return l.uploadToGPU(_.dataId),{shape:_.shape,texData:T,isUniform:!1}}));this.uploadToGPU(c.dataId);var g,x={shape:c.shape,texData:h,isUniform:!1},E=(function(_,T,A){var D="";T.concat(A).forEach((function(O){var B=O.texData!=null&&O.texData.slice!=null&&O.texData.slice.flatOffset>0,V=O.isUniform?"uniform":O.texData.texShape;D+=O.shape+"_"+V+"_"+B}));var N=_.userCode,k=_.constructor.name;return k+="_"+D+"_"+N})(t,m,x),w=this.getAndSaveBinary(E,(function(){return(function(_,T,A,D){var N=T.userCode,k=A.map((function(q,nt){var ot={logicalShape:q.shape,texShape:q.isUniform?null:q.texData.texShape,isUniform:q.isUniform,isPacked:!q.isUniform&&q.texData.isPacked,flatOffset:null};return q.texData!=null&&q.texData.slice!=null&&q.texData.slice.flatOffset>0&&(ot.flatOffset=q.texData.slice.flatOffset),{name:T.variableNames[nt],shapeInfo:ot}})),O=k.map((function(q){return q.shapeInfo})),B={logicalShape:D.shape,texShape:D.texData.texShape,isUniform:!1,isPacked:D.texData.isPacked,flatOffset:null},V=UI(k,B,N,T.packedInputs),U=_.createProgram(V),it=null,et=_.getUniformLocation(U,"NAN",!1);lt().getNumber("WEBGL_VERSION")===1&&(it=_.getUniformLocation(U,"INFINITY",!1));for(var tt={},P=0;P<T.variableNames.length;P++){var G=T.variableNames[P];tt[G]=_.getUniformLocation(U,G,!1),tt["offset"+G]=_.getUniformLocation(U,"offset"+G,!1)}return{program:T,source:V,webGLProgram:U,uniformLocations:tt,inShapeInfos:O,outShapeInfo:B,infLoc:it,nanLoc:et}})(l.gpgpu,t,m,x)})),C=this.activeTimers!=null;if(C&&(g=this.startTimer()),(function(_,T,A,D,N){j2(T.inShapeInfos,A),j2([T.outShapeInfo],[D]);var k=D.texData.texture,O=D.texData.texShape;D.texData.isPacked?_.setOutputPackedMatrixTexture(k,O[0],O[1]):_.setOutputMatrixTexture(k,O[0],O[1]),_.setProgram(T.webGLProgram),lt().getNumber("WEBGL_VERSION")===1&&T.infLoc!==null&&_.gl.uniform1f(T.infLoc,1/0),T.nanLoc!==null&&_.gl.uniform1f(T.nanLoc,NaN),A.forEach((function(B,V){var U=T.program.variableNames[V],it=T.uniformLocations[U],et=T.uniformLocations["offset"+U];if(it!=null)if(B.isUniform)if(St(B.shape)<2)_.gl.uniform1f(it,B.uniformValues[0]);else{var tt=B.uniformValues;tt instanceof Float32Array||(tt=new Float32Array(tt)),_.gl.uniform1fv(it,tt)}else B.texData.slice!=null&&et!=null&&_.gl.uniform1i(et,B.texData.slice.flatOffset),_.setInputMatrixTexture(B.texData.texture,it,V)})),N?.(_,T.webGLProgram),_.executeProgram()})(this.gpgpu,w,m,x,o),v.forEach((function(_){return l.disposeData(_.dataId)})),C&&(g=this.endTimer(g),this.activeTimers.push({name:t.constructor.name,query:this.getQueryTime(g)})),!lt().getBool("WEBGL_LAZILY_UNPACK")&&h.isPacked&&u===!1){var S=this.unpackTensor(c);return this.disposeData(c.dataId),S}return c},e.prototype.compileAndRun=function(t,r,a,o,u){u===void 0&&(u=!1),a=a||r[0].dtype;var l=this.runWebGLProgram(t,r,a,o,u);return W.makeTensorFromDataId(l.dataId,l.shape,l.dtype)},e.prototype.getAndSaveBinary=function(t,r){return t in this.binaryCache||(this.binaryCache[t]=r()),this.binaryCache[t]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){var t=this;this.disposed||(lt().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach((function(r){t.gpgpu.deleteProgram(t.binaryCache[r].webGLProgram),delete t.binaryCache[r]})),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var t=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=gt((function(){if(!lt().get("WEBGL_RENDER_FLOAT32_ENABLED")){var r=lt().getBool("DEBUG");lt().set("DEBUG",!1);var a=t.abs(vt(1e-8)).dataSync()[0];if(lt().set("DEBUG",r),a>0)return 32}return 16}))),this.floatPrecisionValue},e.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},e.prototype.uploadToGPU=function(t){var r,a=this.texData.get(t),o=a.shape,u=a.dtype,l=a.values,c=a.texture,h=a.usage,d=a.isPacked;if(c==null){var v,m=this.activeTimers!=null;m&&(v=Pr());var g=a.texShape;if(g==null&&(g=Fk(o,d),a.texShape=g),l!=null){var x=$p(o),E=void 0,w=g[1],C=g[0],S=l instanceof Uint8Array;d?(w=(r=cl(g[0],g[1]))[0],C=r[1],E=new bB(x,[C,w],S)):E=new yB(x,[C,w],S);var _=this.makeTensorInfo([C,w],u);this.texData.get(_.dataId).usage=S?qn.PIXELS:qn.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(_.dataId),w,C,l);var T=this.runWebGLProgram(E,[_],u,null,!0),A=this.texData.get(T.dataId);a.texture=A.texture,a.texShape=A.texShape,a.isPacked=A.isPacked,a.usage=A.usage,this.disposeData(_.dataId),this.texData.delete(T.dataId),a.values=null,m&&(this.uploadWaitMs+=Pr()-v)}else{var D=this.acquireTexture(g,h,u,d);a.texture=D}}},e.prototype.convertAndCacheOnCPU=function(t,r){var a=this.texData.get(t),o=a.dtype;return this.releaseGPUData(t),r!=null&&(a.values=(function(u,l){if(l==="float32"||l==="complex64")return u;if(l==="int32"||l==="bool"){for(var c=l==="int32"?new Int32Array(u.length):new Uint8Array(u.length),h=0;h<c.length;++h)c[h]=Math.round(u[h]);return c}throw new Error("Unknown dtype "+l)})(r,o)),a.values},e.prototype.acquireTexture=function(t,r,a,o){if(this.numBytesInGPU+=this.computeBytes(t,a),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var u=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+u+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(t,r,o)},e.prototype.computeBytes=function(t,r){return t[0]*t[1]*HC(r)},e})(fS);YC()&&W.registerBackend("webgl",(function(){return new MF}),2);var NF=H({square_:function(n){var e=I(n,"x","square"),t=[e];return W.runKernelFunc((function(r,a){return a([e]),r.square(e)}),{x:e},null,"Square",{},t,[])}}),Xu="SquaredDifference",MS=H({squaredDifference_:function(n,e){var t,r=I(n,"a","squaredDifference"),a=I(e,"b","squaredDifference");t=Ee(r,a),r=t[0],a=t[1],jt(r.shape,a.shape);var o={a:r,b:a},u=[r,a];return W.runKernelFunc((function(l,c){var h=l.squaredDifference(r,a);return c([r,a]),h}),o,(function(l,c){var h=c[0],d=c[1],v=vt(2);return{a:function(){return l.mul(h.sub(d).mul(v))},b:function(){return l.mul(d.sub(h).mul(v))}}}),Xu,{},u,[])}}),OF=H({abs_:function(n){var e=I(n,"x","abs");return e.dtype==="complex64"?W.runKernelFunc((function(t){return t.complexAbs(e)}),{$x:e}):W.runKernelFunc((function(t,r){var a=t.abs(e);return r([e]),a}),{x:e},(function(t,r){var a=r[0];return{x:function(){return t.mul(a.toFloat().step(-1))}}}),"Abs")}}),kF=H({acos_:function(n){var e=I(n,"x","acos");return W.runKernelFunc((function(t,r){var a=t.acos(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.divStrict(vt(1).sub(a.toFloat().square()).sqrt()).neg()}}}))}}),IF=H({acosh_:function(n){var e=I(n,"x","acosh");return W.runKernelFunc((function(t,r){var a=t.acosh(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.divStrict(a.toFloat().square().sub(1).sqrt())}}}))}}),BF=H({asin_:function(n){var e=I(n,"x","asin");return W.runKernelFunc((function(t,r){var a=t.asin(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.divStrict(vt(1).sub(a.toFloat().square()).sqrt())}}}))}}),FF=H({asinh_:function(n){var e=I(n,"x","asinh");return W.runKernelFunc((function(t,r){var a=t.asinh(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.divStrict(vt(1).add(a.toFloat().square()).sqrt())}}}))}}),LF=H({atan_:function(n){var e=I(n,"x","atan");return W.runKernelFunc((function(t,r){var a=t.atan(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().square().add(1))}}}))}}),PF=H({atanh_:function(n){var e=I(n,"x","atanh");return W.runKernelFunc((function(t,r){var a=t.atanh(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.div(vt(1).sub(a.toFloat().square()))}}}))}}),zF=H({ceil_:function(n){var e=I(n,"x","ceil");return W.runKernelFunc((function(t){return t.ceil(e)}),{$x:e},(function(t){return{$x:function(){return Yt(t)}}}))}}),cg=H({clipByValue_:function(n,e,t){var r=I(n,"x","clipByValue");F(e<=t,(function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+t+")."}));var a=[r],o={min:e,max:t};return W.runKernelFunc((function(u,l){var c=u.clip(r,e,t);return l([r]),c}),{x:r},(function(u,l){var c=l[0];return{x:function(){return u.where(c.greaterEqual(e).logicalAnd(c.lessEqual(t)),Yt(u))}}}),"ClipByValue",o,a)}}),UF=H({cos_:function(n){var e=I(n,"x","cos"),t=[e];return W.runKernelFunc((function(r,a){var o=r.cos(e);return a([e]),o}),{x:e},(function(r,a){var o=a[0];return{x:function(){return o.toFloat().sin().neg().mul(r)}}}),"Cos",{},t)}}),VF=H({cosh_:function(n){var e=I(n,"x","cosh");return W.runKernelFunc((function(t,r){var a=t.cosh(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return a.toFloat().sinh().mulStrict(t)}}}))}}),HF=H({erf_:function(n){var e=I(n,"x","erf");return F(e.dtype==="int32"||e.dtype==="float32",(function(){return"Input dtype must be `int32` or `float32`."})),e.dtype==="int32"&&(e=e.toFloat()),W.runKernelFunc((function(t,r){var a=t.erf(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.mul(a.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),rm=H({exp_:function(n){var e=I(n,"x","exp");return W.runKernelFunc((function(t,r){var a=t.exp(e);return r([a]),a}),{x:e},(function(t,r){return{x:function(){return t.mulStrict(r[0])}}}),"Exp",{},[],[!0])}}),GF=H({expm1_:function(n){var e=I(n,"x","expm1");return W.runKernelFunc((function(t,r){var a=t.expm1(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.mul(a.exp())}}}))}}),jF=H({floor_:function(n){var e=I(n,"x","floor");return W.runKernelFunc((function(t){return t.floor(e)}),{$x:e},(function(t){return{$x:function(){return Yt(t)}}}))}}),WF=H({log_:function(n){var e=I(n,"x","log"),t=[e];return W.runKernelFunc((function(r,a){var o=r.log(e);return a([e]),o}),{x:e},(function(r,a){var o=a[0];return{x:function(){return r.div(o.toFloat())}}}),"Log",{},t)}}),qF=H({log1p_:function(n){var e=I(n,"x","log1p");return W.runKernelFunc((function(t,r){var a=t.log1p(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.div(a.add(1))}}}))}}),KF=H({logSigmoid_:function(n){var e=I(n,"x","logSigmoid");return W.runKernelFunc((function(t,r){var a=t.softplus(e.neg()).neg();return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.mul(a.neg().sigmoid())}}}))}}),kf=H({neg_:function(n){var e=I(n,"x","neg"),t=[e];return W.runKernelFunc((function(r){return r.neg(e)}),{x:e},(function(r){return{x:function(){return r.neg()}}}),"Neg",{},t)}}),XF=H({reciprocal_:function(n){var e=I(n,"x","reciprocal");return W.runKernelFunc((function(t,r){var a=t.reciprocal(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.div(a.square().neg())}}}))}}),YF=H({round_:function(n){var e=I(n,"x","round");return W.runKernelFunc((function(t){return t.round(e)}),{$x:e},(function(t){return{$x:function(){return Yt(t)}}}))}}),NS=H({rsqrt_:function(n){var e=I(n,"x","rsqrt"),t=[e];return W.runKernelFunc((function(r,a){var o=r.rsqrt(e);return a([e]),o}),{x:e},(function(r,a){var o=a[0];return{x:function(){return r.div(o.pow(1.5).mul(2)).neg()}}}),"Rsqrt",{},t)}}),OS=H({sigmoid_:function(n){var e=I(n,"x","sigmoid");return W.runKernelFunc((function(t,r){var a=t.sigmoid(e);return r([a]),a}),{x:e},(function(t,r){var a=r[0];return{x:function(){return t.mul(a.mul(vt(1).sub(a)))}}}),"Sigmoid")}}),QF=H({sign_:function(n){var e=I(n,"x","sign");return W.runKernelFunc((function(t){return t.sign(e)}),{$x:e},(function(t){return{$x:function(){return Yt(t)}}}))}}),ZF=H({isNaN_:function(n){var e=I(n,"x","isNaN");return W.runKernelFunc((function(t){return t.isNaN(e)}),{$x:e},(function(t){return{$x:function(){return Yt(t)}}}))}}),JF=H({isInf_:function(n){var e=I(n,"x","isInf");return W.runKernelFunc((function(t){return t.isInf(e)}),{$x:e},(function(t){return{$x:function(){return Yt(t)}}}))}}),$F=H({isFinite_:function(n){var e=I(n,"x","isFinite");return W.runKernelFunc((function(t){return t.isFinite(e)}),{$x:e},(function(t){return{$x:function(){return Yt(t)}}}))}}),tL=H({sin_:function(n){var e=I(n,"x","sin"),t=[e];return W.runKernelFunc((function(r,a){var o=r.sin(e);return a([e]),o}),{x:e},(function(r,a){var o=a[0];return{x:function(){return o.toFloat().cos().mul(r)}}}),"Sin",{},t)}}),eL=H({sinh_:function(n){var e=I(n,"x","sinh");return W.runKernelFunc((function(t,r){var a=t.sinh(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return a.toFloat().cosh().mulStrict(t)}}}))}}),nL=H({softplus_:function(n){var e=I(n,"x","softplus");return W.runKernelFunc((function(t,r){var a=t.softplus(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.mul(a.sigmoid())}}}))}}),rL=H({sqrt_:function(n){var e=I(n,"x","sqrt");return W.runKernelFunc((function(t,r){var a=t.sqrt(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.div(a.toFloat().sqrt().mul(2))}}}))}}),aL=H({step_:function(n,e){e===void 0&&(e=0);var t=I(n,"x","step");return W.runKernelFunc((function(r){return r.step(t,e)}),{$x:t},(function(r){return{$x:function(){return Yt(r)}}}))}}),iL=H({tan_:function(n){var e=I(n,"x","tan");return W.runKernelFunc((function(t,r){var a=t.tan(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return t.div(a.cos().square())}}}))}}),oL=H({tanh_:function(n){var e=I(n,"x","tanh");return W.runKernelFunc((function(t,r){var a=t.tanh(e);return r([a]),a}),{x:e},(function(t,r){var a=r[0];return{x:function(){return vt(1).sub(a.square()).mulStrict(t)}}}),"Tanh",{},null,[!0])}});function kS(n,e,t,r,a,o){var u,l,c=I(n,"x","batchNorm"),h=I(e,"mean","batchNorm"),d=I(t,"variance","batchNorm");return a!=null&&(u=I(a,"scale","batchNorm")),r!=null&&(l=I(r,"offset","batchNorm")),F(c.rank===2,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."})),F(h.rank===2||h.rank===1,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+h.rank+"."})),F(d.rank===2||d.rank===1,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+d.rank+"."})),u!=null&&F(u.rank===2||u.rank===1,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+u.rank+"."})),l!=null&&F(l.rank===2||l.rank===1,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+l.rank+"."})),hl(c,h,d,l,u,o)}function IS(n,e,t,r,a,o){var u,l,c=I(n,"x","batchNorm"),h=I(e,"mean","batchNorm"),d=I(t,"variance","batchNorm");return a!=null&&(u=I(a,"scale","batchNorm")),r!=null&&(l=I(r,"offset","batchNorm")),F(c.rank===3,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+c.rank+"."})),F(h.rank===3||h.rank===1,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+h.rank+"."})),F(d.rank===3||d.rank===1,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+d.rank+"."})),u!=null&&F(u.rank===3||u.rank===1,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+u.rank+"."})),l!=null&&F(l.rank===3||l.rank===1,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+l.rank+"."})),hl(c,h,d,l,u,o)}function BS(n,e,t,r,a,o){var u,l,c=I(n,"x","batchNorm"),h=I(e,"mean","batchNorm"),d=I(t,"variance","batchNorm");return a!=null&&(u=I(a,"scale","batchNorm")),r!=null&&(l=I(r,"offset","batchNorm")),F(c.rank===4,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+c.rank+"."})),F(h.rank===4||h.rank===1,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+h.rank+"."})),F(d.rank===4||d.rank===1,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+d.rank+"."})),u!=null&&F(u.rank===4||u.rank===1,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+u.rank+"."})),l!=null&&F(l.rank===4||l.rank===1,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+l.rank+"."})),hl(c,h,d,l,u,o)}function hl(n,e,t,r,a,o){o==null&&(o=.001);var u,l,c,h=I(n,"x","batchNorm"),d=I(e,"mean","batchNorm"),v=I(t,"variance","batchNorm");a!=null&&(u=I(a,"scale","batchNorm")),r!=null&&(l=I(r,"offset","batchNorm")),F(d.rank===v.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),F(l==null||d.rank===l.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),F(u==null||d.rank===u.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),c=h.rank===0||h.rank===1?h.as4D(1,1,1,h.size):h.rank===2?h.as4D(1,1,h.shape[0],h.shape[1]):h.rank===3?h.as4D(1,h.shape[0],h.shape[1],h.shape[2]):h;var m=[h,d,v,u];return W.runKernelFunc((function(g,x){var E=g.batchNormalization(c,Yc(d),Yc(v),o,Yc(u),Yc(l));return x([h,d,v,u]),E}),{x:h,mean:d,variance:v,scale:u,offset:l},(function(g,x){var E=x,w=E[0],C=E[1],S=E[2],_=E[3],T=_??vt(1),A=He(C.shape,c.shape),D=[];if(C.rank===1){for(var N=0;N<c.shape.length-1;++N)D.push(c.shape[N]);D.push(1)}var k=w.sub(C),O=g.mul(T),B=NS(S.add(vt(o))),V=B.mul(B).mul(B).mul(vt(-.5));return{x:function(){return C.rank===1?g.mul(fs(B.as4D(1,1,1,C.shape[0]),D)).mul(T).reshape(w.shape):g.mul(B).mul(T).reshape(w.shape)},mean:function(){var U=B.mul(vt(-1)).mul(O);return C.rank===1&&(U=U.sum(A)),U.reshape(C.shape)},variance:function(){var U=V.mul(k).mul(O);return C.rank===1&&(U=U.sum(A)),U.reshape(C.shape)},scale:function(){var U=k.mul(B),it=g.mul(U);return C.rank===1&&(it=it.sum(A)),it.reshape(C.shape)},offset:function(){var U=g;return C.rank===1&&(U=U.sum(A)),U.reshape(C.shape)}}}),"BatchNormalization",{varianceEpsilon:o},m).reshape(h.shape)}function Yc(n){return n==null?null:n.rank===0?n.as1D():n.rank===1?n:n.rank===2?n.as4D(1,1,n.shape[0],n.shape[1]):n.rank===3?n.as4D(1,n.shape[0],n.shape[1],n.shape[2]):n}function Yf(){QC("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var sL=H({batchNormalization2d_:function(n,e,t,r,a,o){return r===void 0&&(r=.001),Yf(),kS(n,e,t,o,a,r)}}),uL=H({batchNormalization3d_:function(n,e,t,r,a,o){return r===void 0&&(r=.001),Yf(),IS(n,e,t,o,a,r)}}),lL=H({batchNormalization4d_:function(n,e,t,r,a,o){return r===void 0&&(r=.001),Yf(),BS(n,e,t,o,a,r)}}),cL=H({batchNormalization_:function(n,e,t,r,a,o){return r===void 0&&(r=.001),Yf(),hl(n,e,t,o,a,r)}}),FS=H({batchNorm_:hl}),fL=H({batchNorm2d_:kS}),hL=H({batchNorm3d_:IS}),dL=H({batchNorm4d_:BS}),Qf=H({logicalAnd_:function(n,e){var t=I(n,"a","logicalAnd","bool"),r=I(e,"b","logicalAnd","bool");return jt(t.shape,r.shape),W.runKernelFunc((function(a){return a.logicalAnd(t,r)}),{a:t,b:r},null,"LogicalAnd")}}),pL=H({logicalNot_:function(n){var e=I(n,"x","logicalNot","bool");return W.runKernelFunc((function(t){return t.logicalNot(e)}),{$x:e})}}),LS=H({logicalOr_:function(n,e){var t=I(n,"a","logicalOr","bool"),r=I(e,"b","logicalOr","bool");return jt(t.shape,r.shape),W.runKernelFunc((function(a){return a.logicalOr(t,r)}),{$a:t,$b:r})}}),vL=H({logicalXor_:function(n,e){var t=I(n,"a","logicalXor","bool"),r=I(e,"b","logicalXor","bool");return jt(t.shape,r.shape),LS(n,e).logicalAnd(Qf(n,e).logicalNot())}}),Zi=H({where_:function(n,e,t){var r=I(e,"a","where"),a=I(t,"b","where"),o=I(n,"condition","where","bool");return ne(r.shape,a.shape,"Error in where: "),o.rank===1?F(o.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):ne(o.shape,a.shape,"Error in where: "),W.runKernelFunc((function(u,l){var c=u.select(o,r,a);return l([o]),c}),{$condition:o,$a:r,$b:a},(function(u,l){var c=l[0];return{$condition:function(){return Yt(c).toFloat()},$a:function(){return u.mul(c.cast(u.dtype))},$b:function(){return u.mul(c.logicalNot().cast(u.dtype))}}}))}}),PS=function(n){return xt(this,void 0,void 0,(function(){var e,t,r;return wt(this,(function(a){switch(a.label){case 0:return[4,(e=I(n,"condition","whereAsync","bool")).data()];case 1:return t=a.sent(),r=og(e.shape,t),n!==e&&e.dispose(),[2,r]}}))}))},Vt=H({add_:function(n,e){var t,r=I(n,"a","add"),a=I(e,"b","add");t=Ee(r,a),r=t[0],a=t[1];var o=jt(r.shape,a.shape);return W.runKernelFunc((function(u){return u.add(r,a)}),{a:r,b:a},(function(u){return{a:function(){var l=u,c=He(r.shape,o);return c.length>0&&(l=l.sum(c)),l.reshape(r.shape)},b:function(){var l=u,c=He(a.shape,o);return c.length>0&&(l=l.sum(c)),l.reshape(a.shape)}}}),"Add")}}),mL=H({addN_:function(n){F(Array.isArray(n),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),F(n.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+n.length}));var e=n.map((function(a,o){return I(a,"tensors"+o,"addN")})),t=e[0];e.forEach((function(a){if(a.dtype!==t.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),e.forEach((function(a){if(!Xe(a.shape,t.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=e;return W.runKernelFunc((function(a){return a.addN(e)}),r,(function(a){var o={};return e.forEach((function(u,l){o[l]=function(){return a.clone()}})),o}),"AddN")}}),gL=H({addStrict_:function(n,e){var t=I(n,"a","addStrict"),r=I(e,"b","addStrict");return ne(t.shape,r.shape,"Error in addStrict: "),t.add(r)}}),yL=H({atan2_:function(n,e){var t,r=I(n,"a","atan2"),a=I(e,"b","atan2");t=Ee(r,a),r=t[0],a=t[1];var o=jt(r.shape,a.shape);return W.runKernelFunc((function(u,l){var c=u.atan2(r,a);return l([r,a]),c}),{$a:r,$b:a},(function(u,l){var c=l[0],h=l[1];return{$a:function(){var d=Vt(c.square(),h.square()),v=u.mul(h.div(d)),m=He(c.shape,o);return m.length>0&&(v=v.sum(m)),v.reshape(c.shape)},$b:function(){var d=Vt(c.square(),h.square()),v=kf(u.mul(c.div(d))),m=He(h.shape,o);return m.length>0&&(v=v.sum(m)),v.reshape(h.shape)}}}))}}),Cr=H({div_:function(n,e){var t,r=I(n,"a","div"),a=I(e,"b","div");if(t=Ee(r,a),r=t[0],a=t[1],r.dtype==="int32"&&a.dtype==="int32")return zS(r,a);var o=jt(r.shape,a.shape);return W.runKernelFunc((function(u,l){var c=u.realDivide(r,a);return l([r,a]),c}),{a:r,b:a},(function(u,l){var c=l[0],h=l[1];return{a:function(){var d=u.div(h.toFloat()),v=He(c.shape,o);return v.length>0?d.sum(v).reshape(c.shape):d},b:function(){var d=u.mul(c.toFloat()),v=He(h.shape,o);v.length>0&&(d=d.sum(v).reshape(h.shape));var m=h.square();return d.div(m.toFloat()).neg()}}}),"Div")}}),bL=H({divNoNan_:function(n,e){var t,r=I(n,"a","div"),a=I(e,"b","div");r=(t=Ee(r,a))[0],a=t[1];var o=Cr(r,a),u=Yt(o),l=a.equal(u);return Zi(l,u,o)}}),xL=H({divStrict_:function(n,e){var t=I(n,"a","div"),r=I(e,"b","div");return ne(t.shape,r.shape,"Error in divideStrict: "),t.div(r)}}),zS=H({floorDiv_:function(n,e){var t,r=I(n,"a","floorDiv"),a=I(e,"b","floorDiv");t=Ee(r,a),r=t[0],a=t[1];var o=jt(r.shape,a.shape);return W.runKernelFunc((function(u,l){var c=u.floorDiv(r,a);return l([r,a]),c}),{a:r,b:a},(function(u,l){var c=l[0],h=l[1];return{a:function(){var d=u.div(h.toFloat()),v=He(c.shape,o);return v.length>0?d.sum(v).reshape(c.shape):d},b:function(){var d=u.mul(c.toFloat()),v=He(h.shape,o);v.length>0&&(d=d.sum(v).reshape(h.shape));var m=h.square();return d.div(m.toFloat()).neg()}}}),"FloorDiv")}}),fg=H({maximum_:function(n,e){var t,r=I(n,"a","maximum"),a=I(e,"b","maximum");return t=Ee(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),jt(r.shape,a.shape),W.runKernelFunc((function(o,u){var l=o.maximum(r,a);return u([r,a]),l}),{a:r,b:a},(function(o,u){var l=u[0],c=u[1];return{a:function(){return o.mul(l.greaterEqual(c).toFloat())},b:function(){return o.mul(l.less(c).toFloat())}}}),"Maximum")}}),wL=H({maximumStrict_:function(n,e){var t=I(n,"a","maximumStrict"),r=I(e,"b","maximumStrict");return ne(t.shape,r.shape,"Error in maximumStrict: "),t.maximum(r)}}),US=H({minimum_:function(n,e){var t,r=I(n,"a","minimum"),a=I(e,"b","minimum");return t=Ee(r,a),r=t[0],a=t[1],r.dtype==="bool"&&(r=r.toInt(),a=a.toInt()),jt(r.shape,a.shape),W.runKernelFunc((function(o,u){var l=o.minimum(r,a);return u([r,a]),l}),{a:r,b:a},(function(o,u){var l=u[0],c=u[1];return{a:function(){return o.mul(l.lessEqual(c).toFloat())},b:function(){return o.mul(l.greater(c).toFloat())}}}),"Minimum")}}),EL=H({minimumStrict_:function(n,e){var t=I(n,"a","minimumStrict"),r=I(e,"b","minimumStrict");return ne(t.shape,r.shape,"Error in minimumStrict: "),t.minimum(r)}}),CL=H({mod_:function(n,e){var t,r=I(n,"a","mod"),a=I(e,"b","mod");t=Ee(r,a),r=t[0],a=t[1];var o=jt(r.shape,a.shape);return W.runKernelFunc((function(u,l){var c=u.mod(r,a);return l([r,a]),c}),{$a:r,$b:a},(function(u,l){var c=l[0],h=l[1];return{$a:function(){var d=He(c.shape,o);return d.length>0?u.sum(d).reshape(c.shape):u},$b:function(){var d=u.mul(c.div(h).floor().neg()),v=He(h.shape,o);return v.length>0?d.sum(v).reshape(h.shape):d}}}))}}),SL=H({modStrict_:function(n,e){var t=I(n,"a","modStrict"),r=I(e,"b","modStrict");return ne(t.shape,r.shape,"Error in modStrict: "),t.mod(r)}}),vn=H({mul_:function(n,e){var t,r=I(n,"a","mul"),a=I(e,"b","mul");t=Ee(r,a),r=t[0],a=t[1];var o=jt(r.shape,a.shape);return W.runKernelFunc((function(u,l){var c=u.multiply(r,a);return l([r,a]),c}),{a:r,b:a},(function(u,l){var c=l[0],h=l[1];return{a:function(){var d=u.mul(h.toFloat()),v=He(c.shape,o);return v.length>0?d.sum(v).reshape(c.shape):d},b:function(){var d=u.mul(c.toFloat()),v=He(h.shape,o);return v.length>0?d.sum(v).reshape(h.shape):d}}}),"Mul")}}),_L=H({mulStrict_:function(n,e){var t=I(n,"a","mul"),r=I(e,"b","mul");return ne(t.shape,r.shape,"Error in multiplyStrict: "),t.mul(r)}}),If=H({pow_:function(n,e){var t,r=I(n,"base","pow"),a=I(e,"exp","pow");t=Ee(r,a),r=t[0],a=t[1];var o=jt(r.shape,a.shape),u=[r,a];return W.runKernelFunc((function(l,c){var h=l.pow(r,a);return c([r,a,h]),h}),{a:r,b:a},(function(l,c){var h=c[0],d=c[1],v=c[2];return{a:function(){var m=d.toFloat(),g=l.mul(m.mul(h.pow(m.sub(vt(1))))),x=He(h.shape,o);return x.length>0&&(g=g.sum(x)),g.reshape(h.shape)},b:function(){var m=h.greater(0),g=h.log().where(m,Yt(h)),x=l.mul(v.mul(g)),E=He(d.shape,o);return E.length>0&&(x=x.sum(E)),x.reshape(d.shape)}}}),"Pow",{},u,[!0])}}),TL=H({powStrict_:function(n,e){return ne(n.shape,e.shape,"Error in powStrict: "),n.pow(e)}}),RL=H({squaredDifferenceStrict_:function(n,e){var t=I(n,"a","squaredDifferenceStrict"),r=I(e,"b","squaredDifferenceStrict");return ne(t.shape,r.shape,"Error in squaredDifferenceStrict: "),t.squaredDifference(r)}}),Ge=H({sub_:function(n,e){var t,r=I(n,"a","sub"),a=I(e,"b","sub");t=Ee(r,a),r=t[0],a=t[1];var o=jt(r.shape,a.shape);return W.runKernelFunc((function(u){return u.subtract(r,a)}),{a:r,b:a},(function(u){return{a:function(){var l=u,c=He(r.shape,o);return c.length>0&&(l=l.sum(c)),l.reshape(r.shape)},b:function(){var l=u,c=He(a.shape,o);return c.length>0&&(l=l.sum(c)),l.neg().reshape(a.shape)}}}),"Sub")}}),AL=H({subStrict_:function(n,e){var t=I(n,"a","subStrict"),r=I(e,"b","subStrict");return ne(t.shape,r.shape,"Error in subStrict: "),t.sub(r)}}),VS=H({equal_:function(n,e){var t,r=I(n,"a","equal"),a=I(e,"b","equal");return t=Ee(r,a),r=t[0],a=t[1],jt(r.shape,a.shape),W.runKernelFunc((function(o){return o.equal(r,a)}),{$a:r,$b:a})}}),DL=H({equalStrict_:function(n,e){var t=I(n,"a","equalStrict"),r=I(e,"b","equalStrict");return ne(t.shape,r.shape,"Error in equalStrict: "),t.equal(r)}}),ML=H({greater_:function(n,e){var t,r=I(n,"a","greater"),a=I(e,"b","greater");return t=Ee(r,a),r=t[0],a=t[1],jt(r.shape,a.shape),W.runKernelFunc((function(o){return o.greater(r,a)}),{a:r,b:a},null,"Greater")}}),HS=H({greaterEqual_:function(n,e){var t,r=I(n,"a","greaterEqual"),a=I(e,"b","greaterEqual");return t=Ee(r,a),r=t[0],a=t[1],jt(r.shape,a.shape),W.runKernelFunc((function(o,u){var l=o.greaterEqual(r,a);return u([r,a]),l}),{a:r,b:a},(function(o,u){var l=u[0],c=u[1];return{a:function(){return Yt(l)},b:function(){return Yt(c)}}}),"GreaterEqual")}}),NL=H({greaterEqualStrict_:function(n,e){var t=I(n,"a","greaterEqualStrict"),r=I(e,"b","greaterEqualStrict");return ne(t.shape,r.shape,"Error in greaterEqualStrict: "),t.greaterEqual(r)}}),OL=H({greaterStrict_:function(n,e){var t=I(n,"a","greaterStrict"),r=I(e,"b","greaterStrict");return ne(t.shape,r.shape,"Error in greaterStrict: "),t.greater(r)}}),kL=H({less_:function(n,e){var t,r=I(n,"a","less"),a=I(e,"b","less");return t=Ee(r,a),r=t[0],a=t[1],jt(r.shape,a.shape),W.runKernelFunc((function(o){return o.less(r,a)}),{a:r,b:a},null,"Less")}}),IL=H({lessEqual_:function(n,e){var t,r=I(n,"a","lessEqual"),a=I(e,"b","lessEqual");return t=Ee(r,a),r=t[0],a=t[1],jt(r.shape,a.shape),W.runKernelFunc((function(o,u){var l=o.lessEqual(r,a);return u([r,a]),l}),{a:r,b:a},null,"LessEqual")}}),BL=H({lessEqualStrict_:function(n,e){var t=I(n,"a","lessEqualStrict"),r=I(e,"b","lessEqualStrict");return ne(t.shape,r.shape,"Error in lessEqualStrict: "),t.lessEqual(r)}}),FL=H({lessStrict_:function(n,e){var t=I(n,"a","lessStrict"),r=I(e,"b","lessStrict");return ne(t.shape,r.shape,"Error in lessStrict: "),t.less(r)}}),LL=H({notEqual_:function(n,e){var t,r=I(n,"a","notEqual"),a=I(e,"b","notEqual");return t=Ee(r,a),r=t[0],a=t[1],jt(r.shape,a.shape),W.runKernelFunc((function(o){return o.notEqual(r,a)}),{a:r,b:a},null,"NotEqual")}}),PL=H({notEqualStrict_:function(n,e){var t=I(n,"a","notEqualStrict"),r=I(e,"b","notEqualStrict");return ne(t.shape,r.shape,"Error in notEqualStrict: "),t.notEqual(r)}});function tw(n,e){for(var t=[],r=n;r<e;++r)t.push(r);return t}function ew(n){for(var e=[],t=0;t<n.length;++t)for(var r=0;r<n[t].length;++r)e.push(n[t][r]);return e}var hg=H({gather_:function(n,e,t){t===void 0&&(t=0);var r=I(n,"x","gather"),a=I(e,"indices","gather","int32");t=je(t,r.shape)[0];var o=(function(u,l,c){for(var h=u.shape[c],d=[],v=1,m=1,g=0;g<c;g++)d.push(u.shape[g]),v*=u.shape[g];for(g=0;g<l.rank;g++)d.push(l.shape[g]);for(g=c+1;g<u.rank;g++)d.push(u.shape[g]),m*=u.shape[g];return{batchSize:v,sliceSize:m,dimSize:h,outputShape:d}})(r,a,t);return W.runKernelFunc((function(u,l){var c=u.gather(r,a.flatten(),t);return l([a]),c}),{x:r,indices:a},(function(u,l){var c=l[0];return{x:function(){var h=r.shape,d=c.size,v=h.slice(0,t),m=v.length,g=h.slice(t,h.length).slice(1),x=g.length,E=tw(0,m),w=tw(m+1,m+1+x),C=ew([v,[d],g]),S=u.reshape(C),_=c.reshape([d]),T=ew([[m],E,w]),A=S.transpose(T),D=GS(A,_,r.shape[t]),N=Jm(T);return D=D.transpose(N)},indices:function(){return c}}}),"Gather",{axis:t}).reshape(o.outputShape)}}),GS=H({unsortedSegmentSum_:function(n,e,t){var r=I(n,"x","unsortedSegmentSum"),a=I(e,"segmentIds","unsortedSegmentSum","int32");return F(De(t),(function(){return"numSegments must be of dtype int"})),W.runKernelFunc((function(o,u){var l=o.unsortedSegmentSum(r,a,t);return u([a]),l}),{$x:r},(function(o,u){var l=u[0];return{$x:function(){return(function(c,h){for(var d=fg(h,Yt(h)),v=hg(c,d),m=HS(h,vt(0,"int32")),g=v.rank-m.rank,x=0;x<g;++x)m=lr(m,x+1);m=Qf(m,As(v.shape,"bool"));var E=Yt(v);return Zi(m,v,E)})(o,l)}}}))}}),zL=function(n,e,t){return xt(this,void 0,void 0,(function(){var r,a,o,u,l,c,h,d,v,m,g,x,E;return wt(this,(function(w){switch(w.label){case 0:for(r=I(n,"tensor","boolMask"),a=I(e,"mask","boolMask","bool"),o=t??0,u=a.rank,l=r.shape,F(u>0,(function(){return"mask cannot be scalar"})),ne(l.slice(o,o+u),a.shape,"mask's shape must match the first K dimensions of tensor's shape,"),c=1,h=o;h<o+u;h++)c*=l[h];return d=l.slice(0,o).concat([c],l.slice(o+u)),v=r.reshape(d),m=a.reshape([-1]),[4,PS(m)];case 1:return g=w.sent(),x=g.squeeze([1]),E=hg(v,x,o),n!==r&&r.dispose(),e!==a&&a.dispose(),x.dispose(),v.dispose(),m.dispose(),g.dispose(),[2,E]}}))}))};function jS(n,e,t,r,a,o,u){o===void 0&&(o="NHWC"),F(n.length===e.rank,(function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"}));var l=n,c=e,h=!1;e.rank===3&&(h=!0,c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),l=[1,n[0],n[1],n[2]]),F(l.length===4,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+l.length+"."})),F(c.rank===4,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+c.rank})),F(t.rank===4,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+t.rank}));var d=o==="NHWC"?l[3]:l[1],v=o==="NHWC"?c.shape[3]:c.shape[1];F(d===t.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+d+") must match input depth for filter "+t.shape[2]+"."})),F(v===t.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+v+") must match output depth for filter "+t.shape[3]+"."})),u!=null&&F(De(a),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+a+"."}));var m=rg(o),g=ao(l,t.shape,r,1,a,u,!1,m),x=W.runKernelFunc((function(E,w){var C=E.conv2dDerInput(c,t,g);return w([t,c]),C}),{dy4D:c,filter:t},(function(E,w){var C=w[0],S=w[1];return{dy4D:function(){return vr(E,C,r,a,o,1,u)},filter:function(){return dg(E,S,C.shape,r,a,o,u)}}}));return h?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}function sv(n){var e=(function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o})(n),t=e[0],r=e[1],a=e[2];return t===1&&r===1&&a===1}function WS(n,e,t,r,a){F(n.length===e.rank,(function(){return"Length of inShape ("+n.length+") and rank of dy ("+e.rank+") must match"}));var o=n,u=e,l=!1;e.rank===4&&(l=!0,u=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),o=[1,n[0],n[1],n[2],n[3]]);var c=o[4],h=u.shape[4];F(o.length===5,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."})),F(u.rank===5,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+u.rank})),F(t.rank===5,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+t.rank})),F(c===t.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+c+") must match input depth for filter "+t.shape[3]+"."})),F(h===t.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+h+") must match output depth for filter "+t.shape[4]+"."}));var d=Nf(o,t.shape,r,1,a),v=W.runKernelFunc((function(m){return m.conv3dDerInput(u,t,d)}),{dy5D:u});return l?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}var UL=H({conv1d_:function(n,e,t,r,a,o,u){a===void 0&&(a="NWC"),o===void 0&&(o=1);var l=I(n,"x","conv1d"),c=I(e,"filter","conv1d"),h=l,d=!1;l.rank===2&&(d=!0,h=l.as3D(1,l.shape[0],l.shape[1])),F(h.rank===3,(function(){return"Error in conv1d: input must be rank 3, but got rank "+h.rank+"."})),F(c.rank===3,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+c.rank+"."})),u!=null&&F(De(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+r+"."})),F(h.shape[2]===c.shape[1],(function(){return"Error in conv1d: depth of input ("+h.shape[2]+") must match input depth for filter "+c.shape[1]+"."})),F(kn(t,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+t+" and dilation '"+o+"'"})),F(a==="NWC",(function(){return"Error in conv1d: got dataFormat of "+a+" but only NWC is currently supported."}));var v=c.as4D(1,c.shape[0],c.shape[1],c.shape[2]),m=h.as4D(h.shape[0],1,h.shape[1],h.shape[2]),g=vr(m,v,[1,t],r,"NHWC",[1,o],u);return d?g.as2D(g.shape[2],g.shape[3]):g.as3D(g.shape[0],g.shape[2],g.shape[3])}}),vr=H({conv2d_:function(n,e,t,r,a,o,u){a===void 0&&(a="NHWC"),o===void 0&&(o=[1,1]);var l=I(n,"x","conv2d"),c=I(e,"filter","conv2d"),h=l,d=!1;l.rank===3&&(d=!0,h=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),F(h.rank===4,(function(){return"Error in conv2d: input must be rank 4, but got rank "+h.rank+"."})),F(c.rank===4,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+c.rank+"."})),u!=null&&F(De(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+r+"."}));var v=a==="NHWC"?h.shape[3]:h.shape[1];F(v===c.shape[2],(function(){return"Error in conv2d: depth of input ("+v+") must match input depth for filter "+c.shape[2]+"."})),F(kn(t,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"}));var m=rg(a),g=ao(h.shape,c.shape,t,o,r,u,!1,m),x=[c,h],E=W.runKernelFunc((function(w,C){var S=w.conv2d(h,c,g);return C([c,h]),S}),{x:h,filter:c},(function(w,C){var S=C,_=S[0],T=S[1];return F(Es(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"})),{x:function(){return qS(T.shape,w,_,t,r,a)},filter:function(){return dg(T,w,_.shape,t,r,a)}}}),"Conv2D",g,x);return d?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),VL=H({conv3d_:function(n,e,t,r,a,o){a===void 0&&(a="NDHWC"),o===void 0&&(o=[1,1,1]);var u=I(n,"x","conv3d"),l=I(e,"filter","conv3d"),c=u,h=!1;u.rank===4&&(h=!0,c=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3])),F(c.rank===5,(function(){return"Error in conv3d: input must be rank 5, but got rank "+c.rank+"."})),F(l.rank===5,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+l.rank+"."})),F(c.shape[4]===l.shape[3],(function(){return"Error in conv3d: depth of input ("+c.shape[4]+") must match input depth for filter "+l.shape[3]+"."})),F((function(m,g){return sv(m)||sv(g)})(t,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"})),F(a==="NDHWC",(function(){return"Error in conv3d: got dataFormat of "+a+" but only NDHWC is currently supported."}));var d=Nf(c.shape,l.shape,t,o,r),v=W.runKernelFunc((function(m,g){var x=m.conv3d(c,l,d);return g([c,l]),x}),{x:c,$filter:l},(function(m,g){F(sv(o),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}));var x=g[0],E=g[1];return{x:function(){return WS(x.shape,m,E,t,r)},$filter:function(){return(function(w,C,S,_,T){var A=w;w.rank===4&&(A=w.as5D(1,w.shape[0],w.shape[1],w.shape[2],w.shape[3]));var D=C;D.rank===4&&(D=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3])),F(A.rank===5,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+A.shape+"."})),F(D.rank===5,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+D.shape+"."})),F(S.length===5,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+S+"."})),F(A.shape[4]===S[3],(function(){return"Error in conv3dDerFilter: depth of input "+A.shape[4]+") must match input depth in filter ("+S[3]+"."})),F(D.shape[4]===S[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+D.shape[4]+") must match output depth for filter ("+S[4]+")."}));var N=Nf(A.shape,S,_,1,T);return W.runKernelFunc((function(k){return k.conv3dDerFilter(A,D,N)}),{x5D:A,dy5D:D})})(x,m,E.shape,t,r)}}}));return h?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}}),dg=H({conv2dDerFilter_:function(n,e,t,r,a,o,u){o===void 0&&(o="NHWC");var l=n;n.rank===3&&(l=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var c=e;c.rank===3&&(c=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),F(l.rank===4,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+l.shape+"."})),F(c.rank===4,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+c.shape+"."})),F(t.length===4,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+t+"."}));var h=o==="NHWC"?l.shape[3]:l.shape[1],d=o==="NHWC"?c.shape[3]:c.shape[1];F(h===t[2],(function(){return"Error in conv2dDerFilter: depth of input "+h+") must match input depth in filter ("+t[2]+"."})),F(d===t[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+d+") must match output depth for filter ("+t[3]+")."})),u!=null&&F(De(a),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+a+"."}));var v=rg(o),m=ao(l.shape,t,r,1,a,u,!1,v);return W.runKernelFunc((function(g){return g.conv2dDerFilter(l,c,m)}),{x4D:l,dy4D:c})}}),qS=H({conv2dDerInput_:jS}),Zf=H({depthwiseConv2d_:function(n,e,t,r,a,o,u){o===void 0&&(o=[1,1]);var l=I(n,"x","depthwiseConv2d"),c=I(e,"filter","depthwiseConv2d"),h=l,d=!1;l.rank===3&&(d=!0,h=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),F(h.rank===4,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+h.rank+"."})),F(c.rank===4,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+c.rank+"."})),F(h.shape[3]===c.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+h.shape[3]+") must match the inChannels dimension in filter "+c.shape[2]+"."})),o==null&&(o=[1,1]),F(kn(t,o),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+o+"'"})),u!=null&&F(De(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+r+"."}));var v=ao(h.shape,c.shape,t,o,r,u,!0),m=[h,c],g=W.runKernelFunc((function(x,E){var w=x.depthwiseConv2D(h,c,v);return E([h,c]),w}),{x:h,filter:c},(function(x,E){F(Es(o),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"}));var w=E[0],C=E[1];return{x:function(){return KS(w.shape,x,C,v)},filter:function(){return XS(w,x,C.shape,v)}}}),"DepthwiseConv2dNative",v,m);return d?g.as3D(g.shape[1],g.shape[2],g.shape[3]):g}}),KS=H({depthwiseConv2dDerInput_:function(n,e,t,r){var a=e,o=!1;e.rank===3&&(o=!0,a=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var u=W.runKernelFunc((function(l){return l.depthwiseConv2DDerInput(a,t,r)}),{dy4D:a});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),XS=H({depthwiseConv2dDerFilter_:function(n,e,t,r){var a=n;n.rank===3&&(a=n.as4D(1,n.shape[0],n.shape[1],n.shape[2]));var o=e;return o.rank===3&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),W.runKernelFunc((function(u){return u.depthwiseConv2DDerFilter(a,o,r)}),{x4D:a,dy4D:o})}}),pg=H({separableConv2d_:function(n,e,t,r,a,o,u){o===void 0&&(o=[1,1]),u===void 0&&(u="NHWC");var l=I(n,"x","separableConv2d"),c=I(e,"depthwiseFilter","separableConv2d"),h=I(t,"pointwiseFilter","separableConv2d"),d=l,v=!1;if(l.rank===3&&(v=!0,d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2])),u==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");F(d.rank===4,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+d.rank+"."})),F(c.rank===4,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+c.rank+"."})),F(h.rank===4,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+c.rank+"."})),F(h.shape[0]===1,(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+h.shape[0]+"."})),F(h.shape[1]===1,(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+h.shape[1]+"."}));var m=c.shape[2],g=c.shape[3];F(h.shape[2]===m*g,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+m*g+", but got "+h.shape[2]+"."}));var x=Zf(d,c,r,a,u,o),E=vr(x,h,1,"valid",u);return v?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),HL=H({conv2dTranspose_:function(n,e,t,r,a,o){return jS(t,I(n,"x","conv2dTranspose"),I(e,"filter","conv2dTranspose"),r,a,"NHWC",o)}}),GL=H({conv3dTranspose_:function(n,e,t,r,a){return WS(t,I(n,"x","conv3dTranspose"),I(e,"filter","conv3dTranspose"),r,a)}}),Jf=H({matMul_:function(n,e,t,r){var a;t===void 0&&(t=!1),r===void 0&&(r=!1);var o=I(n,"a","matMul"),u=I(e,"b","matMul");a=Ee(o,u),o=a[0],u=a[1];var l=t?o.shape[o.rank-2]:o.shape[o.rank-1],c=r?u.shape[u.rank-1]:u.shape[u.rank-2],h=t?o.shape[o.rank-1]:o.shape[o.rank-2],d=r?u.shape[u.rank-2]:u.shape[u.rank-1],v=o.shape.slice(0,-2),m=u.shape.slice(0,-2),g=St(v),x=St(m);F(o.rank>=2&&u.rank>=2&&o.rank===u.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+u.rank+"."})),F(Xe(v,m),(function(){return"Error in matMul: outer dimensions ("+v+") and ("+m+") of Tensors with shapes "+o.shape+" and "+u.shape+" must match."})),F(l===c,(function(){return"Error in matMul: inner shapes ("+l+") and ("+c+") of Tensors with shapes "+o.shape+" and "+u.shape+" and transposeA="+t+" and transposeB="+r+" must match."}));var E=o.shape.slice(0,-2).concat([h,d]),w=t?o.as3D(g,l,h):o.as3D(g,h,l),C=r?u.as3D(x,d,c):u.as3D(x,c,d),S={transposeA:t,transposeB:r};return W.runKernelFunc((function(_,T){var A=_.batchMatMul(w,C,t,r);return T([w,C]),A}),{a:w,b:C},(function(_,T){var A=T,D=A[0],N=A[1];return t||r?!t&&r?{a:function(){return _.matMul(N,!1,!1)},b:function(){return _.matMul(D,!0,!1)}}:t&&!r?{a:function(){return N.matMul(_,!1,!0)},b:function(){return D.matMul(_,!1,!1)}}:{a:function(){return N.matMul(_,!0,!0)},b:function(){return _.matMul(D,!0,!0)}}:{a:function(){return _.matMul(N,!1,!0)},b:function(){return D.matMul(_,!0,!1)}}}),"BatchMatMul",S).reshape(E)}}),jL=H({dot_:function(n,e){var t=I(n,"t1","dot"),r=I(e,"t2","dot");F(!(t.rank!==1&&t.rank!==2||r.rank!==1&&r.rank!==2),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+t.rank+" and "+r.rank+"."}));var a=t.rank===1?t.size:t.shape[1],o=r.rank===1?r.size:r.shape[0];return F(a===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+a+" and "+o+"."})),t.rank===1&&r.rank===1?t.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():t.rank===1&&r.rank===2?t.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():t.rank===2&&r.rank===1?t.matMul(r.as2D(-1,1)).as1D():t.matMul(r.as2D(r.shape[0],r.shape[1]))}}),WL=H({outerProduct_:function(n,e){var t=I(n,"v1","outerProduct"),r=I(e,"v2","outerProduct");return F(t.rank===1&&r.rank===1,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+t.rank+" and "+r.rank+"."})),t.as2D(-1,1).matMul(r.as2D(1,-1))}}),dl=H({reverse_:function(n,e){var t=I(n,"x","reverse");if(t.rank===0)return t.clone();var r=je(e,t.shape);return W.runKernelFunc((function(a){return a.reverse(t,r)}),{$x:t},(function(a){return{$x:function(){return a.reverse(r)}}})).reshapeAs(t)}}),qL=H({reverse1d_:function(n){var e=I(n,"x","reverse");return F(e.rank===1,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."})),dl(e,0)}}),KL=H({reverse2d_:function(n,e){var t=I(n,"x","reverse");return F(t.rank===2,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+t.rank+"."})),dl(t,e)}}),XL=H({reverse3d_:function(n,e){var t=I(n,"x","reverse");return F(t.rank===3,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+t.rank+"."})),dl(t,e)}}),YL=H({reverse4d_:function(n,e){var t=I(n,"x","reverse");return F(t.rank===4,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+t.rank+"."})),dl(t,e)}});function YS(n,e,t,r,a,o){var u=I(n,"x","maxPool"),l=u,c=!1;u.rank===3&&(c=!0,l=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),F(l.rank===4,(function(){return"Error in maxPool: input must be rank 4 but got rank "+l.rank+"."})),F(kn(t,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"})),o!=null&&F(De(a),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var h=Ku(l.shape,e,t,r,a,o);if(h.filterWidth===1&&h.filterHeight===1&&Xe(h.inShape,h.outShape))return u.clone();var d=[l],v=W.runKernelFunc((function(m,g){var x=m.maxPool(l,h);return g([l,x]),x}),{x:l},(function(m,g){var x=g[0],E=g[1];return{x:function(){return(function(w,C,S,_,T,A,D,N){var k=I(w,"dy","maxPoolBackprop"),O=I(C,"input","maxPoolBackprop"),B=I(S,"output","maxPoolBackprop");F(O.rank===k.rank,(function(){return"Rank of input ("+O.rank+") does not match rank of dy ("+k.rank+")"})),F(kn(T,A),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+T+" and dilations '"+A+"'"})),F(k.rank===4,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+k.rank+"."})),F(O.rank===4,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+O.rank+"."}));var V=Ku(O.shape,_,T,A,D,N);return W.runKernelFunc((function(U){return U.maxPoolBackprop(k,O,B,V)}),{$dy:k,$input:O})})(m,x,E,e,t,r,a)}}}),"MaxPool",h,d);return c?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}function QS(n,e,t,r,a,o){var u=I(n,"x","avgPool","float32");F(kn(t,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+r+"'"}));var l=u,c=!1;u.rank===3&&(c=!0,l=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),F(l.rank===4,(function(){return"Error in avgPool: x must be rank 4 but got rank "+l.rank+"."})),o!=null&&F(De(a),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+a+"."}));var h=Ku(l.shape,e,t,r,a,o);if(h.filterWidth===1&&h.filterHeight===1&&Xe(h.inShape,h.outShape))return u.clone();var d=W.runKernelFunc((function(v){return v.avgPool(l,h)}),{x:l},(function(v){return{x:function(){return(function(m,g,x,E,w,C){var S=I(m,"dy","avgPoolBackprop"),_=I(g,"input","avgPoolBackprop");F(_.rank===S.rank,(function(){return"Rank of input ("+_.rank+") does not match rank of dy ("+S.rank+")"})),F(kn(E,w),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+E+" and dilations '"+w+"'"}));var T=_,A=S,D=!1;_.rank===3&&(D=!0,T=_.as4D(1,_.shape[0],_.shape[1],_.shape[2]),A=S.as4D(1,S.shape[0],S.shape[1],S.shape[2])),F(A.rank===4,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+A.rank+"."})),F(T.rank===4,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+T.rank+"."}));var N=Ku(T.shape,x,E,w,C),k=W.runKernelFunc((function(O){return O.avgPoolBackprop(A,T,N)}),{dy4D:A,input4D:T});return D?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k})(v,l,e,t,r,a)}}}),"AvgPool",h);return d=d.cast(u.dtype),c?d.as3D(d.shape[1],d.shape[2],d.shape[3]):d}var Ke=H({maxPool_:function(n,e,t,r,a){return YS(n,e,t,1,r,a)}}),pl=H({avgPool_:function(n,e,t,r,a){return QS(n,e,t,1,r,a)}}),QL=H({pool_:function(n,e,t,r,a,o){a==null&&(a=[1,1]),o==null&&(o=1),r===0&&(r="valid");var u=I(n,"x","maxPool"),l=u,c=!1;u.rank===3&&(c=!0,l=u.as4D(1,u.shape[0],u.shape[1],u.shape[2])),F(kn(o,a),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+a+"'"}));var h,d=Ku(l.shape,e,o,a,r),v=[d.dilationHeight,d.dilationWidth];h=r==="same"?(function(T,A){var D=T.map((function(O,B){return O+(O-1)*(A[B]-1)})).map((function(O){return O-1})),N=D.map((function(O){return Math.floor(O/2)})),k=D.map((function(O,B){return O-N[B]}));return D.map((function(O,B){return[N[B],k[B]]}))})([d.filterHeight,d.filterWidth],v):[[0,0],[0,0]];var m=v[0]===1&&v[1]===1,g=(function(T,A,D){var N=D.map((function(et){return et[0]})),k=D.map((function(et){return et[1]})),O=T.concat(N,k),B=A.map((function(et,tt){return(et-O[tt]%et)%et})),V=k.map((function(et,tt){return et+B[tt]})),U=A.map((function(et,tt){return[N[tt],V[tt]]})),it=A.map((function(et,tt){return[0,B[tt]]}));return[U,it]})([d.inHeight,d.inWidth],v,h),x=g[0],E=g[1],w=m?r:"valid",C=m?l:nS(l,v,x),S=(t==="avg"?function(){return QS(C,e,o,1,w)}:function(){return YS(C,e,o,1,w)})(),_=m?S:$C(S,v,E);return c?_.as3D(_.shape[1],_.shape[2],_.shape[3]):_}}),ZL=H({maxPool3d_:function(n,e,t,r,a,o,u){o===void 0&&(o="NDHWC");var l=I(n,"x","maxPool3d"),c=l,h=!1;l.rank===4&&(h=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),u==null&&(u=[1,1,1]),F(c.rank===5,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+c.rank+"."})),F(o==="NDHWC",(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),F(kn(t,u),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+u+"'"})),a!=null&&F(De(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var d=Mf(c.shape,e,t,u,r,a,o),v=W.runKernelFunc((function(m,g){var x=m.maxPool3d(c,d);return g([c,x]),x}),{x:c},(function(m,g){var x=g[0],E=g[1];return{x:function(){return(function(w,C,S,_,T,A,D,N){var k=I(w,"dy","maxPool3dBackprop"),O=I(C,"input","maxPool3dBackprop"),B=I(S,"output","maxPool3dBackprop"),V=k,U=O,it=B,et=!1;O.rank===4&&(et=!0,V=k.as5D(1,k.shape[0],k.shape[1],k.shape[2],k.shape[3]),U=O.as5D(1,O.shape[0],O.shape[1],O.shape[2],O.shape[3]),it=B.as5D(1,B.shape[0],B.shape[1],B.shape[2],B.shape[3])),F(V.rank===5,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+V.rank+"."})),F(U.rank===5,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+U.rank+"."})),F(it.rank===5,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+it.rank+"."})),A==null&&(A=[1,1,1]),F(kn(T,A),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+T+" and dilations '"+A+"'"})),N!=null&&F(De(D),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+N+" but got pad "+D+"."}));var tt=Mf(U.shape,_,T,A,D,N),P=W.runKernelFunc((function(G){return G.maxPool3dBackprop(V,U,it,tt)}),{dy5D:V,input5D:U});return et?P.as4D(P.shape[1],P.shape[2],P.shape[3],P.shape[4]):P})(m,x,E,e,t,u,r,a)}}}));return h?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}}),JL=H({avgPool3d_:function(n,e,t,r,a,o,u){o===void 0&&(o="NDHWC");var l=I(n,"x","avgPool3d","float32"),c=l,h=!1;l.rank===4&&(h=!0,c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),u==null&&(u=[1,1,1]),F(c.rank===5,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+c.rank+"."})),F(o==="NDHWC",(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),F(kn(t,u),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+t+" and dilations '"+u+"'"})),a!=null&&F(De(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var d=Mf(c.shape,e,t,u,r,a,o),v=W.runKernelFunc((function(m){return m.avgPool3d(c,d)}),{x:c},(function(m){return{x:function(){return(function(g,x,E,w,C,S,_){var T=I(g,"dy","avgPool3dBackprop"),A=I(x,"input","avgPool3dBackprop"),D=T,N=A,k=!1;A.rank===4&&(k=!0,D=T.as5D(1,T.shape[0],T.shape[1],T.shape[2],T.shape[3]),N=A.as5D(1,A.shape[0],A.shape[1],A.shape[2],A.shape[3])),F(D.rank===5,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+D.rank+"."})),F(N.rank===5,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+N.rank+"."})),C==null&&(C=[1,1,1]),F(kn(w,C),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+w+" and dilations '"+C+"'"})),_!=null&&F(De(S),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+_+" but got pad "+S+"."}));var O=Mf(N.shape,E,w,C,S,_),B=W.runKernelFunc((function(V){return V.avgPool3dBackprop(D,N,O)}),{dy5D:D,input5D:N});return k?B.as4D(B.shape[1],B.shape[2],B.shape[3],B.shape[4]):B})(m,c,e,t,u,r,a)}}}));return v=v.cast(c.dtype),h?v.as4D(v.shape[1],v.shape[2],v.shape[3],v.shape[4]):v}}),Kr=H({slice_:function(n,e,t){var r,a,o=I(n,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(o.rank-1).fill(0)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(0)):e.slice()).forEach((function(c){F(c!==-1,(function(){return"slice() does not support negative begin indexing."}))})),a=(a=t==null?new Array(o.rank).fill(-1):typeof t=="number"?[t].concat(new Array(o.rank-1).fill(-1)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(-1)):t).map((function(c,h){return c>=0?c:(F(c===-1,(function(){return"Negative size values should be exactly -1 but got "+c+" for the slice() size at index "+h+"."})),o.shape[h]-r[h])})),TI(o,r,a);var u=o.shape,l={begin:r,size:a};return W.runKernelFunc((function(c){return c.slice(o,r,a)}),{x:o},(function(c){for(var h=[],d=0;d<c.rank;d++)h.push([r[d],u[d]-r[d]-a[d]]);return{x:function(){return c.pad(h)}}}),"Slice",l)}}),$L=H({slice1d_:function(n,e,t){var r=I(n,"x","slice1d");return F(r.rank===1,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),Kr(r,[e],[t])}}),tP=H({slice2d_:function(n,e,t){var r=I(n,"x","slice2d");return F(r.rank===2,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),Kr(r,e,t)}}),ZS=H({slice3d_:function(n,e,t){var r=I(n,"x","slice3d");return F(r.rank===3,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),Kr(r,e,t)}}),eP=H({slice4d_:function(n,e,t){var r=I(n,"x","slice4d");return F(r.rank===4,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),Kr(r,e,t)}});function JS(n,e,t,r,a){return e.rank<t.rank&&(e=e.reshape(On(e.shape,r))),n.rank<t.rank&&(n=n.reshape(On(n.shape,r))),{x:function(){var o=n.mul(t.equal(e).cast(n.dtype));return a==null?o:o.transpose(a)}}}var nP=H({all_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=I(n,"x","all","bool"),a=je(e,r.shape),o=a,u=Yr(o,r.rank);u!=null&&(r=r.transpose(u),o=Qr(o.length,r.rank));var l=W.runKernelFunc((function(h){return h.all(r,o)}),{$x:r});if(t){var c=On(l.shape,a);return l.reshape(c)}return l}}),rP=H({any_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=I(n,"x","any","bool"),a=je(e,r.shape),o=a,u=Yr(o,r.rank);u!=null&&(r=r.transpose(u),o=Qr(o.length,r.rank));var l=W.runKernelFunc((function(h){return h.any(r,o)}),{$x:r});if(t){var c=On(l.shape,a);return l.reshape(c)}return l}}),aP=H({argMax_:function(n,e){e===void 0&&(e=0);var t=I(n,"x","argMax");e==null&&(e=0);var r=je(e,t.shape),a=Yr(r,t.rank);a!=null&&(t=t.transpose(a),r=Qr(r.length,t.rank));var o={axis:r[0]},u=[t];return W.runKernelFunc((function(l,c){var h=l.argMax(t,r[0]);return c([t]),h}),{x:t},(function(l,c){var h=c[0];return{x:function(){return Yt(h)}}}),"ArgMax",o,u)}}),iP=H({argMin_:function(n,e){e===void 0&&(e=0);var t=I(n,"x","argMin");e==null&&(e=0);var r=je(e,t.shape),a=Yr(r,t.rank);return a!=null&&(t=t.transpose(a),r=Qr(r.length,t.rank)),W.runKernelFunc((function(o,u){var l=o.argMin(t,r[0]);return u([t]),l}),{$x:t},(function(o,u){var l=u[0];return{$x:function(){return Yt(l)}}}))}}),oP=H({logSumExp_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=I(n,"x","logSumExp"),a=je(e,r.shape),o=r.max(a,!0),u=r.sub(o).exp().sum(a).log(),l=o.reshape(u.shape).add(u);if(t){var c=On(l.shape,a);return l.reshape(c)}return l}}),$f=H({max_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=I(n,"x","max"),a=r,o=je(e,r.shape),u=o,l=Yr(u,r.rank);l!=null&&(r=r.transpose(l),u=Qr(u.length,r.rank));var c=[r],h=W.runKernelFunc((function(v,m){var g=v.max(r,u);return m([a,g]),g}),{x:r},(function(v,m){return JS(v,m[1],m[0],o,l)}),"Max",{axes:u},c,[!0]);if(t){var d=On(h.shape,o);h=h.reshape(d)}return h}}),sP=H({mean_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=I(n,"x","mean"),a=je(e,r.shape),o=St(ln(r.shape,a)[1]);return Xf((function(u){var l=vt(o);return{value:(l.dtype===u.dtype?u:u.cast(l.dtype)).div(l).sum(e,t),gradFunc:function(c){var h=u.shape.slice();return a.forEach((function(d){h[d]=1})),c.reshape(h).mul(As(u.shape,"float32")).div(o)}}}))(r)}}),uP=H({min_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=I(n,"x","min"),a=r,o=je(e,r.shape),u=o,l=Yr(u,r.rank);l!=null&&(r=r.transpose(l),u=Qr(u.length,r.rank));var c=[r],h=W.runKernelFunc((function(v,m){var g=v.min(r,u);return m([a,g]),g}),{x:r},(function(v,m){return JS(v,m[1],m[0],o,l)}),"Min",{axes:u},c,[!0]);if(t){var d=On(h.shape,o);h=h.reshape(d)}return h}}),lP=H({moments_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=je(e,(n=I(n,"x","moments")).shape),a=n.mean(r,t),o=a.shape;t||(o=On(a.shape,r));var u=n.toFloat().sub(a.reshape(o)).square();return{mean:a,variance:u.mean(r,t)}}}),$S=H({sum_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=I(n,"x","sum");r.dtype==="bool"&&(r=r.toInt());var a=je(e,r.shape);return Xf((function(o){var u=Yr(a,o.rank),l=a,c=o;u!=null&&(c=o.transpose(u),l=Qr(l.length,o.rank));var h=function(g){var x=o.shape.slice();return a.forEach((function(E){x[E]=1})),g.reshape(x).mul(As(o.shape,"float32"))},d={axes:l},v=W.runKernelFunc((function(g){return g.sum(c,l)}),{x:c},(function(g){return{x:function(){return h(g)}}}),"Sum",d);if(t){var m=On(v.shape,a);v=v.reshape(m)}return{value:v,gradFunc:h}}))(r)}}),cP=H({prod_:function(n,e,t){e===void 0&&(e=null),t===void 0&&(t=!1);var r=I(n,"x","prod");r.dtype==="bool"&&(r=r.toInt());var a=je(e,r.shape),o=Yr(a,r.rank),u=a,l=r;o!=null&&(l=r.transpose(o),u=Qr(u.length,r.rank));var c=W.runKernelFunc((function(d){return d.prod(l,u)}),{permutedX:l});if(t){var h=On(c.shape,a);c=c.reshape(h)}return c}}),t_=H({elu_:function(n){var e=I(n,"x","elu");return W.runKernelFunc((function(t,r){var a=t.elu(e);return r([a]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){return W.runKernelFunc((function(o){return o.eluDer(t,a)}),{dy:t,y:a})}}}))}}),fP=H({leakyRelu_:function(n,e){e===void 0&&(e=.2);var t=I(n,"x","leakyRelu");return fg(vt(e).mul(t),t)}}),e_=H({prelu_:function(n,e){var t=I(n,"x","prelu"),r=I(e,"alpha","prelu");return W.runKernelFunc((function(a,o){var u=a.prelu(t,r);return o([t,r]),u}),{x:t,alpha:r},(function(a,o){var u=o[0],l=o[1],c=u.greater(0);return{x:function(){return Zi(c,a,a.mul(l))},alpha:function(){var h=Zi(c,Yt(a),a.mul(u)),d=He(l.shape,a.shape);return d.length>0&&(h=h.sum(d)),h.reshape(l.shape)}}}),"Prelu")}}),xe=H({relu_:function(n){var e=I(n,"x","relu");return e.dtype==="bool"?e.toInt():W.runKernelFunc((function(t,r){var a=t.relu(e);return r([e]),a}),{x:e},(function(t,r){var a=r[0];return{x:function(){return t.mulStrict(a.step().toFloat())}}}),"Relu")}}),n_=H({relu6_:function(n){var e=I(n,"x","relu6");return e.dtype==="bool"?e.toInt():W.runKernelFunc((function(t,r){var a=t.relu6(e);return r([e]),a}),{x:e},(function(t,r){var a=r[0],o=a.lessEqual(6).mul(a.step());return{x:function(){return t.mulStrict(o.toFloat())}}}),"Relu6")}}),hP=H({selu_:function(n){var e=I(n,"x","selu");return W.runKernelFunc((function(t,r){var a=t.selu(e);return r([e]),a}),{$x:e},(function(t,r){var a=r[0];return{$x:function(){var o=a.greater(vt(0)),u=vt(ug),l=vt(lg),c=t.mul(l),h=t.mul(u).mul(a.toFloat().exp());return Zi(o,c,h)}}}))}}),di=H({transpose_:function(n,e){var t=I(n,"x","transpose");if(e==null&&(e=t.shape.map((function(a,o){return o})).reverse()),F(t.rank===e.length,(function(){return"Error in transpose: rank of input "+t.rank+" must match length of perm "+e+"."})),e.forEach((function(a){F(a>=0&&a<t.rank,(function(){return"All entries in 'perm' must be between 0 and "+(t.rank-1)+" but got "+e}))})),t.rank<=1)return t.clone();var r={perm:e};return W.runKernelFunc((function(a){return a.transpose(t,e)}),{x:t},(function(a){var o=Jm(e);return{x:function(){return a.transpose(o)}}}),"Transpose",r)}}),dP=H({localResponseNormalization_:function(n,e,t,r,a){e===void 0&&(e=5),t===void 0&&(t=1),r===void 0&&(r=1),a===void 0&&(a=.5);var o=I(n,"x","localResponseNormalization");F(o.rank===4||o.rank===3,(function(){return`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank `+o.rank+"."})),F(De(e),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."}));var u=o,l=!1;o.rank===3&&(l=!0,u=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var c=W.runKernelFunc((function(h,d){var v=h.localResponseNormalization4D(u,e,t,r,a);return d([u,v]),v}),{x4D:u},(function(h,d){var v=d[0],m=d[1];return{x4D:function(){return W.runKernelFunc((function(g){return g.LRNGrad(h,v,m,e,t,r,a)}),{})}}}));return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),r_=H({norm_:function(n,e,t,r){e===void 0&&(e="euclidean"),t===void 0&&(t=null),r===void 0&&(r=!1);var a=(function l(c,h,d){if(d===void 0&&(d=null),c.rank===0)return c.abs();if(c.rank!==1&&d===null)return l(c.reshape([-1]),h,d);if(c.rank===1||typeof d=="number"||Array.isArray(d)&&d.length===1){if(h===1)return c.abs().sum(d);if(h===1/0)return c.abs().max(d);if(h===-1/0)return c.abs().min(d);if(h==="euclidean"||h===2)return c.abs().pow(vt(2,"int32")).sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+h)}if(Array.isArray(d)&&d.length===2){if(h===1)return c.abs().sum(d[0]).max(d[1]-1);if(h===1/0)return c.abs().sum(d[1]).max(d[0]);if(h===-1/0)return c.abs().sum(d[1]).min(d[0]);if(h==="fro"||h==="euclidean")return c.square().sum(d).sqrt();throw new Error("Error in norm: invalid ord value: "+h)}throw new Error("Error in norm: invalid axis: "+d)})(n=I(n,"x","norm"),e,t),o=a.shape;if(r){var u=je(t,n.shape);o=On(a.shape,u)}return a.reshape(o)}}),pP=H({basicLSTMCell_:function(n,e,t,r,a,o){var u=I(n,"forgetBias","basicLSTMCell"),l=I(e,"lstmKernel","basicLSTMCell"),c=I(t,"lstmBias","basicLSTMCell"),h=I(r,"data","basicLSTMCell"),d=I(a,"c","basicLSTMCell"),v=I(o,"h","basicLSTMCell"),m=h.concat(v,1).matMul(l).add(c),g=m.shape[0],x=m.shape[1]/4,E=[g,x],w=m.slice([0,0],E),C=m.slice([0,x],E),S=m.slice([0,2*x],E),_=m.slice([0,3*x],E),T=w.sigmoid().mulStrict(C.tanh()).addStrict(d.mulStrict(u.add(S).sigmoid())),A=T.tanh().mulStrict(_.sigmoid());return[T,A]}}),vP=H({multiRNNCell_:function(n,e,t,r){for(var a=I(e,"data","multiRNNCell"),o=Sf(t,"c","multiRNNCell"),u=Sf(r,"h","multiRNNCell"),l=a,c=[],h=0;h<n.length;h++){var d=n[h](l,o[h],u[h]);c.push(d[0]),c.push(d[1]),l=d[1]}var v=[],m=[];for(h=0;h<c.length;h+=2)v.push(c[h]),m.push(c[h+1]);return[v,m]}}),mP=H({movingAverage_:function(n,e,t,r,a){a===void 0&&(a=!0);var o=I(n,"v","movingAverage"),u=I(e,"x","movingAverage"),l=I(t,"decay","movingAverage");dk(o,u),F(Xe(o.shape,u.shape),(function(){return"Shape mismatch in v and x"}));var c=vt(1),h=c.sub(l),d=u.sub(o).mul(h);if(a){F(r!=null,(function(){return"When using zeroDebias: true, step is required."}));var v=I(r,"step","movingAverage");d=d.div(c.sub(If(l,v)))}return o.add(d)}}),gP=H({stridedSlice_:function(n,e,t,r,a,o,u,l,c){if(a===void 0&&(a=0),o===void 0&&(o=0),u===void 0&&(u=0),l===void 0&&(l=0),c===void 0&&(c=0),r==null&&(r=new Array(e.length)),u!==0)throw new Error("ellipsis mask is not yet supported");var h=I(n,"x","stridedSlice"),d=I2(l),v=h.shape.slice();d.forEach((function(w){e[w]=0,t[w]=1,v.splice(w,0,1)})),h=h.reshape(v);for(var m=0;m<h.rank;m++)e[m]=RI(a,e,r,h.shape,m),t[m]=AI(o,t,r,h.shape,m),r[m]=r[m]||1;var g=I2(c);g.forEach((function(w){t[w]=e[w]+1,r[w]=1}));var x=ng(e,t,r),E=x.filter((function(w,C){return g.indexOf(C)===-1}));return r.every((function(w){return w===1}))?Kr(h,e,x).reshape(E):W.runKernelFunc((function(w){return w.stridedSlice(h,e,t,r)}),{$x:h}).reshape(E)}}),yP=H({topk_:function(n,e,t){e===void 0&&(e=1),t===void 0&&(t=!0);var r=I(n,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var a=r.shape[r.shape.length-1];if(e>a)throw new Error("'k' passed to topk() must be <= the last dimension ("+a+") but got "+e);var o=W.runKernelFunc((function(u){return u.topk(r,e,t)}),{$x:r});return{values:o[0],indices:o[1]}}}),bP=H({scatterND_:function(n,e,t){var r=I(n,"indices","scatterND","int32"),a=I(e,"updates","scatterND");return _I(a,r,t),W.runKernelFunc((function(o){return o.scatterND(r,a,t)}),{indices:r,updates:a},null,"ScatterNd",{shape:t})}}),vg=H({fft_:function(n){F(n.dtype==="complex64",(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+n.dtype+"."}));var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return W.runKernelFunc((function(a){return a.fft(r)}),{input:n}).reshape(n.shape)}}),Bf=H({ifft_:function(n){F(n.dtype==="complex64",(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+n.dtype+"."}));var e=n.shape[n.shape.length-1],t=n.size/e,r=n.as2D(t,e);return W.runKernelFunc((function(a){return a.ifft(r)}),{input:n}).reshape(n.shape)}}),mg=H({rfft_:function(n,e){F(n.dtype==="float32",(function(){return"The dtype for rfft() must be real value but got "+n.dtype}));var t,r=n.shape[n.shape.length-1],a=n.size/r;if(e!=null&&e<r){var o=n.shape.map((function(C){return 0})),u=n.shape.map((function(C){return C}));u[n.shape.length-1]=e,t=n.slice(o,u),r=e}else if(e!=null&&e>r){var l=n.shape.map((function(C){return C}));l[n.shape.length-1]=e-r,t=n.concat(ve(l),n.shape.length-1),r=e}else t=n;var c=t.zerosLike(),h=an(t,c).as2D(a,r),d=vg(h),v=Math.floor(r/2)+1,m=cr(d),g=Ur(d),x=m.split([v,r-v],m.shape.length-1),E=g.split([v,r-v],g.shape.length-1),w=t.shape.slice();return w[t.shape.length-1]=v,an(x[0],E[0]).reshape(w)}}),a_=H({irfft_:function(n){var e=n.shape[n.shape.length-1],t=n.size/e;if(e<=2){var r=n.as2D(t,e),a=Bf(r);return cr(a)}var o=[t,2*(e-1)],u=cr(n).as2D(t,e),l=Ur(n).as2D(t,e),c=u.slice([0,1],[t,e-2]).reverse(1),h=l.slice([0,1],[t,e-2]).reverse(1).mul(vt(-1)),d=u.concat(c,1),v=l.concat(h,1);return r=an(d,v).as2D(o[0],o[1]),a=Bf(r),cr(a)}}),xP=Object.freeze({fft:vg,ifft:Bf,rfft:mg,irfft:a_}),wP=H({sparseToDense_:function(n,e,t,r){r===void 0&&(r=0);var a=I(n,"sparseIndices","sparseToDense","int32"),o=I(e,"sparseValues","sparseToDense"),u=I(r,"defaultValue","sparseToDense",o.dtype);return(function(l,c,h,d){if(l.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+l.dtype+".");if(l.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+l.shape+".");var v=l.rank>0?l.shape[0]:1,m=l.rank>1?l.shape[1]:1;if(h.length!==m)throw new Error("outputShape has incorrect number of elements:, "+h.length+", should be: "+m+".");var g=c.size;if(c.rank!==0&&(c.rank!==1||g!==v))throw new Error("sparseValues has incorrect shape "+c.shape+", should be [] or ["+v+"]");if(c.dtype!==d.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")})(a,o,t,u),W.runKernelFunc((function(l){return l.sparseToDense(a,o,t,u)}),{$sparseIndices:a,$sparseValues:o,$defaultValue:u})}}),EP=H({gatherND_:function(n,e){var t=I(e,"indices","gatherND","int32"),r=I(n,"x","gatherND");return W.runKernelFunc((function(a){return a.gatherND(r,t)}),{x:r,indices:t},null,"GatherNd")}}),CP=H({diag_:function(n){var e=I(n,"x","diag").flatten(),t=n.shape.concat(n.shape);return W.runKernelFunc((function(r){return r.diag(e)}),{$x:e}).reshape(t)}}),SP=H({dropout_:function(n,e,t,r){var a=I(n,"x","dropout");if(F(a.dtype==="float32",(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+a.dtype+" tensor instead."})),F(e>=0&&e<1,(function(){return"rate must be a float in the range [0, 1), but got "+e+"."})),e===0)return n instanceof ye?a.clone():a;var o=(function(c,h){if(h==null)return c.shape.slice();if(Xe(c.shape,h))return h;if(c.shape.length===h.length){for(var d=[],v=0;v<c.shape.length;v++)h[v]==null&&c.shape[v]!=null?d.push(c.shape[v]):d.push(h[v]);return d}return h})(a,t),u=1-e,l=eS(o,0,1,"float32",r).add(u).floor().div(u);return a.mul(l)}});function i_(n,e,t){for(var r=1-n%2,a=new Float32Array(n),o=0;o<n;++o){var u=2*Math.PI*o/(n+r-1);a[o]=e-t*Math.cos(u)}return Fe(a,"float32")}var gg=H({hannWindow_:function(n){return i_(n,.5,.5)}}),o_=H({hammingWindow_:function(n){return i_(n,.54,.46)}}),yg=H({frame_:function(n,e,t,r,a){r===void 0&&(r=!1),a===void 0&&(a=0);for(var o=0,u=[];o+e<=n.size;)u.push(Kr(n,o,e)),o+=t;if(r)for(;o<n.size;){var l=o+e-n.size,c=Ue([Kr(n,o,e-l),qr([l],a)]);u.push(c),o+=t}return u.length===0?si([],[0,e]):Ue(u).as2D(u.length,e)}}),s_=H({stft_:function(n,e,t,r,a){var o;a===void 0&&(a=gg),r==null&&(o=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var u=yg(n,e,t),l=vn(u,a(e)),c=[],h=0;h<u.shape[0];h++)c.push(mg(l.slice([h,0],[1,e]),r));return Ue(c)}}),_P=Object.freeze({hannWindow:gg,hammingWindow:o_,frame:yg,stft:s_}),hn,TP=function(n,e,t){return t===void 0&&(t=1),xt(this,void 0,void 0,(function(){var r,a,o,u,l,c,h,d,v,m,g,x,E,w;return wt(this,(function(C){switch(C.label){case 0:return r=I(n,"predictions","inTopK"),a=I(e,"targets","inTopK"),F(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),F(r.rank-1===a.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+a.rank})),ne(r.shape.slice(0,r.shape.length-1),a.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],F(t>0&&t<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+t})),[4,r.data()];case 1:return u=C.sent(),[4,a.data()];case 2:for(l=C.sent(),c=[u.length/o,o],d=c[1],v=ju("bool",h=c[0]),m=0;m<h;m++){for(g=m*d,x=u.subarray(g,g+d),E=[],w=0;w<x.length;w++)E.push({value:x[w],index:w});for(E.sort((function(S,_){return _.value-S.value})),v[m]=0,w=0;w<t;w++)if(E[w].index===l[m]){v[m]=1;break}}return n!==r&&r.dispose(),e!==a&&a.dispose(),[2,sn(v,a.shape,"bool")]}}))}))};(function(n){n[n.NONE=0]="NONE",n[n.MEAN=1]="MEAN",n[n.SUM=2]="SUM",n[n.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(hn||(hn={}));var RP=H({absoluteDifference_:function(n,e,t,r){r===void 0&&(r=hn.SUM_BY_NONZERO_WEIGHTS);var a=I(n,"labels","absoluteDifference"),o=I(e,"predictions","absoluteDifference"),u=null;t!=null&&(u=I(t,"weights","absoluteDifference")),ne(a.shape,o.shape,"Error in absoluteDifference: ");var l=a.sub(o).abs();return Ra(l,u,r)}}),Ra=H({computeWeightedLoss_:function(n,e,t){t===void 0&&(t=hn.SUM_BY_NONZERO_WEIGHTS);var r=I(n,"losses","computeWeightedLoss"),a=null;e!=null&&(a=I(e,"weights","computeWeightedLoss"));var o=a==null?r:r.mul(a);if(t===hn.NONE)return o;if(t===hn.SUM)return o.sum();if(t===hn.MEAN){if(a==null)return o.mean();var u=r.size/a.size,l=o.sum().div(a.sum());return u>1?l.div(vt(u)):l}if(t===hn.SUM_BY_NONZERO_WEIGHTS){if(a==null)return o.sum().div(vt(r.size));var c=a.mul(As(r.shape)).notEqual(vt(0)).sum().toFloat();return o.sum().div(c)}throw Error("Unknown reduction: "+t)}}),AP=H({cosineDistance_:function(n,e,t,r,a){a===void 0&&(a=hn.SUM_BY_NONZERO_WEIGHTS);var o=I(n,"labels","cosineDistance"),u=I(e,"predictions","cosineDistance"),l=null;r!=null&&(l=I(r,"weights","cosineDistance")),ne(o.shape,u.shape,"Error in cosineDistance: ");var c=vt(1).sub(o.mul(u).sum(t,!0));return Ra(c,l,a)}}),DP=H({hingeLoss_:function(n,e,t,r){r===void 0&&(r=hn.SUM_BY_NONZERO_WEIGHTS);var a=I(n,"labels","hingeLoss"),o=I(e,"predictions","hingeLoss"),u=null;t!=null&&(u=I(t,"weights","hingeLoss")),ne(a.shape,o.shape,"Error in hingeLoss: ");var l=vt(1);a=vt(2).mul(a).sub(l);var c=l.sub(a.mul(o)).relu();return Ra(c,u,r)}}),MP=H({huberLoss_:function(n,e,t,r,a){r===void 0&&(r=1),a===void 0&&(a=hn.SUM_BY_NONZERO_WEIGHTS);var o=I(n,"labels","huberLoss"),u=I(e,"predictions","huberLoss"),l=null;t!=null&&(l=I(t,"weights","huberLoss")),ne(o.shape,u.shape,"Error in huberLoss: ");var c=vt(r),h=u.sub(o).abs(),d=US(h,c),v=h.sub(d),m=vt(.5).mul(d.square()).add(c.mul(v));return Ra(m,l,a)}}),NP=H({logLoss_:function(n,e,t,r,a){r===void 0&&(r=1e-7),a===void 0&&(a=hn.SUM_BY_NONZERO_WEIGHTS);var o=I(n,"labels","logLoss"),u=I(e,"predictions","logLoss"),l=null;t!=null&&(l=I(t,"weights","logLoss")),ne(o.shape,u.shape,"Error in logLoss: ");var c=vt(1),h=vt(r),d=o.mul(u.add(h).log()).neg().sub(c.sub(o).mul(c.sub(u).add(h).log()));return Ra(d,l,a)}}),OP=H({meanSquaredError_:function(n,e,t,r){r===void 0&&(r=hn.SUM_BY_NONZERO_WEIGHTS);var a=I(n,"labels","meanSquaredError"),o=I(e,"predictions","meanSquaredError"),u=null;t!=null&&(u=I(t,"weights","meanSquaredError")),ne(a.shape,o.shape,"Error in meanSquaredError: ");var l=a.squaredDifference(o);return Ra(l,u,r)}}),kP=H({sigmoidCrossEntropy_:function(n,e,t,r,a){r===void 0&&(r=0),a===void 0&&(a=hn.SUM_BY_NONZERO_WEIGHTS);var o=I(n,"multiClassLabels","sigmoidCrossEntropy"),u=I(e,"logits","sigmoidCrossEntropy"),l=null;if(t!=null&&(l=I(t,"weights","sigmoidCrossEntropy")),ne(o.shape,u.shape,"Error in sigmoidCrossEntropy: "),r>0){var c=vt(r),h=vt(1),d=vt(.5);o=o.mul(h.sub(c)).add(d.mul(c))}var v=(function(m,g){var x=I(m,"labels","sigmoidCrossEntropyWithLogits"),E=I(g,"logits","sigmoidCrossEntropyWithLogits");ne(x.shape,E.shape,"Error in sigmoidCrossEntropyWithLogits: ");var w=E.relu(),C=E.mul(x),S=E.abs().neg().exp().log1p();return w.sub(C).add(S)})(o,u);return Ra(v,l,a)}}),IP=H({softmaxCrossEntropy_:function(n,e,t,r,a){r===void 0&&(r=0),a===void 0&&(a=hn.SUM_BY_NONZERO_WEIGHTS);var o=I(n,"onehotLabels","softmaxCrossEntropy"),u=I(e,"logits","softmaxCrossEntropy"),l=null;if(t!=null&&(l=I(t,"weights","softmaxCrossEntropy")),ne(o.shape,u.shape,"Error in softmaxCrossEntropy: "),r>0){var c=vt(r),h=vt(1),d=vt(o.shape[1]);o=o.mul(h.sub(c)).add(c.div(d))}var v=(function(m,g,x){if(x===void 0&&(x=-1),x===-1&&(x=g.rank-1),x!==g.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+g.rank+" and dim was "+x);return Xf((function(E,w,C){var S=w.logSumExp([x],!0),_=w.toFloat().sub(S);return C([E,_]),{value:_.mul(E).neg().sum([x]),gradFunc:function(T,A){var D=A[0],N=A[1],k=On(T.shape,[x]);return[T.reshape(k).mul(D.toFloat().sub(N.exp())),T.reshape(k).mul(N.exp().sub(D.toFloat()))]}}}))(m,g)})(o,u);return Ra(v,l,a)}}),BP=Object.freeze({get Reduction(){return hn},absoluteDifference:RP,computeWeightedLoss:Ra,cosineDistance:AP,hingeLoss:DP,huberLoss:MP,logLoss:NP,meanSquaredError:OP,sigmoidCrossEntropy:kP,softmaxCrossEntropy:IP});function nw(n,e){return e===void 0&&(e=!1),W.tidy((function(){if(n.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+n.shape.length+"D Tensor.");for(var t=n.shape[0],r=n.shape[1],a=tS(t),o=n.clone(),u=si([[1]],[1,1]),l=u.clone(),c=t>=r?r:t,h=function(v){var m,g=o,x=l,E=a;m=W.tidy((function(){var w=o.slice([v,v],[t-v,1]),C=w.norm(),S=o.slice([v,v],[1,1]),_=si([[-1]]).where(S.greater(0),si([[1]])),T=S.sub(_.mul(C)),A=w.div(T);l=A.shape[0]===1?u.clone():u.concat(A.slice([1,0],[A.shape[0]-1,A.shape[1]]),0);var D=_.matMul(T).div(C).neg(),N=o.slice([v,0],[t-v,r]),k=D.mul(l);if(v===0)o=N.sub(k.matMul(l.transpose().matMul(N)));else{var O=N.sub(k.matMul(l.transpose().matMul(N)));o=o.slice([0,0],[v,r]).concat(O,0)}var B=a.slice([0,v],[t,a.shape[1]-v]);if(v===0)a=B.sub(B.matMul(l).matMul(k.transpose()));else{var V=B.sub(B.matMul(l).matMul(k.transpose()));a=a.slice([0,0],[t,v]).concat(V,1)}return[l,o,a]})),l=m[0],o=m[1],a=m[2],Nn([g,x,E])},d=0;d<c;++d)h(d);return!e&&t>r&&(a=a.slice([0,0],[t,r]),o=o.slice([0,0],[r,r])),[a,o]}))}var FP=H({bandPart_:function(n,e,t){if(e%1!=0)throw new Error("bandPart(): numLower must be an integer, got "+e+".");if(t%1!=0)throw new Error("bandPart(): numUpper must be an integer, got "+t+".");var r=I(n,"a","bandPart");if(r.rank<2)throw new Error("bandPart(): Rank must be at least 2, got "+r.rank+".");var a=r.shape,o=r.shape.slice(-2),u=o[0],l=o[1];if(!(e<=u))throw new Error("bandPart(): numLower ("+e+") must not be greater than the number of rows ("+u+").");if(!(t<=l))throw new Error("bandPart(): numUpper ("+t+") must not be greater than the number of columns ("+l+").");e<0&&(e=u),t<0&&(t=l);var c=_f(0,u,1,"int32").reshape([-1,1]),h=_f(0,l,1,"int32"),d=Ge(c,h),v=Qf(d.lessEqual(vt(+e,"int32")),d.greaterEqual(vt(-t,"int32"))),m=ve([u,l],r.dtype);return Yn(Ve(r.reshape([-1,u,l])).map((function(g){return Zi(v,g,m)}))).reshape(a)}}),LP=H({gramSchmidt_:function(n){var e;if(Array.isArray(n)){e=!1,F(n!=null&&n.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var t=n[0].shape[0],r=function(c){F(n[c].shape[0]===t,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+n[c].shape[0]+" vs. "+t+")"}))},a=1;a<n.length;++a)r(a)}else e=!0,n=tg(n,n.shape[0],0).map((function(c){return rS(c,[0])}));F(n.length<=n[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+n.length+") exceeds number of dimensions ("+n[0].shape[0]+")."}));var o=[],u=n,l=function(c){o.push(W.tidy((function(){var h=u[c];if(c>0)for(var d=0;d<c;++d){var v=$S(o[d].mulStrict(h)).mul(o[d]);h=h.sub(v)}return h.div(r_(h,"euclidean"))})))};for(a=0;a<n.length;++a)l(a);return e?Yn(o,0):o}}),PP=H({qr_:function(n,e){if(e===void 0&&(e=!1),n.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+n.rank);if(n.rank===2)return nw(n,e);var t=n.shape.slice(0,n.shape.length-2).reduce((function(u,l){return u*l})),r=Ve(n.reshape([t,n.shape[n.shape.length-2],n.shape[n.shape.length-1]]),0),a=[],o=[];return r.forEach((function(u){var l=nw(u,e),c=l[0],h=l[1];a.push(c),o.push(h)})),[Yn(a,0).reshape(n.shape),Yn(o,0).reshape(n.shape)]}}),zP=Object.freeze({bandPart:FP,gramSchmidt:LP,qr:PP});function th(n,e,t,r,a,o){r==null&&(r=.5),a==null&&(a=Number.NEGATIVE_INFINITY),o==null&&(o=0);var u=n.shape[0];return t=Math.min(t,u),F(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),F(n.rank===2,(function(){return"boxes must be a 2D tensor, but was of rank '"+n.rank+"'"})),F(n.shape[1]===4,(function(){return"boxes must have 4 columns, but 2nd dimension was "+n.shape[1]})),F(e.rank===1,(function(){return"scores must be a 1D tensor"})),F(e.shape[0]===u,(function(){return"scores has incompatible shape with boxes. Expected "+u+", but was "+e.shape[0]})),F(0<=o&&o<=1,(function(){return"softNmsSigma must be in [0, 1], but was '"+o+"'"})),{maxOutputSize:t,iouThreshold:r,scoreThreshold:a,softNmsSigma:o}}var UP=H({resizeBilinear_:function(n,e,t){t===void 0&&(t=!1);var r=I(n,"images","resizeBilinear");F(r.rank===3||r.rank===4,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),F(e.length===2,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."}));var a=r,o=!1;r.rank===3&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var u=e[0],l=e[1],c=W.runKernelFunc((function(h,d){return d([a]),h.resizeBilinear(a,u,l,t)}),{x:a},(function(h,d){return{x:function(){return W.runKernelFunc((function(v){return v.resizeBilinearBackprop(h,d[0],t)}),{})}}}),"ResizeBilinear",{alignCorners:t,newHeight:u,newWidth:l});return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),VP=H({resizeNearestNeighbor_:function(n,e,t){t===void 0&&(t=!1);var r=I(n,"images","resizeNearestNeighbor");F(r.rank===3||r.rank===4,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),F(e.length===2,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."})),F(r.dtype==="float32"||r.dtype==="int32",(function(){return"`images` must have `int32` or `float32` as dtype"}));var a=r,o=!1;r.rank===3&&(o=!0,a=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var u=e[0],l=e[1],c=W.runKernelFunc((function(h,d){return d([a]),h.resizeNearestNeighbor(a,u,l,t)}),{batchImages:a},(function(h,d){return{batchImages:function(){return W.runKernelFunc((function(v){return v.resizeNearestNeighborBackprop(h,d[0],t)}),{})}}}));return o?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}}),HP=H({nonMaxSuppression_:function(n,e,t,r,a){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY);var o=I(n,"boxes","nonMaxSuppression"),u=I(e,"scores","nonMaxSuppression"),l=th(o,u,t,r,a);t=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold;var c={maxOutputSize:t,iouThreshold:r,scoreThreshold:a};return W.runKernelFunc((function(h){return h.nonMaxSuppression(o,u,t,r,a)}),{boxes:o,scores:u},null,"NonMaxSuppressionV3",c)}}),GP=function(n,e,t,r,a){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),xt(this,void 0,void 0,(function(){var o,u,l,c,h,d,v;return wt(this,(function(m){switch(m.label){case 0:return o=I(n,"boxes","nonMaxSuppressionAsync"),u=I(e,"scores","nonMaxSuppressionAsync"),l=th(o,u,t,r,a),t=l.maxOutputSize,r=l.iouThreshold,a=l.scoreThreshold,[4,Promise.all([o.data(),u.data()])];case 1:return c=m.sent(),h=c[0],d=c[1],v=ag(h,d,t,r,a),o!==n&&o.dispose(),u!==e&&u.dispose(),[2,v]}}))}))},jP=H({nonMaxSuppressionWithScore_:function(n,e,t,r,a,o){r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),o===void 0&&(o=0);var u=I(n,"boxes","nonMaxSuppression"),l=I(e,"scores","nonMaxSuppression"),c=th(u,l,t,r,a,o),h={maxOutputSize:t=c.maxOutputSize,iouThreshold:r=c.iouThreshold,scoreThreshold:a=c.scoreThreshold,softNmsSigma:o=c.softNmsSigma},d=W.runKernel("NonMaxSuppressionV5",{boxes:u,scores:l},h);return{selectedIndices:d[0],selectedScores:d[1]}}}),WP=function(n,e,t,r,a,o){return r===void 0&&(r=.5),a===void 0&&(a=Number.NEGATIVE_INFINITY),o===void 0&&(o=0),xt(this,void 0,void 0,(function(){var u,l,c,h,d,v,m;return wt(this,(function(g){switch(g.label){case 0:return u=I(n,"boxes","nonMaxSuppressionAsync"),l=I(e,"scores","nonMaxSuppressionAsync"),c=th(u,l,t,r,a,o),t=c.maxOutputSize,r=c.iouThreshold,a=c.scoreThreshold,o=c.softNmsSigma,[4,Promise.all([u.data(),l.data()])];case 1:return h=g.sent(),d=h[0],v=h[1],m=ig(d,v,t,r,a,o),u!==n&&u.dispose(),l!==e&&l.dispose(),[2,m]}}))}))},qP=H({cropAndResize_:function(n,e,t,r,a,o){var u=I(n,"image","cropAndResize"),l=I(e,"boxes","cropAndResize","float32"),c=I(t,"boxInd","cropAndResize","int32");a=a||"bilinear",o=o||0;var h=l.shape[0];return F(u.rank===4,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+u.rank+"."})),F(l.rank===2&&l.shape[1]===4,(function(){return"Error in cropAndResize: boxes must be have size ["+h+",4] but had shape "+l.shape+"."})),F(c.rank===1&&c.shape[0]===h,(function(){return"Error in cropAndResize: boxInd must be have size ["+h+"] but had shape "+l.shape+"."})),F(r.length===2,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),F(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),F(a==="bilinear"||a==="nearest",(function(){return"method must be bilinear or nearest, but was "+a})),W.runKernelFunc((function(d,v){return d.cropAndResize(u,l,c,r,a,o)}),{images:u,boxes:l,boxInd:c},null,"CropAndResize",{method:a,extrapolationValue:o,cropSize:r})}}),bg=Object.freeze({resizeBilinear:UP,resizeNearestNeighbor:VP,nonMaxSuppression:HP,nonMaxSuppressionAsync:GP,nonMaxSuppressionWithScore:jP,nonMaxSuppressionWithScoreAsync:WP,cropAndResize:qP}),xg=function(n,e){return!(n>0)||e==="linear"},wg=function(n,e,t){if(t==null||t==="linear")return n;if(t==="relu")return n.mul(e.step());throw new Error("Gradient for activation "+t+" has not been implemented yet.")},Eg=function(n,e){var t=e,r=He(n.shape,e.shape);return r.length>0&&(t=t.sum(r)),t.reshape(n.shape)},Cg=function(n,e,t){if(e==="linear")return n;if(e==="relu")return xe(n);if(e==="elu")return t_(n);if(e==="relu6")return n_(n);if(e==="prelu")return e_(n,t);throw new Error("Unknown fused activation "+e+".")},KP=H({fusedMatMul_:function(n){var e,t=n.a,r=n.b,a=n.transposeA,o=a!==void 0&&a,u=n.transposeB,l=u!==void 0&&u,c=n.bias,h=n.activation,d=h===void 0?"linear":h,v=n.preluActivationWeights;if(xg(W.state.gradientDepth,d)===!1){var m=Jf(t,r,o,l);return c!=null&&(m=Vt(m,c)),Cg(m,d,v)}var g=I(t,"a","fused matMul"),x=I(r,"b","fused matMul");e=Ee(g,x),g=e[0],x=e[1];var E=o?g.shape[g.rank-2]:g.shape[g.rank-1],w=l?x.shape[x.rank-1]:x.shape[x.rank-2],C=o?g.shape[g.rank-1]:g.shape[g.rank-2],S=l?x.shape[x.rank-2]:x.shape[x.rank-1],_=g.shape.slice(0,-2),T=x.shape.slice(0,-2),A=St(_),D=St(T);F(g.rank>=2&&x.rank>=2&&g.rank===x.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+g.rank+" and "+x.rank+"."})),F(Xe(_,T),(function(){return"Error in fused matMul: outer dimensions ("+_+") and ("+T+") of Tensors with shapes "+g.shape+" and "+x.shape+" must match."})),F(E===w,(function(){return"Error in fused matMul: inner shapes ("+E+") and ("+w+") of Tensors with shapes "+g.shape+" and "+x.shape+" and transposeA="+o+" and transposeB="+l+" must match."}));var N,k,O=g.shape.slice(0,-2).concat([C,S]),B=o?g.as3D(A,E,C):g.as3D(A,C,E),V=l?x.as3D(D,S,w):x.as3D(D,w,S);c!=null&&jt(O,(N=Ee(N=I(c,"bias","fused matMul"),g)[0]).shape),v!=null&&(k=I(v,"prelu weights","fused matMul"));var U={a:B,b:V};c!=null&&(U.bias=N),v!=null&&(U.preluActivationWeights=k);var it=[B,V];return W.runKernelFunc((function(et,tt){var P=et.fusedBatchMatMul({a:B,b:V,transposeA:o,transposeB:l,bias:N,activation:d,preluActivationWeights:k});return tt([B,V,P]),P}),U,(function(et,tt){var P=tt[0],G=tt[1],q=tt[2],nt=wg(et,q,d),ot={};return c!=null&&(ot={bias:function(){return Eg(N,nt)}}),Object.assign(o||l?!o&&l?{a:function(){return nt.matMul(G,!1,!1)},b:function(){return nt.matMul(P,!0,!1)}}:o&&!l?{a:function(){return G.matMul(nt,!1,!0)},b:function(){return P.matMul(nt,!1,!1)}}:{a:function(){return G.matMul(nt,!0,!0)},b:function(){return nt.matMul(P,!0,!0)}}:{a:function(){return nt.matMul(G,!1,!0)},b:function(){return P.matMul(nt,!0,!1)}},ot)}),"_FusedMatMul",{transposeA:o,transposeB:l,activation:d},it,[!0]).reshape(O)}}),XP=H({fusedConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,a=n.pad,o=n.dataFormat,u=o===void 0?"NHWC":o,l=n.dilations,c=l===void 0?[1,1]:l,h=n.dimRoundingMode,d=n.bias,v=n.activation,m=v===void 0?"linear":v,g=n.preluActivationWeights;if(m=m||"linear",xg(W.state.gradientDepth,m)===!1){var x=vr(e,t,r,a,u,c,h);return d!=null&&(x=Vt(x,d)),Cg(x,m,g)}var E=I(e,"x","conv2d"),w=I(t,"filter","conv2d"),C=E,S=!1;E.rank===3&&(S=!0,C=E.as4D(1,E.shape[0],E.shape[1],E.shape[2])),F(C.rank===4,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+C.rank+"."})),F(w.rank===4,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+w.rank+"."})),h!=null&&F(De(a),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+h+" but got pad "+a+"."})),F(C.shape[3]===w.shape[2],(function(){return"Error in conv2d: depth of input ("+C.shape[3]+") must match input depth for filter "+w.shape[2]+"."})),F(kn(r,c),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"})),F(u==="NHWC",(function(){return"Error in conv2d: got dataFormat of "+u+" but only NHWC is currently supported."}));var _,T,A=ao(C.shape,w.shape,r,c,a,h);d!=null&&(_=Ee(_=I(d,"bias","fused conv2d"),E)[0],jt(A.outShape,_.shape)),g!=null&&(T=I(g,"prelu weights","fused conv2d"));var D={x:C,filter:w};d!=null&&(D.bias=_),g!=null&&(D.preluActivationWeights=T);var N=[w,C],k=W.runKernelFunc((function(O,B){var V=O.fusedConv2d({input:C,filter:w,convInfo:A,bias:_,activation:m,preluActivationWeights:T});return B([w,C,V]),V}),D,(function(O,B){var V=B,U=V[0],it=V[1],et=V[2],tt=wg(O,et,m);F(Es(c),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+c+"'"}));var P={};return d!=null&&(P={bias:function(){return Eg(_,tt)}}),Object.assign({x:function(){return qS(it.shape,tt,U,r,a)},filter:function(){return dg(it,tt,U.shape,r,a)}},P)}),"FusedConv2D",{convInfo:A,activation:m},N,[!0]);return S?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),YP=H({fusedDepthwiseConv2d_:function(n){var e=n.x,t=n.filter,r=n.strides,a=n.pad,o=n.dataFormat,u=o===void 0?"NHWC":o,l=n.dilations,c=l===void 0?[1,1]:l,h=n.dimRoundingMode,d=n.bias,v=n.activation,m=v===void 0?"linear":v,g=n.preluActivationWeights;if(xg(W.state.gradientDepth,m)===!1){var x=Zf(e,t,r,a,u,c,h);return d!=null&&(x=Vt(x,d)),Cg(x,m,g)}var E=I(e,"x","depthwiseConv2d"),w=I(t,"filter","depthwiseConv2d"),C=E,S=!1;E.rank===3&&(S=!0,C=E.as4D(1,E.shape[0],E.shape[1],E.shape[2])),F(C.rank===4,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+C.rank+"."})),F(w.rank===4,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+w.rank+"."})),F(C.shape[3]===w.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+C.shape[3]+") must match the inChannels dimension in filter "+w.shape[2]+"."})),c==null&&(c=[1,1]),F(kn(r,c),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+c+"'"})),h!=null&&F(De(a),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+h+" but got pad "+a+"."}));var _,T,A=ao(C.shape,w.shape,r,c,a,h,!0);d!=null&&(_=Ee(_=I(d,"bias","fused conv2d"),E)[0],jt(A.outShape,_.shape)),g!=null&&(T=I(g,"prelu weights","fused depthwiseConv2d"));var D={x:C,filter:w};d!=null&&(D.bias=_),g!=null&&(D.preluActivationWeights=T);var N=[w,C],k=W.runKernelFunc((function(O,B){var V=O.fusedDepthwiseConv2D({input:C,filter:w,convInfo:A,bias:_,activation:m,preluActivationWeights:T});return B([w,C,V]),V}),D,(function(O,B){F(Es(c),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+c+"'"}));var V=B[0],U=B[1],it=B[2],et=wg(O,it,m),tt={};return d!=null&&(tt={bias:function(){return Eg(_,et)}}),Object.assign({x:function(){return KS(U.shape,et,V,A)},filter:function(){return XS(U,et,V.shape,A)}},tt)}),"FusedDepthwiseConv2D",{convInfo:A,activation:m},N,[!0]);return S?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),QP=Object.freeze({matMul:KP,conv2d:XP,depthwiseConv2d:YP}),ZP=Object.freeze({image:bg,linalg:zP,losses:BP,spectral:xP,fused:QP,signal:_P,square:NF,squaredDifference:MS,conv1d:UL,conv2d:vr,conv3d:VL,depthwiseConv2d:Zf,separableConv2d:pg,conv2dTranspose:HL,conv3dTranspose:GL,op:H,batchNormalization2d:sL,batchNormalization3d:uL,batchNormalization4d:lL,batchNormalization:cL,batchNorm:FS,batchNorm2d:fL,batchNorm3d:hL,batchNorm4d:dL,booleanMaskAsync:zL,complex:an,real:cr,imag:Ur,concat:Ue,concat1d:Qk,concat2d:Zk,concat3d:Jk,concat4d:$k,split:tg,matMul:Jf,dot:jL,outerProduct:WL,reverse:dl,reverse1d:qL,reverse2d:KL,reverse3d:XL,reverse4d:YL,maxPool:Ke,avgPool:pl,pool:QL,maxPool3d:ZL,avgPool3d:JL,slice:Kr,slice1d:$L,slice2d:tP,slice3d:ZS,slice4d:eP,abs:OF,acos:kF,acosh:IF,asin:BF,asinh:FF,atan:LF,atanh:PF,ceil:zF,clipByValue:cg,cos:UF,cosh:VF,erf:HF,exp:rm,expm1:GF,floor:jF,log:WF,log1p:qF,logSigmoid:KF,neg:kf,reciprocal:XF,round:YF,rsqrt:NS,sigmoid:OS,sign:QF,isNaN:ZF,isInf:JF,isFinite:$F,sin:tL,sinh:eL,softplus:nL,sqrt:rL,step:aL,tan:iL,tanh:oL,all:nP,any:rP,argMax:aP,argMin:iP,logSumExp:oP,max:$f,mean:sP,min:uP,moments:lP,sum:$S,prod:cP,equal:VS,equalStrict:DL,greater:ML,greaterEqual:HS,greaterEqualStrict:NL,greaterStrict:OL,less:kL,lessEqual:IL,lessEqualStrict:BL,lessStrict:FL,notEqual:LL,notEqualStrict:PL,add:Vt,addN:mL,addStrict:gL,atan2:yL,div:Cr,divNoNan:bL,divStrict:xL,floorDiv:zS,maximum:fg,maximumStrict:wL,minimum:US,minimumStrict:EL,mod:CL,modStrict:SL,mul:vn,mulStrict:_L,pow:If,powStrict:TL,squaredDifferenceStrict:RL,sub:Ge,subStrict:AL,elu:t_,leakyRelu:fP,prelu:e_,relu:xe,relu6:n_,selu:hP,logicalAnd:Qf,logicalNot:pL,logicalOr:LS,logicalXor:vL,where:Zi,whereAsync:PS,buffer:Ft,print:uI,batchToSpaceND:$C,broadcastTo:lI,cast:cI,clone:fI,cumsum:hI,depthToSpace:dI,expandDims:lr,eye:tS,multinomial:pI,oneHot:$v,pad:ro,pad1d:vI,pad2d:mI,pad3d:gI,pad4d:yI,rand:bI,randomNormal:xI,randomGamma:wI,randomUniform:eS,reshape:Sr,spaceToBatchND:nS,squeeze:rS,stack:Yn,tile:fs,truncatedNormal:EI,unstack:Ve,setdiff1dAsync:CI,fill:qr,linspace:Yk,ones:As,range:_f,scalar:vt,tensor:sn,tensor1d:Fe,tensor2d:si,tensor3d:$m,tensor4d:An,tensor5d:qk,tensor6d:Kk,variable:Xk,zeros:ve,onesLike:JC,zerosLike:Yt,transpose:di,softmax:Ta,logSoftmax:MI,localResponseNormalization:dP,norm:r_,gather:hg,unsortedSegmentSum:GS,basicLSTMCell:pP,multiRNNCell:vP,movingAverage:mP,stridedSlice:gP,topk:yP,scatterND:bP,fft:vg,ifft:Bf,rfft:mg,irfft:a_,sparseToDense:wP,gatherND:EP,diag:CP,dropout:SP,hannWindow:gg,hammingWindow:o_,frame:yg,stft:s_,inTopKAsync:TP});function ht(n,e){Array.isArray(n)||(n=[n]),n.forEach((function(t){t!=null&&F(t.dtype!=="complex64",(function(){return e+" does not support complex64 tensors."}))}))}function uv(n,e,t,r){if(t==="linear")return n.linear(e);if(t==="relu")return n.relu(e);if(t==="elu")return n.elu(e);if(t==="relu6")return n.relu6(e);if(t==="prelu")return n.prelu(e,r);throw new Error("Activation "+t+" has not been implemented for the CPU backend.")}var JP=(function(n){function e(){var t=n.call(this)||this;return t.blockSize=48,t.firstUse=!0,t.data=new cS(t,W),t}return Rr(e,n),e.prototype.write=function(t,r,a){this.firstUse&&(this.firstUse=!1,lt().get("IS_NODE")&&Cf(`
============================
Hi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.
============================`));var o={};return this.data.set(o,{values:t,dtype:a}),o},e.prototype.move=function(t,r,a,o){this.data.set(t,{values:r,dtype:o})},e.prototype.numDataIds=function(){return this.data.numDataIds()},e.prototype.read=function(t){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){return[2,this.readSync(t)]}))}))},e.prototype.readSync=function(t){var r=this.data.get(t),a=r.dtype,o=r.complexTensors;return a==="complex64"?nm(this.readSync(o.real.dataId),this.readSync(o.imag.dataId)):this.data.get(t).values},e.prototype.bufferSync=function(t){var r=this.readSync(t.dataId),a=r;if(t.dtype==="string")try{a=r.map((function(o){return xf(o)}))}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return Ft(t.shape,t.dtype,a)},e.prototype.makeOutput=function(t,r,a){var o=this.write(t,r,a);return W.makeTensorFromDataId(o,r,a,this)},e.prototype.disposeData=function(t){if(this.data.has(t)){var r=this.data.get(t).complexTensors;r!=null&&(r.real.dispose(),r.imag.dispose()),this.data.delete(t)}},e.prototype.time=function(t){return xt(this,void 0,void 0,(function(){var r;return wt(this,(function(a){return r=Pr(),t(),[2,{kernelMs:Pr()-r}]}))}))},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(t,r){var a=this.makeOutput(null,t.shape,"complex64");return this.data.get(a.dataId).complexTensors={real:W.keep(t.clone()),imag:W.keep(r.clone())},a},e.prototype.real=function(t){return this.data.get(t.dataId).complexTensors.real.clone()},e.prototype.imag=function(t){return this.data.get(t.dataId).complexTensors.imag.clone()},e.prototype.slice=function(t,r,a){if(ht(t,"slice"),uS(t.shape,r,a)){var o=lS(r,t.strides),u=St(a);return sn(this.readSync(t.dataId).subarray(o,o+u),a,t.dtype)}for(var l=Ft(a,t.dtype),c=this.bufferSync(t),h=0;h<l.size;++h){var d=l.indexToLoc(h).map((function(v,m){return v+r[m]}));l.values[h]=c.get.apply(c,d)}return l.toTensor()},e.prototype.stridedSlice=function(t,r,a,o){ht(t,"stridedSlice");var u=ng(r,a,o);if(u.some((function(g){return g===0})))return sn([],u);for(var l=Ft(u,t.dtype),c=this.bufferSync(t),h=0;h<l.size;h++){for(var d=l.indexToLoc(h),v=new Array(d.length),m=0;m<v.length;m++)v[m]=d[m]*o[m]+r[m];l.set.apply(l,[c.get.apply(c,v)].concat(d))}return l.toTensor()},e.prototype.diag=function(t){for(var r=this.readSync(t.dataId),a=Ft([t.size,t.size],t.dtype),o=a.values,u=0;u<r.length;u++)o[u*t.size+u]=r[u];return a.toTensor()},e.prototype.unstack=function(t,r){for(var a=t.shape[r],o=new Array(t.rank-1),u=0,l=0;l<t.rank;l++)l!==r&&(o[u++]=t.shape[l]);var c=new Array(t.rank).fill(0),h=t.shape.slice();h[r]=1;var d=new Array(a);for(l=0;l<d.length;l++)c[r]=l,d[l]=this.slice(t,c,h).reshape(o);return d},e.prototype.reverse=function(t,r){ht(t,"reverse");for(var a=Ft(t.shape,t.dtype),o=this.bufferSync(t),u=function(c){var h=a.indexToLoc(c),d=h.slice();r.forEach((function(v){return d[v]=t.shape[v]-1-d[v]})),a.set.apply(a,[o.get.apply(o,d)].concat(h))},l=0;l<a.size;l++)u(l);return a.toTensor()},e.prototype.concat=function(t,r){var a=this;if(t[0].dtype==="complex64"){var o=t.map((function(g){return cr(g)})),u=t.map((function(g){return Ur(g)}));return an(this.concat(o,r),this.concat(u,r))}var l=t.map((function(g){var x=St(g.shape.slice(r));return g.as2D(-1,x)})),c=ws(l.map((function(g){return g.shape})),1),h=Ft(c,t[0].dtype).values;if(l[0].shape[0]===1){var d=0;l.forEach((function(g){h.set(a.readSync(g.dataId),d),d+=g.size}))}else{var v=0;l.forEach((function(g){for(var x=a.readSync(g.dataId),E=0,w=0;w<g.shape[0];++w)for(var C=w*c[1]+v,S=0;S<g.shape[1];++S)h[C+S]=x[E++];v+=g.shape[1]}))}var m=ws(t.map((function(g){return g.shape})),r);return sn(h,m,t[0].dtype)},e.prototype.neg=function(t){return ht(t,"neg"),this.multiply(vt(-1),t)},e.prototype.add=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),(function(a,o,u,l){return{real:a+u,imag:o+l}})):this.broadcastedBinaryOp(t,r,on(t.dtype,r.dtype),(function(a,o){return a+o}))},e.prototype.addN=function(t){var r=this;ht(t,"addN");for(var a=t.map((function(d){return r.readSync(d.dataId)})),o=Ft(t[0].shape,t[0].dtype),u=o.values,l=0;l<t.length;l++)for(var c=a[l],h=0;h<u.length;h++)u[h]+=c[h];return o.toTensor()},e.prototype.softmax=function(t,r){var a=je([r],t.shape),o=this.max(t,a),u=On(o.shape,a),l=this.subtract(t,o.reshape(u)),c=this.exp(l),h=this.sum(c,a).reshape(u);return this.realDivide(c,h)},e.prototype.subtract=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),(function(a,o,u,l){return{real:a-u,imag:o-l}})):this.broadcastedBinaryOp(t,r,on(t.dtype,r.dtype),(function(a,o){return a-o}))},e.prototype.pow=function(t,r){return ht([t,r],"pow"),this.broadcastedBinaryOp(t,r,t.dtype,(function(a,o){return Math.pow(a,o)}))},e.prototype.batchMatMul=function(t,r,a,o){ht([t,r],"matMul");for(var u=a?t.shape[1]:t.shape[2],l=a?t.shape[2]:t.shape[1],c=o?r.shape[1]:r.shape[2],h=t.shape[0],d=this.readSync(t.dataId),v=this.readSync(r.dataId),m=a?[t.strides[0],1,t.strides[1]]:[t.strides[0],t.strides[1],1],g=m[0],x=m[1],E=m[2],w=o?[1,r.strides[1],r.strides[0]]:[r.strides[1],1,r.strides[0]],C=w[0],S=w[1],_=w[2],T=l*c,A=Ft([h,l,c],t.dtype),D=A.values,N=this.blockSize,k=0;k<h;k++)for(var O=0;O<l;O+=N)for(var B=0;B<c;B+=N)for(var V=0;V<u;V+=N)for(var U=Math.min(O+N,l),it=Math.min(B+N,c),et=Math.min(V+N,u),tt=O;tt<U;tt++)for(var P=B;P<it;P++){for(var G=0,q=V;q<et;q++)G+=d[k*g+tt*x+q*E]*v[q*C+P*S+k*_];D[k*T+(tt*c+P)]+=G}return A.toTensor()},e.prototype.fusedBatchMatMul=function(t){var r=t.a,a=t.b,o=t.transposeA,u=t.transposeB,l=t.bias,c=t.activation,h=t.preluActivationWeights,d=this.batchMatMul(r,a,o,u);return l&&(d=this.add(d,l)),c&&(d=uv(this,d,c,h)),d},e.prototype.multiply=function(t,r){return t.dtype==="complex64"||r.dtype==="complex64"?this.broadcastedBinaryComplexOp(t.cast("complex64"),r.cast("complex64"),(function(a,o,u,l){return{real:a*u-o*l,imag:a*l+o*u}})):this.broadcastedBinaryOp(t,r,on(t.dtype,r.dtype),(function(a,o){return a*o}))},e.prototype.realDivide=function(t,r){return ht([t,r],"realDivide"),this.broadcastedBinaryOp(t,r,"float32",(function(a,o){return a/o}))},e.prototype.floorDiv=function(t,r){return ht([t,r],"floorDiv"),this.broadcastedBinaryOp(t,r,"int32",(function(a,o){return Math.floor(a/o)}))},e.prototype.sum=function(t,r){ht(t,"sum"),jn("sum",r,t.rank);for(var a=ln(t.shape,r),o=a[0],u=a[1],l=ve(o,on(t.dtype,"int32")),c=St(u),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=0,x=0;x<c;++x)g+=d[m+x];h[v]=g}return l},e.prototype.prod=function(t,r){ht(t,"sum");for(var a=ln(t.shape,r),o=a[0],u=a[1],l=ve(o,on(t.dtype,"int32")),c=St(u),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=1,x=0;x<c;++x)g*=d[m+x];h[v]=g}return l},e.prototype.unsortedSegmentSum=function(t,r,a){ht(t,"unsortedSegmentSum");for(var o=[],u=t.rank-r.rank,l=0;l<u;++l)r=r.expandDims(l+1);for(l=0;l<a;++l){var c=vt(l,"int32"),h=VS(c,r).asType("float32").mul(t).sum(0);o.push(h)}return Yn(o)},e.prototype.argMin=function(t,r){ht(t,"argMin");var a=[r];jn("argMin",a,t.rank);for(var o=ln(t.shape,a),u=o[0],l=o[1],c=ve(u,"int32"),h=St(l),d=this.readSync(c.dataId),v=this.readSync(t.dataId),m=0;m<d.length;++m){for(var g=m*h,x=v[g],E=0,w=0;w<h;++w){var C=v[g+w];C<x&&(x=C,E=w)}d[m]=E}return c},e.prototype.argMax=function(t,r){ht(t,"argMax");var a=[r];jn("argMax",a,t.rank);for(var o=ln(t.shape,a),u=o[0],l=o[1],c=ve(u,"int32"),h=St(l),d=this.readSync(c.dataId),v=this.readSync(t.dataId),m=0;m<d.length;++m){for(var g=m*h,x=v[g],E=0,w=0;w<h;++w){var C=v[g+w];C>x&&(x=C,E=w)}d[m]=E}return c},e.prototype.cumsum=function(t,r,a,o){if(ht(t,"cumsum"),r!==t.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(t.rank-1)+" but got axis="+r);for(var u=on(t.dtype,"int32"),l=ve(t.shape,u),c=this.readSync(l.dataId),h=this.readSync(t.dataId),d=t.shape[t.rank-1],v=o?function(w,C){return w+d-C-1}:function(w,C){return w+C},m=0;m<h.length;m+=d)for(var g=0;g<d;g++){var x=v(m,g);if(g===0)c[x]=a?0:h[x];else{var E=v(m,g-1);c[x]=a?h[E]+c[E]:h[x]+c[E]}}return l},e.prototype.equal=function(t,r){return ht([t,r],"equal"),this.broadcastedBinaryOp(t,r,"bool",(function(a,o){return a===o?1:0}))},e.prototype.notEqual=function(t,r){return ht([t,r],"notEqual"),this.broadcastedBinaryOp(t,r,"bool",(function(a,o){return a!==o?1:0}))},e.prototype.less=function(t,r){return ht([t,r],"less"),this.broadcastedBinaryOp(t,r,"bool",(function(a,o){return a<o?1:0}))},e.prototype.lessEqual=function(t,r){return ht([t,r],"lessEqual"),this.broadcastedBinaryOp(t,r,"bool",(function(a,o){return a<=o?1:0}))},e.prototype.greater=function(t,r){return ht([t,r],"greater"),this.broadcastedBinaryOp(t,r,"bool",(function(a,o){return a>o?1:0}))},e.prototype.greaterEqual=function(t,r){return ht([t,r],"greaterEqual"),this.broadcastedBinaryOp(t,r,"bool",(function(a,o){return a>=o?1:0}))},e.prototype.logicalNot=function(t){ht(t,"logicalNot");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)a[o]=r[o]?0:1;return this.makeOutput(a,t.shape,"bool")},e.prototype.logicalAnd=function(t,r){return ht([t,r],"logicalAnd"),this.broadcastedBinaryOp(t,r,"bool",(function(a,o){return a&&o}))},e.prototype.logicalOr=function(t,r){return ht([t,r],"logicalOr"),this.broadcastedBinaryOp(t,r,"bool",(function(a,o){return a||o}))},e.prototype.select=function(t,r,a){ht([t,r,a],"select");for(var o=this.readSync(t.dataId),u=this.readSync(r.dataId),l=this.readSync(a.dataId),c=ve(r.shape,on(r.dtype,a.dtype)),h=this.readSync(c.dataId),d=0,v=t.rank===0||t.rank>1||r.rank===1?1:St(r.shape.slice(1)),m=0;m<o.length;m++)for(var g=0;g<v;g++)o[m]===1?h[d++]=u[m]:h[d++]=l[m];return c},e.prototype.where=function(t){ht([t],"where");var r=this.readSync(t.dataId);return og(t.shape,r)},e.prototype.topk=function(t,r,a){return ht(t,"topk"),yS(this.readSync(t.dataId),t.shape,t.dtype,r)},e.prototype.min=function(t,r){ht(t,"min"),jn("min",r,t.rank);for(var a=ln(t.shape,r),o=a[0],u=a[1],l=ve(o,t.dtype),c=St(u),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=d[m],x=0;x<c;++x){var E=d[m+x];E<g&&(g=E)}h[v]=g}return l},e.prototype.minimum=function(t,r){return ht([t,r],"minimum"),this.broadcastedBinaryOp(t,r,t.dtype,(function(a,o){return Math.min(a,o)}))},e.prototype.mod=function(t,r){return ht([t,r],"mod"),this.broadcastedBinaryOp(t,r,t.dtype,(function(a,o){var u=a%o;return a<0&&o<0||a>=0&&o>=0?u:(u+o)%o}))},e.prototype.max=function(t,r){ht(t,"max"),jn("max",r,t.rank);for(var a=ln(t.shape,r),o=a[0],u=a[1],l=ve(o,t.dtype),c=St(u),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=d[m],x=0;x<c;++x){var E=d[m+x];E>g&&(g=E)}h[v]=g}return l},e.prototype.maximum=function(t,r){return ht([t,r],"maximum"),this.broadcastedBinaryOp(t,r,t.dtype,(function(a,o){return Math.max(a,o)}))},e.prototype.all=function(t,r){ht(t,"all"),jn("all",r,t.rank);for(var a=ln(t.shape,r),o=a[0],u=a[1],l=ve(o,t.dtype),c=St(u),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=d[m],x=0;x<c;++x){var E=d[m+x];g=g&&E}h[v]=g}return l},e.prototype.any=function(t,r){ht(t,"any"),jn("any",r,t.rank);for(var a=ln(t.shape,r),o=a[0],u=a[1],l=ve(o,t.dtype),c=St(u),h=this.readSync(l.dataId),d=this.readSync(t.dataId),v=0;v<h.length;++v){for(var m=v*c,g=d[m],x=0;x<c;++x){var E=d[m+x];g=g||E}h[v]=g}return l},e.prototype.squaredDifference=function(t,r){return ht([t,r],"squaredDifference"),this.broadcastedBinaryOp(t,r,t.dtype,(function(a,o){var u=a-o;return u*u}))},e.prototype.ceil=function(t){ht(t,"ceil");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.ceil(r[o]);return this.makeOutput(a,t.shape,"float32")},e.prototype.floor=function(t){ht(t,"floor");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.floor(r[o]);return this.makeOutput(a,t.shape,"float32")},e.prototype.sign=function(t){ht(t,"x");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)r[o]<0?a[o]=-1:r[o]>0?a[o]=1:a[o]=0;return this.makeOutput(a,t.shape,"float32")},e.prototype.isNaN=function(t){ht(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isNaN(r[o])&&(a[o]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.isInf=function(t){ht(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Math.abs(r[o])===1/0&&(a[o]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.isFinite=function(t){ht(t,"x");for(var r=this.readSync(t.dataId),a=new Uint8Array(r.length),o=0;o<r.length;++o)Number.isFinite(r[o])&&(a[o]=1);return this.makeOutput(a,t.shape,"bool")},e.prototype.round=function(t){ht(t,"round");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=Math.floor(r[o]);r[o]-u<.5?a[o]=Math.floor(r[o]):r[o]-u>.5?a[o]=Math.ceil(r[o]):a[o]=u%2==0?u:u+1}return this.makeOutput(a,t.shape,"float32")},e.prototype.exp=function(t){ht(t,"exp");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.exp(r[o]);return this.makeOutput(a,t.shape,"float32")},e.prototype.expm1=function(t){ht(t,"expm1");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=Math.expm1(r[o]);return this.makeOutput(a,t.shape,"float32")},e.prototype.log=function(t){ht(t,"log");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=Math.log(u)}return this.makeOutput(a,t.shape,"float32")},e.prototype.log1p=function(t){ht(t,"log1p");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=Math.log1p(u)}return this.makeOutput(a,t.shape,"float32")},e.prototype.sqrt=function(t){ht(t,"sqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=Math.sqrt(u)}return this.makeOutput(a,t.shape,"float32")},e.prototype.rsqrt=function(t){ht(t,"rsqrt");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o){var u=r[o];a[o]=1/Math.sqrt(u)}return this.makeOutput(a,t.shape,"float32")},e.prototype.reciprocal=function(t){ht(t,"reciprocal");for(var r=this.readSync(t.dataId),a=new Float32Array(r.length),o=0;o<r.length;++o)a[o]=1/r[o];return this.makeOutput(a,t.shape,"float32")},e.prototype.linear=function(t){return t},e.prototype.relu=function(t){ht(t,"relu");for(var r=ve(t.shape,t.dtype),a=this.readSync(r.dataId),o=this.readSync(t.dataId),u=0;u<o.length;++u)a[u]=Math.max(0,o[u]);return r},e.prototype.relu6=function(t){ht(t,"relu");for(var r=ve(t.shape,t.dtype),a=this.readSync(r.dataId),o=this.readSync(t.dataId),u=0;u<o.length;++u)a[u]=Math.min(Math.max(0,o[u]),6);return r},e.prototype.prelu=function(t,r){return ht([t,r],"prelu"),this.broadcastedBinaryOp(t,r,t.dtype,(function(a,o){return a<0?o*a:a}))},e.prototype.elu=function(t){ht(t,"elu");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o){var u=a[o];r[o]=u>=0?u:Math.exp(u)-1}return this.makeOutput(r,t.shape,"float32")},e.prototype.eluDer=function(t,r){ht([t,r],"eluDer");for(var a=new Float32Array(r.size),o=this.readSync(r.dataId),u=this.readSync(t.dataId),l=0;l<o.length;++l){var c=o[l];a[l]=c>=1?u[l]:u[l]*(c+1)}return this.makeOutput(a,r.shape,"float32")},e.prototype.selu=function(t){ht(t,"selu");for(var r=ug,a=lg,o=new Float32Array(t.size),u=this.readSync(t.dataId),l=0;l<u.length;++l){var c=u[l];o[l]=c>=0?a*c:r*(Math.exp(c)-1)}return this.makeOutput(o,t.shape,"float32")},e.prototype.clip=function(t,r,a){ht(t,"clip");for(var o=new Float32Array(t.size),u=this.readSync(t.dataId),l=0;l<u.length;++l){var c=u[l];o[l]=c>a?a:c<r?r:c}return this.makeOutput(o,t.shape,"float32")},e.prototype.abs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.abs(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.complexAbs=function(t){for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<t.size;++o){var u=a[2*o],l=a[2*o+1];r[o]=Math.hypot(u,l)}return this.makeOutput(r,t.shape,"float32")},e.prototype.int=function(t){ht(t,"int");for(var r=new Int32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=a[o];return this.makeOutput(r,t.shape,"int32")},e.prototype.sigmoid=function(t){ht(t,"sigmoid");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=1/(1+Math.exp(-a[o]));return this.makeOutput(r,t.shape,"float32")},e.prototype.softplus=function(t){ht(t,"softplus");for(var r=Math.log(11920928955078125e-23)+2,a=new Float32Array(t.size),o=this.readSync(t.dataId),u=0;u<o.length;++u){var l=o[u]>-r,c=o[u]<r,h=Math.exp(o[u]),d=void 0;d=c?h:l?o[u]:Math.log(1+h),a[u]=d}return this.makeOutput(a,t.shape,"float32")},e.prototype.sin=function(t){ht(t,"sin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.sin(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cos=function(t){ht(t,"cos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.cos(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tan=function(t){ht(t,"tan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.tan(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asin=function(t){ht(t,"asin");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.asin(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acos=function(t){ht(t,"acos");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.acos(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan=function(t){ht(t,"atan");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.atan(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atan2=function(t,r){return ht([t,r],"atan2"),this.broadcastedBinaryOp(t,r,t.dtype,(function(a,o){return Math.atan2(a,o)}))},e.prototype.sinh=function(t){ht(t,"sinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.sinh(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.cosh=function(t){ht(t,"cosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.cosh(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.tanh=function(t){ht(t,"tanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=$4(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.asinh=function(t){ht(t,"asinh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.asinh(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.acosh=function(t){ht(t,"acosh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.acosh(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.atanh=function(t){ht(t,"atanh");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o)r[o]=Math.atanh(a[o]);return this.makeOutput(r,t.shape,"float32")},e.prototype.erf=function(t){ht(t,"erf");for(var r=new Float32Array(t.size),a=this.readSync(t.dataId),o=0;o<a.length;++o){var u=Math.sign(a[o]),l=Math.abs(a[o]),c=1/(1+.3275911*l);r[o]=u*(1-((((1.061405429*c-1.453152027)*c+1.421413741)*c-.284496736)*c+.254829592)*c*Math.exp(-l*l))}return this.makeOutput(r,t.shape,"float32")},e.prototype.step=function(t,r){r===void 0&&(r=0),ht(t,"step");for(var a=new Float32Array(t.size),o=this.readSync(t.dataId),u=0;u<o.length;++u){var l=o[u];isNaN(l)?a[u]=NaN:a[u]=l>0?1:r}return this.makeOutput(a,t.shape,"float32")},e.prototype.fusedConv2d=function(t){var r=t.input,a=t.filter,o=t.convInfo,u=t.bias,l=t.activation,c=t.preluActivationWeights,h=this.conv2d(r,a,o);return u&&(h=this.add(h,u)),l&&(h=uv(this,h,l,c)),h},e.prototype.conv2d=function(t,r,a){ht([t,r],"conv2d");for(var o=a.filterHeight,u=a.filterWidth,l=a.dilationHeight,c=a.dilationWidth,h=a.padInfo.left,d=a.padInfo.top,v=a.dataFormat==="channelsLast",m=Ft(a.outShape,t.dtype),g=t.strides[0],x=v?t.strides[1]:t.strides[2],E=v?t.strides[2]:1,w=v?1:t.strides[1],C=m.strides[0],S=v?m.strides[1]:m.strides[2],_=v?m.strides[2]:1,T=v?1:m.strides[1],A=this.readSync(t.dataId),D=this.readSync(r.dataId),N=m.values,k=0;k<a.batchSize;++k)for(var O=k*g,B=k*C,V=0;V<a.outHeight;++V)for(var U=B+V*S,it=V*a.strideHeight-d,et=0;et<o;et++){var tt=it+et*l;if(!(tt<0||tt>=a.inHeight))for(var P=et*r.strides[0],G=O+tt*x,q=0;q<a.outWidth;++q)for(var nt=U+q*_,ot=q*a.strideWidth-h,L=0;L<u;L++){var X=ot+L*c;if(!(X<0||X>=a.inWidth))for(var st=G+X*E,dt=P+L*r.strides[1],pt=0;pt<a.inChannels;++pt){for(var mt=A[st+pt*w],yt=0;yt<a.outChannels;++yt)N[nt+yt*T]+=mt*D[dt+yt];dt+=a.outChannels}}}return m.toTensor()},e.prototype.conv3d=function(t,r,a){for(var o=a.filterDepth,u=a.filterHeight,l=a.filterWidth,c=a.dilationDepth,h=a.dilationHeight,d=a.dilationWidth,v=a.padInfo.front,m=a.padInfo.left,g=a.padInfo.top,x=Ft(a.outShape,t.dtype),E=this.readSync(t.dataId),w=this.readSync(r.dataId),C=x.values,S=0;S<a.batchSize;++S)for(var _=S*t.strides[0],T=S*x.strides[0],A=0;A<a.outDepth;++A)for(var D=T+A*x.strides[1],N=A*a.strideDepth-v,k=0;k<o;k++){var O=N+k*c;if(!(O<0||O>=a.inDepth))for(var B=k*r.strides[0],V=_+O*t.strides[1],U=0;U<a.outHeight;++U)for(var it=D+U*x.strides[2],et=U*a.strideHeight-g,tt=0;tt<u;tt++){var P=et+tt*h;if(!(P<0||P>=a.inHeight))for(var G=B+tt*r.strides[1],q=V+P*t.strides[2],nt=0;nt<a.outWidth;++nt)for(var ot=it+nt*a.outChannels,L=nt*a.strideWidth-m,X=0;X<l;X++){var st=L+X*d;if(!(st<0||st>=a.inWidth))for(var dt=G+X*r.strides[2],pt=q+st*a.inChannels,mt=dt,yt=0;yt<a.inChannels;++yt){for(var Mt=E[pt+yt],At=0;At<a.outChannels;++At)C[ot+At]+=Mt*w[mt+At];mt+=a.outChannels}}}}return x.toTensor()},e.prototype.conv2dDerInput=function(t,r,a){ht([t,r],"conv2dDerInput");for(var o=Ft(a.inShape,"float32"),u=o.values,l=this.readSync(t.dataId),c=this.readSync(r.dataId),h=r.strides,d=h[0],v=h[1],m=h[2],g=a.batchSize,x=a.filterHeight,E=a.filterWidth,w=a.inChannels,C=a.inHeight,S=a.inWidth,_=a.outChannels,T=a.outHeight,A=a.outWidth,D=a.strideHeight,N=a.strideWidth,k=a.dataFormat,O=x-1-a.padInfo.top,B=E-1-a.padInfo.left,V=k==="channelsLast",U=o.strides[0],it=V?o.strides[1]:o.strides[2],et=V?o.strides[2]:1,tt=V?1:o.strides[1],P=t.strides[0],G=V?t.strides[1]:t.strides[2],q=V?t.strides[2]:1,nt=V?1:t.strides[1],ot=0;ot<g;++ot)for(var L=0;L<w;++L)for(var X=0;X<C;++X)for(var st=X-O,dt=Math.max(0,Math.ceil(st/D)),pt=Math.min(T,(x+st)/D),mt=0;mt<S;++mt){for(var yt=mt-B,Mt=Math.max(0,Math.ceil(yt/N)),At=Math.min(A,(E+yt)/N),ue=0,Ut=dt;Ut<pt;++Ut)for(var Qt=Ut*D-st,Xt=Mt;Xt<At;++Xt)for(var ee=P*ot+G*Ut+q*Xt,le=d*(x-1-Qt)+v*(E-1-(Xt*N-yt))+m*L,ce=0;ce<_;++ce)ue+=l[ee+nt*ce]*c[le+ce];u[U*ot+it*X+et*mt+tt*L]=ue}return o.toTensor()},e.prototype.conv3dDerInput=function(t,r,a){for(var o=Ft(a.inShape,"float32"),u=o.values,l=o.strides,c=l[0],h=l[1],d=l[2],v=l[3],m=this.readSync(t.dataId),g=t.strides,x=g[0],E=g[1],w=g[2],C=g[3],S=this.readSync(r.dataId),_=r.strides,T=_[0],A=_[1],D=_[2],N=_[3],k=a.batchSize,O=a.filterDepth,B=a.filterHeight,V=a.filterWidth,U=a.inChannels,it=a.inDepth,et=a.inHeight,tt=a.inWidth,P=a.outChannels,G=a.outDepth,q=a.outHeight,nt=a.outWidth,ot=a.strideDepth,L=a.strideHeight,X=a.strideWidth,st=O-1-a.padInfo.front,dt=B-1-a.padInfo.top,pt=V-1-a.padInfo.left,mt=0;mt<k;++mt)for(var yt=0;yt<U;++yt)for(var Mt=0;Mt<it;++Mt)for(var At=Mt-st,ue=Math.max(0,Math.ceil(At/ot)),Ut=Math.min(G,(O+At)/ot),Qt=0;Qt<et;++Qt)for(var Xt=Qt-dt,ee=Math.max(0,Math.ceil(Xt/L)),le=Math.min(q,(B+Xt)/L),ce=0;ce<tt;++ce){for(var Qn=ce-pt,In=Math.max(0,Math.ceil(Qn/X)),Qe=Math.min(nt,(V+Qn)/X),Mr=0,Bn=ue;Bn<Ut;++Bn)for(var Nr=Bn*ot-At,mr=ee;mr<le;++mr)for(var Me=mr*L-Xt,gr=In;gr<Qe;++gr)for(var so=x*mt+E*Bn+w*mr+C*gr,Zr=T*(O-1-Nr)+A*(B-1-Me)+D*(V-1-(gr*X-Qn))+N*yt,gn=0;gn<P;++gn)Mr+=m[so+gn]*S[Zr+gn];u[c*mt+h*Mt+d*Qt+v*ce+yt]=Mr}return o.toTensor()},e.prototype.conv2dDerFilter=function(t,r,a){ht([t,r],"conv2dDerFilter");for(var o=a.strideHeight,u=a.strideWidth,l=a.filterHeight,c=a.filterWidth,h=a.dataFormat==="channelsLast",d=Ft(a.filterShape,"float32"),v=a.padInfo.left,m=a.padInfo.top,g=this.bufferSync(t),x=this.bufferSync(r),E=0;E<l;++E)for(var w=Math.max(0,Math.ceil((m-E)/o)),C=Math.min(a.outHeight,(a.inHeight+m-E)/o),S=0;S<c;++S)for(var _=Math.max(0,Math.ceil((v-S)/u)),T=Math.min(a.outWidth,(a.inWidth+v-S)/u),A=0;A<a.inChannels;++A)for(var D=0;D<a.outChannels;++D){for(var N=0,k=0;k<a.batchSize;++k)for(var O=w;O<C;++O)for(var B=E+O*o-m,V=_;V<T;++V){var U=S+V*u-v;N+=h?g.get(k,B,U,A)*x.get(k,O,V,D):g.get(k,A,B,U)*x.get(k,D,O,V)}d.set(N,E,S,A,D)}return d.toTensor()},e.prototype.conv3dDerFilter=function(t,r,a){for(var o=a.strideDepth,u=a.strideHeight,l=a.strideWidth,c=a.filterDepth,h=a.filterHeight,d=a.filterWidth,v=Ft(a.filterShape,"float32"),m=v.values,g=v.strides,x=g[0],E=g[1],w=g[2],C=g[3],S=this.readSync(r.dataId),_=r.strides,T=_[0],A=_[1],D=_[2],N=_[3],k=this.readSync(t.dataId),O=t.strides,B=O[0],V=O[1],U=O[2],it=O[3],et=a.padInfo.front,tt=a.padInfo.left,P=a.padInfo.top,G=0;G<c;++G)for(var q=Math.max(0,Math.ceil((et-G)/o)),nt=Math.min(a.outDepth,(a.inDepth+et-G)/o),ot=G*x,L=0;L<h;++L)for(var X=Math.max(0,Math.ceil((P-L)/u)),st=Math.min(a.outHeight,(a.inHeight+P-L)/u),dt=L*E+ot,pt=0;pt<d;++pt)for(var mt=Math.max(0,Math.ceil((tt-pt)/l)),yt=Math.min(a.outWidth,(a.inWidth+tt-pt)/l),Mt=pt*w+dt,At=0;At<a.inChannels;++At)for(var ue=At*C+Mt,Ut=0;Ut<a.outChannels;++Ut){for(var Qt=0,Xt=0;Xt<a.batchSize;++Xt)for(var ee=Xt*B,le=Xt*T,ce=q;ce<nt;++ce)for(var Qn=(G+ce*o-et)*V+ee,In=ce*A+le,Qe=X;Qe<st;++Qe)for(var Mr=(L+Qe*u-P)*U+Qn,Bn=Qe*D+In,Nr=mt;Nr<yt;++Nr){var mr=Nr*N+Bn;Qt+=k[(pt+Nr*l-tt)*it+Mr+At]*S[mr+Ut]}m[ue+Ut]=Qt}return v.toTensor()},e.prototype.fusedDepthwiseConv2D=function(t){var r=t.input,a=t.filter,o=t.convInfo,u=t.bias,l=t.activation,c=t.preluActivationWeights,h=this.depthwiseConv2D(r,a,o);return u&&(h=this.add(h,u)),l&&(h=uv(this,h,l,c)),h},e.prototype.depthwiseConv2D=function(t,r,a){ht([t,r],"depthwiseConv2D");for(var o=a.filterHeight,u=a.filterWidth,l=a.dilationHeight,c=a.dilationWidth,h=a.padInfo.left,d=a.padInfo.top,v=a.outChannels/a.inChannels,m=Ft(a.outShape,t.dtype),g=this.readSync(t.dataId),x=this.readSync(r.dataId),E=m.values,w=0;w<a.batchSize;++w)for(var C=w*t.strides[0],S=w*m.strides[0],_=0;_<a.outHeight;++_)for(var T=S+_*m.strides[1],A=_*a.strideHeight-h,D=0;D<o;++D){var N=A+D*l;if(!(N<0||N>=a.inHeight))for(var k=D*r.strides[0],O=C+N*t.strides[1],B=0;B<a.outWidth;++B)for(var V=T+B*m.strides[2],U=B*a.strideWidth-d,it=0;it<u;++it){var et=U+it*c;if(!(et<0||et>=a.inWidth))for(var tt=k+it*r.strides[1],P=O+et*a.inChannels,G=V,q=tt,nt=0;nt<a.inChannels;++nt){for(var ot=g[P+nt],L=0;L<v;++L)E[G+L]+=ot*x[q+L];G+=v,q+=v}}}return m.toTensor()},e.prototype.depthwiseConv2DDerInput=function(t,r,a){ht([t,r],"depthwiseConv2DDerInput");for(var o=Ft(a.inShape,"float32"),u=o.values,l=o.strides,c=l[0],h=l[1],d=l[2],v=this.readSync(t.dataId),m=t.strides,g=m[0],x=m[1],E=m[2],w=this.readSync(r.dataId),C=r.strides,S=C[0],_=C[1],T=C[2],A=a.batchSize,D=a.filterHeight,N=a.filterWidth,k=a.inChannels,O=a.inHeight,B=a.inWidth,V=a.outChannels,U=a.outHeight,it=a.outWidth,et=a.strideHeight,tt=a.strideWidth,P=D-1-a.padInfo.top,G=N-1-a.padInfo.left,q=V/k,nt=0;nt<A;++nt)for(var ot=0;ot<k;++ot)for(var L=0;L<O;++L)for(var X=L-P,st=Math.max(0,Math.ceil(X/et)),dt=Math.min(U,(D+X)/et),pt=0;pt<B;++pt){for(var mt=pt-G,yt=Math.max(0,Math.ceil(mt/tt)),Mt=Math.min(it,(N+mt)/tt),At=0,ue=st;ue<dt;++ue)for(var Ut=ue*et-X,Qt=yt;Qt<Mt;++Qt)for(var Xt=g*nt+x*ue+E*Qt,ee=S*(D-1-Ut)+_*(N-1-(Qt*tt-mt))+T*ot,le=0;le<q;++le)At+=v[Xt+(ot*q+le)]*w[ee+le];u[c*nt+h*L+d*pt+ot]=At}return o.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(t,r,a){ht([t,r],"depthwiseConv2DDerFilter");for(var o=a.strideHeight,u=a.strideWidth,l=a.filterHeight,c=a.filterWidth,h=Ft(a.filterShape,"float32"),d=a.padInfo.left,v=a.padInfo.top,m=a.outChannels/a.inChannels,g=this.bufferSync(t),x=this.bufferSync(r),E=0;E<l;++E)for(var w=Math.max(0,Math.ceil((v-E)/o)),C=Math.min(a.outHeight,(a.inHeight+v-E)/o),S=0;S<c;++S)for(var _=Math.max(0,Math.ceil((d-S)/u)),T=Math.min(a.outWidth,(a.inWidth+d-S)/u),A=0;A<a.outChannels;++A){for(var D=Math.trunc(A/m),N=A%m,k=0,O=0;O<a.batchSize;++O)for(var B=w;B<C;++B)for(var V=E+B*o-v,U=_;U<T;++U){var it=S+U*u-d;k+=g.get(O,V,it,D)*x.get(O,B,U,A)}h.set(k,E,S,D,N)}return h.toTensor()},e.prototype.tile=function(t,r){return ht(t,"tile"),gS(this.bufferSync(t),r)},e.prototype.pad=function(t,r,a){ht(t,"pad");var o=r.map((function(m,g){return m[0]+t.shape[g]+m[1]})),u=r.map((function(m){return m[0]})),l=this.bufferSync(t),c=Ft(o,t.dtype);a!==0&&c.values.fill(a);for(var h=0;h<t.size;h++){var d=l.indexToLoc(h),v=d.map((function(m,g){return m+u[g]}));c.set.apply(c,[l.get.apply(l,d)].concat(v))}return c.toTensor()},e.prototype.transpose=function(t,r){ht(t,"transpose");for(var a=new Array(t.rank),o=0;o<a.length;o++)a[o]=t.shape[r[o]];var u=this.readSync(t.dataId),l=Ft(a,t.dtype),c=this.bufferSync(t);for(o=0;o<t.size;++o){for(var h=c.indexToLoc(o),d=new Array(h.length),v=0;v<d.length;v++)d[v]=h[r[v]];var m=l.locToIndex(d);l.values[m]=u[o]}return l.toTensor()},e.prototype.gather=function(t,r,a){ht([t,r],"gather");var o=t.shape.slice(),u=this.readSync(r.dataId);o[a]=u.length;for(var l=Ft(o,t.dtype),c=this.bufferSync(t),h=0;h<l.size;++h){var d=l.indexToLoc(h),v=d.slice();v[a]=u[d[a]];var m=c.locToIndex(v);l.values[h]=c.values[m]}return l.toTensor()},e.prototype.batchToSpaceND=function(t,r,a){ht([t],"batchToSpaceND");var o=r.reduce((function(v,m){return v*m})),u=Tf(t.shape,r,o),l=Rf(u.length,r.length),c=Af(t.shape,r,o),h=aS(a,r.length),d=iS(c,a,r.length);return t.reshape(u).transpose(l).reshape(c).slice(h,d)},e.prototype.spaceToBatchND=function(t,r,a){ht([t],"spaceToBatchND");var o=r.reduce((function(m,g){return m*g})),u=[[0,0]];u.push.apply(u,a);for(var l=1+r.length;l<t.shape.length;++l)u.push([0,0]);var c=t.pad(u),h=Tf(c.shape,r,o,!1),d=Rf(h.length,r.length,!1),v=Af(c.shape,r,o,!1);return c.reshape(h).transpose(d).reshape(v)},e.prototype.pool=function(t,r,a){ht(t,"pool");for(var o=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,v=r.padInfo.top,m=r.padInfo.left,g=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,x=this.readSync(t.dataId),E=Ft(r.outShape,t.dtype),w=E.values,C=r.outShape[1]*r.outShape[2]*r.outShape[3],S=r.outShape[2]*r.outShape[3],_=r.outShape[3],T=0;T<r.batchSize;++T)for(var A=T*C,D=T*t.strides[0],N=0;N<r.inChannels;++N)for(var k=0;k<r.outHeight;++k)for(var O=k*o-v,B=Math.max(0,O),V=Math.min(r.inHeight,h+O),U=A+k*S,it=0;it<r.outWidth;++it){for(var et=it*u-m,tt=Math.max(0,et),P=Math.min(r.inWidth,d+et),G=g,q=0,nt=0,ot=B;ot<V;ot+=l){for(var L=D+ot*t.strides[1],X=tt;X<P;X+=c){var st=x[L+X*t.strides[2]+N];a==="max"&&st>G?G=st:a==="avg"&&(q+=st,nt++)}if(isNaN(G))break}w[U+it*_+N]=a==="avg"?q/nt:G}return E.toTensor()},e.prototype.maxPool=function(t,r){return this.pool(t,r,"max")},e.prototype.maxPoolPositions=function(t,r){for(var a=Ft(r.outShape,"int32"),o=r.strideHeight,u=r.strideWidth,l=r.dilationHeight,c=r.dilationWidth,h=r.effectiveFilterHeight,d=r.effectiveFilterWidth,v=r.padInfo.top,m=r.padInfo.left,g=this.bufferSync(t),x=0;x<r.batchSize;++x)for(var E=0;E<r.inChannels;++E)for(var w=0;w<r.outHeight;++w){for(var C=w*o-v,S=C;S<0;)S+=l;for(var _=Math.min(r.inHeight,h+C),T=0;T<r.outWidth;++T){for(var A=T*u-m,D=A;D<0;)D+=c;for(var N=Math.min(r.inWidth,d+A),k=Number.NEGATIVE_INFINITY,O=-1,B=S;B<_;B+=l)for(var V=B-C,U=D;U<N;U+=c){var it=U-A,et=g.get(x,B,U,E);et>k&&(k=et,O=V*d+it)}a.set(O,x,w,T,E)}}return a.toTensor()},e.prototype.maxPoolBackprop=function(t,r,a,o){ht([r,a],"maxPoolBackprop");for(var u=this.maxPoolPositions(r,o),l=o.strideHeight,c=o.strideWidth,h=o.dilationHeight,d=o.dilationWidth,v=o.effectiveFilterHeight,m=o.effectiveFilterWidth,g=m-1-o.padInfo.left,x=v-1-o.padInfo.top,E=Ft(r.shape,"float32"),w=this.bufferSync(u),C=this.bufferSync(t),S=0;S<o.batchSize;++S)for(var _=0;_<o.inChannels;++_)for(var T=0;T<o.inHeight;++T)for(var A=0;A<o.inWidth;++A){for(var D=T-x,N=A-g,k=0,O=0;O<v;O+=h){var B=(D+O)/l;if(!(B<0||B>=o.outHeight||Math.floor(B)!==B))for(var V=0;V<m;V+=d){var U=(N+V)/c;if(!(U<0||U>=o.outWidth||Math.floor(U)!==U)){var it=v*m-1-w.get(S,B,U,_)===O*m+V?1:0;it!==0&&(k+=C.get(S,B,U,_)*it)}}}E.set(k,S,T,A,_)}return E.toTensor()},e.prototype.avgPoolBackprop=function(t,r,a){ht([t,r],"avgPoolBackprop");for(var o=a.strideHeight,u=a.strideWidth,l=a.filterHeight,c=a.filterWidth,h=a.dilationHeight,d=a.dilationWidth,v=a.effectiveFilterHeight,m=a.effectiveFilterWidth,g=m-1-a.padInfo.left,x=v-1-a.padInfo.top,E=Ft(r.shape,"float32"),w=1/(l*c),C=this.bufferSync(t),S=0;S<a.batchSize;++S)for(var _=0;_<a.inChannels;++_)for(var T=0;T<a.inHeight;++T)for(var A=0;A<a.inWidth;++A){for(var D=T-x,N=A-g,k=0,O=0;O<v;O+=h){var B=(D+O)/o;if(!(B<0||B>=a.outHeight||Math.floor(B)!==B))for(var V=0;V<m;V+=d){var U=(N+V)/u;U<0||U>=a.outWidth||Math.floor(U)!==U||(k+=C.get(S,B,U,_))}}E.set(k*w,S,T,A,_)}return E.toTensor()},e.prototype.pool3d=function(t,r,a){ht(t,"pool3d");for(var o=r.strideDepth,u=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,h=r.dilationHeight,d=r.dilationWidth,v=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,x=r.padInfo.front,E=r.padInfo.top,w=r.padInfo.left,C=a==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,S=this.readSync(t.dataId),_=Ft(r.outShape,t.dtype),T=_.values,A=r.outShape[1]*r.outShape[2]*r.outShape[3]*r.outShape[4],D=r.outShape[2]*r.outShape[3]*r.outShape[4],N=r.outShape[3]*r.outShape[4],k=r.outShape[4],O=0;O<r.batchSize;++O)for(var B=O*A,V=O*t.strides[0],U=0;U<r.inChannels;++U)for(var it=0;it<r.outDepth;++it){for(var et=it*o-x,tt=et;tt<0;)tt+=c;for(var P=Math.min(r.inDepth,v+et),G=B+it*D,q=0;q<r.outHeight;++q){for(var nt=q*u-E,ot=nt;ot<0;)ot+=h;for(var L=Math.min(r.inHeight,m+nt),X=G+q*N,st=0;st<r.outWidth;++st){for(var dt=st*l-w,pt=dt;pt<0;)pt+=d;for(var mt=Math.min(r.inWidth,g+dt),yt=X+st*k,Mt=C,At=0,ue=0,Ut=tt;Ut<P;Ut+=c){for(var Qt=V+Ut*t.strides[1],Xt=ot;Xt<L;Xt+=h){for(var ee=Qt+Xt*t.strides[2],le=pt;le<mt;le+=d){var ce=S[ee+le*t.strides[3]+U];if(a==="max"&&ce>Mt?Mt=ce:a==="avg"&&(At+=ce,ue++),isNaN(Mt))break}if(isNaN(Mt))break}if(isNaN(Mt))break}T[yt+U]=a==="avg"?At/ue:Mt}}}return _.toTensor()},e.prototype.avgPool3d=function(t,r){return ht(t,"avgPool3d"),this.pool3d(t,r,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(t,r,a){ht([t,r],"avgPool3dBackprop");for(var o=a.strideDepth,u=a.strideHeight,l=a.strideWidth,c=a.filterDepth,h=a.filterHeight,d=a.filterWidth,v=a.dilationDepth,m=a.dilationHeight,g=a.dilationWidth,x=a.effectiveFilterDepth,E=a.effectiveFilterHeight,w=a.effectiveFilterWidth,C=x-1-a.padInfo.front,S=w-1-a.padInfo.left,_=E-1-a.padInfo.top,T=Ft(r.shape,"float32"),A=1/(c*h*d),D=this.bufferSync(t),N=0;N<a.batchSize;++N)for(var k=0;k<a.inChannels;++k)for(var O=0;O<a.inDepth;++O)for(var B=0;B<a.inHeight;++B)for(var V=0;V<a.inWidth;++V){for(var U=O-C,it=B-_,et=V-S,tt=0,P=0;P<x;P+=v){var G=(U+P)/o;if(!(G<0||G>=a.outDepth||Math.floor(G)!==G))for(var q=0;q<E;q+=m){var nt=(it+q)/u;if(!(nt<0||nt>=a.outHeight||Math.floor(nt)!==nt))for(var ot=0;ot<w;ot+=g){var L=(et+ot)/l;L<0||L>=a.outWidth||Math.floor(L)!==L||(tt+=D.get(N,G,nt,L,k))}}}T.set(tt*A,N,O,B,V,k)}return T.toTensor()},e.prototype.maxPool3d=function(t,r){return ht(t,"maxPool3d"),this.pool3d(t,r,"max").toFloat()},e.prototype.maxPool3dPositions=function(t,r){for(var a=Ft(r.outShape,"int32"),o=r.strideDepth,u=r.strideHeight,l=r.strideWidth,c=r.dilationDepth,h=r.dilationHeight,d=r.dilationWidth,v=r.effectiveFilterDepth,m=r.effectiveFilterHeight,g=r.effectiveFilterWidth,x=r.padInfo.front,E=r.padInfo.top,w=r.padInfo.left,C=this.bufferSync(t),S=0;S<r.batchSize;++S)for(var _=0;_<r.inChannels;++_)for(var T=0;T<r.outDepth;++T){for(var A=T*o-x,D=A;D<0;)D+=c;for(var N=Math.min(r.inDepth,v+A),k=0;k<r.outHeight;++k){for(var O=k*u-E,B=O;B<0;)B+=h;for(var V=Math.min(r.inHeight,m+O),U=0;U<r.outWidth;++U){for(var it=U*l-w,et=it;et<0;)et+=d;for(var tt=Math.min(r.inWidth,g+it),P=Number.NEGATIVE_INFINITY,G=-1,q=D;q<N;q+=c)for(var nt=q-A,ot=B;ot<V;ot+=h)for(var L=ot-O,X=et;X<tt;X+=d){var st=X-it,dt=C.get(S,q,ot,X,_);dt>=P&&(P=dt,G=nt*m*g+L*m+st)}a.set(G,S,T,k,U,_)}}}return a.toTensor()},e.prototype.maxPool3dBackprop=function(t,r,a,o){ht([r,a],"maxPool3dBackprop");for(var u=this.maxPool3dPositions(r,o),l=o.strideDepth,c=o.strideHeight,h=o.strideWidth,d=o.dilationDepth,v=o.dilationHeight,m=o.dilationWidth,g=o.effectiveFilterDepth,x=o.effectiveFilterHeight,E=o.effectiveFilterWidth,w=g-1-o.padInfo.front,C=E-1-o.padInfo.left,S=x-1-o.padInfo.top,_=Ft(r.shape,"float32"),T=this.bufferSync(u),A=this.bufferSync(t),D=0;D<o.batchSize;++D)for(var N=0;N<o.inChannels;++N)for(var k=0;k<o.inDepth;++k)for(var O=0;O<o.inHeight;++O)for(var B=0;B<o.inWidth;++B){for(var V=k-w,U=O-S,it=B-C,et=0,tt=0;tt<g;tt+=d){var P=(V+tt)/l;if(!(P<0||P>=o.outDepth||Math.floor(P)!==P))for(var G=0;G<x;G+=v){var q=(U+G)/c;if(!(q<0||q>=o.outHeight||Math.floor(q)!==q))for(var nt=0;nt<E;nt+=m){var ot=(it+nt)/h;if(!(ot<0||ot>=o.outWidth||Math.floor(ot)!==ot)){var L=g*x*E-1-T.get(D,P,q,ot,N)===tt*x*E+G*E+nt?1:0;L!==0&&(et+=A.get(D,P,q,ot,N)*L)}}}}_.set(et,D,k,O,B,N)}return _.toTensor()},e.prototype.cast=function(t,r){return dS(t,r,this)},e.prototype.reshape=function(t,r){return em(t,r)},e.prototype.avgPool=function(t,r){return ht(t,"avgPool"),this.pool(t,r,"avg").toFloat()},e.prototype.resizeBilinear=function(t,r,a,o){ht(t,"resizeBilinear");for(var u=t.shape,l=u[0],c=u[1],h=u[2],d=u[3],v=this.readSync(t.dataId),m=new Float32Array(St([l,r,a,d])),g=[o&&r>1?c-1:c,o&&a>1?h-1:h],x=[o&&r>1?r-1:r,o&&a>1?a-1:a],E=0,w=g[0]/x[0],C=g[1]/x[1],S=0;S<l;S++)for(var _=0;_<r;_++)for(var T=w*_,A=Math.floor(T),D=T-A,N=Math.min(c-1,Math.ceil(T)),k=S*t.strides[0]+A*t.strides[1],O=S*t.strides[0]+N*t.strides[1],B=0;B<a;B++)for(var V=C*B,U=Math.floor(V),it=V-U,et=Math.min(h-1,Math.ceil(V)),tt=k+U*t.strides[2],P=O+U*t.strides[2],G=k+et*t.strides[2],q=O+et*t.strides[2],nt=0;nt<d;nt++){var ot=v[tt+nt],L=v[P+nt],X=ot+(v[G+nt]-ot)*it,st=X+(L+(v[q+nt]-L)*it-X)*D;m[E++]=st}return sn(m,[l,r,a,d])},e.prototype.resizeBilinearBackprop=function(t,r,a){ht([t,r],"resizeBilinearBackprop");for(var o=r.shape,u=o[0],l=o[1],c=o[2],h=o[3],d=t.shape,v=d[1],m=d[2],g=new Float32Array(u*l*c*h),x=[a&&v>1?l-1:l,a&&m>1?c-1:c],E=[a&&v>1?v-1:v,a&&m>1?m-1:m],w=x[0]/E[0],C=x[1]/E[1],S=this.readSync(t.dataId),_=0,T=0;T<u;T++)for(var A=T*r.strides[0],D=0;D<v;D++)for(var N=D*w,k=Math.floor(N),O=Math.min(Math.ceil(N),l-1),B=A+k*r.strides[1],V=A+O*r.strides[1],U=N-k,it=1-U,et=0;et<m;et++)for(var tt=et*C,P=Math.floor(tt),G=Math.min(Math.ceil(tt),c-1),q=tt-P,nt=1-q,ot=B+P*r.strides[2],L=B+G*r.strides[2],X=V+P*r.strides[2],st=V+G*r.strides[2],dt=it*nt,pt=it*q,mt=U*nt,yt=U*q,Mt=0;Mt<h;Mt++){var At=S[_++];g[ot+Mt]+=At*dt,g[L+Mt]+=At*pt,g[X+Mt]+=At*mt,g[st+Mt]+=At*yt}return An(g,[u,c,l,h],r.dtype)},e.prototype.resizeNearestNeighbor=function(t,r,a,o){ht(t,"resizeNearestNeighbor");for(var u=t.shape,l=u[0],c=u[1],h=u[2],d=u[3],v=this.readSync(t.dataId),m=new Float32Array(l*r*a*d),g=[o&&r>1?c-1:c,o&&a>1?h-1:h],x=[o&&r>1?r-1:r,o&&a>1?a-1:a],E=g[0]/x[0],w=g[1]/x[1],C=0,S=0;S<l;S++)for(var _=S*t.strides[0],T=0;T<r;T++)for(var A=E*T,D=_+Math.min(c-1,o?Math.round(A):Math.floor(A))*t.strides[1],N=0;N<a;N++)for(var k=w*N,O=D+Math.min(h-1,o?Math.round(k):Math.floor(k))*t.strides[2],B=0;B<d;B++){var V=v[O+B];m[C++]=V}return sn(m,[l,r,a,d],t.dtype)},e.prototype.resizeNearestNeighborBackprop=function(t,r,a){ht([t,r],"resizeNearestNeighborBackprop");for(var o=r.shape,u=o[0],l=o[1],c=o[2],h=o[3],d=t.shape,v=d[1],m=d[2],g=new Float32Array(u*l*c*h),x=this.readSync(t.dataId),E=[a&&v>1?l-1:l,a&&m>1?c-1:c],w=[a&&v>1?v-1:v,a&&m>1?m-1:m],C=E[0]/w[0],S=E[1]/w[1],_=1/C,T=1/S,A=2*Math.ceil(_)+2,D=2*Math.ceil(T)+2,N=0;N<u;N++)for(var k=N*r.strides[0],O=0;O<l;O++)for(var B=k+O*r.strides[1],V=Math.floor(O*_),U=Math.floor(V-A/2),it=0;it<c;it++)for(var et=B+it*r.strides[2],tt=Math.floor(it*T),P=Math.floor(tt-D/2),G=0;G<h;G++){for(var q=0,nt=0;nt<A;nt++){var ot=nt+U;if(!(ot<0||ot>=v)){var L=k+ot*t.strides[1],X=ot*C;if(O===Math.min(l-1,a?Math.round(X):Math.floor(X)))for(var st=0;st<D;st++){var dt=st+P;if(!(dt<0||dt>=m)){var pt=L+dt*t.strides[2],mt=dt*S;it===Math.min(c-1,a?Math.round(mt):Math.floor(mt))&&(q+=x[pt+G])}}}}g[et+G]=q}return An(g,r.shape,r.dtype)},e.prototype.batchNormalization=function(t,r,a,o,u,l){ht([t,r,a,u,l],"batchNorm");for(var c=this.readSync(t.dataId),h=this.readSync(r.dataId),d=this.readSync(a.dataId),v=u?this.readSync(u.dataId):new Float32Array([1]),m=l?this.readSync(l.dataId):new Float32Array([0]),g=new Float32Array(c.length),x=m.length,E=v.length,w=d.length,C=h.length,S=0,_=0,T=0,A=0,D=0;D<c.length;++D)g[D]=m[S++]+(c[D]-h[_++])*v[T++]/Math.sqrt(d[A++]+o),S>=x&&(S=0),_>=C&&(_=0),T>=E&&(T=0),A>=w&&(A=0);return An(g,t.shape)},e.prototype.localResponseNormalization4D=function(t,r,a,o,u){ht(t,"localResponseNormalization4D");var l=t.shape[3],c=l-1,h=this.readSync(t.dataId),d=t.size,v=new Float32Array(d);function m(w){for(var C=w%l,S=w-C+Math.max(0,C-r),_=w-C+Math.min(C+r,c),T=0;S<=_;S++){var A=h[S];T+=A*A}return T}for(var g=0;g<d;g++){var x=m(g),E=h[g]*Math.pow(a+o*x,-u);v[g]=E}return An(v,t.shape)},e.prototype.LRNGrad=function(t,r,a,o,u,l,c){ht(t,"LRNGrad");for(var h=t.shape[3],d=this.readSync(t.dataId),v=this.readSync(r.dataId),m=this.readSync(a.dataId),g=new Float32Array(t.size),x=t.size,E=0;E<x;E++){for(var w=E%h,C=E-w+Math.max(0,w-o),S=E-w+Math.min(h,w+o+1),_=0,T=C;T<S;T++)_+=Math.pow(v[T],2);for(_=l*_+u,T=C;T<S;T++){var A=-2*l*c*v[T]*m[E]/_;E===T&&(A+=Math.pow(_,-c)),A*=d[E],g[T]+=A}}return An(g,t.shape)},e.prototype.multinomial=function(t,r,a,o){ht(t,"multinomial");for(var u=r?t:Ta(t),l=u.shape[0],c=u.shape[1],h=ve([l,a],"int32"),d=this.readSync(h.dataId),v=this.readSync(u.dataId),m=0;m<l;++m){var g=m*c,x=new Float32Array(c-1);x[0]=v[g];for(var E=1;E<x.length;++E)x[E]=x[E-1]+v[g+E];for(var w=Kf(o.toString()),C=m*a,S=0;S<a;++S){var _=w();d[C+S]=x.length;for(var T=0;T<x.length;T++)if(_<x[T]){d[C+S]=T;break}}}return h},e.prototype.oneHot=function(t,r,a,o){ht(t,"oneHot");var u=new Float32Array(t.size*r);u.fill(o);for(var l=this.readSync(t.dataId),c=0;c<t.size;++c)l[c]>=0&&l[c]<r&&(u[c*r+l[c]]=a);return si(u,[t.size,r],"int32")},e.prototype.nonMaxSuppression=function(t,r,a,o,u){return ht(t,"nonMaxSuppression"),ag(this.readSync(t.dataId),this.readSync(r.dataId),a,o,u)},e.prototype.fft=function(t){return this.fftBatch(t,!1)},e.prototype.ifft=function(t){return this.fftBatch(t,!0)},e.prototype.fftBatch=function(t,r){for(var a=t.shape[0],o=t.shape[1],u=Ft(t.shape,"float32"),l=Ft(t.shape,"float32"),c=cr(t).as2D(a,o),h=Ur(t).as2D(a,o),d=0;d<a;d++)for(var v=c.slice([d,0],[1,o]),m=h.slice([d,0],[1,o]),g=an(v,m),x=this.readSync(this.fftImpl(g,r).dataId),E=0;E<o;E++){var w=B2(x,E);u.values[d*o+E]=w.real,l.values[d*o+E]=w.imag}return an(u.toTensor(),l.toTensor()).as2D(a,o)},e.prototype.fftImpl=function(t,r){var a=t.as1D(),o=a.size;if(this.isExponentOf2(o)){var u=this.fftRadix2(a,o,r).as2D(t.shape[0],t.shape[1]);return r&&(u=an(cr(u).div(vt(o)),Ur(u).div(vt(o)))),u}var l=this.readSync(t.dataId),c=(function(h){for(var d=new Float32Array(h.length/2),v=new Float32Array(h.length/2),m=0;m<h.length;m+=2)d[m/2]=h[m],v[m/2]=h[m+1];return{real:d,imag:v}})(this.fourierTransformByMatmul(l,o,r));return an(c.real,c.imag).as2D(t.shape[0],t.shape[1])},e.prototype.isExponentOf2=function(t){return(t&t-1)==0},e.prototype.fftRadix2=function(t,r,a){if(r===1)return t;var o=this.readSync(t.dataId),u=r/2,l=(function(C){for(var S=Math.ceil(C.length/4),_=new Float32Array(S),T=new Float32Array(S),A=0;A<C.length;A+=4)_[Math.floor(A/4)]=C[A],T[Math.floor(A/4)]=C[A+1];return{real:_,imag:T}})(o),c=an(l.real,l.imag).as1D(),h=(function(C){for(var S=Math.floor(C.length/4),_=new Float32Array(S),T=new Float32Array(S),A=2;A<C.length;A+=4)_[Math.floor(A/4)]=C[A],T[Math.floor(A/4)]=C[A+1];return{real:_,imag:T}})(o),d=an(h.real,h.imag).as1D();c=this.fftRadix2(c,u,a),d=this.fftRadix2(d,u,a);var v=(function(C,S){for(var _=new Float32Array(C/2),T=new Float32Array(C/2),A=0;A<Math.ceil(C/2);A++){var D=(S?2:-2)*Math.PI*(A/C);_[A]=Math.cos(D),T[A]=Math.sin(D)}return{real:_,imag:T}})(r,a),m=an(v.real,v.imag).mul(d),g=c.add(m),x=c.sub(m),E=cr(g).concat(cr(x)),w=Ur(g).concat(Ur(x));return an(E,w).as1D()},e.prototype.fourierTransformByMatmul=function(t,r,a){for(var o=new Float32Array(2*r),u=0;u<r;u++){for(var l=0,c=0,h=0;h<r;h++){var d=OI(u*h,r,a),v=B2(t,h);l+=v.real*d.real-v.imag*d.imag,c+=v.real*d.imag+v.imag*d.real}a&&(l/=r,c/=r),NI(o,l,c,u)}return o},e.prototype.depthToSpace=function(t,r,a){F(a==="NHWC",(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+a})),F(r>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+r}));for(var o=t.shape[0],u=t.shape[1],l=t.shape[2],c=t.shape[3],h=u*r,d=l*r,v=c/(r*r),m=this.readSync(t.dataId),g=new Float32Array(o*h*d*v),x=0,E=0;E<o;++E)for(var w=0;w<h;++w)for(var C=Math.floor(w/r),S=w%r,_=0;_<d;++_)for(var T=Math.floor(_/r),A=(S*r+_%r)*v,D=0;D<v;++D){var N=D+A+c*(T+l*(C+u*E));g[x++]=m[N]}return An(g,[o,h,d,v])},e.prototype.broadcastedBinaryOp=function(t,r,a,o){var u=jt(t.shape,r.shape),l=Ft(u,a),c=this.readSync(t.dataId),h=this.readSync(r.dataId),d=ii(t.shape,u),v=ii(r.shape,u),m=l.values;if(d.length+v.length===0)for(var g=0;g<m.length;++g)m[g]=o(c[g%c.length],h[g%h.length]);else{var x=this.bufferSync(t),E=this.bufferSync(r),w=function(C){var S=l.indexToLoc(C),_=S.slice(-t.rank);d.forEach((function(N){return _[N]=0}));var T=x.locToIndex(_),A=S.slice(-r.rank);v.forEach((function(N){return A[N]=0}));var D=E.locToIndex(A);m[C]=o(c[T],h[D])};for(g=0;g<m.length;++g)w(g)}return l.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(t,r,a){var o=jt(t.shape,r.shape),u=Ft(o,"float32"),l=Ft(o,"float32"),c=this.readSync(t.dataId),h=this.readSync(r.dataId),d=ii(t.shape,o),v=ii(r.shape,o),m=u.values,g=l.values;if(d.length+v.length===0)for(var x=0;x<m.length;x++){var E=x%c.length,w=x%h.length,C=a(c[2*E],c[2*E+1],h[2*w],h[2*w+1]);m[x]=C.real,g[x]=C.imag}else{var S=this.bufferSync(this.data.get(t.dataId).complexTensors.real),_=this.bufferSync(this.data.get(r.dataId).complexTensors.real),T=function(A){var D=u.indexToLoc(A),N=D.slice(-t.rank);d.forEach((function(U){return N[U]=0}));var k=S.locToIndex(N),O=D.slice(-r.rank);v.forEach((function(U){return O[U]=0}));var B=_.locToIndex(O),V=a(c[2*k],c[2*k+1],h[2*B],h[2*B+1]);m[A]=V.real,g[A]=V.imag};for(x=0;x<m.length;x++)T(x)}return this.complex(u.toTensor(),l.toTensor())},e.prototype.split=function(t,r,a){return mS(t,r,a)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(t,r,a,o,u,l){for(var c=t.shape,h=c[0],d=c[1],v=c[2],m=c[3],g=r.shape[0],x=o[0],E=o[1],w=Ft([g,x,E,m],"float32"),C=this.readSync(r.dataId),S=this.readSync(a.dataId),_=this.readSync(t.dataId),T=t.strides,A=w.strides,D=0;D<g;D++){var N=4*D,k=C[N],O=C[N+1],B=C[N+2],V=C[N+3],U=S[D];if(!(U>=h))for(var it=x>1?(B-k)*(d-1)/(x-1):0,et=E>1?(V-O)*(v-1)/(E-1):0,tt=0;tt<x;tt++){var P=x>1?k*(d-1)+tt*it:.5*(k+B)*(d-1);if(P<0||P>d-1)for(var G=0;G<E;G++)for(var q=0;q<m;q++){var nt=q+G*A[2]+tt*A[1]+D*A[0];w.values[nt]=l}else if(u==="bilinear"){var ot=Math.floor(P),L=Math.ceil(P),X=P-ot;for(G=0;G<E;G++)if((Ut=E>1?O*(v-1)+G*et:.5*(O+V)*(v-1))<0||Ut>v-1)for(q=0;q<m;q++)nt=q+G*A[2]+tt*A[1]+D*A[0],w.values[nt]=l;else{var st=Math.floor(Ut),dt=Math.ceil(Ut),pt=Ut-st;for(q=0;q<m;q++){var mt=_[nt=q+st*T[2]+ot*T[1]+U*T[0]],yt=_[nt=q+dt*T[2]+ot*T[1]+U*T[0]],Mt=_[nt=q+st*T[2]+L*T[1]+U*T[0]],At=mt+(yt-mt)*pt,ue=Mt+(_[nt=q+dt*T[2]+L*T[1]+U*T[0]]-Mt)*pt;nt=q+G*A[2]+tt*A[1]+D*A[0],w.values[nt]=At+(ue-At)*X}}}else for(G=0;G<E;++G){var Ut;if((Ut=E>1?O*(v-1)+G*et:.5*(O+V)*(v-1))<0||Ut>v-1)for(q=0;q<m;q++)nt=q+G*A[2]+tt*A[1]+D*A[0],w.values[nt]=l;else{var Qt=Math.round(Ut),Xt=Math.round(P);for(q=0;q<m;q++){var ee=q+Qt*T[2]+Xt*T[1]+U*T[0],le=q+G*A[2]+tt*A[1]+D*A[0];w.values[le]=_[ee]}}}}}return w.toTensor()},e.prototype.sparseToDense=function(t,r,a,o){var u=Df(0,t,a),l=u.sliceRank,c=u.numUpdates,h=u.sliceSize,d=u.strides,v=u.outputSize;return this.scatter(t,r,a,v,h,c,l,d,o,!1)},e.prototype.gatherND=function(t,r){var a=r.shape,o=a[a.length-1],u=oS(t,r),l=u[0],c=u[1],h=u[2],d=u[3];if(c===0)return sn([],l,t.dtype);for(var v=new Wu([c,h],t.dtype),m=this.readSync(r.dataId),g=this.readSync(t.dataId),x=0;x<c;x++){for(var E=[],w=0,C=0;C<o;C++){var S=m[x*o+C];w+=S*d[C],E.push(S)}if(w<0||w>=t.size/h)throw new Error("Invalid indices: "+E+" does not index into "+t.shape);for(var _=0;_<h;_++)v.values[x*h+_]=g[w*h+_]}return v.toTensor().reshape(l)},e.prototype.scatterND=function(t,r,a){var o=Df(0,t,a),u=o.sliceRank,l=o.numUpdates,c=o.sliceSize,h=o.strides,d=o.outputSize,v=vt(0);return this.scatter(t,r,a,d,c,l,u,h,v,!0)},e.prototype.fill=function(t,r,a){var o=bf(a=a||ul(r),St(t));return o.fill(r),W.makeTensor(o,t,a,this)},e.prototype.onesLike=function(t){if(t.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(t.shape,1,t.dtype)},e.prototype.zerosLike=function(t){var r=bf(t.dtype,St(t.shape));return this.makeOutput(r,t.shape,t.dtype)},e.prototype.linspace=function(t,r,a){return pS(t,r,a)},e.prototype.scatter=function(t,r,a,o,u,l,c,h,d,v){var m=[o/u,u],g=this.readSync(t.dataId),x=this.readSync(r.dataId);if(o===0)return sn([],a,r.dtype);var E=new Wu(m,r.dtype);E.values.fill(this.readSync(d.dataId)[0]);for(var w=0;w<l;w++){for(var C=[],S=0,_=0;_<c;_++){var T=g[w*c+_];C.push(T),S+=T*h[_]}if(S<0||S>=o/u)throw new Error("Invalid indices: "+C+" does not index into "+a);for(var A=0;A<u;A++)v?E.values[S*u+A]+=x[w*u+A]:E.values[S*u+A]=r.rank===0?x[0]:x[w*u+A]}return E.toTensor().reshape(a)},e})(fS);W.registerBackend("cpu",(function(){return new JP}),1);for(var lv=0,rw=[{kernelName:"NonMaxSuppressionV5",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,a=e,o=a.boxes,u=a.scores,l=r,c=l.maxOutputSize,h=l.iouThreshold,d=l.scoreThreshold,v=l.softNmsSigma,m=t;ht(o,"NonMaxSuppressionWithScore");var g=ig(m.data.get(o.dataId).values,m.data.get(u.dataId).values,c,h,d,v);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,a=t;ht(r,"square");for(var o=a.data.get(r.dataId).values,u=new Float32Array(o.length),l=0;l<o.length;++l){var c=o[l];u[l]=c*c}return{dataId:a.write(u,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}},{kernelName:Xu,backendName:"cpu",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,a=r.a,o=r.b,u=t;ht([a,o],Xu);var l=u.data.get(a.dataId).values,c=u.data.get(o.dataId).values,h=(function(m,g,x,E,w,C){var S=jt(m,g),_=S.length,T=Wr(S),A=ju(w,St(S)),D=m.length,N=g.length,k=Wr(m),O=Wr(g),B=ii(m,S),V=ii(g,S);if(B.length+V.length===0)for(var U=0;U<A.length;++U)A[U]=C(x[U%x.length],E[U%E.length]);else{var it=function(et){var tt=uk(et,_,T),P=tt.slice(-D);B.forEach((function(ot){return P[ot]=0}));var G=T2(P,D,k),q=tt.slice(-N);V.forEach((function(ot){return q[ot]=0}));var nt=T2(q,N,O);A[et]=C(x[G],E[nt])};for(U=0;U<A.length;++U)it(U)}return[A,S]})(a.shape,o.shape,l,c,a.dtype,(function(m,g){var x=m-g;return x*x})),d=h[0],v=h[1];return{dataId:u.write(d,v,a.dtype),shape:v,dtype:a.dtype}}}];lv<rw.length;lv++)zC(rw[lv]);var Xo,$P=function(n){this.variableNames=["A"];var e=fn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(`+r+".0, "+t+`.0);

        vec4 values = `+e.texture2D+`(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `},tz=function(n){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;var e=fn(),t=n[0],r=n[1];this.outputShape=n,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(`+r+".0, "+t+`.0);
            vec4 values = `+e.texture2D+`(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        `+e.output+` = result;
      }
    `};for(var cv=0,aw=[{kernelName:"FromPixels",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs,a=e.pixels,o=r.numChannels,u=typeof HTMLVideoElement<"u"&&a instanceof HTMLVideoElement,l=typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement,c=u?[a.videoWidth,a.videoHeight]:[a.width,a.height],h=c[0],d=c[1],v=[d,h],m=[d,h,o];(l||u)&&(Xo==null&&(Xo=document.createElement("canvas").getContext("2d")),Xo.canvas.width=h,Xo.canvas.height=d,Xo.drawImage(a,0,0,h,d),a=Xo.canvas);var g=t.makeTensorInfo(v,"int32");t.texData.get(g.dataId).usage=qn.PIXELS,t.gpgpu.uploadPixelDataToTexture(t.getTexture(g.dataId),a);var x=lt().getBool("WEBGL_PACK")?new tz(m):new $P(m),E=t.runWebGLProgram(x,[g],"int32");return t.disposeData(g.dataId),E}},{kernelName:"NonMaxSuppressionV5",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=n.attrs;Cf("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");var a=e,o=a.boxes,u=a.scores,l=r,c=l.maxOutputSize,h=l.iouThreshold,d=l.scoreThreshold,v=l.softNmsSigma,m=t,g=ig(m.readSync(o.dataId),m.readSync(u.dataId),c,h,d,v);return[g.selectedIndices,g.selectedScores]}},{kernelName:"Square",backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e.x,a=t,o=new zt(r.shape,"return x * x;");return a.runWebGLProgram(o,[r],r.dtype)}},{kernelName:Xu,backendName:"webgl",kernelFunc:function(n){var e=n.inputs,t=n.backend,r=e,a=r.a,o=r.b,u=t,l=lt().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new ya("return (a - b) * (a - b);",a.shape,o.shape):new _e("return (a - b) * (a - b);",a.shape,o.shape);return u.compileAndRun(l,[a,o])}}];cv<aw.length;cv++)zC(aw[cv]);for(var fv=0,iw=[{kernelName:"Square",gradFunc:function(n,e){var t=e[0];return{x:function(){return n.mul(t.toFloat().mul(2))}}}},{kernelName:Xu,gradFunc:function(n,e){var t=e[0],r=e[1],a=vt(2);return{a:function(){return vn(n,vn(a,Ge(t,r)))},b:function(){return vn(n,vn(a,Ge(r,t)))}}}}];fv<iw.length;fv++)Z4(iw[fv]);var ez=(function(){function n(){}return n.prototype.fetch=function(e,t){return fetch(e,t)},n.prototype.now=function(){return performance.now()},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+t);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},n})();lt().get("IS_BROWSER")&&lt().setPlatform("browser",new ez);var hv,nz=function(){return require("node-fetch")},rz=(function(){function n(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return n.prototype.fetch=function(e,t){return lt().global.fetch!=null?lt().global.fetch(e,t):(hv==null&&(hv=nz()),hv(e,t))},n.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},n.prototype.encode=function(e,t){if(t!=="utf-8"&&t!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},n.prototype.decode=function(e,t){return e.length===0?"":new this.util.TextDecoder(t).decode(e)},n})();lt().get("IS_NODE")&&lt().setPlatform("node",new rz);var am={float32:4,int32:4,uint16:2,uint8:1,bool:1},Ff=4;function u_(n,e){for(var t={},r=0,a=function(l){var c=l.name,h=l.dtype,d=l.shape,v=St(d),m=void 0;if("quantization"in l){var g=l.quantization;if(g.dtype!=="uint8"&&g.dtype!=="uint16")throw new Error("Weight "+l.name+" has unknown quantization dtype "+g.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var x=am[g.dtype],E=n.slice(r,r+v*x),w=g.dtype==="uint8"?new Uint8Array(E):new Uint16Array(E);if(h==="float32")m=Float32Array.from(w,(function(D){return D*g.scale+g.min}));else{if(h!=="int32")throw new Error("Unsupported dtype in weight '"+c+"': "+h);m=Int32Array.from(w,(function(D){return Math.round(D*g.scale+g.min)}))}r+=v*x}else if(h==="string"){var C=St(l.shape);m=[];for(var S=0;S<C;S++){var _=new Uint32Array(n.slice(r,r+Ff))[0];r+=Ff;var T=new Uint8Array(n.slice(r,r+_));m.push(T),r+=_}}else{var A=am[h];if(E=n.slice(r,r+v*A),h==="float32")m=new Float32Array(E);else if(h==="int32")m=new Int32Array(E);else{if(h!=="bool")throw new Error("Unsupported dtype in weight '"+c+"': "+h);m=new Uint8Array(E)}r+=v*A}t[c]=sn(m,d,h)},o=0,u=e;o<u.length;o++)a(u[o]);return t}function az(n){if(n===null)throw new Error("Invalid input value: "+JSON.stringify(n));var e=0,t=[];n.forEach((function(o){if(e+=o.byteLength,t.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)}));var r=new Uint8Array(e),a=0;return t.forEach((function(o){r.set(new Uint8Array(o.buffer),a),a+=o.byteLength})),r.buffer}var im=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function ow(n){return im?Buffer.byteLength(n):new Blob([n]).size}function Sg(n){var e=0;n.forEach((function(a){e+=a.byteLength}));var t=new Uint8Array(e),r=0;return n.forEach((function(a){t.set(new Uint8Array(a),r),r+=a.byteLength})),t.buffer}function sw(n){for(n=n.trim();n.endsWith("/");)n=n.slice(0,n.length-1);var e=n.split("/");return e[e.length-1]}function vl(n){if(n.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:n.modelTopology==null?0:ow(JSON.stringify(n.modelTopology)),weightSpecsBytes:n.weightSpecs==null?0:ow(JSON.stringify(n.weightSpecs)),weightDataBytes:n.weightData==null?0:n.weightData.byteLength}}var Kn=(function(){function n(){this.saveRouters=[],this.loadRouters=[]}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerSaveRouter=function(e){n.getInstance().saveRouters.push(e)},n.registerLoadRouter=function(e){n.getInstance().loadRouters.push(e)},n.getSaveHandlers=function(e){return n.getHandlers(e,"save")},n.getLoadHandlers=function(e,t){return n.getHandlers(e,"load",t)},n.getHandlers=function(e,t,r){var a=[];return(t==="load"?n.getInstance().loadRouters:n.getInstance().saveRouters).forEach((function(o){var u=o(e,r);u!==null&&a.push(u)})),a},n})(),ds="://",ui=(function(){function n(){this.managers={}}return n.getInstance=function(){return n.instance==null&&(n.instance=new n),n.instance},n.registerManager=function(e,t){F(e!=null,(function(){return"scheme must not be undefined or null."})),e.endsWith(ds)&&(e=e.slice(0,e.indexOf(ds))),F(e.length>0,(function(){return"scheme must not be an empty string."}));var r=n.getInstance();F(r.managers[e]==null,(function(){return"A model store manager is already registered for scheme '"+e+"'."})),r.managers[e]=t},n.getManager=function(e){var t=this.getInstance().managers[e];if(t==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},n.getSchemes=function(){return Object.keys(this.getInstance().managers)},n})();function uf(n){if(n.indexOf(ds)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+ui.getSchemes().join(","));return{scheme:n.split(ds)[0],path:n.split(ds)[1]}}function uw(n,e,t){return t===void 0&&(t=!1),xt(this,void 0,void 0,(function(){var r,a,o,u,l,c,h,d,v;return wt(this,(function(m){switch(m.label){case 0:return F(n!==e,(function(){return"Old path and new path are the same: '"+n+"'"})),F((r=Kn.getLoadHandlers(n)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+n+"."})),F(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+n+"."})),a=r[0],F((o=Kn.getSaveHandlers(e)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+e+"."})),F(o.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."})),u=o[0],l=uf(n).scheme,c=uf(n).path,h=l===uf(n).scheme,[4,a.load()];case 1:return d=m.sent(),t&&h?[4,ui.getManager(l).removeModel(c)]:[3,3];case 2:m.sent(),m.label=3;case 3:return[4,u.save(d)];case 4:return v=m.sent(),!t||h?[3,6]:[4,ui.getManager(l).removeModel(c)];case 5:m.sent(),m.label=6;case 6:return[2,v.modelArtifactsInfo]}}))}))}var qi="models_store",oi="model_info_store";function l_(){if(!lt().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var n=window||self,e=n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB||n.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function om(n){var e=n.result;e.createObjectStore(qi,{keyPath:"modelPath"}),e.createObjectStore(oi,{keyPath:"modelPath"})}var ps=(function(){function n(e){if(this.indexedDB=l_(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return n.prototype.save=function(e){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},n.prototype.load=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},n.prototype.databaseAction=function(e,t){var r=this;return new Promise((function(a,o){var u=r.indexedDB.open("tensorflowjs",1);u.onupgradeneeded=function(){return om(u)},u.onsuccess=function(){var l=u.result;if(t==null){var c=l.transaction(qi,"readonly"),h=c.objectStore(qi).get(r.modelPath);h.onsuccess=function(){if(h.result==null)return l.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));a(h.result.modelArtifacts)},h.onerror=function(E){return l.close(),o(h.error)},c.oncomplete=function(){return l.close()}}else{var d,v=vl(t),m=l.transaction(oi,"readwrite"),g=m.objectStore(oi),x=g.put({modelPath:r.modelPath,modelArtifactsInfo:v});x.onsuccess=function(){var E=(d=l.transaction(qi,"readwrite")).objectStore(qi).put({modelPath:r.modelPath,modelArtifacts:t,modelArtifactsInfo:v});E.onsuccess=function(){return a({modelArtifactsInfo:v})},E.onerror=function(w){var C=(g=m.objectStore(oi)).delete(r.modelPath);C.onsuccess=function(){return l.close(),o(E.error)},C.onerror=function(S){return l.close(),o(E.error)}}},x.onerror=function(E){return l.close(),o(x.error)},m.oncomplete=function(){d==null?l.close():d.oncomplete=function(){return l.close()}}}},u.onerror=function(l){return o(u.error)}}))},n.URL_SCHEME="indexeddb://",n})(),lw=function(n){return lt().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(ps.URL_SCHEME)?(e=n.slice(ps.URL_SCHEME.length),new ps(e)):null;var e};Kn.registerSaveRouter(lw),Kn.registerLoadRouter(lw);var iz=(function(){function n(){this.indexedDB=l_()}return n.prototype.listModels=function(){return xt(this,void 0,void 0,(function(){var e=this;return wt(this,(function(t){return[2,new Promise((function(r,a){var o=e.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return om(o)},o.onsuccess=function(){var u=o.result,l=u.transaction(oi,"readonly"),c=l.objectStore(oi).getAll();c.onsuccess=function(){for(var h={},d=0,v=c.result;d<v.length;d++){var m=v[d];h[m.modelPath]=m.modelArtifactsInfo}r(h)},c.onerror=function(h){return u.close(),a(c.error)},l.oncomplete=function(){return u.close()}},o.onerror=function(u){return a(o.error)}}))]}))}))},n.prototype.removeModel=function(e){return xt(this,void 0,void 0,(function(){var t=this;return wt(this,(function(r){var a;return e=(a=e).startsWith(ps.URL_SCHEME)?a.slice(ps.URL_SCHEME.length):a,[2,new Promise((function(o,u){var l=t.indexedDB.open("tensorflowjs",1);l.onupgradeneeded=function(){return om(l)},l.onsuccess=function(){var c,h=l.result,d=h.transaction(oi,"readwrite"),v=d.objectStore(oi),m=v.get(e);m.onsuccess=function(){if(m.result==null)return h.close(),u(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var g=v.delete(e),x=function(){var E=(c=h.transaction(qi,"readwrite")).objectStore(qi).delete(e);E.onsuccess=function(){return o(m.result.modelArtifactsInfo)},E.onerror=function(w){return u(m.error)}};g.onsuccess=x,g.onerror=function(E){return x(),h.close(),u(m.error)}},m.onerror=function(g){return h.close(),u(m.error)},d.oncomplete=function(){c==null?h.close():c.oncomplete=function(){return h.close()}}},l.onerror=function(c){return u(l.error)}}))]}))}))},n})();if(lt().getBool("IS_BROWSER"))try{ui.registerManager(ps.URL_SCHEME,new iz)}catch{}var ba="/",es="tensorflowjs_models",c_="info",oz="model_topology",sz="weight_specs",uz="weight_data",lz="model_metadata";function f_(n){return{info:[es,n,c_].join(ba),topology:[es,n,oz].join(ba),weightSpecs:[es,n,sz].join(ba),weightData:[es,n,uz].join(ba),modelMetadata:[es,n,lz].join(ba)}}function cz(n){var e=n.split(ba);if(e.length<3)throw new Error("Invalid key format: "+n);return e.slice(1,e.length-1).join(ba)}var vs=(function(){function n(e){if(!lt().getBool("IS_BROWSER")||typeof window>"u"||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=f_(this.modelPath)}return n.prototype.save=function(e){return xt(this,void 0,void 0,(function(){var t,r,a;return wt(this,(function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),a=vl(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(a)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(function(u){if(im)return Buffer.from(u).toString("base64");for(var l=new Uint8Array(u),c="",h=0,d=l.length;h<d;h++)c+=String.fromCharCode(l[h]);return btoa(c)})(e.weightData)),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata})),[2,{modelArtifactsInfo:a}]}catch{throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+a.modelTopologyBytes+", weightSpecsBytes="+a.weightSpecsBytes+", weightDataBytes="+a.weightDataBytes+".")}return[2]}))}))},n.prototype.load=function(){return xt(this,void 0,void 0,(function(){var e,t,r,a,o,u,l;return wt(this,(function(c){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=r,(a=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=a,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(u=JSON.parse(o),t.format=u.format,t.generatedBy=u.generatedBy,t.convertedBy=u.convertedBy,t.userDefinedMetadata=u.userDefinedMetadata),(l=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=(function(h){if(im){var d=Buffer.from(h,"base64");return d.buffer.slice(d.byteOffset,d.byteOffset+d.byteLength)}for(var v=atob(h),m=new Uint8Array(v.length),g=0;g<v.length;++g)m.set([v.charCodeAt(g)],g);return m.buffer})(l),[2,t]}))}))},n.URL_SCHEME="localstorage://",n})(),cw=function(n){return lt().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(vs.URL_SCHEME)?(e=n.slice(vs.URL_SCHEME.length),new vs(e)):null;var e};Kn.registerSaveRouter(cw),Kn.registerLoadRouter(cw);var fz=(function(){function n(){F(lt().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),F(typeof window>"u"||window.localStorage!==void 0,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return n.prototype.listModels=function(){return xt(this,void 0,void 0,(function(){var e,t,r,a,o,u;return wt(this,(function(l){for(e={},t=es+ba,r=ba+c_,a=0;a<this.LS.length;++a)(o=this.LS.key(a)).startsWith(t)&&o.endsWith(r)&&(u=cz(o),e[u]=JSON.parse(this.LS.getItem(o)));return[2,e]}))}))},n.prototype.removeModel=function(e){return xt(this,void 0,void 0,(function(){var t,r;return wt(this,(function(a){var o;if(e=(o=e).startsWith(vs.URL_SCHEME)?o.slice(vs.URL_SCHEME.length):o,t=f_(e),this.LS.getItem(t.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,r]}))}))},n})();if(lt().getBool("IS_BROWSER"))try{ui.registerManager(vs.URL_SCHEME,new fz)}catch{}var hz="model",dz=".json",pz=".weights.bin";function fw(n){return new Promise((function(e){return setTimeout(e)})).then(n)}var dv=(function(){function n(e){if(!lt().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(n.URL_SCHEME)&&(e=e.slice(n.URL_SCHEME.length)),e!=null&&e.length!==0||(e=hz),this.modelTopologyFileName=e+dz,this.weightDataFileName=e+pz}return n.prototype.save=function(e){return xt(this,void 0,void 0,(function(){var t,r,a,o,u,l;return wt(this,(function(c){switch(c.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(a)],{type:"application/json"})),(u=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,u.href=o,[4,fw((function(){return u.dispatchEvent(new MouseEvent("click"))}))];case 2:return c.sent(),e.weightData==null?[3,4]:((l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,l.href=t,[4,fw((function(){return l.dispatchEvent(new MouseEvent("click"))}))]);case 3:c.sent(),c.label=4;case 4:return[2,{modelArtifactsInfo:vl(e)}]}}))}))},n.URL_SCHEME="downloads://",n})(),vz=(function(){function n(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return n.prototype.load=function(){return xt(this,void 0,void 0,(function(){var e,t,r=this;return wt(this,(function(a){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(o,u){var l=new FileReader;l.onload=function(c){var h=JSON.parse(c.target.result),d=h.modelTopology;if(d!=null){t.length===0&&o({modelTopology:d});var v=h.weightsManifest;if(v!=null){var m;try{m=r.checkManifestAndWeightFiles(v,t)}catch(w){return void u(w)}var g=[],x=[],E=[];v.forEach((function(w){w.paths.forEach((function(C){x.push(C),E.push(null)})),g.push.apply(g,w.weights)})),v.forEach((function(w){w.paths.forEach((function(C){var S=new FileReader;S.onload=function(_){var T=_.target.result,A=x.indexOf(C);E[A]=T,E.indexOf(null)===-1&&o({modelTopology:d,weightSpecs:g,weightData:Sg(E),format:h.format,generatedBy:h.generatedBy,convertedBy:h.convertedBy,userDefinedMetadata:h.userDefinedMetadata})},S.onerror=function(_){return u("Failed to weights data from file of path '"+C+"'.")},S.readAsArrayBuffer(m[C])}))}))}else u(new Error("weightManifest field is missing from file "+e.name))}else u(new Error("modelTopology field is missing from file "+e.name))},l.onerror=function(c){return u("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},l.readAsText(e)}))]}))}))},n.prototype.checkManifestAndWeightFiles=function(e,t){for(var r=[],a=t.map((function(c){return sw(c.name)})),o={},u=0,l=e;u<l.length;u++)l[u].paths.forEach((function(c){var h=sw(c);if(r.indexOf(h)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+h+"'");if(r.push(h),a.indexOf(h)===-1)throw new Error("Weight file with basename '"+h+"' is not provided.");o[c]=t[a.indexOf(h)]}));if(r.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+t.length+").");return o},n})();function hw(n,e,t,r){(function(o){F(o!=null&&Array.isArray(o)&&o.length>0,(function(){return"promises must be a none empty array"}))})(n),(function(o,u){F(o>=0&&o<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o})),F(u>=0&&u<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+u})),F(u>=o,(function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+u}))})(t=t??0,r=r??1);var a=0;return Promise.all(n.map((function(o){return o.then((function(u){var l=t+ ++a/n.length*(r-t);return e(l),u})),o})))}function h_(n,e){return xt(this,void 0,void 0,(function(){var t,r,a,o,u,l,c,h,d;return wt(this,(function(v){switch(v.label){case 0:return e==null&&(e={}),t=e.fetchFunc==null?lt().platform.fetch:e.fetchFunc,r=n.map((function(m){return t(m,e.requestInit,{isBinary:!0})})),a=0,o=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return u=v.sent(),[3,4];case 2:return[4,hw(r,e.onProgress,a,o)];case 3:u=v.sent(),v.label=4;case 4:return l=u.map((function(m){return m.arrayBuffer()})),c=.5,h=1,e.onProgress!=null?[3,6]:[4,Promise.all(l)];case 5:return d=v.sent(),[3,8];case 6:return[4,hw(l,e.onProgress,c,h)];case 7:d=v.sent(),v.label=8;case 8:return[2,d]}}))}))}function dw(n){var e=this;return function(t,r,a){return r===void 0&&(r=""),xt(e,void 0,void 0,(function(){var o,u,l,c,h,d,v,m,g,x;return wt(this,(function(E){switch(E.label){case 0:if(o=t.map((function(){return!1})),u={},l=a!=null?a.map((function(){return!1})):[],c=[],t.forEach((function(w,C){var S=0;w.weights.forEach((function(_){var T="quantization"in _?_.quantization.dtype:_.dtype,A=am[T]*St(_.shape),D=function(){o[C]=!0,u[C]==null&&(u[C]=[]),u[C].push({manifestEntry:_,groupOffset:S,sizeBytes:A})};a!=null?a.forEach((function(N,k){N===_.name&&(D(),l[k]=!0)})):D(),c.push(_.name),S+=A}))})),!l.every((function(w){return w})))throw h=a.filter((function(w,C){return!l[C]})),new Error("Could not find weights in manifest with names: "+h.join(", ")+`. 
Manifest JSON has weights with names: `+c.join(", ")+".");return d=o.reduce((function(w,C,S){return C&&w.push(S),w}),[]),v=[],d.forEach((function(w){t[w].paths.forEach((function(C){var S=r+(r.endsWith("/")?"":"/")+C;v.push(S)}))})),[4,n(v)];case 1:return m=E.sent(),g={},x=0,d.forEach((function(w){for(var C=t[w].paths.length,S=0,_=0;_<C;_++)S+=m[x+_].byteLength;for(var T=new ArrayBuffer(S),A=new Uint8Array(T),D=0,N=0;N<C;N++){var k=new Uint8Array(m[x+N]);A.set(k,D),D+=k.byteLength}u[w].forEach((function(O){var B=u_(T.slice(O.groupOffset,O.groupOffset+O.sizeBytes),[O.manifestEntry]);for(var V in B)g[V]=B[V]})),x+=C})),[2,g]}}))}))}}Kn.registerSaveRouter((function(n){return lt().getBool("IS_BROWSER")&&!Array.isArray(n)&&n.startsWith(dv.URL_SCHEME)?(function(e){return e===void 0&&(e="model"),new dv(e)})(n.slice(dv.URL_SCHEME.length)):null}));var d_=(function(){function n(e,t){if(this.DEFAULT_METHOD="POST",t==null&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,t.fetchFunc!=null?(F(typeof t.fetchFunc=="function",(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=lt().platform.fetch,F(e!=null&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&F(e.length===2,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,t.requestInit!=null&&t.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return n.prototype.save=function(e){return xt(this,void 0,void 0,(function(){var t,r,a,o;return wt(this,(function(u){switch(u.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],a={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},t.body.append("model.json",new Blob([JSON.stringify(a)],{type:"application/json"}),"model.json"),e.weightData!=null&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((o=u.sent()).ok)return[2,{modelArtifactsInfo:vl(e),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}}))}))},n.prototype.load=function(){return xt(this,void 0,void 0,(function(){var e,t,r,a,o,u,l,c,h,d,v,m;return wt(this,(function(g){switch(g.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=g.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");g.label=2;case 2:return g.trys.push([2,4,,5]),[4,e.json()];case 3:return t=g.sent(),[3,5];case 4:throw g.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(a=t.modelTopology,o=t.weightsManifest,u=t.generatedBy,l=t.convertedBy,c=t.format,h=t.userDefinedMetadata,a==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:m=g.sent(),d=m[0],v=m[1],g.label=7;case 7:return[2,{modelTopology:a,weightSpecs:d,weightData:v,userDefinedMetadata:h,generatedBy:u,convertedBy:l,format:c}]}}))}))},n.prototype.loadWeights=function(e){return xt(this,void 0,void 0,(function(){var t,r,a,o,u,l,c,h,d,v,m;return wt(this,(function(g){switch(g.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,r=(function(x){var E=x.lastIndexOf("/"),w=x.lastIndexOf("?"),C=x.substring(0,E),S=w>E?x.substring(w):"";return[C+"/",S]})(t),a=r[0],o=r[1],u=this.weightPathPrefix||a,l=[],c=0,h=e;c<h.length;c++)d=h[c],l.push.apply(l,d.weights);return v=[],e.forEach((function(x){x.paths.forEach((function(E){v.push(u+E+o)}))})),[4,h_(v,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return m=g.sent(),[2,[l,Sg(m)]]}}))}))},n.URL_SCHEME_REGEX=/^https?:\/\//,n})();function sm(n){return n.match(d_.URL_SCHEME_REGEX)!=null}var pw=function(n,e){return typeof fetch>"u"?null:(Array.isArray(n)?n.every((function(t){return sm(t)})):sm(n))?um(n,{onProgress:e}):null};function um(n,e){return new d_(n,e)}Kn.registerSaveRouter(pw),Kn.registerLoadRouter(pw);var pv=(function(){function n(e){this.modelArtifacts=e}return n.prototype.load=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(e){return[2,this.modelArtifacts]}))}))},n})(),mz=(function(){function n(e){this.saveHandler=e}return n.prototype.save=function(e){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){return[2,this.saveHandler(e)]}))}))},n})(),p_=Object.freeze({browserFiles:function(n){return new vz(n)},browserHTTPRequest:function(n,e){return um(n,e)},concatenateArrayBuffers:Sg,decodeWeights:u_,encodeWeights:function(n,e){return xt(this,void 0,void 0,(function(){var t,r,a,o,u,l=this;return wt(this,(function(c){switch(c.label){case 0:for(t=[],r=[],a=Array.isArray(n)?n.map((function(h){return h.name})):Object.keys(n),o=function(h){var d=a[h],v=Array.isArray(n)?n[h].tensor:n[d];if(v.dtype!=="float32"&&v.dtype!=="int32"&&v.dtype!=="bool"&&v.dtype!=="string")throw new Error("Unsupported dtype in weight '"+d+"': "+v.dtype);var m={name:d,shape:v.shape,dtype:v.dtype};if(v.dtype==="string"){var g=new Promise((function(x){return xt(l,void 0,void 0,(function(){var E,w,C,S,_,T,A;return wt(this,(function(D){switch(D.label){case 0:return[4,v.bytes()];case 1:for(E=D.sent(),w=E.reduce((function(N,k){return N+k.length}),0)+Ff*E.length,C=new Uint8Array(w),S=0,_=0;_<E.length;_++)T=E[_],A=new Uint8Array(new Uint32Array([T.length]).buffer),C.set(A,S),S+=Ff,C.set(T,S),S+=T.length;return x(C),[2]}}))}))}));r.push(g)}else r.push(v.data());e!=null&&(m.group=e),t.push(m)},u=0;u<a.length;++u)o(u);return[4,Promise.all(r)];case 1:return[2,{data:az(c.sent()),specs:t}]}}))}))},fromMemory:function(n,e,t,r){return arguments.length===1?n.modelTopology!=null||n.weightSpecs!=null?new pv(n):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new pv({modelTopology:n})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new pv({modelTopology:n,weightSpecs:e,weightData:t,trainingConfig:r}))},getLoadHandlers:function(n,e){return Kn.getLoadHandlers(n,e)},getModelArtifactsInfoForJSON:vl,getSaveHandlers:function(n){return Kn.getSaveHandlers(n)},http:um,isHTTPScheme:sm,loadWeights:function(n,e,t,r){return e===void 0&&(e=""),xt(this,void 0,void 0,(function(){return wt(this,(function(a){return[2,dw((function(o){return h_(o,{requestInit:r})}))(n,e,t)]}))}))},registerLoadRouter:function(n){return Kn.registerLoadRouter(n)},registerSaveRouter:function(n){return Kn.registerSaveRouter(n)},weightsLoaderFactory:dw,withSaveHandler:function(n){return new mz(n)},copyModel:function(n,e){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){return[2,uw(n,e,!1)]}))}))},listModels:function(){return xt(this,void 0,void 0,(function(){var n,e,t,r,a,o,u;return wt(this,(function(l){switch(l.label){case 0:n=ui.getSchemes(),e={},t=0,r=n,l.label=1;case 1:return t<r.length?(a=r[t],[4,ui.getManager(a).listModels()]):[3,4];case 2:for(u in o=l.sent())e[a+ds+u]=o[u];l.label=3;case 3:return t++,[3,1];case 4:return[2,e]}}))}))},moveModel:function(n,e){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){return[2,uw(n,e,!0)]}))}))},removeModel:function(n){return xt(this,void 0,void 0,(function(){var e;return wt(this,(function(t){return e=uf(n),[2,ui.getManager(e.scheme).removeModel(e.path)]}))}))}}),Yo;H({confusionMatrix_:function(n,e,t){var r=I(n,"labels","confusionMatrix"),a=I(e,"predictions","confusionMatrix");F(t==null||t>0&&Number.isInteger(t),(function(){return"If provided, numClasses must be a positive integer, but got "+t})),F(r.rank===1,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),F(a.rank===1,(function(){return"Expected the rank of predictions to be 1, but got "+a.rank})),F(r.shape[0]===a.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+a.shape[0]+". Labels and predictions should have the same number of elements."})),F(t>0&&Number.isInteger(t),(function(){return"numClasses is required to be a positive integer, but got "+t}));var o=$v(r.asType("int32"),t),u=$v(a.asType("int32"),t);return o.transpose().matMul(u).asType("int32")}});var gz=H({fromPixels_:function(n,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(n==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var t=!1,r=!1,a=!1,o=!1,u=!1;if(n.data instanceof Uint8Array)t=!0;else if(typeof ImageData<"u"&&n instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement)a=!0;else if(typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement)o=!0;else{if(n.getContext==null)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+n.constructor.name);u=!0}if(a&&a&&n.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");if(PC("FromPixels",W.backendName)!=null)return W.runKernel("FromPixels",{pixels:n},{numChannels:e});var l,c,h=a?[n.videoWidth,n.videoHeight]:[n.width,n.height],d=h[0],v=h[1];if(u?l=n.getContext("2d").getImageData(0,0,d,v).data:r||t?l=n.data:(o||a)&&(Yo==null&&(Yo=document.createElement("canvas").getContext("2d")),Yo.canvas.width=d,Yo.canvas.height=v,Yo.drawImage(n,0,0,d,v),l=Yo.getImageData(0,0,d,v).data),e===4)c=new Int32Array(l);else{var m=d*v;c=new Int32Array(m*e);for(var g=0;g<m;g++)for(var x=0;x<e;++x)c[g*e+x]=l[4*g+x]}return $m(c,[v,d,e],"int32")}}),_g=Object.freeze({toPixels:function(n,e){return xt(this,void 0,void 0,(function(){var t,r,a,o,u,l,c,h,d,v,m,g,x,E,w,C,S,_,T,A,D,N,k;return wt(this,(function(O){switch(O.label){case 0:if(t=I(n,"img","toPixels"),n instanceof ye||(t=t.toInt()),t.rank!==2&&t.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+t.rank+".");if(r=t.shape.slice(0,2),a=r[0],o=r[1],(u=t.rank===2?1:t.shape[2])>4||u===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+u);return[4,t.data()];case 1:return l=O.sent(),c=t.min(),h=t.max(),[4,Promise.all([c.data(),h.data()])];case 2:if(d=O.sent(),v=d[0],m=d[1],g=v[0],x=m[0],c.dispose(),h.dispose(),t.dtype==="float32"){if(g<0||x>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+g+" - "+x+"].")}else{if(t.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+t.dtype+". Please use float32 or int32 tensors.");if(g<0||x>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+g+" - "+x+"].")}for(E=t.dtype==="float32"?255:1,w=new Uint8ClampedArray(o*a*4),C=0;C<a*o;++C)S=void 0,_=void 0,T=void 0,A=void 0,u===1?(S=l[C]*E,_=l[C]*E,T=l[C]*E,A=255):u===3?(S=l[3*C]*E,_=l[3*C+1]*E,T=l[3*C+2]*E,A=255):u===4&&(S=l[4*C]*E,_=l[4*C+1]*E,T=l[4*C+2]*E,A=l[4*C+3]*E),w[(D=4*C)+0]=Math.round(S),w[D+1]=Math.round(_),w[D+2]=Math.round(T),w[D+3]=Math.round(A);return e!=null&&(e.width=o,e.height=a,N=e.getContext("2d"),k=new ImageData(w,o,a),N.putImageData(k,0,0)),t!==n&&t.dispose(),[2,w]}}))}))},fromPixels:gz}),yz=(function(){function n(){}return n.prototype.getClassName=function(){return this.constructor.className},n.fromConfig=function(e,t){return new e(t)},n})(),bz=(function(){function n(){this.classNameMap={}}return n.getMap=function(){return n.instance==null&&(n.instance=new n),n.instance},n.register=function(e){n.getMap().classNameMap[e.className]=[e,e.fromConfig]},n})();function io(n){F(n.className!=null,(function(){return"Class being registered does not have the static className property defined."})),F(typeof n.className=="string",(function(){return"className is required to be a string, but got type "+typeof n.className})),F(n.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),bz.register(n)}var oo=(function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Rr(e,n),e.prototype.minimize=function(t,r,a){r===void 0&&(r=!1);var o=this.computeGradients(t,a),u=o.value,l=o.grads;if(a!=null){var c=a.map((function(h){return{name:h.name,tensor:l[h.name]}}));this.applyGradients(c)}else this.applyGradients(l);return Nn(l),r?u:(u.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(t,r){return DI(t,r)},e.prototype.dispose=function(){this.iterations_!=null&&Nn(this.iterations_)},e.prototype.saveIterations=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:vt(this.iterations_,"int32")}]}))}))},e.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},e.prototype.setWeights=function(t){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},e.prototype.extractIterations=function(t){return xt(this,void 0,void 0,(function(){var r;return wt(this,(function(a){switch(a.label){case 0:return r=this,[4,t[0].tensor.data()];case 1:return r.iterations_=a.sent()[0],[2,t.slice(1)]}}))}))},e})(yz);Object.defineProperty(oo,Symbol.hasInstance,{value:function(n){return n.minimize!=null&&n.computeGradients!=null&&n.applyGradients!=null}});var xz=(function(n){function e(t,r,a){a===void 0&&(a=null);var o=n.call(this)||this;return o.learningRate=t,o.rho=r,o.epsilon=a,o.accumulatedGrads=[],o.accumulatedUpdates=[],a==null&&(o.epsilon=W.backend.epsilon()),o}return Rr(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map((function(a){return a.name})):Object.keys(t)).forEach((function(a,o){var u=W.registeredVariables[a];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:a+"/accum_grad",variable:gt((function(){return Yt(u).variable(!1)}))}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:a+"/accum_var",variable:gt((function(){return Yt(u).variable(!1)}))});var l=Array.isArray(t)?t[o].tensor:t[a];if(l!=null){var c=r.accumulatedGrads[o].variable,h=r.accumulatedUpdates[o].variable;gt((function(){var d=c.mul(r.rho).add(l.square().mul(1-r.rho)),v=h.add(r.epsilon).sqrt().div(c.add(r.epsilon).sqrt()).mul(l),m=h.mul(r.rho).add(v.square().mul(1-r.rho));c.assign(d),h.assign(m);var g=v.mul(-r.learningRate).add(u);u.assign(g)}))}})),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Nn(this.accumulatedGrads.map((function(t){return t.variable}))),Nn(this.accumulatedUpdates.map((function(t){return t.variable}))))},e.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){var t;return wt(this,(function(r){switch(r.label){case 0:return t=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},e.prototype.setWeights=function(t){return xt(this,void 0,void 0,(function(){var r;return wt(this,(function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=t.length/2,this.accumulatedGrads=t.slice(0,r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.accumulatedUpdates=t.slice(r,2*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e})(oo);io(xz);var wz=(function(n){function e(t,r){r===void 0&&(r=.1);var a=n.call(this)||this;return a.learningRate=t,a.initialAccumulatorValue=r,a.accumulatedGrads=[],a}return Rr(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map((function(a){return a.name})):Object.keys(t)).forEach((function(a,o){var u=W.registeredVariables[a];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:a+"/accumulator",variable:gt((function(){return qr(u.shape,r.initialAccumulatorValue).variable(!1)}))});var l=Array.isArray(t)?t[o].tensor:t[a];if(l!=null){var c=r.accumulatedGrads[o].variable;gt((function(){var h=c.add(l.square());c.assign(h);var d=l.div(h.add(W.backend.epsilon()).sqrt()).mul(-r.learningRate).add(u);u.assign(d)}))}})),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&Nn(this.accumulatedGrads.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulatedGrads.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},e.prototype.setWeights=function(t){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulatedGrads=t.map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(t,r){return new t(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e})(oo);io(wz);var Ez=(function(n){function e(t,r,a,o){o===void 0&&(o=null);var u=n.call(this)||this;return u.learningRate=t,u.beta1=r,u.beta2=a,u.epsilon=o,u.accumulatedFirstMoment=[],u.accumulatedSecondMoment=[],gt((function(){u.accBeta1=vt(r).variable(),u.accBeta2=vt(a).variable()})),o==null&&(u.epsilon=W.backend.epsilon()),u}return Rr(e,n),e.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map((function(o){return o.name})):Object.keys(t);gt((function(){var o=Ge(1,r.accBeta1),u=Ge(1,r.accBeta2);a.forEach((function(l,c){var h=W.registeredVariables[l];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:l+"/m",variable:gt((function(){return Yt(h).variable(!1)}))}),r.accumulatedSecondMoment[c]==null&&(r.accumulatedSecondMoment[c]={originalName:l+"/v",variable:gt((function(){return Yt(h).variable(!1)}))});var d=Array.isArray(t)?t[c].tensor:t[l];if(d!=null){var v=r.accumulatedFirstMoment[c].variable,m=r.accumulatedSecondMoment[c].variable,g=v.mul(r.beta1).add(d.mul(1-r.beta1)),x=m.mul(r.beta2).add(d.square().mul(1-r.beta2)),E=g.div(o),w=x.div(u);v.assign(g),m.assign(x);var C=E.div(w.sqrt().add(r.epsilon)).mul(-r.learningRate).add(h);h.assign(C)}})),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))})),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Nn(this.accumulatedFirstMoment.map((function(t){return t.variable}))),this.accumulatedSecondMoment!=null&&Nn(this.accumulatedSecondMoment.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){var t;return wt(this,(function(r){switch(r.label){case 0:return t=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},e.prototype.setWeights=function(t){return xt(this,void 0,void 0,(function(){var r,a=this;return wt(this,(function(o){switch(o.label){case 0:return[4,this.extractIterations(t)];case 1:return t=o.sent(),gt((function(){a.accBeta1.assign(If(a.beta1,a.iterations_+1)),a.accBeta2.assign(If(a.beta2,a.iterations_+1))})),r=t.length/2,this.accumulatedFirstMoment=t.slice(0,r).map((function(u){return{originalName:u.name,variable:u.tensor.variable(!1)}})),this.accumulatedSecondMoment=t.slice(r,2*r).map((function(u){return{originalName:u.name,variable:u.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e})(oo);io(Ez);var Cz=(function(n){function e(t,r,a,o,u){o===void 0&&(o=null),u===void 0&&(u=0);var l=n.call(this)||this;return l.learningRate=t,l.beta1=r,l.beta2=a,l.epsilon=o,l.decay=u,l.accumulatedFirstMoment=[],l.accumulatedWeightedInfNorm=[],gt((function(){l.iteration=vt(0).variable(),l.accBeta1=vt(r).variable()})),o==null&&(l.epsilon=W.backend.epsilon()),l}return Rr(e,n),e.prototype.applyGradients=function(t){var r=this,a=Array.isArray(t)?t.map((function(o){return o.name})):Object.keys(t);gt((function(){var o=Ge(1,r.accBeta1),u=Cr(-r.learningRate,r.iteration.mul(r.decay).add(1));a.forEach((function(l,c){var h=W.registeredVariables[l];r.accumulatedFirstMoment[c]==null&&(r.accumulatedFirstMoment[c]={originalName:l+"/m",variable:Yt(h).variable(!1)}),r.accumulatedWeightedInfNorm[c]==null&&(r.accumulatedWeightedInfNorm[c]={originalName:l+"/v",variable:Yt(h).variable(!1)});var d=Array.isArray(t)?t[c].tensor:t[l];if(d!=null){var v=r.accumulatedFirstMoment[c].variable,m=r.accumulatedWeightedInfNorm[c].variable,g=v.mul(r.beta1).add(d.mul(1-r.beta1)),x=m.mul(r.beta2),E=d.abs(),w=x.maximum(E);v.assign(g),m.assign(w);var C=u.div(o).mul(g.div(w.add(r.epsilon))).add(h);h.assign(C)}})),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))})),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Nn(this.accumulatedFirstMoment.map((function(t){return t.variable}))),this.accumulatedWeightedInfNorm!=null&&Nn(this.accumulatedWeightedInfNorm.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},e.prototype.setWeights=function(t){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(t,r){return new t(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e})(oo);io(Cz);var v_=(function(n){function e(t){var r=n.call(this)||this;return r.learningRate=t,r.setLearningRate(t),r}return Rr(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map((function(a){return a.name})):Object.keys(t)).forEach((function(a,o){var u=Array.isArray(t)?t[o].tensor:t[a];if(u!=null){var l=W.registeredVariables[a];gt((function(){var c=r.c.mul(u).add(l);l.assign(c)}))}})),this.incrementIterations()},e.prototype.setLearningRate=function(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=Gk(vt(-t))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()]]}}))}))},e.prototype.setWeights=function(t){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:if((t=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(t,r){return new t(r.learningRate)},e.className="SGD",e})(oo);io(v_);var Sz=(function(n){function e(t,r,a){a===void 0&&(a=!1);var o=n.call(this,t)||this;return o.learningRate=t,o.momentum=r,o.useNesterov=a,o.accumulations=[],o.m=vt(o.momentum),o}return Rr(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map((function(a){return a.name})):Object.keys(t)).forEach((function(a,o){var u=W.registeredVariables[a];r.accumulations[o]==null&&(r.accumulations[o]={originalName:a+"/momentum",variable:gt((function(){return Yt(u).variable(!1)}))});var l=r.accumulations[o].variable,c=Array.isArray(t)?t[o].tensor:t[a];c!=null&&gt((function(){var h,d=r.m.mul(l).add(c);h=r.useNesterov?r.c.mul(c.add(d.mul(r.m))).add(u):r.c.mul(d).add(u),l.assign(d),u.assign(h)}))})),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Nn(this.accumulations.map((function(t){return t.variable})))},e.prototype.setMomentum=function(t){this.momentum=t},e.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){return wt(this,(function(t){switch(t.label){case 0:return[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(this.accumulations.map((function(r){return{name:r.originalName,tensor:r.variable}})))]}}))}))},e.prototype.setWeights=function(t){return xt(this,void 0,void 0,(function(){return wt(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(t)];case 1:return t=r.sent(),this.accumulations=t.map((function(a){return{originalName:a.name,variable:a.tensor.variable(!1)}})),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(t,r){return new t(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e})(v_);io(Sz);var _z=(function(n){function e(t,r,a,o,u){r===void 0&&(r=.9),a===void 0&&(a=0),o===void 0&&(o=null),u===void 0&&(u=!1);var l=n.call(this)||this;if(l.learningRate=t,l.decay=r,l.momentum=a,l.epsilon=o,l.accumulatedMeanSquares=[],l.accumulatedMoments=[],l.accumulatedMeanGrads=[],l.centered=u,o==null&&(l.epsilon=W.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.");return l}return Rr(e,n),e.prototype.applyGradients=function(t){var r=this;(Array.isArray(t)?t.map((function(a){return a.name})):Object.keys(t)).forEach((function(a,o){var u=W.registeredVariables[a];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:a+"/rms",variable:gt((function(){return Yt(u).variable(!1)}))}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:a+"/momentum",variable:gt((function(){return Yt(u).variable(!1)}))}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:a+"/mg",variable:gt((function(){return Yt(u).variable(!1)}))});var l=Array.isArray(t)?t[o].tensor:t[a];if(l!=null){var c=r.accumulatedMeanSquares[o].variable,h=r.accumulatedMoments[o].variable;gt((function(){var d=c.mul(r.decay).add(l.square().mul(1-r.decay));if(r.centered){var v=r.accumulatedMeanGrads[o].variable,m=v.mul(r.decay).add(l.mul(1-r.decay)),g=h.mul(r.momentum).add(l.mul(r.learningRate).div(d.sub(m.square().add(r.epsilon)).sqrt()));c.assign(d),v.assign(m),h.assign(g);var x=u.sub(g);u.assign(x)}else{var E=c.mul(r.decay).add(l.square().mul(1-r.decay));g=h.mul(r.momentum).add(l.mul(r.learningRate).div(E.add(r.epsilon).sqrt())),c.assign(E),h.assign(g),x=u.sub(g),u.assign(x)}}))}})),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Nn(this.accumulatedMeanSquares.map((function(t){return t.variable}))),this.accumulatedMeanGrads!=null&&this.centered&&Nn(this.accumulatedMeanGrads.map((function(t){return t.variable}))),this.accumulatedMoments!=null&&Nn(this.accumulatedMoments.map((function(t){return t.variable})))},e.prototype.getWeights=function(){return xt(this,void 0,void 0,(function(){var t;return wt(this,(function(r){switch(r.label){case 0:return t=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&t.push.apply(t,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(t.map((function(a){return{name:a.originalName,tensor:a.variable}})))]}}))}))},e.prototype.setWeights=function(t){return xt(this,void 0,void 0,(function(){var r;return wt(this,(function(a){switch(a.label){case 0:return[4,this.extractIterations(t)];case 1:return t=a.sent(),r=this.centered?t.length/3:t.length/2,this.accumulatedMeanSquares=t.slice(0,r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.accumulatedMoments=t.slice(r,2*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=t.slice(2*r,3*r).map((function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}))),[2]}}))}))},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(t,r){return new t(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e})(oo);io(_z);ye.prototype.squaredDifference=function(n){return MS(this,n)},at=ZP;var lm=function(n,e){return lm=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])},lm(n,e)};function It(n,e){lm(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var cn=function(){return cn=Object.assign||function(e){for(var t,r=1,a=arguments.length;r<a;r++){t=arguments[r];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},cn.apply(this,arguments)};function Tt(n,e,t,r){function a(o){return o instanceof t?o:new t(function(u){u(o)})}return new(t||(t=Promise))(function(o,u){function l(d){try{h(r.next(d))}catch(v){u(v)}}function c(d){try{h(r.throw(d))}catch(v){u(v)}}function h(d){d.done?o(d.value):a(d.value).then(l,c)}h((r=r.apply(n,[])).next())})}function Rt(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,a,o,u;return u={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function l(h){return function(d){return c([h,d])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,a&&(o=h[0]&2?a.return:h[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,h[1])).done)return o;switch(a=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,a=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(d){h=[6,d],a=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Fu(){for(var n=0,e=0,t=arguments.length;e<t;e++)n+=arguments[e].length;for(var r=Array(n),a=0,e=0;e<t;e++)for(var o=arguments[e],u=0,l=o.length;u<l;u++,a++)r[a]=o[u];return r}var Yi=(function(){function n(e,t){if(!Qi(e)||!Qi(t))throw new Error("Dimensions.constructor - expected width and height to be valid numbers, instead have "+JSON.stringify({width:e,height:t}));this._width=e,this._height=t}return Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),n.prototype.reverse=function(){return new n(1/this.width,1/this.height)},n})();function eh(n,e){return n instanceof ye&&n.shape.length===e}function Tz(n){return eh(n,2)}function nh(n){return eh(n,3)}function li(n){return eh(n,4)}function Rz(n){return n%1!==0}function vw(n){return n%2===0}function Az(n,e){e===void 0&&(e=2);var t=Math.pow(10,e);return Math.floor(n*t)/t}function mw(n){return n&&n.width&&n.height}function Dz(n,e){var t=n.width,r=n.height,a=e/Math.max(r,t);return new Yi(Math.round(t*a),Math.round(r*a))}function Tg(n){return n.reduce(function(e,t){return e.add(t)},new te(0,0)).div(new te(n.length,n.length))}function Yu(n,e,t){return Array(n).fill(0).map(function(r,a){return e+a*t})}function Qi(n){return!!n&&n!==1/0&&n!==-1/0&&!isNaN(n)||n===0}function gw(n){return Qi(n)&&0<=n&&n<=1}var te=(function(){function n(e,t){this._x=e,this._y=t}return Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),n.prototype.add=function(e){return new n(this.x+e.x,this.y+e.y)},n.prototype.sub=function(e){return new n(this.x-e.x,this.y-e.y)},n.prototype.mul=function(e){return new n(this.x*e.x,this.y*e.y)},n.prototype.div=function(e){return new n(this.x/e.x,this.y/e.y)},n.prototype.abs=function(){return new n(Math.abs(this.x),Math.abs(this.y))},n.prototype.magnitude=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},n.prototype.floor=function(){return new n(Math.floor(this.x),Math.floor(this.y))},n})(),pi=(function(){function n(e,t){t===void 0&&(t=!0);var r=e||{},a=[r.left,r.top,r.right,r.bottom].every(Qi),o=[r.x,r.y,r.width,r.height].every(Qi);if(!o&&!a)throw new Error("Box.constructor - expected box to be IBoundingBox | IRect, instead have "+JSON.stringify(r));var u=o?[r.x,r.y,r.width,r.height]:[r.left,r.top,r.right-r.left,r.bottom-r.top],l=u[0],c=u[1],h=u[2],d=u[3];n.assertIsValidBox({x:l,y:c,width:h,height:d},"Box.constructor",t),this._x=l,this._y=c,this._width=h,this._height=d}return n.isRect=function(e){return!!e&&[e.x,e.y,e.width,e.height].every(Qi)},n.assertIsValidBox=function(e,t,r){if(r===void 0&&(r=!1),!n.isRect(e))throw new Error(t+" - invalid box: "+JSON.stringify(e)+", expected object with properties x, y, width, height");if(!r&&(e.width<0||e.height<0))throw new Error(t+" - width ("+e.width+") and height ("+e.height+") must be positive numbers")},Object.defineProperty(n.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"width",{get:function(){return this._width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"height",{get:function(){return this._height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"area",{get:function(){return this.width*this.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topLeft",{get:function(){return new te(this.left,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"topRight",{get:function(){return new te(this.right,this.top)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomLeft",{get:function(){return new te(this.left,this.bottom)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottomRight",{get:function(){return new te(this.right,this.bottom)},enumerable:!0,configurable:!0}),n.prototype.round=function(){var e=[this.x,this.y,this.width,this.height].map(function(u){return Math.round(u)}),t=e[0],r=e[1],a=e[2],o=e[3];return new n({x:t,y:r,width:a,height:o})},n.prototype.floor=function(){var e=[this.x,this.y,this.width,this.height].map(function(u){return Math.floor(u)}),t=e[0],r=e[1],a=e[2],o=e[3];return new n({x:t,y:r,width:a,height:o})},n.prototype.toSquare=function(){var e=this,t=e.x,r=e.y,a=e.width,o=e.height,u=Math.abs(a-o);return a<o&&(t-=u/2,a+=u),o<a&&(r-=u/2,o+=u),new n({x:t,y:r,width:a,height:o})},n.prototype.rescale=function(e){var t=mw(e)?e.width:e,r=mw(e)?e.height:e;return new n({x:this.x*t,y:this.y*r,width:this.width*t,height:this.height*r})},n.prototype.pad=function(e,t){var r=[this.x-e/2,this.y-t/2,this.width+e,this.height+t],a=r[0],o=r[1],u=r[2],l=r[3];return new n({x:a,y:o,width:u,height:l})},n.prototype.clipAtImageBorders=function(e,t){var r=this,a=r.x,o=r.y,u=r.right,l=r.bottom,c=Math.max(a,0),h=Math.max(o,0),d=u-c,v=l-h,m=Math.min(d,e-c),g=Math.min(v,t-h);return new n({x:c,y:h,width:m,height:g}).floor()},n.prototype.shift=function(e,t){var r=this,a=r.width,o=r.height,u=this.x+e,l=this.y+t;return new n({x:u,y:l,width:a,height:o})},n.prototype.padAtBorders=function(e,t){var r=this.width+1,a=this.height+1,o=1,u=1,l=r,c=a,h=this.left,d=this.top,v=this.right,m=this.bottom;return v>t&&(l=-v+t+r,v=t),m>e&&(c=-m+e+a,m=e),h<1&&(c=2-h,h=1),d<1&&(c=2-d,d=1),{dy:u,edy:c,dx:o,edx:l,y:d,ey:m,x:h,ex:v,w:r,h:a}},n.prototype.calibrate=function(e){return new n({left:this.left+e.left*this.width,top:this.top+e.top*this.height,right:this.right+e.right*this.width,bottom:this.bottom+e.bottom*this.height}).toSquare().round()},n})(),rh=(function(n){It(e,n);function e(t,r,a,o,u){return u===void 0&&(u=!1),n.call(this,{left:t,top:r,right:a,bottom:o},u)||this}return e})(pi),m_=(function(){function n(e,t,r,a,o){this._imageDims=new Yi(o.width,o.height),this._score=e,this._classScore=t,this._className=r,this._box=new pi(a).rescale(this._imageDims)}return Object.defineProperty(n.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"className",{get:function(){return this._className},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"box",{get:function(){return this._box},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageDims",{get:function(){return this._imageDims},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this.imageDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this.imageDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativeBox",{get:function(){return new pi(this._box).rescale(this.imageDims.reverse())},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new n(this.score,this.classScore,this.className,this.relativeBox,{width:e,height:t})},n})(),Dr=(function(n){It(e,n);function e(t,r,a){return n.call(this,t,t,"",r,a)||this}return e.prototype.forSize=function(t,r){var a=n.prototype.forSize.call(this,t,r),o=a.score,u=a.relativeBox,l=a.imageDims;return new e(o,u,l)},e})(m_);function Mz(n,e,t){t===void 0&&(t=!0);var r=Math.max(0,Math.min(n.right,e.right)-Math.max(n.left,e.left)),a=Math.max(0,Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top)),o=r*a;return t?o/(n.area+e.area-o):o/Math.min(n.area,e.area)}function Nz(n){var e=n.map(function(l){return l.x}),t=n.map(function(l){return l.y}),r=e.reduce(function(l,c){return c<l?c:l},1/0),a=t.reduce(function(l,c){return c<l?c:l},1/0),o=e.reduce(function(l,c){return l<c?c:l},0),u=t.reduce(function(l,c){return l<c?c:l},0);return new rh(r,a,o,u)}function Qu(n,e,t,r){r===void 0&&(r=!0);for(var a=e.map(function(l,c){return{score:l,boxIndex:c}}).sort(function(l,c){return l.score-c.score}).map(function(l){return l.boxIndex}),o=[],u=function(){var l=a.pop();o.push(l);for(var c=a,h=[],d=0;d<c.length;d++){var v=c[d],m=n[l],g=n[v];h.push(Mz(m,g,r))}a=a.filter(function(x,E){return h[E]<=t})};a.length>0;)u();return o}function ml(n,e){return gt(function(){var t=e[0],r=e[1],a=e[2],o=qr(Fu(n.shape.slice(0,3),[1]),t),u=qr(Fu(n.shape.slice(0,3),[1]),r),l=qr(Fu(n.shape.slice(0,3),[1]),a),c=Ue([o,u,l],3);return Ge(n,c)})}function Oz(n,e){return e===void 0&&(e=!1),gt(function(){var t=n.shape.slice(1),r=t[0],a=t[1];if(r===a)return n;var o=Math.abs(r-a),u=Math.round(o*(e?.5:1)),l=r>a?2:1,c=function(g){var x=n.shape.slice();return x[l]=g,qr(x,0)},h=c(u),d=o-h.shape[l],v=e&&d?c(d):null,m=[v,n,h].filter(function(g){return!!g}).map(function(g){return g.toFloat()});return Ue(m,l)})}function vv(n){return 1/(1+Math.exp(-n))}var Rg=(function(n){It(e,n);function e(t,r,a,o,u){return u===void 0&&(u=!1),n.call(this,{x:t,y:r,width:a,height:o},u)||this}return e})(pi),kz=.5,Iz=.43,Bz=.45,Zu=(function(){function n(e,t,r){r===void 0&&(r=new te(0,0));var a=t.width,o=t.height;this._imgDims=new Yi(a,o),this._shift=r,this._positions=e.map(function(u){return u.mul(new te(a,o)).add(r)})}return Object.defineProperty(n.prototype,"shift",{get:function(){return new te(this._shift.x,this._shift.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageWidth",{get:function(){return this._imgDims.width},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"imageHeight",{get:function(){return this._imgDims.height},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"positions",{get:function(){return this._positions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"relativePositions",{get:function(){var e=this;return this._positions.map(function(t){return t.sub(e._shift).div(new te(e.imageWidth,e.imageHeight))})},enumerable:!0,configurable:!0}),n.prototype.forSize=function(e,t){return new this.constructor(this.relativePositions,{width:e,height:t})},n.prototype.shiftBy=function(e,t){return new this.constructor(this.relativePositions,this._imgDims,new te(e,t))},n.prototype.shiftByPoint=function(e){return this.shiftBy(e.x,e.y)},n.prototype.align=function(e,t){if(t===void 0&&(t={}),e){var r=e instanceof Dr?e.box.floor():new pi(e);return this.shiftBy(r.x,r.y).align(null,t)}var a=Object.assign({},{useDlibAlignment:!1,minBoxPadding:.2},t),o=a.useDlibAlignment,u=a.minBoxPadding;return o?this.alignDlib():this.alignMinBbox(u)},n.prototype.alignDlib=function(){var e=this.getRefPointsForAlignment(),t=e[0],r=e[1],a=e[2],o=function(v){return a.sub(v).magnitude()},u=(o(t)+o(r))/2,l=Math.floor(u/Bz),c=Tg(e),h=Math.floor(Math.max(0,c.x-kz*l)),d=Math.floor(Math.max(0,c.y-Iz*l));return new Rg(h,d,Math.min(l,this.imageWidth+h),Math.min(l,this.imageHeight+d))},n.prototype.alignMinBbox=function(e){var t=Nz(this.positions);return t.pad(t.width*e,t.height*e)},n.prototype.getRefPointsForAlignment=function(){throw new Error("getRefPointsForAlignment not implemented by base class")},n})(),Fz=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getRefPointsForAlignment=function(){var t=this.positions;return[t[0],t[1],Tg([t[3],t[4]])]},e})(Zu),Lz=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getJawOutline=function(){return this.positions.slice(0,17)},e.prototype.getLeftEyeBrow=function(){return this.positions.slice(17,22)},e.prototype.getRightEyeBrow=function(){return this.positions.slice(22,27)},e.prototype.getNose=function(){return this.positions.slice(27,36)},e.prototype.getLeftEye=function(){return this.positions.slice(36,42)},e.prototype.getRightEye=function(){return this.positions.slice(42,48)},e.prototype.getMouth=function(){return this.positions.slice(48,68)},e.prototype.getRefPointsForAlignment=function(){return[this.getLeftEye(),this.getRightEye(),this.getMouth()].map(Tg)},e})(Zu),yw=(function(){function n(e,t){this._label=e,this._distance=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distance",{get:function(){return this._distance},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){return e===void 0&&(e=!0),""+this.label+(e?" ("+Az(this.distance)+")":"")},n})(),bw=(function(n){It(e,n);function e(t,r){var a=n.call(this,t)||this;return a._label=r,a}return e.assertIsValidLabeledBox=function(t,r){if(pi.assertIsValidBox(t,r),!Qi(t.label))throw new Error(r+" - expected property label ("+t.label+") to be a number")},Object.defineProperty(e.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),e})(pi),Qc=(function(){function n(e,t){if(typeof e!="string")throw new Error("LabeledFaceDescriptors - constructor expected label to be a string");if(!Array.isArray(t)||t.some(function(r){return!(r instanceof Float32Array)}))throw new Error("LabeledFaceDescriptors - constructor expected descriptors to be an array of Float32Array");this._label=e,this._descriptors=t}return Object.defineProperty(n.prototype,"label",{get:function(){return this._label},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"descriptors",{get:function(){return this._descriptors},enumerable:!0,configurable:!0}),n.prototype.toJSON=function(){return{label:this.label,descriptors:this.descriptors.map(function(e){return Array.from(e)})}},n.fromJSON=function(e){var t=e.descriptors.map(function(r){return new Float32Array(r)});return new n(e.label,t)},n})();(function(n){It(e,n);function e(t,r,a,o){var u=n.call(this,t,r)||this;return u._score=a,u._classScore=o,u}return e.assertIsValidPredictedBox=function(t,r){if(bw.assertIsValidLabeledBox(t,r),!gw(t.score)||!gw(t.classScore))throw new Error(r+" - expected properties score ("+t.score+") and ("+t.classScore+") to be a number between [0, 1]")},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"classScore",{get:function(){return this._classScore},enumerable:!0,configurable:!0}),e})(bw);function g_(n){return n.detection instanceof Dr}function Ju(n,e){var t={detection:e};return Object.assign({},n,t)}function y_(){var n=window.fetch||function(){throw new Error("fetch - missing fetch implementation for browser environment")},e=function(){throw new Error("readFile - filesystem not available for browser environment")};return{Canvas:HTMLCanvasElement,CanvasRenderingContext2D,Image:HTMLImageElement,ImageData,Video:HTMLVideoElement,createCanvasElement:function(){return document.createElement("canvas")},createImageElement:function(){return document.createElement("img")},fetch:n,readFile:e}}function b_(n){var e="";if(!n)try{n=require("fs")}catch(r){e=r.toString()}var t=n?function(r){return new Promise(function(a,o){n.readFile(r,function(u,l){return u?o(u):a(l)})})}:function(){throw new Error("readFile - failed to require fs in nodejs environment with error: "+e)};return{readFile:t}}function x_(){var n=global.Canvas||global.HTMLCanvasElement,e=global.Image||global.HTMLImageElement,t=function(){if(n)return new n;throw new Error("createCanvasElement - missing Canvas implementation for nodejs environment")},r=function(){if(e)return new e;throw new Error("createImageElement - missing Image implementation for nodejs environment")},a=global.fetch||function(){throw new Error("fetch - missing fetch implementation for nodejs environment")},o=b_();return cn({Canvas:n||(function(){function u(){}return u})(),CanvasRenderingContext2D:global.CanvasRenderingContext2D||(function(){function u(){}return u})(),Image:e||(function(){function u(){}return u})(),ImageData:global.ImageData||(function(){function u(){}return u})(),Video:global.HTMLVideoElement||(function(){function u(){}return u})(),createCanvasElement:t,createImageElement:r,fetch:a},o)}function w_(){return typeof window=="object"&&typeof document<"u"&&typeof HTMLImageElement<"u"&&typeof HTMLCanvasElement<"u"&&typeof HTMLVideoElement<"u"&&typeof ImageData<"u"&&typeof CanvasRenderingContext2D<"u"}function E_(){return typeof global=="object"&&typeof require=="function"&&typeof oT<"u"&&typeof process<"u"&&!!process.version}var Pe;function Pz(){if(!Pe)throw new Error("getEnv - environment is not defined, check isNodejs() and isBrowser()");return Pe}function cm(n){Pe=n}function Ag(){w_()&&cm(y_()),E_()&&cm(x_())}function zz(n){if(Pe||Ag(),!Pe)throw new Error("monkeyPatch - environment is not defined, check isNodejs() and isBrowser()");var e=n.Canvas,t=e===void 0?Pe.Canvas:e,r=n.Image,a=r===void 0?Pe.Image:r;Pe.Canvas=t,Pe.Image=a,Pe.createCanvasElement=n.createCanvasElement||(function(){return new t}),Pe.createImageElement=n.createImageElement||(function(){return new a}),Pe.ImageData=n.ImageData||Pe.ImageData,Pe.Video=n.Video||Pe.Video,Pe.fetch=n.fetch||Pe.fetch,Pe.readFile=n.readFile||Pe.readFile}var mn={getEnv:Pz,setEnv:cm,initialize:Ag,createBrowserEnv:y_,createFileSystem:b_,createNodejsEnv:x_,monkeyPatch:zz,isBrowser:w_,isNodejs:E_};Ag();function C_(n){return!mn.isNodejs()&&typeof n=="string"?document.getElementById(n):n}function Ji(n){var e=mn.getEnv(),t=e.Canvas,r=e.CanvasRenderingContext2D;if(n instanceof r)return n;var a=C_(n);if(!(a instanceof t))throw new Error("resolveContext2d - expected canvas to be of instance of Canvas");var o=a.getContext("2d");if(!o)throw new Error("resolveContext2d - canvas 2d context is null");return o}var xw;(function(n){n.TOP_LEFT="TOP_LEFT",n.TOP_RIGHT="TOP_RIGHT",n.BOTTOM_LEFT="BOTTOM_LEFT",n.BOTTOM_RIGHT="BOTTOM_RIGHT"})(xw||(xw={}));function S_(n){var e=mn.getEnv(),t=e.Image,r=e.Video;return n instanceof t&&n.complete||n instanceof r&&n.readyState>=3}function Uz(n){return new Promise(function(e,t){if(n instanceof mn.getEnv().Canvas||S_(n))return e();function r(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",a),e(o))}function a(o){o.currentTarget&&(o.currentTarget.removeEventListener("load",r),o.currentTarget.removeEventListener("error",a),t(o))}n.addEventListener("load",r),n.addEventListener("error",a)})}function Dg(n){var e=mn.getEnv(),t=e.Image,r=e.Video;return n instanceof t?new Yi(n.naturalWidth,n.naturalHeight):n instanceof r?new Yi(n.videoWidth,n.videoHeight):new Yi(n.width,n.height)}function ah(n){var e=n.width,t=n.height,r=mn.getEnv().createCanvasElement,a=r();return a.width=e,a.height=t,a}function Mg(n,e){var t=mn.getEnv().ImageData;if(!(n instanceof t)&&!S_(n))throw new Error("createCanvasFromMedia - media has not finished loading yet");var r=Dg(n),a=r.width,o=r.height,u=ah({width:a,height:o});return n instanceof t?Ji(u).putImageData(n,0,0):Ji(u).drawImage(n,0,0,a,o),u}function Vz(n,e){return Tt(this,void 0,void 0,function(){var t,r,a,o,u,l;return Rt(this,function(c){switch(c.label){case 0:return t=mn.getEnv().createCanvasElement(),r=n.shape.slice(li(n)?1:0),a=r[0],o=r[1],u=r[2],l=gt(function(){return n.as3D(a,o,u).toInt()}),[4,_g.toPixels(l,t)];case 1:return c.sent(),l.dispose(),[2,t]}})})}function ww(n){var e=mn.getEnv(),t=e.Image,r=e.Canvas,a=e.Video;return n instanceof t||n instanceof r||n instanceof a}function Hz(n,e,t){t===void 0&&(t=!1);var r=mn.getEnv(),a=r.Image,o=r.Canvas;if(!(n instanceof a||n instanceof o))throw new Error("imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement");var u=Dg(n),l=e/Math.max(u.height,u.width),c=l*u.width,h=l*u.height,d=ah({width:e,height:e}),v=n instanceof o?n:Mg(n),m=Math.abs(c-h)/2,g=t&&c<h?m:0,x=t&&h<c?m:0;return Ji(d).drawImage(v,g,x,c,h),d}var Lf=(function(){function n(e,t){var r=this;if(t===void 0&&(t=!1),this._imageTensors=[],this._canvases=[],this._treatAsBatchInput=!1,this._inputDimensions=[],!Array.isArray(e))throw new Error("NetInput.constructor - expected inputs to be an Array of TResolvedNetInput or to be instanceof tf.Tensor4D, instead have "+e);this._treatAsBatchInput=t,this._batchSize=e.length,e.forEach(function(a,o){if(nh(a)){r._imageTensors[o]=a,r._inputDimensions[o]=a.shape;return}if(li(a)){var u=a.shape[0];if(u!==1)throw new Error("NetInput - tf.Tensor4D with batchSize "+u+" passed, but not supported in input array");r._imageTensors[o]=a,r._inputDimensions[o]=a.shape.slice(1);return}var l=a instanceof mn.getEnv().Canvas?a:Mg(a);r._canvases[o]=l,r._inputDimensions[o]=[l.height,l.width,3]})}return Object.defineProperty(n.prototype,"imageTensors",{get:function(){return this._imageTensors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"canvases",{get:function(){return this._canvases},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isBatchInput",{get:function(){return this.batchSize>1||this._treatAsBatchInput},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"batchSize",{get:function(){return this._batchSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputDimensions",{get:function(){return this._inputDimensions},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"reshapedInputDimensions",{get:function(){var e=this;return Yu(this.batchSize,0,1).map(function(t,r){return e.getReshapedInputDimensions(r)})},enumerable:!0,configurable:!0}),n.prototype.getInput=function(e){return this.canvases[e]||this.imageTensors[e]},n.prototype.getInputDimensions=function(e){return this._inputDimensions[e]},n.prototype.getInputHeight=function(e){return this._inputDimensions[e][0]},n.prototype.getInputWidth=function(e){return this._inputDimensions[e][1]},n.prototype.getReshapedInputDimensions=function(e){if(typeof this.inputSize!="number")throw new Error("getReshapedInputDimensions - inputSize not set, toBatchTensor has not been called yet");var t=this.getInputWidth(e),r=this.getInputHeight(e);return Dz({width:t,height:r},this.inputSize)},n.prototype.toBatchTensor=function(e,t){var r=this;return t===void 0&&(t=!0),this._inputSize=e,gt(function(){var a=Yu(r.batchSize,0,1).map(function(u){var l=r.getInput(u);if(l instanceof ye){var c=li(l)?l:l.expandDims();return c=Oz(c,t),(c.shape[1]!==e||c.shape[2]!==e)&&(c=bg.resizeBilinear(c,[e,e])),c.as3D(e,e,3)}if(l instanceof mn.getEnv().Canvas)return _g.fromPixels(Hz(l,e,t));throw new Error("toBatchTensor - at batchIdx "+u+", expected input to be instanceof tf.Tensor or instanceof HTMLCanvasElement, instead have "+l)}),o=Yn(a.map(function(u){return u.toFloat()})).as4D(r.batchSize,e,e,3);return o})},n})();function Ye(n){return Tt(this,void 0,void 0,function(){var e,t,r;return Rt(this,function(a){switch(a.label){case 0:if(n instanceof Lf)return[2,n];if(e=Array.isArray(n)?n:[n],!e.length)throw new Error("toNetInput - empty array passed as input");return t=function(o){return Array.isArray(n)?" at input index "+o+":":""},r=e.map(C_),r.forEach(function(o,u){if(!ww(o)&&!nh(o)&&!li(o))throw typeof e[u]=="string"?new Error("toNetInput -"+t(u)+" string passed, but could not resolve HTMLElement for element id "+e[u]):new Error("toNetInput -"+t(u)+" expected media to be of type HTMLImageElement | HTMLVideoElement | HTMLCanvasElement | tf.Tensor3D, or to be an element id");if(li(o)){var l=o.shape[0];if(l!==1)throw new Error("toNetInput -"+t(u)+" tf.Tensor4D with batchSize "+l+" passed, but not supported in input array")}}),[4,Promise.all(r.map(function(o){return ww(o)&&Uz(o)}))];case 1:return a.sent(),[2,new Lf(r,Array.isArray(n))]}})})}function Ng(n,e){return Tt(this,void 0,void 0,function(){var t,r,a,o,u,l,c;return Rt(this,function(h){switch(h.label){case 0:return t=mn.getEnv().Canvas,r=n,n instanceof t?[3,5]:[4,Ye(n)];case 1:if(a=h.sent(),a.batchSize>1)throw new Error("extractFaces - batchSize > 1 not supported");return o=a.getInput(0),o instanceof t?(u=o,[3,4]):[3,2];case 2:return[4,Vz(o)];case 3:u=h.sent(),h.label=4;case 4:r=u,h.label=5;case 5:return l=Ji(r),c=e.map(function(d){return d instanceof Dr?d.forSize(r.width,r.height).box.floor():d}).map(function(d){return d.clipAtImageBorders(r.width,r.height)}),[2,c.map(function(d){var v=d.x,m=d.y,g=d.width,x=d.height,E=ah({width:g,height:x});return Ji(E).putImageData(l.getImageData(v,m,g,x),0,0),E})]}})})}function Og(n,e){return Tt(this,void 0,void 0,function(){return Rt(this,function(t){if(!nh(n)&&!li(n))throw new Error("extractFaceTensors - expected image tensor to be 3D or 4D");if(li(n)&&n.shape[0]>1)throw new Error("extractFaceTensors - batchSize > 1 not supported");return[2,gt(function(){var r=n.shape.slice(li(n)?1:0),a=r[0],o=r[1],u=r[2],l=e.map(function(h){return h instanceof Dr?h.forSize(o,a).box:h}).map(function(h){return h.clipAtImageBorders(o,a)}),c=l.map(function(h){var d=h.x,v=h.y,m=h.width,g=h.height;return ZS(n.as3D(a,o,u),[v,d,0],[g,m,u])});return c})]})})}function Gz(n,e){return Tt(this,void 0,void 0,function(){var t,r;return Rt(this,function(a){switch(a.label){case 0:return t=mn.getEnv().fetch,[4,t(n,e)];case 1:if(r=a.sent(),!(r.status<400))throw new Error("failed to fetch: ("+r.status+") "+r.statusText+", from url: "+r.url);return[2,r]}})})}function jz(n){return Tt(this,void 0,void 0,function(){return Rt(this,function(e){switch(e.label){case 0:return[4,Gz(n)];case 1:return[2,e.sent().json()]}})})}function __(n,e){var t=e+"-weights_manifest.json";if(!n)return{modelBaseUri:"",manifestUri:t};if(n==="/")return{modelBaseUri:"/",manifestUri:"/"+t};var r=n.startsWith("http://")?"http://":n.startsWith("https://")?"https://":"";n=n.replace(r,"");var a=n.split("/").filter(function(l){return l}),o=n.endsWith(".json")?a[a.length-1]:t,u=r+(n.endsWith(".json")?a.slice(0,a.length-1):a).join("/");return u=n.startsWith("/")?"/"+u:u,{modelBaseUri:u,manifestUri:u==="/"?"/"+o:u+"/"+o}}function Wz(n,e){return Tt(this,void 0,void 0,function(){var t,r,a,o;return Rt(this,function(u){switch(u.label){case 0:return t=__(n,e),r=t.manifestUri,a=t.modelBaseUri,[4,jz(r)];case 1:return o=u.sent(),[2,p_.loadWeights(o,a)]}})})}function qz(n,e,t){t===void 0&&(t=!1);var r=t?Dg(e):e,a=r.width,o=r.height;return n.width=a,n.height=o,{width:a,height:o}}var Aa=(function(){function n(e){this._name=e,this._params=void 0,this._paramMappings=[]}return Object.defineProperty(n.prototype,"params",{get:function(){return this._params},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paramMappings",{get:function(){return this._paramMappings},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"isLoaded",{get:function(){return!!this.params},enumerable:!0,configurable:!0}),n.prototype.getParamFromPath=function(e){var t=this.traversePropertyPath(e),r=t.obj,a=t.objProp;return r[a]},n.prototype.reassignParamFromPath=function(e,t){var r=this.traversePropertyPath(e),a=r.obj,o=r.objProp;a[o].dispose(),a[o]=t},n.prototype.getParamList=function(){var e=this;return this._paramMappings.map(function(t){var r=t.paramPath;return{path:r,tensor:e.getParamFromPath(r)}})},n.prototype.getTrainableParams=function(){return this.getParamList().filter(function(e){return e.tensor instanceof xs})},n.prototype.getFrozenParams=function(){return this.getParamList().filter(function(e){return!(e.tensor instanceof xs)})},n.prototype.variable=function(){var e=this;this.getFrozenParams().forEach(function(t){var r=t.path,a=t.tensor;e.reassignParamFromPath(r,a.variable())})},n.prototype.freeze=function(){var e=this;this.getTrainableParams().forEach(function(t){var r=t.path,a=t.tensor,o=sn(a.dataSync());a.dispose(),e.reassignParamFromPath(r,o)})},n.prototype.dispose=function(e){e===void 0&&(e=!0),this.getParamList().forEach(function(t){if(e&&t.tensor.isDisposed)throw new Error("param tensor has already been disposed for path "+t.path);t.tensor.dispose()}),this._params=void 0},n.prototype.serializeParams=function(){return new Float32Array(this.getParamList().map(function(e){var t=e.tensor;return Array.from(t.dataSync())}).reduce(function(e,t){return e.concat(t)}))},n.prototype.load=function(e){return Tt(this,void 0,void 0,function(){return Rt(this,function(t){switch(t.label){case 0:return e instanceof Float32Array?(this.extractWeights(e),[2]):[4,this.loadFromUri(e)];case 1:return t.sent(),[2]}})})},n.prototype.loadFromUri=function(e){return Tt(this,void 0,void 0,function(){var t;return Rt(this,function(r){switch(r.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromUri - expected model uri");return[4,Wz(e,this.getDefaultModelName())];case 1:return t=r.sent(),this.loadFromWeightMap(t),[2]}})})},n.prototype.loadFromDisk=function(e){return Tt(this,void 0,void 0,function(){var t,r,a,o,u,l,c,h,d,v;return Rt(this,function(m){switch(m.label){case 0:if(e&&typeof e!="string")throw new Error(this._name+".loadFromDisk - expected model file path");return t=mn.getEnv().readFile,r=__(e,this.getDefaultModelName()),a=r.manifestUri,o=r.modelBaseUri,u=function(g){return Promise.all(g.map(function(x){return t(x).then(function(E){return E.buffer})}))},l=p_.weightsLoaderFactory(u),d=(h=JSON).parse,[4,t(a)];case 1:return c=d.apply(h,[m.sent().toString()]),[4,l(c,o)];case 2:return v=m.sent(),this.loadFromWeightMap(v),[2]}})})},n.prototype.loadFromWeightMap=function(e){var t=this.extractParamsFromWeigthMap(e),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},n.prototype.extractWeights=function(e){var t=this.extractParams(e),r=t.paramMappings,a=t.params;this._paramMappings=r,this._params=a},n.prototype.traversePropertyPath=function(e){if(!this.params)throw new Error("traversePropertyPath - model has no loaded params");var t=e.split("/").reduce(function(o,u){if(!o.nextObj.hasOwnProperty(u))throw new Error("traversePropertyPath - object does not have property "+u+", for path "+e);return{obj:o.nextObj,objProp:u,nextObj:o.nextObj[u]}},{nextObj:this.params}),r=t.obj,a=t.objProp;if(!r||!a||!(r[a]instanceof ye))throw new Error("traversePropertyPath - parameter is not a tensor, for path "+e);return{obj:r,objProp:a}},n})();function Xn(n,e,t){return gt(function(){var r=pg(n,e.depthwise_filter,e.pointwise_filter,t,"same");return r=Vt(r,e.bias),r})}function mv(n,e,t){return t===void 0&&(t=!1),gt(function(){var r=xe(t?Vt(vr(n,e.conv0.filters,[2,2],"same"),e.conv0.bias):Xn(n,e.conv0,[2,2])),a=Xn(r,e.conv1,[1,1]),o=xe(Vt(r,a)),u=Xn(o,e.conv2,[1,1]);return xe(Vt(r,Vt(a,u)))})}function Zc(n,e,t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),gt(function(){var a=xe(t?Vt(vr(n,e.conv0.filters,r?[2,2]:[1,1],"same"),e.conv0.bias):Xn(n,e.conv0,r?[2,2]:[1,1])),o=Xn(a,e.conv1,[1,1]),u=xe(Vt(a,o)),l=Xn(u,e.conv2,[1,1]),c=xe(Vt(a,Vt(o,l))),h=Xn(c,e.conv3,[1,1]);return xe(Vt(a,Vt(o,Vt(l,h))))})}function _r(n,e,t,r){return t===void 0&&(t="same"),r===void 0&&(r=!1),gt(function(){var a=Vt(vr(n,e.filters,[1,1],t),e.bias);return r?xe(a):a})}function Da(n,e){Object.keys(n).forEach(function(t){e.some(function(r){return r.originalPath===t})||n[t].dispose()})}function ih(n,e){return function(t,r,a,o){var u=An(n(t*r*a*a),[a,a,t,r]),l=Fe(n(r));return e.push({paramPath:o+"/filters"},{paramPath:o+"/bias"}),{filters:u,bias:l}}}function kg(n,e){return function(t,r,a){var o=si(n(t*r),[t,r]),u=Fe(n(r));return e.push({paramPath:a+"/weights"},{paramPath:a+"/bias"}),{weights:o,bias:u}}}var T_=(function(){function n(e,t,r){this.depthwise_filter=e,this.pointwise_filter=t,this.bias=r}return n})();function Ig(n,e){return function(t,r,a){var o=An(n(9*t),[3,3,t,1]),u=An(n(t*r),[1,1,t,r]),l=Fe(n(r));return e.push({paramPath:a+"/depthwise_filter"},{paramPath:a+"/pointwise_filter"},{paramPath:a+"/bias"}),new T_(o,u,l)}}function Bg(n){return function(e){var t=n(e+"/depthwise_filter",4),r=n(e+"/pointwise_filter",4),a=n(e+"/bias",1);return new T_(t,r,a)}}function yi(n,e){return function(t,r,a){var o=n[t];if(!eh(o,r))throw new Error("expected weightMap["+t+"] to be a Tensor"+r+"D, instead have "+o);return e.push({originalPath:t,paramPath:a||t}),o}}function Ma(n){var e=n;function t(a){var o=e.slice(0,a);return e=e.slice(a),o}function r(){return e}return{extractWeights:t,getRemainingWeights:r}}function R_(n,e){var t=ih(n,e),r=Ig(n,e);function a(u,l,c,h){h===void 0&&(h=!1);var d=h?t(u,l,3,c+"/conv0"):r(u,l,c+"/conv0"),v=r(l,l,c+"/conv1"),m=r(l,l,c+"/conv2");return{conv0:d,conv1:v,conv2:m}}function o(u,l,c,h){h===void 0&&(h=!1);var d=a(u,l,c,h),v=d.conv0,m=d.conv1,g=d.conv2,x=r(l,l,c+"/conv3");return{conv0:v,conv1:m,conv2:g,conv3:x}}return{extractDenseBlock3Params:a,extractDenseBlock4Params:o}}function Kz(n){var e=[],t=Ma(n),r=t.extractWeights,a=t.getRemainingWeights,o=R_(r,e).extractDenseBlock4Params,u=o(3,32,"dense0",!0),l=o(32,64,"dense1"),c=o(64,128,"dense2"),h=o(128,256,"dense3");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{dense0:u,dense1:l,dense2:c,dense3:h}}}function A_(n){return function(e){var t=n(e+"/filters",4),r=n(e+"/bias",1);return{filters:t,bias:r}}}function D_(n,e){var t=yi(n,e),r=A_(t),a=Bg(t);function o(l,c){c===void 0&&(c=!1);var h=c?r(l+"/conv0"):a(l+"/conv0"),d=a(l+"/conv1"),v=a(l+"/conv2");return{conv0:h,conv1:d,conv2:v}}function u(l,c){c===void 0&&(c=!1);var h=c?r(l+"/conv0"):a(l+"/conv0"),d=a(l+"/conv1"),v=a(l+"/conv2"),m=a(l+"/conv3");return{conv0:h,conv1:d,conv2:v,conv3:m}}return{extractDenseBlock3Params:o,extractDenseBlock4Params:u}}function Xz(n){var e=[],t=D_(n,e).extractDenseBlock4Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2"),dense3:t("dense3")};return Da(n,e),{params:r,paramMappings:e}}var M_=(function(n){It(e,n);function e(){return n.call(this,"FaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceFeatureExtractor - load model before inference");return gt(function(){var a=t.toBatchTensor(112,!0),o=[122.782,117.001,104.298],u=ml(a,o).div(vt(255)),l=Zc(u,r.dense0,!0);return l=Zc(l,r.dense1),l=Zc(l,r.dense2),l=Zc(l,r.dense3),l=pl(l,[7,7],[2,2],"valid"),l})},e.prototype.forward=function(t){return Tt(this,void 0,void 0,function(){var r;return Rt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Ye(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_model"},e.prototype.extractParamsFromWeigthMap=function(t){return Xz(t)},e.prototype.extractParams=function(t){return Kz(t)},e})(Aa);function Vr(n,e){return gt(function(){return Vt(Jf(n,e.weights),e.bias)})}function Yz(n,e,t){var r=[],a=Ma(n),o=a.extractWeights,u=a.getRemainingWeights,l=kg(o,r),c=l(e,t,"fc");if(u().length!==0)throw new Error("weights remaing after extract: "+u().length);return{paramMappings:r,params:{fc:c}}}function Qz(n){var e=[],t=yi(n,e);function r(o){var u=t(o+"/weights",2),l=t(o+"/bias",1);return{weights:u,bias:l}}var a={fc:r("fc")};return Da(n,e),{params:a,paramMappings:e}}function N_(n){var e={},t={};return Object.keys(n).forEach(function(r){var a=r.startsWith("fc")?t:e;a[r]=n[r]}),{featureExtractorMap:e,classifierMap:t}}var O_=(function(n){It(e,n);function e(t,r){var a=n.call(this,t)||this;return a._faceFeatureExtractor=r,a}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return gt(function(){var o=t instanceof Lf?r.faceFeatureExtractor.forwardInput(t):t;return Vr(o.as2D(o.shape[0],-1),a.fc)})},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,o=r.paramMappings;this._params=a,this._paramMappings=o},e.prototype.extractClassifierParams=function(t){return Yz(t,this.getClassifierChannelsIn(),this.getClassifierChannelsOut())},e.prototype.extractParamsFromWeigthMap=function(t){var r=N_(t),a=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),Qz(o)},e.prototype.extractParams=function(t){var r=this.getClassifierChannelsIn(),a=this.getClassifierChannelsOut(),o=a*r+a,u=t.slice(0,t.length-o),l=t.slice(t.length-o);return this.faceFeatureExtractor.extractWeights(u),this.extractClassifierParams(l)},e})(Aa),Ew=["neutral","happy","sad","angry","fearful","disgusted","surprised"],Zz=(function(){function n(e){var t=this;if(e.length!==7)throw new Error("FaceExpressions.constructor - expected probabilities.length to be 7, have: "+e.length);Ew.forEach(function(r,a){t[r]=e[a]})}return n.prototype.asSortedArray=function(){var e=this;return Ew.map(function(t){return{expression:t,probability:e[t]}}).sort(function(t,r){return r.probability-t.probability})},n})(),Jz=(function(n){It(e,n);function e(t){return t===void 0&&(t=new M_),n.call(this,"FaceExpressionNet",t)||this}return e.prototype.forwardInput=function(t){var r=this;return gt(function(){return Ta(r.runNet(t))})},e.prototype.forward=function(t){return Tt(this,void 0,void 0,function(){var r;return Rt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Ye(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.predictExpressions=function(t){return Tt(this,void 0,void 0,function(){var r,a,o,u,l=this;return Rt(this,function(c){switch(c.label){case 0:return[4,Ye(t)];case 1:return r=c.sent(),[4,this.forwardInput(r)];case 2:return a=c.sent(),[4,Promise.all(Ve(a).map(function(h){return Tt(l,void 0,void 0,function(){var d;return Rt(this,function(v){switch(v.label){case 0:return[4,h.data()];case 1:return d=v.sent(),h.dispose(),[2,d]}})})}))];case 3:return o=c.sent(),a.dispose(),u=o.map(function(h){return new Zz(h)}),[2,r.isBatchInput?u:u[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_expression_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e.prototype.getClassifierChannelsOut=function(){return 7},e})(O_);function k_(n,e){var t={expressions:e};return Object.assign({},n,t)}function I_(n){return g_(n)&&n.landmarks instanceof Zu&&n.unshiftedLandmarks instanceof Zu&&n.alignedRect instanceof Dr}function oh(n,e){var t=n.detection.box,r=e.shiftBy(t.x,t.y),a=r.align(),o=n.detection.imageDims,u=new Dr(n.detection.score,a.rescale(o.reverse()),o),l={landmarks:r,unshiftedLandmarks:e,alignedRect:u};return Object.assign({},n,l)}function $z(n,e){var t=ih(n,e),r=Ig(n,e);function a(u,l,c){var h=r(u,l,c+"/separable_conv0"),d=r(l,l,c+"/separable_conv1"),v=t(u,l,1,c+"/expansion_conv");return{separable_conv0:h,separable_conv1:d,expansion_conv:v}}function o(u,l){var c=r(u,u,l+"/separable_conv0"),h=r(u,u,l+"/separable_conv1"),d=r(u,u,l+"/separable_conv2");return{separable_conv0:c,separable_conv1:h,separable_conv2:d}}return{extractConvParams:t,extractSeparableConvParams:r,extractReductionBlockParams:a,extractMainBlockParams:o}}function tU(n,e){var t=[],r=Ma(n),a=r.extractWeights,o=r.getRemainingWeights,u=$z(a,t),l=u.extractConvParams,c=u.extractSeparableConvParams,h=u.extractReductionBlockParams,d=u.extractMainBlockParams,v=l(3,32,3,"entry_flow/conv_in"),m=h(32,64,"entry_flow/reduction_block_0"),g=h(64,128,"entry_flow/reduction_block_1"),x={conv_in:v,reduction_block_0:m,reduction_block_1:g},E={};Yu(e,0,1).forEach(function(_){E["main_block_"+_]=d(128,"middle_flow/main_block_"+_)});var w=h(128,256,"exit_flow/reduction_block"),C=c(256,512,"exit_flow/separable_conv"),S={reduction_block:w,separable_conv:C};if(o().length!==0)throw new Error("weights remaing after extract: "+o().length);return{paramMappings:t,params:{entry_flow:x,middle_flow:E,exit_flow:S}}}function eU(n,e){var t=yi(n,e),r=A_(t),a=Bg(t);function o(l){var c=a(l+"/separable_conv0"),h=a(l+"/separable_conv1"),d=r(l+"/expansion_conv");return{separable_conv0:c,separable_conv1:h,expansion_conv:d}}function u(l){var c=a(l+"/separable_conv0"),h=a(l+"/separable_conv1"),d=a(l+"/separable_conv2");return{separable_conv0:c,separable_conv1:h,separable_conv2:d}}return{extractConvParams:r,extractSeparableConvParams:a,extractReductionBlockParams:o,extractMainBlockParams:u}}function nU(n,e){var t=[],r=eU(n,t),a=r.extractConvParams,o=r.extractSeparableConvParams,u=r.extractReductionBlockParams,l=r.extractMainBlockParams,c=a("entry_flow/conv_in"),h=u("entry_flow/reduction_block_0"),d=u("entry_flow/reduction_block_1"),v={conv_in:c,reduction_block_0:h,reduction_block_1:d},m={};Yu(e,0,1).forEach(function(w){m["main_block_"+w]=l("middle_flow/main_block_"+w)});var g=u("exit_flow/reduction_block"),x=o("exit_flow/separable_conv"),E={reduction_block:g,separable_conv:x};return Da(n,t),{params:{entry_flow:v,middle_flow:m,exit_flow:E},paramMappings:t}}function B_(n,e,t){return Vt(vr(n,e.filters,t,"same"),e.bias)}function gv(n,e,t){t===void 0&&(t=!0);var r=t?xe(n):n;return r=Xn(r,e.separable_conv0,[1,1]),r=Xn(xe(r),e.separable_conv1,[1,1]),r=Ke(r,[3,3],[2,2],"same"),r=Vt(r,B_(n,e.expansion_conv,[2,2])),r}function rU(n,e){var t=Xn(xe(n),e.separable_conv0,[1,1]);return t=Xn(xe(t),e.separable_conv1,[1,1]),t=Xn(xe(t),e.separable_conv2,[1,1]),t=Vt(t,n),t}var aU=(function(n){It(e,n);function e(t){var r=n.call(this,"TinyXception")||this;return r._numMainBlocks=t,r}return e.prototype.forwardInput=function(t){var r=this,a=this.params;if(!a)throw new Error("TinyXception - load model before inference");return gt(function(){var o=t.toBatchTensor(112,!0),u=[122.782,117.001,104.298],l=ml(o,u).div(vt(256)),c=xe(B_(l,a.entry_flow.conv_in,[2,2]));return c=gv(c,a.entry_flow.reduction_block_0,!1),c=gv(c,a.entry_flow.reduction_block_1),Yu(r._numMainBlocks,0,1).forEach(function(h){c=rU(c,a.middle_flow["main_block_"+h])}),c=gv(c,a.exit_flow.reduction_block),c=xe(Xn(c,a.exit_flow.separable_conv,[1,1])),c})},e.prototype.forward=function(t){return Tt(this,void 0,void 0,function(){var r;return Rt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Ye(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"tiny_xception_model"},e.prototype.extractParamsFromWeigthMap=function(t){return nU(t,this._numMainBlocks)},e.prototype.extractParams=function(t){return tU(t,this._numMainBlocks)},e})(Aa);function iU(n){var e=[],t=Ma(n),r=t.extractWeights,a=t.getRemainingWeights,o=kg(r,e),u=o(512,1,"fc/age"),l=o(512,2,"fc/gender");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{fc:{age:u,gender:l}}}}function oU(n){var e=[],t=yi(n,e);function r(o){var u=t(o+"/weights",2),l=t(o+"/bias",1);return{weights:u,bias:l}}var a={fc:{age:r("fc/age"),gender:r("fc/gender")}};return Da(n,e),{params:a,paramMappings:e}}var Pf;(function(n){n.FEMALE="female",n.MALE="male"})(Pf||(Pf={}));var sU=(function(n){It(e,n);function e(t){t===void 0&&(t=new aU(2));var r=n.call(this,"AgeGenderNet")||this;return r._faceFeatureExtractor=t,r}return Object.defineProperty(e.prototype,"faceFeatureExtractor",{get:function(){return this._faceFeatureExtractor},enumerable:!0,configurable:!0}),e.prototype.runNet=function(t){var r=this,a=this.params;if(!a)throw new Error(this._name+" - load model before inference");return gt(function(){var o=t instanceof Lf?r.faceFeatureExtractor.forwardInput(t):t,u=pl(o,[7,7],[2,2],"valid").as2D(o.shape[0],-1),l=Vr(u,a.fc.age).as1D(),c=Vr(u,a.fc.gender);return{age:l,gender:c}})},e.prototype.forwardInput=function(t){var r=this;return gt(function(){var a=r.runNet(t),o=a.age,u=a.gender;return{age:o,gender:Ta(u)}})},e.prototype.forward=function(t){return Tt(this,void 0,void 0,function(){var r;return Rt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Ye(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.predictAgeAndGender=function(t){return Tt(this,void 0,void 0,function(){var r,a,o,u,l,c,h=this;return Rt(this,function(d){switch(d.label){case 0:return[4,Ye(t)];case 1:return r=d.sent(),[4,this.forwardInput(r)];case 2:return a=d.sent(),o=Ve(a.age),u=Ve(a.gender),l=o.map(function(v,m){return{ageTensor:v,genderTensor:u[m]}}),[4,Promise.all(l.map(function(v){var m=v.ageTensor,g=v.genderTensor;return Tt(h,void 0,void 0,function(){var x,E,w,C,S;return Rt(this,function(_){switch(_.label){case 0:return[4,m.data()];case 1:return x=_.sent()[0],[4,g.data()];case 2:return E=_.sent()[0],w=E>.5,C=w?Pf.MALE:Pf.FEMALE,S=w?E:1-E,m.dispose(),g.dispose(),[2,{age:x,gender:C,genderProbability:S}]}})})}))];case 3:return c=d.sent(),a.age.dispose(),a.gender.dispose(),[2,r.isBatchInput?c:c[0]]}})})},e.prototype.getDefaultModelName=function(){return"age_gender_model"},e.prototype.dispose=function(t){t===void 0&&(t=!0),this.faceFeatureExtractor.dispose(t),n.prototype.dispose.call(this,t)},e.prototype.loadClassifierParams=function(t){var r=this.extractClassifierParams(t),a=r.params,o=r.paramMappings;this._params=a,this._paramMappings=o},e.prototype.extractClassifierParams=function(t){return iU(t)},e.prototype.extractParamsFromWeigthMap=function(t){var r=N_(t),a=r.featureExtractorMap,o=r.classifierMap;return this.faceFeatureExtractor.loadFromWeightMap(a),oU(o)},e.prototype.extractParams=function(t){var r=1539,a=t.slice(0,t.length-r),o=t.slice(t.length-r);return this.faceFeatureExtractor.extractWeights(a),this.extractClassifierParams(o)},e})(Aa),F_=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.postProcess=function(t,r,a){var o=a.map(function(l){var c=l.width,h=l.height,d=r/Math.max(h,c);return{width:c*d,height:h*d}}),u=o.length;return gt(function(){var l=function(m,g){return Yn([qr([68],m),qr([68],g)],1).as2D(1,136).as1D()},c=function(m,g){var x=o[m],E=x.width,w=x.height;return g(E,w)?Math.abs(E-w)/2:0},h=function(m){return c(m,function(g,x){return g<x})},d=function(m){return c(m,function(g,x){return x<g})},v=t.mul(qr([u,136],r)).sub(Yn(Array.from(Array(u),function(m,g){return l(h(g),d(g))}))).div(Yn(Array.from(Array(u),function(m,g){return l(o[g].width,o[g].height)})));return v})},e.prototype.forwardInput=function(t){var r=this;return gt(function(){var a=r.runNet(t);return r.postProcess(a,t.inputSize,t.inputDimensions.map(function(o){var u=o[0],l=o[1];return{height:u,width:l}}))})},e.prototype.forward=function(t){return Tt(this,void 0,void 0,function(){var r;return Rt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Ye(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.detectLandmarks=function(t){return Tt(this,void 0,void 0,function(){var r,a,o,u=this;return Rt(this,function(l){switch(l.label){case 0:return[4,Ye(t)];case 1:return r=l.sent(),a=gt(function(){return Ve(u.forwardInput(r))}),[4,Promise.all(a.map(function(c,h){return Tt(u,void 0,void 0,function(){var d,v,m,g,x;return Rt(this,function(E){switch(E.label){case 0:return m=(v=Array).from,[4,c.data()];case 1:return d=m.apply(v,[E.sent()]),g=d.filter(function(w,C){return vw(C)}),x=d.filter(function(w,C){return!vw(C)}),[2,new Lz(Array(68).fill(0).map(function(w,C){return new te(g[C],x[C])}),{height:r.getInputHeight(h),width:r.getInputWidth(h)})]}})})}))];case 2:return o=l.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getClassifierChannelsOut=function(){return 136},e})(O_),L_=(function(n){It(e,n);function e(t){return t===void 0&&(t=new M_),n.call(this,"FaceLandmark68Net",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_model"},e.prototype.getClassifierChannelsIn=function(){return 256},e})(F_);function uU(n){var e=[],t=D_(n,e).extractDenseBlock3Params,r={dense0:t("dense0",!0),dense1:t("dense1"),dense2:t("dense2")};return Da(n,e),{params:r,paramMappings:e}}function lU(n){var e=[],t=Ma(n),r=t.extractWeights,a=t.getRemainingWeights,o=R_(r,e).extractDenseBlock3Params,u=o(3,32,"dense0",!0),l=o(32,64,"dense1"),c=o(64,128,"dense2");if(a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{paramMappings:e,params:{dense0:u,dense1:l,dense2:c}}}var cU=(function(n){It(e,n);function e(){return n.call(this,"TinyFaceFeatureExtractor")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("TinyFaceFeatureExtractor - load model before inference");return gt(function(){var a=t.toBatchTensor(112,!0),o=[122.782,117.001,104.298],u=ml(a,o).div(vt(255)),l=mv(u,r.dense0,!0);return l=mv(l,r.dense1),l=mv(l,r.dense2),l=pl(l,[14,14],[2,2],"valid"),l})},e.prototype.forward=function(t){return Tt(this,void 0,void 0,function(){var r;return Rt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Ye(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.getDefaultModelName=function(){return"face_feature_extractor_tiny_model"},e.prototype.extractParamsFromWeigthMap=function(t){return uU(t)},e.prototype.extractParams=function(t){return lU(t)},e})(Aa),fU=(function(n){It(e,n);function e(t){return t===void 0&&(t=new cU),n.call(this,"FaceLandmark68TinyNet",t)||this}return e.prototype.getDefaultModelName=function(){return"face_landmark_68_tiny_model"},e.prototype.getClassifierChannelsIn=function(){return 128},e})(F_);(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(L_);function hU(n,e){return Vt(vn(n,e.weights),e.biases)}function Fg(n,e,t,r,a){a===void 0&&(a="same");var o=e.conv,u=o.filters,l=o.bias,c=vr(n,u,t,a);return c=Vt(c,l),c=hU(c,e.scale),r?xe(c):c}function dU(n,e){return Fg(n,e,[1,1],!0)}function P_(n,e){return Fg(n,e,[1,1],!1)}function z_(n,e){return Fg(n,e,[2,2],!0,"valid")}function pU(n,e){function t(l,c,h){var d=n(l),v=d.length/(c*h*h);if(Rz(v))throw new Error("depth has to be an integer: "+v+", weights.length: "+d.length+", numFilters: "+c+", filterSize: "+h);return gt(function(){return di(An(d,[c,v,h,h]),[2,3,1,0])})}function r(l,c,h,d){var v=t(l,c,h),m=Fe(n(c));return e.push({paramPath:d+"/filters"},{paramPath:d+"/bias"}),{filters:v,bias:m}}function a(l,c){var h=Fe(n(l)),d=Fe(n(l));return e.push({paramPath:c+"/weights"},{paramPath:c+"/biases"}),{weights:h,biases:d}}function o(l,c,h,d){var v=r(l,c,h,d+"/conv"),m=a(c,d+"/scale");return{conv:v,scale:m}}function u(l,c,h,d,v){v===void 0&&(v=!1);var m=o((v?.5:1)*l,c,h,d+"/conv1"),g=o(l,c,h,d+"/conv2");return{conv1:m,conv2:g}}return{extractConvLayerParams:o,extractResidualLayerParams:u}}function vU(n){var e=Ma(n),t=e.extractWeights,r=e.getRemainingWeights,a=[],o=pU(t,a),u=o.extractConvLayerParams,l=o.extractResidualLayerParams,c=u(4704,32,7,"conv32_down"),h=l(9216,32,3,"conv32_1"),d=l(9216,32,3,"conv32_2"),v=l(9216,32,3,"conv32_3"),m=l(36864,64,3,"conv64_down",!0),g=l(36864,64,3,"conv64_1"),x=l(36864,64,3,"conv64_2"),E=l(36864,64,3,"conv64_3"),w=l(147456,128,3,"conv128_down",!0),C=l(147456,128,3,"conv128_1"),S=l(147456,128,3,"conv128_2"),_=l(589824,256,3,"conv256_down",!0),T=l(589824,256,3,"conv256_1"),A=l(589824,256,3,"conv256_2"),D=l(589824,256,3,"conv256_down_out"),N=gt(function(){return di(si(t(256*128),[128,256]),[1,0])});if(a.push({paramPath:"fc"}),r().length!==0)throw new Error("weights remaing after extract: "+r().length);var k={conv32_down:c,conv32_1:h,conv32_2:d,conv32_3:v,conv64_down:m,conv64_1:g,conv64_2:x,conv64_3:E,conv128_down:w,conv128_1:C,conv128_2:S,conv256_down:_,conv256_1:T,conv256_2:A,conv256_down_out:D,fc:N};return{params:k,paramMappings:a}}function mU(n,e){var t=yi(n,e);function r(u){var l=t(u+"/scale/weights",1),c=t(u+"/scale/biases",1);return{weights:l,biases:c}}function a(u){var l=t(u+"/conv/filters",4),c=t(u+"/conv/bias",1),h=r(u);return{conv:{filters:l,bias:c},scale:h}}function o(u){return{conv1:a(u+"/conv1"),conv2:a(u+"/conv2")}}return{extractConvLayerParams:a,extractResidualLayerParams:o}}function gU(n){var e=[],t=mU(n,e),r=t.extractConvLayerParams,a=t.extractResidualLayerParams,o=r("conv32_down"),u=a("conv32_1"),l=a("conv32_2"),c=a("conv32_3"),h=a("conv64_down"),d=a("conv64_1"),v=a("conv64_2"),m=a("conv64_3"),g=a("conv128_down"),x=a("conv128_1"),E=a("conv128_2"),w=a("conv256_down"),C=a("conv256_1"),S=a("conv256_2"),_=a("conv256_down_out"),T=n.fc;if(e.push({originalPath:"fc",paramPath:"fc"}),!Tz(T))throw new Error("expected weightMap[fc] to be a Tensor2D, instead have "+T);var A={conv32_down:o,conv32_1:u,conv32_2:l,conv32_3:c,conv64_down:h,conv64_1:d,conv64_2:v,conv64_3:m,conv128_down:g,conv128_1:x,conv128_2:E,conv256_down:w,conv256_1:C,conv256_2:S,conv256_down_out:_,fc:T};return Da(n,e),{params:A,paramMappings:e}}function Fr(n,e){var t=dU(n,e.conv1);return t=P_(t,e.conv2),t=Vt(t,n),t=xe(t),t}function Jc(n,e){var t=z_(n,e.conv1);t=P_(t,e.conv2);var r=pl(n,2,2,"valid"),a=ve(r.shape),o=r.shape[3]!==t.shape[3],u=r.shape[1]!==t.shape[1]||r.shape[2]!==t.shape[2];if(u){var l=Fu(t.shape);l[1]=1;var c=ve(l);t=Ue([t,c],1);var h=Fu(t.shape);h[2]=1;var d=ve(h);t=Ue([t,d],2)}return r=o?Ue([r,a],3):r,t=Vt(r,t),t=xe(t),t}var yU=(function(n){It(e,n);function e(){return n.call(this,"FaceRecognitionNet")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("FaceRecognitionNet - load model before inference");return gt(function(){var a=t.toBatchTensor(150,!0).toFloat(),o=[122.782,117.001,104.298],u=ml(a,o).div(vt(256)),l=z_(u,r.conv32_down);l=Ke(l,3,2,"valid"),l=Fr(l,r.conv32_1),l=Fr(l,r.conv32_2),l=Fr(l,r.conv32_3),l=Jc(l,r.conv64_down),l=Fr(l,r.conv64_1),l=Fr(l,r.conv64_2),l=Fr(l,r.conv64_3),l=Jc(l,r.conv128_down),l=Fr(l,r.conv128_1),l=Fr(l,r.conv128_2),l=Jc(l,r.conv256_down),l=Fr(l,r.conv256_1),l=Fr(l,r.conv256_2),l=Jc(l,r.conv256_down_out);var c=l.mean([1,2]),h=Jf(c,r.fc);return h})},e.prototype.forward=function(t){return Tt(this,void 0,void 0,function(){var r;return Rt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Ye(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.computeFaceDescriptor=function(t){return Tt(this,void 0,void 0,function(){var r,a,o,u=this;return Rt(this,function(l){switch(l.label){case 0:return[4,Ye(t)];case 1:return r=l.sent(),a=gt(function(){return Ve(u.forwardInput(r))}),[4,Promise.all(a.map(function(c){return c.data()}))];case 2:return o=l.sent(),a.forEach(function(c){return c.dispose()}),[2,r.isBatchInput?o:o[0]]}})})},e.prototype.getDefaultModelName=function(){return"face_recognition_model"},e.prototype.extractParamsFromWeigthMap=function(t){return gU(t)},e.prototype.extractParams=function(t){return vU(t)},e})(Aa);function U_(n,e){var t={descriptor:e};return Object.assign({},n,t)}function V_(n,e){var t={age:e};return Object.assign({},n,t)}function H_(n,e,t){var r={gender:e,genderProbability:t};return Object.assign({},n,r)}var G_=(function(){function n(e){var t=e===void 0?{}:e,r=t.minFaceSize,a=t.scaleFactor,o=t.maxNumScales,u=t.scoreThresholds,l=t.scaleSteps;if(this._name="MtcnnOptions",this._minFaceSize=r||20,this._scaleFactor=a||.709,this._maxNumScales=o||10,this._scoreThresholds=u||[.6,.7,.7],this._scaleSteps=l,typeof this._minFaceSize!="number"||this._minFaceSize<0)throw new Error(this._name+" - expected minFaceSize to be a number > 0");if(typeof this._scaleFactor!="number"||this._scaleFactor<=0||this._scaleFactor>=1)throw new Error(this._name+" - expected scaleFactor to be a number between 0 and 1");if(typeof this._maxNumScales!="number"||this._maxNumScales<0)throw new Error(this._name+" - expected maxNumScales to be a number > 0");if(!Array.isArray(this._scoreThresholds)||this._scoreThresholds.length!==3||this._scoreThresholds.some(function(c){return typeof c!="number"}))throw new Error(this._name+" - expected scoreThresholds to be an array of numbers of length 3");if(this._scaleSteps&&(!Array.isArray(this._scaleSteps)||this._scaleSteps.some(function(c){return typeof c!="number"})))throw new Error(this._name+" - expected scaleSteps to be an array of numbers")}return Object.defineProperty(n.prototype,"minFaceSize",{get:function(){return this._minFaceSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleFactor",{get:function(){return this._scaleFactor},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxNumScales",{get:function(){return this._maxNumScales},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThresholds",{get:function(){return this._scoreThresholds},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scaleSteps",{get:function(){return this._scaleSteps},enumerable:!0,configurable:!0}),n})();function bU(n,e){function t(c,h){var d=An(n(9*c),[3,3,c,1]),v=Fe(n(c)),m=Fe(n(c)),g=Fe(n(c)),x=Fe(n(c));return e.push({paramPath:h+"/filters"},{paramPath:h+"/batch_norm_scale"},{paramPath:h+"/batch_norm_offset"},{paramPath:h+"/batch_norm_mean"},{paramPath:h+"/batch_norm_variance"}),{filters:d,batch_norm_scale:v,batch_norm_offset:m,batch_norm_mean:g,batch_norm_variance:x}}function r(c,h,d,v,m){var g=An(n(c*h*d*d),[d,d,c,h]),x=Fe(n(h));return e.push({paramPath:v+"/filters"},{paramPath:v+"/"+(m?"batch_norm_offset":"bias")}),{filters:g,bias:x}}function a(c,h,d,v){var m=r(c,h,d,v,!0),g=m.filters,x=m.bias;return{filters:g,batch_norm_offset:x}}function o(c,h,d){var v=t(c,d+"/depthwise_conv"),m=a(c,h,1,d+"/pointwise_conv");return{depthwise_conv:v,pointwise_conv:m}}function u(){var c=a(3,32,3,"mobilenetv1/conv_0"),h=o(32,64,"mobilenetv1/conv_1"),d=o(64,128,"mobilenetv1/conv_2"),v=o(128,128,"mobilenetv1/conv_3"),m=o(128,256,"mobilenetv1/conv_4"),g=o(256,256,"mobilenetv1/conv_5"),x=o(256,512,"mobilenetv1/conv_6"),E=o(512,512,"mobilenetv1/conv_7"),w=o(512,512,"mobilenetv1/conv_8"),C=o(512,512,"mobilenetv1/conv_9"),S=o(512,512,"mobilenetv1/conv_10"),_=o(512,512,"mobilenetv1/conv_11"),T=o(512,1024,"mobilenetv1/conv_12"),A=o(1024,1024,"mobilenetv1/conv_13");return{conv_0:c,conv_1:h,conv_2:d,conv_3:v,conv_4:m,conv_5:g,conv_6:x,conv_7:E,conv_8:w,conv_9:C,conv_10:S,conv_11:_,conv_12:T,conv_13:A}}function l(){var c=a(1024,256,1,"prediction_layer/conv_0"),h=a(256,512,3,"prediction_layer/conv_1"),d=a(512,128,1,"prediction_layer/conv_2"),v=a(128,256,3,"prediction_layer/conv_3"),m=a(256,128,1,"prediction_layer/conv_4"),g=a(128,256,3,"prediction_layer/conv_5"),x=a(256,64,1,"prediction_layer/conv_6"),E=a(64,128,3,"prediction_layer/conv_7"),w=r(512,12,1,"prediction_layer/box_predictor_0/box_encoding_predictor"),C=r(512,9,1,"prediction_layer/box_predictor_0/class_predictor"),S=r(1024,24,1,"prediction_layer/box_predictor_1/box_encoding_predictor"),_=r(1024,18,1,"prediction_layer/box_predictor_1/class_predictor"),T=r(512,24,1,"prediction_layer/box_predictor_2/box_encoding_predictor"),A=r(512,18,1,"prediction_layer/box_predictor_2/class_predictor"),D=r(256,24,1,"prediction_layer/box_predictor_3/box_encoding_predictor"),N=r(256,18,1,"prediction_layer/box_predictor_3/class_predictor"),k=r(256,24,1,"prediction_layer/box_predictor_4/box_encoding_predictor"),O=r(256,18,1,"prediction_layer/box_predictor_4/class_predictor"),B=r(128,24,1,"prediction_layer/box_predictor_5/box_encoding_predictor"),V=r(128,18,1,"prediction_layer/box_predictor_5/class_predictor"),U={box_encoding_predictor:w,class_predictor:C},it={box_encoding_predictor:S,class_predictor:_},et={box_encoding_predictor:T,class_predictor:A},tt={box_encoding_predictor:D,class_predictor:N},P={box_encoding_predictor:k,class_predictor:O},G={box_encoding_predictor:B,class_predictor:V};return{conv_0:c,conv_1:h,conv_2:d,conv_3:v,conv_4:m,conv_5:g,conv_6:x,conv_7:E,box_predictor_0:U,box_predictor_1:it,box_predictor_2:et,box_predictor_3:tt,box_predictor_4:P,box_predictor_5:G}}return{extractMobilenetV1Params:u,extractPredictionLayerParams:l}}function xU(n){var e=[],t=Ma(n),r=t.extractWeights,a=t.getRemainingWeights,o=bU(r,e),u=o.extractMobilenetV1Params,l=o.extractPredictionLayerParams,c=u(),h=l(),d=$m(r(5118*4),[1,5118,4]),v={extra_dim:d};if(e.push({paramPath:"output_layer/extra_dim"}),a().length!==0)throw new Error("weights remaing after extract: "+a().length);return{params:{mobilenetv1:c,prediction_layer:h,output_layer:v},paramMappings:e}}function wU(n,e){var t=yi(n,e);function r(h,d,v){var m=t(h+"/Conv2d_"+d+"_pointwise/weights",4,v+"/filters"),g=t(h+"/Conv2d_"+d+"_pointwise/convolution_bn_offset",1,v+"/batch_norm_offset");return{filters:m,batch_norm_offset:g}}function a(h){var d="mobilenetv1/conv_"+h,v="MobilenetV1/Conv2d_"+h+"_depthwise",m=d+"/depthwise_conv",g=d+"/pointwise_conv",x=t(v+"/depthwise_weights",4,m+"/filters"),E=t(v+"/BatchNorm/gamma",1,m+"/batch_norm_scale"),w=t(v+"/BatchNorm/beta",1,m+"/batch_norm_offset"),C=t(v+"/BatchNorm/moving_mean",1,m+"/batch_norm_mean"),S=t(v+"/BatchNorm/moving_variance",1,m+"/batch_norm_variance");return{depthwise_conv:{filters:x,batch_norm_scale:E,batch_norm_offset:w,batch_norm_mean:C,batch_norm_variance:S},pointwise_conv:r("MobilenetV1",h,g)}}function o(){return{conv_0:r("MobilenetV1",0,"mobilenetv1/conv_0"),conv_1:a(1),conv_2:a(2),conv_3:a(3),conv_4:a(4),conv_5:a(5),conv_6:a(6),conv_7:a(7),conv_8:a(8),conv_9:a(9),conv_10:a(10),conv_11:a(11),conv_12:a(12),conv_13:a(13)}}function u(h,d){var v=t(h+"/weights",4,d+"/filters"),m=t(h+"/biases",1,d+"/bias");return{filters:v,bias:m}}function l(h){var d=u("Prediction/BoxPredictor_"+h+"/BoxEncodingPredictor","prediction_layer/box_predictor_"+h+"/box_encoding_predictor"),v=u("Prediction/BoxPredictor_"+h+"/ClassPredictor","prediction_layer/box_predictor_"+h+"/class_predictor");return{box_encoding_predictor:d,class_predictor:v}}function c(){return{conv_0:r("Prediction",0,"prediction_layer/conv_0"),conv_1:r("Prediction",1,"prediction_layer/conv_1"),conv_2:r("Prediction",2,"prediction_layer/conv_2"),conv_3:r("Prediction",3,"prediction_layer/conv_3"),conv_4:r("Prediction",4,"prediction_layer/conv_4"),conv_5:r("Prediction",5,"prediction_layer/conv_5"),conv_6:r("Prediction",6,"prediction_layer/conv_6"),conv_7:r("Prediction",7,"prediction_layer/conv_7"),box_predictor_0:l(0),box_predictor_1:l(1),box_predictor_2:l(2),box_predictor_3:l(3),box_predictor_4:l(4),box_predictor_5:l(5)}}return{extractMobilenetV1Params:o,extractPredictionLayerParams:c}}function EU(n){var e=[],t=wU(n,e),r=t.extractMobilenetV1Params,a=t.extractPredictionLayerParams,o=n["Output/extra_dim"];if(e.push({originalPath:"Output/extra_dim",paramPath:"output_layer/extra_dim"}),!nh(o))throw new Error("expected weightMap['Output/extra_dim'] to be a Tensor3D, instead have "+o);var u={mobilenetv1:r(),prediction_layer:a(),output_layer:{extra_dim:o}};return Da(n,e),{params:u,paramMappings:e}}function Lr(n,e,t){return gt(function(){var r=vr(n,e.filters,t,"same");return r=Vt(r,e.batch_norm_offset),cg(r,0,6)})}var CU=.0010000000474974513;function SU(n,e,t){return gt(function(){var r=Zf(n,e.filters,t,"same");return r=FS(r,e.batch_norm_mean,e.batch_norm_variance,e.batch_norm_offset,e.batch_norm_scale,CU),cg(r,0,6)})}function _U(n){return[2,4,6,12].some(function(e){return e===n})?[2,2]:[1,1]}function TU(n,e){return gt(function(){var t=null,r=Lr(n,e.conv_0,[2,2]),a=[e.conv_1,e.conv_2,e.conv_3,e.conv_4,e.conv_5,e.conv_6,e.conv_7,e.conv_8,e.conv_9,e.conv_10,e.conv_11,e.conv_12,e.conv_13];if(a.forEach(function(o,u){var l=u+1,c=_U(l);r=SU(r,o.depthwise_conv,c),r=Lr(r,o.pointwise_conv,[1,1]),l===11&&(t=r)}),t===null)throw new Error("mobileNetV1 - output of conv layer 11 is null");return{out:r,conv11:t}})}function RU(n,e,t,r,a){var o=n.shape[0],u=Math.min(t,o),l=e.map(function(d,v){return{score:d,boxIndex:v}}).filter(function(d){return d.score>a}).sort(function(d,v){return v.score-d.score}),c=function(d){return d<=r?1:0},h=[];return l.forEach(function(d){if(!(h.length>=u)){for(var v=d.score,m=h.length-1;m>=0;--m){var g=AU(n,d.boxIndex,h[m]);if(g!==0&&(d.score*=c(g),d.score<=a))break}v===d.score&&h.push(d.boxIndex)}}),h}function AU(n,e,t){var r=n.arraySync(),a=Math.min(r[e][0],r[e][2]),o=Math.min(r[e][1],r[e][3]),u=Math.max(r[e][0],r[e][2]),l=Math.max(r[e][1],r[e][3]),c=Math.min(r[t][0],r[t][2]),h=Math.min(r[t][1],r[t][3]),d=Math.max(r[t][0],r[t][2]),v=Math.max(r[t][1],r[t][3]),m=(u-a)*(l-o),g=(d-c)*(v-h);if(m<=0||g<=0)return 0;var x=Math.max(a,c),E=Math.max(o,h),w=Math.min(u,d),C=Math.min(l,v),S=Math.max(w-x,0)*Math.max(C-E,0);return S/(m+g-S)}function DU(n){var e=Ve(di(n,[1,0])),t=[Ge(e[2],e[0]),Ge(e[3],e[1])],r=[Vt(e[0],Cr(t[0],vt(2))),Vt(e[1],Cr(t[1],vt(2)))];return{sizes:t,centers:r}}function MU(n,e){var t=DU(n),r=t.sizes,a=t.centers,o=Ve(di(e,[1,0])),u=Cr(vn(rm(Cr(o[2],vt(5))),r[0]),vt(2)),l=Vt(vn(Cr(o[0],vt(10)),r[0]),a[0]),c=Cr(vn(rm(Cr(o[3],vt(5))),r[1]),vt(2)),h=Vt(vn(Cr(o[1],vt(10)),r[1]),a[1]);return di(Yn([Ge(l,u),Ge(h,c),Vt(l,u),Vt(h,c)]),[1,0])}function NU(n,e,t){return gt(function(){var r=n.shape[0],a=MU(Sr(fs(t.extra_dim,[r,1,1]),[-1,4]),Sr(n,[-1,4]));a=Sr(a,[r,a.shape[0]/r,4]);var o=OS(Kr(e,[0,0,1],[-1,-1,-1])),u=Kr(o,[0,0,0],[-1,-1,1]);u=Sr(u,[r,u.shape[1]]);var l=Ve(a),c=Ve(u);return{boxes:l,scores:c}})}function Qo(n,e){return gt(function(){var t=n.shape[0],r=Sr(_r(n,e.box_encoding_predictor),[t,-1,1,4]),a=Sr(_r(n,e.class_predictor),[t,-1,3]);return{boxPredictionEncoding:r,classPrediction:a}})}function OU(n,e,t){return gt(function(){var r=Lr(n,t.conv_0,[1,1]),a=Lr(r,t.conv_1,[2,2]),o=Lr(a,t.conv_2,[1,1]),u=Lr(o,t.conv_3,[2,2]),l=Lr(u,t.conv_4,[1,1]),c=Lr(l,t.conv_5,[2,2]),h=Lr(c,t.conv_6,[1,1]),d=Lr(h,t.conv_7,[2,2]),v=Qo(e,t.box_predictor_0),m=Qo(n,t.box_predictor_1),g=Qo(a,t.box_predictor_2),x=Qo(u,t.box_predictor_3),E=Qo(c,t.box_predictor_4),w=Qo(d,t.box_predictor_5),C=Ue([v.boxPredictionEncoding,m.boxPredictionEncoding,g.boxPredictionEncoding,x.boxPredictionEncoding,E.boxPredictionEncoding,w.boxPredictionEncoding],1),S=Ue([v.classPrediction,m.classPrediction,g.classPrediction,x.classPrediction,E.classPrediction,w.classPrediction],1);return{boxPredictions:C,classPredictions:S}})}var gl=(function(){function n(e){var t=e===void 0?{}:e,r=t.minConfidence,a=t.maxResults;if(this._name="SsdMobilenetv1Options",this._minConfidence=r||.5,this._maxResults=a||100,typeof this._minConfidence!="number"||this._minConfidence<=0||this._minConfidence>=1)throw new Error(this._name+" - expected minConfidence to be a number between 0 and 1");if(typeof this._maxResults!="number")throw new Error(this._name+" - expected maxResults to be a number")}return Object.defineProperty(n.prototype,"minConfidence",{get:function(){return this._minConfidence},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxResults",{get:function(){return this._maxResults},enumerable:!0,configurable:!0}),n})(),j_=(function(n){It(e,n);function e(){return n.call(this,"SsdMobilenetv1")||this}return e.prototype.forwardInput=function(t){var r=this.params;if(!r)throw new Error("SsdMobilenetv1 - load model before inference");return gt(function(){var a=t.toBatchTensor(512,!1).toFloat(),o=Ge(vn(a,vt(.007843137718737125)),vt(1)),u=TU(o,r.mobilenetv1),l=OU(u.out,u.conv11,r.prediction_layer),c=l.boxPredictions,h=l.classPredictions;return NU(c,h,r.output_layer)})},e.prototype.forward=function(t){return Tt(this,void 0,void 0,function(){var r;return Rt(this,function(a){switch(a.label){case 0:return r=this.forwardInput,[4,Ye(t)];case 1:return[2,r.apply(this,[a.sent()])]}})})},e.prototype.locateFaces=function(t,r){return r===void 0&&(r={}),Tt(this,void 0,void 0,function(){var a,o,u,l,c,h,d,v,m,g,x,E,w,C,S,_,T,A,D,N,k;return Rt(this,function(O){switch(O.label){case 0:return a=new gl(r),o=a.maxResults,u=a.minConfidence,[4,Ye(t)];case 1:for(l=O.sent(),c=this.forwardInput(l),h=c.boxes,d=c.scores,v=h[0],m=d[0],g=1;g<h.length;g++)h[g].dispose(),d[g].dispose();return w=(E=Array).from,[4,m.data()];case 2:return x=w.apply(E,[O.sent()]),C=.5,S=RU(v,x,o,C,u),_=l.getReshapedInputDimensions(0),T=l.inputSize,A=T/_.width,D=T/_.height,N=v.arraySync(),k=S.map(function(B){var V=[Math.max(0,N[B][0]),Math.min(1,N[B][2])].map(function(G){return G*D}),U=V[0],it=V[1],et=[Math.max(0,N[B][1]),Math.min(1,N[B][3])].map(function(G){return G*A}),tt=et[0],P=et[1];return new Dr(x[B],new Rg(tt,U,P-tt,it-U),{height:l.getInputHeight(0),width:l.getInputWidth(0)})}),v.dispose(),m.dispose(),[2,k]}})})},e.prototype.getDefaultModelName=function(){return"ssd_mobilenetv1_model"},e.prototype.extractParamsFromWeigthMap=function(t){return EU(t)},e.prototype.extractParams=function(t){return xU(t)},e})(Aa);(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e})(j_);var kU=.4,IU=[new te(.738768,.874946),new te(2.42204,2.65704),new te(4.30971,7.04493),new te(10.246,4.59428),new te(12.6868,11.8741)],BU=[new te(1.603231,2.094468),new te(6.041143,7.080126),new te(2.882459,3.518061),new te(4.266906,5.178857),new te(9.041765,10.66308)],FU=[117.001,114.697,97.404],LU="tiny_yolov2_model",PU="tiny_yolov2_separable_conv_model",$c=function(n){return typeof n=="number"};function zU(n){if(!n)throw new Error("invalid config: "+n);if(typeof n.withSeparableConvs!="boolean")throw new Error("config.withSeparableConvs has to be a boolean, have: "+n.withSeparableConvs);if(!$c(n.iouThreshold)||n.iouThreshold<0||n.iouThreshold>1)throw new Error("config.iouThreshold has to be a number between [0, 1], have: "+n.iouThreshold);if(!Array.isArray(n.classes)||!n.classes.length||!n.classes.every(function(e){return typeof e=="string"}))throw new Error("config.classes has to be an array class names: string[], have: "+JSON.stringify(n.classes));if(!Array.isArray(n.anchors)||!n.anchors.length||!n.anchors.map(function(e){return e||{}}).every(function(e){return $c(e.x)&&$c(e.y)}))throw new Error("config.anchors has to be an array of { x: number, y: number }, have: "+JSON.stringify(n.anchors));if(n.meanRgb&&(!Array.isArray(n.meanRgb)||n.meanRgb.length!==3||!n.meanRgb.every($c)))throw new Error("config.meanRgb has to be an array of shape [number, number, number], have: "+JSON.stringify(n.meanRgb))}function Lg(n){return gt(function(){var e=vn(n,vt(.10000000149011612));return Vt(xe(Ge(n,e)),e)})}function ei(n,e){return gt(function(){var t=ro(n,[[0,0],[1,1],[1,1],[0,0]]);return t=vr(t,e.conv.filters,[1,1],"valid"),t=Ge(t,e.bn.sub),t=vn(t,e.bn.truediv),t=Vt(t,e.conv.bias),Lg(t)})}function ni(n,e){return gt(function(){var t=ro(n,[[0,0],[1,1],[1,1],[0,0]]);return t=pg(t,e.depthwise_filter,e.pointwise_filter,[1,1],"valid"),t=Vt(t,e.bias),Lg(t)})}function UU(n,e){var t=ih(n,e);function r(u,l){var c=Fe(n(u)),h=Fe(n(u));return e.push({paramPath:l+"/sub"},{paramPath:l+"/truediv"}),{sub:c,truediv:h}}function a(u,l,c){var h=t(u,l,3,c+"/conv"),d=r(l,c+"/bn");return{conv:h,bn:d}}var o=Ig(n,e);return{extractConvParams:t,extractConvWithBatchNormParams:a,extractSeparableConvParams:o}}function VU(n,e,t,r){var a=Ma(n),o=a.extractWeights,u=a.getRemainingWeights,l=[],c=UU(o,l),h=c.extractConvParams,d=c.extractConvWithBatchNormParams,v=c.extractSeparableConvParams,m;if(e.withSeparableConvs){var g=r[0],x=r[1],E=r[2],w=r[3],C=r[4],S=r[5],_=r[6],T=r[7],A=r[8],D=e.isFirstLayerConv2d?h(g,x,3,"conv0"):v(g,x,"conv0"),N=v(x,E,"conv1"),k=v(E,w,"conv2"),O=v(w,C,"conv3"),B=v(C,S,"conv4"),V=v(S,_,"conv5"),U=T?v(_,T,"conv6"):void 0,it=A?v(T,A,"conv7"):void 0,et=h(A||T||_,5*t,1,"conv8");m={conv0:D,conv1:N,conv2:k,conv3:O,conv4:B,conv5:V,conv6:U,conv7:it,conv8:et}}else{var g=r[0],x=r[1],E=r[2],w=r[3],C=r[4],S=r[5],_=r[6],T=r[7],A=r[8],D=d(g,x,"conv0"),N=d(x,E,"conv1"),k=d(E,w,"conv2"),O=d(w,C,"conv3"),B=d(C,S,"conv4"),V=d(S,_,"conv5"),U=d(_,T,"conv6"),it=d(T,A,"conv7"),et=h(A,5*t,1,"conv8");m={conv0:D,conv1:N,conv2:k,conv3:O,conv4:B,conv5:V,conv6:U,conv7:it,conv8:et}}if(u().length!==0)throw new Error("weights remaing after extract: "+u().length);return{params:m,paramMappings:l}}function HU(n,e){var t=yi(n,e);function r(l){var c=t(l+"/sub",1),h=t(l+"/truediv",1);return{sub:c,truediv:h}}function a(l){var c=t(l+"/filters",4),h=t(l+"/bias",1);return{filters:c,bias:h}}function o(l){var c=a(l+"/conv"),h=r(l+"/bn");return{conv:c,bn:h}}var u=Bg(t);return{extractConvParams:a,extractConvWithBatchNormParams:o,extractSeparableConvParams:u}}function GU(n,e){var t=[],r=HU(n,t),a=r.extractConvParams,o=r.extractConvWithBatchNormParams,u=r.extractSeparableConvParams,l;if(e.withSeparableConvs){var c=e.filterSizes&&e.filterSizes.length||9;l={conv0:e.isFirstLayerConv2d?a("conv0"):u("conv0"),conv1:u("conv1"),conv2:u("conv2"),conv3:u("conv3"),conv4:u("conv4"),conv5:u("conv5"),conv6:c>7?u("conv6"):void 0,conv7:c>8?u("conv7"):void 0,conv8:a("conv8")}}else l={conv0:o("conv0"),conv1:o("conv1"),conv2:o("conv2"),conv3:o("conv3"),conv4:o("conv4"),conv5:o("conv5"),conv6:o("conv6"),conv7:o("conv7"),conv8:a("conv8")};return Da(n,t),{params:l,paramMappings:t}}var Cw;(function(n){n[n.XS=224]="XS",n[n.SM=320]="SM",n[n.MD=416]="MD",n[n.LG=608]="LG"})(Cw||(Cw={}));var Pg=(function(){function n(e){var t=e===void 0?{}:e,r=t.inputSize,a=t.scoreThreshold;if(this._name="TinyYolov2Options",this._inputSize=r||416,this._scoreThreshold=a||.5,typeof this._inputSize!="number"||this._inputSize%32!==0)throw new Error(this._name+" - expected inputSize to be a number divisible by 32");if(typeof this._scoreThreshold!="number"||this._scoreThreshold<=0||this._scoreThreshold>=1)throw new Error(this._name+" - expected scoreThreshold to be a number between 0 and 1")}return Object.defineProperty(n.prototype,"inputSize",{get:function(){return this._inputSize},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scoreThreshold",{get:function(){return this._scoreThreshold},enumerable:!0,configurable:!0}),n})(),W_=(function(n){It(e,n);function e(t){var r=n.call(this,"TinyYolov2")||this;return zU(t),r._config=t,r}return Object.defineProperty(e.prototype,"config",{get:function(){return this._config},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"withClassScores",{get:function(){return this.config.withClassScores||this.config.classes.length>1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boxEncodingSize",{get:function(){return 5+(this.withClassScores?this.config.classes.length:0)},enumerable:!0,configurable:!0}),e.prototype.runTinyYolov2=function(t,r){var a=ei(t,r.conv0);return a=Ke(a,[2,2],[2,2],"same"),a=ei(a,r.conv1),a=Ke(a,[2,2],[2,2],"same"),a=ei(a,r.conv2),a=Ke(a,[2,2],[2,2],"same"),a=ei(a,r.conv3),a=Ke(a,[2,2],[2,2],"same"),a=ei(a,r.conv4),a=Ke(a,[2,2],[2,2],"same"),a=ei(a,r.conv5),a=Ke(a,[2,2],[1,1],"same"),a=ei(a,r.conv6),a=ei(a,r.conv7),_r(a,r.conv8,"valid",!1)},e.prototype.runMobilenet=function(t,r){var a=this.config.isFirstLayerConv2d?Lg(_r(t,r.conv0,"valid",!1)):ni(t,r.conv0);return a=Ke(a,[2,2],[2,2],"same"),a=ni(a,r.conv1),a=Ke(a,[2,2],[2,2],"same"),a=ni(a,r.conv2),a=Ke(a,[2,2],[2,2],"same"),a=ni(a,r.conv3),a=Ke(a,[2,2],[2,2],"same"),a=ni(a,r.conv4),a=Ke(a,[2,2],[2,2],"same"),a=ni(a,r.conv5),a=Ke(a,[2,2],[1,1],"same"),a=r.conv6?ni(a,r.conv6):a,a=r.conv7?ni(a,r.conv7):a,_r(a,r.conv8,"valid",!1)},e.prototype.forwardInput=function(t,r){var a=this,o=this.params;if(!o)throw new Error("TinyYolov2 - load model before inference");return gt(function(){var u=t.toBatchTensor(r,!1).toFloat();return u=a.config.meanRgb?ml(u,a.config.meanRgb):u,u=u.div(vt(256)),a.config.withSeparableConvs?a.runMobilenet(u,o):a.runTinyYolov2(u,o)})},e.prototype.forward=function(t,r){return Tt(this,void 0,void 0,function(){var a;return Rt(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Ye(t)];case 1:return[4,a.apply(this,[o.sent(),r])];case 2:return[2,o.sent()]}})})},e.prototype.detect=function(t,r){return r===void 0&&(r={}),Tt(this,void 0,void 0,function(){var a,o,u,l,c,h,d,v,m,g,x,E,w,C,S=this;return Rt(this,function(_){switch(_.label){case 0:return a=new Pg(r),o=a.inputSize,u=a.scoreThreshold,[4,Ye(t)];case 1:return l=_.sent(),[4,this.forwardInput(l,o)];case 2:return c=_.sent(),h=gt(function(){return Ve(c)[0].expandDims()}),d={width:l.getInputWidth(0),height:l.getInputHeight(0)},[4,this.extractBoxes(h,l.getReshapedInputDimensions(0),u)];case 3:return v=_.sent(),c.dispose(),h.dispose(),m=v.map(function(T){return T.box}),g=v.map(function(T){return T.score}),x=v.map(function(T){return T.classScore}),E=v.map(function(T){return S.config.classes[T.label]}),w=Qu(m.map(function(T){return T.rescale(o)}),g,this.config.iouThreshold,!0),C=w.map(function(T){return new m_(g[T],x[T],E[T],m[T],d)}),[2,C]}})})},e.prototype.getDefaultModelName=function(){return""},e.prototype.extractParamsFromWeigthMap=function(t){return GU(t,this.config)},e.prototype.extractParams=function(t){var r=this.config.filterSizes||e.DEFAULT_FILTER_SIZES,a=r?r.length:void 0;if(a!==7&&a!==8&&a!==9)throw new Error("TinyYolov2 - expected 7 | 8 | 9 convolutional filters, but found "+a+" filterSizes in config");return VU(t,this.config,this.boxEncodingSize,r)},e.prototype.extractBoxes=function(t,r,a){return Tt(this,void 0,void 0,function(){var o,u,l,c,h,d,v,m,g,x,E,w,C,S,_,T,A,D,N,k,O,B,V,U,it,et,tt,P,G,q=this;return Rt(this,function(nt){switch(nt.label){case 0:return o=r.width,u=r.height,l=Math.max(o,u),c=l/o,h=l/u,d=t.shape[1],v=this.config.anchors.length,m=gt(function(){var ot=t.reshape([d,d,v,q.boxEncodingSize]),L=ot.slice([0,0,0,0],[d,d,v,4]),X=ot.slice([0,0,0,4],[d,d,v,1]),st=q.withClassScores?Ta(ot.slice([0,0,0,5],[d,d,v,q.config.classes.length]),3):vt(0);return[L,X,st]}),g=m[0],x=m[1],E=m[2],w=[],[4,x.array()];case 1:return C=nt.sent(),[4,g.array()];case 2:S=nt.sent(),_=0,nt.label=3;case 3:if(!(_<d))return[3,12];T=0,nt.label=4;case 4:if(!(T<d))return[3,11];A=0,nt.label=5;case 5:return A<v?(D=vv(C[_][T][A][0]),!a||D>a?(N=(T+vv(S[_][T][A][0]))/d*c,k=(_+vv(S[_][T][A][1]))/d*h,O=Math.exp(S[_][T][A][2])*this.config.anchors[A].x/d*c,B=Math.exp(S[_][T][A][3])*this.config.anchors[A].y/d*h,V=N-O/2,U=k-B/2,it={row:_,col:T,anchor:A},this.withClassScores?[4,this.extractPredictedClass(E,it)]:[3,7]):[3,9]):[3,10];case 6:return G=nt.sent(),[3,8];case 7:G={classScore:1,label:0},nt.label=8;case 8:et=G,tt=et.classScore,P=et.label,w.push(cn({box:new rh(V,U,V+O,U+B),score:D,classScore:D*tt,label:P},it)),nt.label=9;case 9:return A++,[3,5];case 10:return T++,[3,4];case 11:return _++,[3,3];case 12:return g.dispose(),x.dispose(),E.dispose(),[2,w]}})})},e.prototype.extractPredictedClass=function(t,r){return Tt(this,void 0,void 0,function(){var a,o,u,l;return Rt(this,function(c){switch(c.label){case 0:return a=r.row,o=r.col,u=r.anchor,[4,t.array()];case 1:return l=c.sent(),[2,Array(this.config.classes.length).fill(0).map(function(h,d){return l[a][o][u][d]}).map(function(h,d){return{classScore:h,label:d}}).reduce(function(h,d){return h.classScore>d.classScore?h:d})]}})})},e.DEFAULT_FILTER_SIZES=[3,16,32,64,128,256,512,1024,1024],e})(Aa),jU=(function(n){It(e,n);function e(t){t===void 0&&(t=!0);var r=this,a=Object.assign({},{withSeparableConvs:t,iouThreshold:kU,classes:["face"]},t?{anchors:BU,meanRgb:FU}:{anchors:IU,withClassScores:!0});return r=n.call(this,a)||this,r}return Object.defineProperty(e.prototype,"withSeparableConvs",{get:function(){return this.config.withSeparableConvs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Tt(this,void 0,void 0,function(){var a;return Rt(this,function(o){switch(o.label){case 0:return[4,this.detect(t,r)];case 1:return a=o.sent(),[2,a.map(function(u){return new Dr(u.score,u.relativeBox,{width:u.imageWidth,height:u.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return this.withSeparableConvs?PU:LU},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e})(W_),WU=(function(n){It(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t._name="TinyFaceDetectorOptions",t}return e})(Pg),yl=(function(){function n(){}return n.prototype.then=function(e){return Tt(this,void 0,void 0,function(){var t;return Rt(this,function(r){switch(r.label){case 0:return t=e,[4,this.run()];case 1:return[2,t.apply(void 0,[r.sent()])]}})})},n.prototype.run=function(){return Tt(this,void 0,void 0,function(){return Rt(this,function(e){throw new Error("ComposableTask - run is not implemented")})})},n})();function sh(n,e,t,r,a){return a===void 0&&(a=function(o){var u=o.alignedRect;return u}),Tt(this,void 0,void 0,function(){var o,u,l,c,h;return Rt(this,function(d){switch(d.label){case 0:return o=n.map(function(v){return I_(v)?a(v):v.detection}),l=r,l?[3,5]:e instanceof ye?[4,Og(e,o)]:[3,2];case 1:return c=d.sent(),[3,4];case 2:return[4,Ng(e,o)];case 3:c=d.sent(),d.label=4;case 4:l=c,d.label=5;case 5:return u=l,[4,t(u)];case 6:return h=d.sent(),u.forEach(function(v){return v instanceof ye&&v.dispose()}),[2,h]}})})}function zg(n,e,t,r,a){return Tt(this,void 0,void 0,function(){var o=this;return Rt(this,function(u){return[2,sh([n],e,function(l){return Tt(o,void 0,void 0,function(){return Rt(this,function(c){return[2,t(l[0])]})})},r,a)]})})}function qU(n){return gt(function(){return Yn(Ve(n,3).reverse(),3)})}var tf=2,zf=12;function KU(n,e){var t=ih(n,e),r=kg(n,e);function a(h,d){var v=Fe(n(h));return e.push({paramPath:d}),v}function o(h,d,v){v===void 0&&(v=!1);var m=t(h[0],h[1],3,d+"/conv1"),g=a(h[1],d+"/prelu1_alpha"),x=t(h[1],h[2],3,d+"/conv2"),E=a(h[2],d+"/prelu2_alpha"),w=t(h[2],h[3],v?2:3,d+"/conv3"),C=a(h[3],d+"/prelu3_alpha");return{conv1:m,prelu1_alpha:g,conv2:x,prelu2_alpha:E,conv3:w,prelu3_alpha:C}}function u(){var h=o([3,10,16,32],"pnet"),d=t(32,2,1,"pnet/conv4_1"),v=t(32,4,1,"pnet/conv4_2");return cn(cn({},h),{conv4_1:d,conv4_2:v})}function l(){var h=o([3,28,48,64],"rnet",!0),d=r(576,128,"rnet/fc1"),v=a(128,"rnet/prelu4_alpha"),m=r(128,2,"rnet/fc2_1"),g=r(128,4,"rnet/fc2_2");return cn(cn({},h),{fc1:d,prelu4_alpha:v,fc2_1:m,fc2_2:g})}function c(){var h=o([3,32,64,64],"onet"),d=t(64,128,2,"onet/conv4"),v=a(128,"onet/prelu4_alpha"),m=r(1152,256,"onet/fc1"),g=a(256,"onet/prelu5_alpha"),x=r(256,2,"onet/fc2_1"),E=r(256,4,"onet/fc2_2"),w=r(256,10,"onet/fc2_3");return cn(cn({},h),{conv4:d,prelu4_alpha:v,fc1:m,prelu5_alpha:g,fc2_1:x,fc2_2:E,fc2_3:w})}return{extractPNetParams:u,extractRNetParams:l,extractONetParams:c}}function XU(n){var e=Ma(n),t=e.extractWeights,r=e.getRemainingWeights,a=[],o=KU(t,a),u=o.extractPNetParams,l=o.extractRNetParams,c=o.extractONetParams,h=u(),d=l(),v=c();if(r().length!==0)throw new Error("weights remaing after extract: "+r().length);return{params:{pnet:h,rnet:d,onet:v},paramMappings:a}}function YU(n,e){var t=yi(n,e);function r(d){var v=t(d+"/weights",4,d+"/filters"),m=t(d+"/bias",1);return{filters:v,bias:m}}function a(d){var v=t(d+"/weights",2),m=t(d+"/bias",1);return{weights:v,bias:m}}function o(d){return t(d,1)}function u(d){var v=r(d+"/conv1"),m=o(d+"/prelu1_alpha"),g=r(d+"/conv2"),x=o(d+"/prelu2_alpha"),E=r(d+"/conv3"),w=o(d+"/prelu3_alpha");return{conv1:v,prelu1_alpha:m,conv2:g,prelu2_alpha:x,conv3:E,prelu3_alpha:w}}function l(){var d=u("pnet"),v=r("pnet/conv4_1"),m=r("pnet/conv4_2");return cn(cn({},d),{conv4_1:v,conv4_2:m})}function c(){var d=u("rnet"),v=a("rnet/fc1"),m=o("rnet/prelu4_alpha"),g=a("rnet/fc2_1"),x=a("rnet/fc2_2");return cn(cn({},d),{fc1:v,prelu4_alpha:m,fc2_1:g,fc2_2:x})}function h(){var d=u("onet"),v=r("onet/conv4"),m=o("onet/prelu4_alpha"),g=a("onet/fc1"),x=o("onet/prelu5_alpha"),E=a("onet/fc2_1"),w=a("onet/fc2_2"),C=a("onet/fc2_3");return cn(cn({},d),{conv4:v,prelu4_alpha:m,fc1:g,prelu5_alpha:x,fc2_1:E,fc2_2:w,fc2_3:C})}return{extractPNetParams:l,extractRNetParams:c,extractONetParams:h}}function QU(n){var e=[],t=YU(n,e),r=t.extractPNetParams,a=t.extractRNetParams,o=t.extractONetParams,u=r(),l=a(),c=o();return Da(n,e),{params:{pnet:u,rnet:l,onet:c},paramMappings:e}}function fm(n,e){var t=e[0],r=e[1];return{height:Math.floor(t*n),width:Math.floor(r*n)}}function ZU(n,e,t){for(var r=t[0],a=t[1],o=zf/n,u=[],l=Math.min(r,a)*o,c=0;l>=12;)u.push(o*Math.pow(e,c)),l=l*e,c+=1;return u}var Ug=(function(n){It(e,n);function e(t,r,a,o){return n.call(this,{left:t,top:r,right:a,bottom:o},!0)||this}return e})(pi);function q_(n){return gt(function(){return vn(Ge(n,vt(127.5)),vt(.0078125))})}function ms(n,e){return gt(function(){return Vt(xe(n),vn(e,kf(xe(kf(n)))))})}function Vg(n,e,t){return t===void 0&&(t=!1),gt(function(){var r=_r(n,e.conv1,"valid");return r=ms(r,e.prelu1_alpha),r=Ke(r,t?[2,2]:[3,3],[2,2],"same"),r=_r(r,e.conv2,"valid"),r=ms(r,e.prelu2_alpha),r=t?r:Ke(r,[3,3],[2,2],"valid"),r=_r(r,e.conv3,"valid"),r=ms(r,e.prelu3_alpha),r})}function JU(n,e){return gt(function(){var t=Vg(n,e,!0),r=_r(t,e.conv4_1,"valid"),a=lr($f(r,3),3),o=Ta(Ge(r,a),3),u=_r(t,e.conv4_2,"valid");return{prob:o,regions:u}})}function $U(n,e){return gt(function(){var t=fm(e,n.shape.slice(1)),r=t.height,a=t.width,o=bg.resizeBilinear(n,[r,a]),u=q_(o);return di(u,[0,2,1,3])})}function tV(n,e,t,r){for(var a=[],o=n.arraySync(),u=0;u<n.shape[0];u++)for(var l=0;l<n.shape[1];l++)o[u][l]>=r&&a.push(new te(l,u));var c=a.map(function(h){var d=new rh(Math.round((h.y*tf+1)/t),Math.round((h.x*tf+1)/t),Math.round((h.y*tf+zf)/t),Math.round((h.x*tf+zf)/t)),v=o[h.y][h.x],m=e.arraySync(),g=new Ug(m[h.y][h.x][0],m[h.y][h.x][1],m[h.y][h.x][2],m[h.y][h.x][3]);return{cell:d,score:v,region:g}});return c}function eV(n,e,t,r,a){a.stage1=[];var o=e.map(function(m){return gt(function(){var g={scale:m},x=$U(n,m),E=Date.now(),w=JU(x,r),C=w.prob,S=w.regions;g.pnet=Date.now()-E;var _=Ve(Ve(C,3)[1])[0],T=Ve(S)[0];return{scoresTensor:_,regionsTensor:T,scale:m,statsForScale:g}})}),u=o.map(function(m){var g=m.scoresTensor,x=m.regionsTensor,E=m.scale,w=m.statsForScale,C=tV(g,x,E,t);if(g.dispose(),x.dispose(),!C.length)return a.stage1.push(w),[];var S=Date.now(),_=Qu(C.map(function(T){return T.cell}),C.map(function(T){return T.score}),.5);return w.nms=Date.now()-S,w.numBoxes=_.length,a.stage1.push(w),_.map(function(T){return C[T]})}),l=u.reduce(function(m,g){return m.concat(g)},[]),c=[],h=[];if(l.length>0){var d=Date.now(),v=Qu(l.map(function(m){return m.cell}),l.map(function(m){return m.score}),.7);a.stage1_nms=Date.now()-d,h=v.map(function(m){return l[m].score}),c=v.map(function(m){return l[m]}).map(function(m){var g=m.cell,x=m.region;return new rh(g.left+x.left*g.width,g.top+x.top*g.height,g.right+x.right*g.width,g.bottom+x.bottom*g.height).toSquare().round()})}return{boxes:c,scores:h}}function K_(n,e,t){var r=t.width,a=t.height;return Tt(this,void 0,void 0,function(){var o,u,l,c=this;return Rt(this,function(h){switch(h.label){case 0:return o=Ji(n),[4,Promise.all(e.map(function(d){return Tt(c,void 0,void 0,function(){var v,m,g,x,E,w,C,S;return Rt(this,function(_){return v=d.padAtBorders(n.height,n.width),m=v.y,g=v.ey,x=v.x,E=v.ex,w=x-1,C=m-1,S=o.getImageData(w,C,E-w,g-C),[2,mn.isNodejs()?Mg(S):createImageBitmap(S)]})})}))];case 1:return u=h.sent(),l=[],u.forEach(function(d){var v=ah({width:r,height:a}),m=Ji(v);m.drawImage(d,0,0,r,a);for(var g=m.getImageData(0,0,r,a).data,x=[],E=0;E<g.length;E+=4)x.push(g[E+2]),x.push(g[E+1]),x.push(g[E]);l.push(x)}),[2,l.map(function(d){var v=gt(function(){var m=di(An(d,[1,r,a,3]),[0,2,1,3]).toFloat();return q_(m)});return v})]}})})}function nV(n,e){return gt(function(){var t=Vg(n,e),r=Sr(t,[t.shape[0],e.fc1.weights.shape[0]]),a=Vr(r,e.fc1),o=ms(a,e.prelu4_alpha),u=Vr(o,e.fc2_1),l=lr($f(u,1),1),c=Ta(Ge(u,l),1),h=Vr(o,e.fc2_2),d=Ve(c,1)[1];return{scores:d,regions:h}})}function rV(n,e,t,r,a){return Tt(this,void 0,void 0,function(){var o,u,l,c,h,d,v,m,g,x,E,w,C,S;return Rt(this,function(_){switch(_.label){case 0:return o=Date.now(),[4,K_(n,e,{width:24,height:24})];case 1:return u=_.sent(),a.stage2_extractImagePatches=Date.now()-o,o=Date.now(),l=u.map(function(T){var A=nV(T,r);return T.dispose(),A}),a.stage2_rnet=Date.now()-o,c=l.length>1?Ue(l.map(function(T){return T.scores})):l[0].scores,v=(d=Array).from,[4,c.data()];case 2:return h=v.apply(d,[_.sent()]),c.dispose(),m=h.map(function(T,A){return{score:T,idx:A}}).filter(function(T){return T.score>t}).map(function(T){var A=T.idx;return A}),g=m.map(function(T){return e[T]}),x=m.map(function(T){return h[T]}),E=[],w=[],g.length>0&&(o=Date.now(),C=Qu(g,x,.7),a.stage2_nms=Date.now()-o,S=C.map(function(T){var A=l[m[T]].regions.arraySync();return new Ug(A[0][0],A[0][1],A[0][2],A[0][3])}),w=C.map(function(T){return x[T]}),E=C.map(function(T,A){return g[T].calibrate(S[A])})),l.forEach(function(T){T.regions.dispose(),T.scores.dispose()}),[2,{boxes:E,scores:w}]}})})}function aV(n,e){return gt(function(){var t=Vg(n,e);t=Ke(t,[2,2],[2,2],"same"),t=_r(t,e.conv4,"valid"),t=ms(t,e.prelu4_alpha);var r=Sr(t,[t.shape[0],e.fc1.weights.shape[0]]),a=Vr(r,e.fc1),o=ms(a,e.prelu5_alpha),u=Vr(o,e.fc2_1),l=lr($f(u,1),1),c=Ta(Ge(u,l),1),h=Vr(o,e.fc2_2),d=Vr(o,e.fc2_3),v=Ve(c,1)[1];return{scores:v,regions:h,points:d}})}function iV(n,e,t,r,a){return Tt(this,void 0,void 0,function(){var o,u,l,c,h,d,v,m,g,x,E,w,C,S,_;return Rt(this,function(T){switch(T.label){case 0:return o=Date.now(),[4,K_(n,e,{width:48,height:48})];case 1:return u=T.sent(),a.stage3_extractImagePatches=Date.now()-o,o=Date.now(),l=u.map(function(A){var D=aV(A,r);return A.dispose(),D}),a.stage3_onet=Date.now()-o,c=l.length>1?Ue(l.map(function(A){return A.scores})):l[0].scores,v=(d=Array).from,[4,c.data()];case 2:return h=v.apply(d,[T.sent()]),c.dispose(),m=h.map(function(A,D){return{score:A,idx:D}}).filter(function(A){return A.score>t}).map(function(A){var D=A.idx;return D}),g=m.map(function(A){var D=l[A].regions.arraySync();return new Ug(D[0][0],D[0][1],D[0][2],D[0][3])}),x=m.map(function(A,D){return e[A].calibrate(g[D])}),E=m.map(function(A){return h[A]}),w=[],C=[],S=[],x.length>0&&(o=Date.now(),_=Qu(x,E,.7,!1),a.stage3_nms=Date.now()-o,w=_.map(function(A){return x[A]}),C=_.map(function(A){return E[A]}),S=_.map(function(A,D){return Array(5).fill(0).map(function(N,k){var O=l[A].points.arraySync();return new te(O[0][k]*(w[D].width+1)+w[D].left,O[0][k+5]*(w[D].height+1)+w[D].top)})})),l.forEach(function(A){A.regions.dispose(),A.scores.dispose(),A.points.dispose()}),[2,{boxes:w,scores:C,points:S}]}})})}var oV=(function(n){It(e,n);function e(){return n.call(this,"Mtcnn")||this}return e.prototype.load=function(t){return Tt(this,void 0,void 0,function(){return Rt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.load.call(this,t)]})})},e.prototype.loadFromDisk=function(t){return Tt(this,void 0,void 0,function(){return Rt(this,function(r){return console.warn("mtcnn is deprecated and will be removed soon"),[2,n.prototype.loadFromDisk.call(this,t)]})})},e.prototype.forwardInput=function(t,r){return r===void 0&&(r={}),Tt(this,void 0,void 0,function(){var a,o,u,l,c,h,d,v,m,g,x,E,w,C,S,_,T,A,D,N,k;return Rt(this,function(O){switch(O.label){case 0:if(a=this.params,!a)throw new Error("Mtcnn - load model before inference");if(o=t.canvases[0],!o)throw new Error("Mtcnn - inputCanvas is not defined, note that passing tensors into Mtcnn.forwardInput is not supported yet.");return u={},l=Date.now(),c=gt(function(){return qU(lr(_g.fromPixels(o)).toFloat())}),h=function(B){return c.dispose(),u.total=Date.now()-l,B},d=c.shape.slice(1),v=d[0],m=d[1],g=new G_(r),x=g.minFaceSize,E=g.scaleFactor,w=g.maxNumScales,C=g.scoreThresholds,S=g.scaleSteps,_=(S||ZU(x,E,[v,m])).filter(function(B){var V=fm(B,[v,m]);return Math.min(V.width,V.height)>zf}).slice(0,w),u.scales=_,u.pyramid=_.map(function(B){return fm(B,[v,m])}),T=Date.now(),[4,eV(c,_,C[0],a.pnet,u)];case 1:return A=O.sent(),u.total_stage1=Date.now()-T,A.boxes.length?(u.stage2_numInputBoxes=A.boxes.length,T=Date.now(),[4,rV(o,A.boxes,C[1],a.rnet,u)]):[2,h({results:[],stats:u})];case 2:return D=O.sent(),u.total_stage2=Date.now()-T,D.boxes.length?(u.stage3_numInputBoxes=D.boxes.length,T=Date.now(),[4,iV(o,D.boxes,C[2],a.onet,u)]):[2,h({results:[],stats:u})];case 3:return N=O.sent(),u.total_stage3=Date.now()-T,k=N.boxes.map(function(B,V){return oh(Ju({},new Dr(N.scores[V],new Rg(B.left/m,B.top/v,B.width/m,B.height/v),{height:v,width:m})),new Fz(N.points[V].map(function(U){return U.sub(new te(B.left,B.top)).div(new te(B.width,B.height))}),{width:B.width,height:B.height}))}),[2,h({results:k,stats:u})]}})})},e.prototype.forward=function(t,r){return r===void 0&&(r={}),Tt(this,void 0,void 0,function(){var a;return Rt(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Ye(t)];case 1:return[4,a.apply(this,[o.sent(),r])];case 2:return[2,o.sent().results]}})})},e.prototype.forwardWithStats=function(t,r){return r===void 0&&(r={}),Tt(this,void 0,void 0,function(){var a;return Rt(this,function(o){switch(o.label){case 0:return a=this.forwardInput,[4,Ye(t)];case 1:return[2,a.apply(this,[o.sent(),r])]}})})},e.prototype.getDefaultModelName=function(){return"mtcnn_model"},e.prototype.extractParamsFromWeigthMap=function(t){return QU(t)},e.prototype.extractParams=function(t){return XU(t)},e})(Aa),sV=.4,uV=[new te(1.603231,2.094468),new te(6.041143,7.080126),new te(2.882459,3.518061),new te(4.266906,5.178857),new te(9.041765,10.66308)],lV=[117.001,114.697,97.404],cV=(function(n){It(e,n);function e(){var t=this,r={withSeparableConvs:!0,iouThreshold:sV,classes:["face"],anchors:uV,meanRgb:lV,isFirstLayerConv2d:!0,filterSizes:[3,16,32,64,128,256,512]};return t=n.call(this,r)||this,t}return Object.defineProperty(e.prototype,"anchors",{get:function(){return this.config.anchors},enumerable:!0,configurable:!0}),e.prototype.locateFaces=function(t,r){return Tt(this,void 0,void 0,function(){var a;return Rt(this,function(o){switch(o.label){case 0:return[4,this.detect(t,r)];case 1:return a=o.sent(),[2,a.map(function(u){return new Dr(u.score,u.relativeBox,{width:u.imageWidth,height:u.imageHeight})})]}})})},e.prototype.getDefaultModelName=function(){return"tiny_face_detector_model"},e.prototype.extractParamsFromWeigthMap=function(t){return n.prototype.extractParamsFromWeigthMap.call(this,t)},e})(W_),xn={ssdMobilenetv1:new j_,tinyFaceDetector:new cV,tinyYolov2:new jU,mtcnn:new oV,faceLandmark68Net:new L_,faceLandmark68TinyNet:new fU,faceRecognitionNet:new yU,faceExpressionNet:new Jz,ageGenderNet:new sU},X_=(function(n){It(e,n);function e(t,r,a){var o=n.call(this)||this;return o.parentTask=t,o.input=r,o.extractedFaces=a,o}return e})(yl),Hg=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Tt(this,void 0,void 0,function(){var t,r,a=this;return Rt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return t=o.sent(),[4,sh(t,this.input,function(u){return Tt(a,void 0,void 0,function(){return Rt(this,function(l){switch(l.label){case 0:return[4,Promise.all(u.map(function(c){return xn.faceExpressionNet.predictExpressions(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,t.map(function(u,l){return k_(u,r[l])})]}})})},e.prototype.withAgeAndGender=function(){return new qg(this,this.input)},e})(X_),Gg=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Tt(this,void 0,void 0,function(){var t,r;return Rt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,zg(t,this.input,function(o){return xn.faceExpressionNet.predictExpressions(o)},this.extractedFaces)]:[2];case 2:return r=a.sent(),[2,k_(t,r)]}})})},e.prototype.withAgeAndGender=function(){return new Kg(this,this.input)},e})(X_),jg=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new Xg(this,this.input)},e.prototype.withFaceDescriptors=function(){return new Qg(this,this.input)},e})(Hg),Wg=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withAgeAndGender=function(){return new Yg(this,this.input)},e.prototype.withFaceDescriptor=function(){return new Zg(this,this.input)},e})(Gg),Y_=(function(n){It(e,n);function e(t,r,a){var o=n.call(this)||this;return o.parentTask=t,o.input=r,o.extractedFaces=a,o}return e})(yl),qg=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Tt(this,void 0,void 0,function(){var t,r,a=this;return Rt(this,function(o){switch(o.label){case 0:return[4,this.parentTask];case 1:return t=o.sent(),[4,sh(t,this.input,function(u){return Tt(a,void 0,void 0,function(){return Rt(this,function(l){switch(l.label){case 0:return[4,Promise.all(u.map(function(c){return xn.ageGenderNet.predictAgeAndGender(c)}))];case 1:return[2,l.sent()]}})})},this.extractedFaces)];case 2:return r=o.sent(),[2,t.map(function(u,l){var c=r[l],h=c.age,d=c.gender,v=c.genderProbability;return V_(H_(u,d,v),h)})]}})})},e.prototype.withFaceExpressions=function(){return new Hg(this,this.input)},e})(Y_),Kg=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Tt(this,void 0,void 0,function(){var t,r,a,o,u;return Rt(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return t=l.sent(),t?[4,zg(t,this.input,function(c){return xn.ageGenderNet.predictAgeAndGender(c)},this.extractedFaces)]:[2];case 2:return r=l.sent(),a=r.age,o=r.gender,u=r.genderProbability,[2,V_(H_(t,o,u),a)]}})})},e.prototype.withFaceExpressions=function(){return new Gg(this,this.input)},e})(Y_),Xg=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new jg(this,this.input)},e.prototype.withFaceDescriptors=function(){return new Qg(this,this.input)},e})(qg),Yg=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.withFaceExpressions=function(){return new Wg(this,this.input)},e.prototype.withFaceDescriptor=function(){return new Zg(this,this.input)},e})(Kg),Q_=(function(n){It(e,n);function e(t,r){var a=n.call(this)||this;return a.parentTask=t,a.input=r,a}return e})(yl),Qg=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Tt(this,void 0,void 0,function(){var t,r;return Rt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),[4,sh(t,this.input,function(o){return Promise.all(o.map(function(u){return xn.faceRecognitionNet.computeFaceDescriptor(u)}))},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})];case 2:return r=a.sent(),[2,r.map(function(o,u){return U_(t[u],o)})]}})})},e.prototype.withFaceExpressions=function(){return new jg(this,this.input)},e.prototype.withAgeAndGender=function(){return new Xg(this,this.input)},e})(Q_),Zg=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Tt(this,void 0,void 0,function(){var t,r;return Rt(this,function(a){switch(a.label){case 0:return[4,this.parentTask];case 1:return t=a.sent(),t?[4,zg(t,this.input,function(o){return xn.faceRecognitionNet.computeFaceDescriptor(o)},null,function(o){return o.landmarks.align(null,{useDlibAlignment:!0})})]:[2];case 2:return r=a.sent(),[2,U_(t,r)]}})})},e.prototype.withFaceExpressions=function(){return new Wg(this,this.input)},e.prototype.withAgeAndGender=function(){return new Yg(this,this.input)},e})(Q_),Z_=(function(n){It(e,n);function e(t,r,a){var o=n.call(this)||this;return o.parentTask=t,o.input=r,o.useTinyLandmarkNet=a,o}return Object.defineProperty(e.prototype,"landmarkNet",{get:function(){return this.useTinyLandmarkNet?xn.faceLandmark68TinyNet:xn.faceLandmark68Net},enumerable:!0,configurable:!0}),e})(yl),fV=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Tt(this,void 0,void 0,function(){var t,r,a,o,u,l=this;return Rt(this,function(c){switch(c.label){case 0:return[4,this.parentTask];case 1:return t=c.sent(),r=t.map(function(h){return h.detection}),this.input instanceof ye?[4,Og(this.input,r)]:[3,3];case 2:return o=c.sent(),[3,5];case 3:return[4,Ng(this.input,r)];case 4:o=c.sent(),c.label=5;case 5:return a=o,[4,Promise.all(a.map(function(h){return l.landmarkNet.detectLandmarks(h)}))];case 6:return u=c.sent(),a.forEach(function(h){return h instanceof ye&&h.dispose()}),[2,t.map(function(h,d){return oh(h,u[d])})]}})})},e.prototype.withFaceExpressions=function(){return new jg(this,this.input)},e.prototype.withAgeAndGender=function(){return new Xg(this,this.input)},e.prototype.withFaceDescriptors=function(){return new Qg(this,this.input)},e})(Z_),hV=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Tt(this,void 0,void 0,function(){var t,r,a,o,u;return Rt(this,function(l){switch(l.label){case 0:return[4,this.parentTask];case 1:return t=l.sent(),t?(r=t.detection,this.input instanceof ye?[4,Og(this.input,[r])]:[3,3]):[2];case 2:return o=l.sent(),[3,5];case 3:return[4,Ng(this.input,[r])];case 4:o=l.sent(),l.label=5;case 5:return a=o,[4,this.landmarkNet.detectLandmarks(a[0])];case 6:return u=l.sent(),a.forEach(function(c){return c instanceof ye&&c.dispose()}),[2,oh(t,u)]}})})},e.prototype.withFaceExpressions=function(){return new Wg(this,this.input)},e.prototype.withAgeAndGender=function(){return new Yg(this,this.input)},e.prototype.withFaceDescriptor=function(){return new Zg(this,this.input)},e})(Z_),J_=(function(n){It(e,n);function e(t,r){r===void 0&&(r=new gl);var a=n.call(this)||this;return a.input=t,a.options=r,a}return e})(yl),$_=(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Tt(this,void 0,void 0,function(){var t,r,a,o;return Rt(this,function(u){switch(u.label){case 0:return t=this,r=t.input,a=t.options,a instanceof G_?[4,xn.mtcnn.forward(r,a)]:[3,2];case 1:return[2,u.sent().map(function(l){return l.detection})];case 2:if(o=a instanceof WU?function(l){return xn.tinyFaceDetector.locateFaces(l,a)}:a instanceof gl?function(l){return xn.ssdMobilenetv1.locateFaces(l,a)}:a instanceof Pg?function(l){return xn.tinyYolov2.locateFaces(l,a)}:null,!o)throw new Error("detectFaces - expected options to be instance of TinyFaceDetectorOptions | SsdMobilenetv1Options | MtcnnOptions | TinyYolov2Options");return[2,o(r)]}})})},e.prototype.runAndExtendWithFaceDetections=function(){var t=this;return new Promise(function(r){return Tt(t,void 0,void 0,function(){var a;return Rt(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return a=o.sent(),[2,r(a.map(function(u){return Ju({},u)}))]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new fV(this.runAndExtendWithFaceDetections(),this.input,t)},e.prototype.withFaceExpressions=function(){return new Hg(this.runAndExtendWithFaceDetections(),this.input)},e.prototype.withAgeAndGender=function(){return new qg(this.runAndExtendWithFaceDetections(),this.input)},e})(J_);(function(n){It(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.run=function(){return Tt(this,void 0,void 0,function(){var t,r;return Rt(this,function(a){switch(a.label){case 0:return[4,new $_(this.input,this.options)];case 1:return t=a.sent(),r=t[0],t.forEach(function(o){o.score>r.score&&(r=o)}),[2,r]}})})},e.prototype.runAndExtendWithFaceDetection=function(){var t=this;return new Promise(function(r){return Tt(t,void 0,void 0,function(){var a;return Rt(this,function(o){switch(o.label){case 0:return[4,this.run()];case 1:return a=o.sent(),[2,r(a?Ju({},a):void 0)]}})})})},e.prototype.withFaceLandmarks=function(t){return t===void 0&&(t=!1),new hV(this.runAndExtendWithFaceDetection(),this.input,t)},e.prototype.withFaceExpressions=function(){return new Gg(this.runAndExtendWithFaceDetection(),this.input)},e.prototype.withAgeAndGender=function(){return new Kg(this.runAndExtendWithFaceDetection(),this.input)},e})(J_);function dV(n,e){return e===void 0&&(e=new gl),new $_(n,e)}function pV(n,e){if(n.length!==e.length)throw new Error("euclideanDistance: arr1.length !== arr2.length");var t=Array.from(n),r=Array.from(e);return Math.sqrt(t.map(function(a,o){return a-r[o]}).reduce(function(a,o){return a+Math.pow(o,2)},0))}(function(){function n(e,t){t===void 0&&(t=.6),this._distanceThreshold=t;var r=Array.isArray(e)?e:[e];if(!r.length)throw new Error("FaceRecognizer.constructor - expected atleast one input");var a=1,o=function(){return"person "+a++};this._labeledDescriptors=r.map(function(u){if(u instanceof Qc)return u;if(u instanceof Float32Array)return new Qc(o(),[u]);if(u.descriptor&&u.descriptor instanceof Float32Array)return new Qc(o(),[u.descriptor]);throw new Error("FaceRecognizer.constructor - expected inputs to be of type LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array | Array<LabeledFaceDescriptors | WithFaceDescriptor<any> | Float32Array>")})}return Object.defineProperty(n.prototype,"labeledDescriptors",{get:function(){return this._labeledDescriptors},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"distanceThreshold",{get:function(){return this._distanceThreshold},enumerable:!0,configurable:!0}),n.prototype.computeMeanDistance=function(e,t){return t.map(function(r){return pV(r,e)}).reduce(function(r,a){return r+a},0)/(t.length||1)},n.prototype.matchDescriptor=function(e){var t=this;return this.labeledDescriptors.map(function(r){var a=r.descriptors,o=r.label;return new yw(o,t.computeMeanDistance(e,a))}).reduce(function(r,a){return r.distance<a.distance?r:a})},n.prototype.findBestMatch=function(e){var t=this.matchDescriptor(e);return t.distance<this.distanceThreshold?t:new yw("unknown",t.distance)},n.prototype.toJSON=function(){return{distanceThreshold:this.distanceThreshold,labeledDescriptors:this.labeledDescriptors.map(function(e){return e.toJSON()})}},n.fromJSON=function(e){var t=e.labeledDescriptors.map(function(r){return Qc.fromJSON(r)});return new n(t,e.distanceThreshold)},n})();function tT(n,e){var t=new Yi(e.width,e.height),r=t.width,a=t.height;if(r<=0||a<=0)throw new Error("resizeResults - invalid dimensions: "+JSON.stringify({width:r,height:a}));if(Array.isArray(n))return n.map(function(l){return tT(l,{width:r,height:a})});if(I_(n)){var o=n.detection.forSize(r,a),u=n.unshiftedLandmarks.forSize(o.box.width,o.box.height);return oh(Ju(n,o),u)}return g_(n)?Ju(n,n.detection.forSize(r,a)):n instanceof Zu||n instanceof Dr?n.forSize(r,a):n}const vV=async()=>{const n="/age-predictor/models";try{return await Promise.all([xn.ssdMobilenetv1.loadFromUri(n),xn.faceLandmark68Net.loadFromUri(n),xn.ageGenderNet.loadFromUri(n)]),!0}catch(e){return console.error("Error loading models:",e),!1}};var Sw;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(Sw||(Sw={}));var _w;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(_w||(_w={}));var Tw;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(Tw||(Tw={}));const Rw=["user","model","function","system"];var ss;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(ss||(ss={}));var us;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(us||(us={}));var Aw;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Aw||(Aw={}));var Dw;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(Dw||(Dw={}));var Lu;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Lu||(Lu={}));var Mw;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(Mw||(Mw={}));var Nw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Nw||(Nw={}));var Ow;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Ow||(Ow={}));class dn extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Zo extends dn{constructor(e,t){super(e),this.response=t}}class eT extends dn{constructor(e,t,r,a){super(e),this.status=t,this.statusText=r,this.errorDetails=a}}class ci extends dn{}class nT extends dn{}const mV="https://generativelanguage.googleapis.com",gV="v1beta",yV="0.24.1",bV="genai-js";var $i;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})($i||($i={}));class xV{constructor(e,t,r,a,o){this.model=e,this.task=t,this.apiKey=r,this.stream=a,this.requestOptions=o}toString(){var e,t;const r=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||gV;let o=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||mV}/${r}/${this.model}:${this.task}`;return this.stream&&(o+="?alt=sse"),o}}function wV(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${bV}/${yV}`),e.join(" ")}async function EV(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",wV(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let r=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(r){if(!(r instanceof Headers))try{r=new Headers(r)}catch(a){throw new ci(`unable to convert customHeaders value ${JSON.stringify(r)} to Headers: ${a.message}`)}for(const[a,o]of r.entries()){if(a==="x-goog-api-key")throw new ci(`Cannot set reserved header name ${a}`);if(a==="x-goog-api-client")throw new ci(`Header name ${a} can only be set using the apiClient field`);t.append(a,o)}}return t}async function CV(n,e,t,r,a,o){const u=new xV(n,e,t,r,o);return{url:u.toString(),fetchOptions:Object.assign(Object.assign({},RV(o)),{method:"POST",headers:await EV(u),body:a})}}async function bl(n,e,t,r,a,o={},u=fetch){const{url:l,fetchOptions:c}=await CV(n,e,t,r,a,o);return SV(l,c,u)}async function SV(n,e,t=fetch){let r;try{r=await t(n,e)}catch(a){_V(a,n)}return r.ok||await TV(r,n),r}function _V(n,e){let t=n;throw t.name==="AbortError"?(t=new nT(`Request aborted when fetching ${e.toString()}: ${n.message}`),t.stack=n.stack):n instanceof eT||n instanceof ci||(t=new dn(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function TV(n,e){let t="",r;try{const a=await n.json();t=a.error.message,a.error.details&&(t+=` ${JSON.stringify(a.error.details)}`,r=a.error.details)}catch{}throw new eT(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,r)}function RV(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}function Jg(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),lf(n.candidates[0]))throw new Zo(`${ai(n)}`,n);return AV(n)}else if(n.promptFeedback)throw new Zo(`Text not available. ${ai(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),lf(n.candidates[0]))throw new Zo(`${ai(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),kw(n)[0]}else if(n.promptFeedback)throw new Zo(`Function call not available. ${ai(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),lf(n.candidates[0]))throw new Zo(`${ai(n)}`,n);return kw(n)}else if(n.promptFeedback)throw new Zo(`Function call not available. ${ai(n)}`,n)},n}function AV(n){var e,t,r,a;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const u of(a=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||a===void 0?void 0:a.parts)u.text&&o.push(u.text),u.executableCode&&o.push("\n```"+u.executableCode.language+`
`+u.executableCode.code+"\n```\n"),u.codeExecutionResult&&o.push("\n```\n"+u.codeExecutionResult.output+"\n```\n");return o.length>0?o.join(""):""}function kw(n){var e,t,r,a;const o=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const u of(a=(r=n.candidates)===null||r===void 0?void 0:r[0].content)===null||a===void 0?void 0:a.parts)u.functionCall&&o.push(u.functionCall);if(o.length>0)return o}const DV=[Lu.RECITATION,Lu.SAFETY,Lu.LANGUAGE];function lf(n){return!!n.finishReason&&DV.includes(n.finishReason)}function ai(n){var e,t,r;let a="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)a+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(a+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(a+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((r=n.candidates)===null||r===void 0)&&r[0]){const o=n.candidates[0];lf(o)&&(a+=`Candidate was blocked due to ${o.finishReason}`,o.finishMessage&&(a+=`: ${o.finishMessage}`))}return a}function $u(n){return this instanceof $u?(this.v=n,this):new $u(n)}function MV(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),a,o=[];return a={},u("next"),u("throw"),u("return"),a[Symbol.asyncIterator]=function(){return this},a;function u(m){r[m]&&(a[m]=function(g){return new Promise(function(x,E){o.push([m,g,x,E])>1||l(m,g)})})}function l(m,g){try{c(r[m](g))}catch(x){v(o[0][3],x)}}function c(m){m.value instanceof $u?Promise.resolve(m.value.v).then(h,d):v(o[0][2],m)}function h(m){l("next",m)}function d(m){l("throw",m)}function v(m,g){m(g),o.shift(),o.length&&l(o[0][0],o[0][1])}}const Iw=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function NV(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=IV(e),[r,a]=t.tee();return{stream:kV(r),response:OV(a)}}async function OV(n){const e=[],t=n.getReader();for(;;){const{done:r,value:a}=await t.read();if(r)return Jg(BV(e));e.push(a)}}function kV(n){return MV(this,arguments,function*(){const t=n.getReader();for(;;){const{value:r,done:a}=yield $u(t.read());if(a)break;yield yield $u(Jg(r))}})}function IV(n){const e=n.getReader();return new ReadableStream({start(r){let a="";return o();function o(){return e.read().then(({value:u,done:l})=>{if(l){if(a.trim()){r.error(new dn("Failed to parse stream"));return}r.close();return}a+=u;let c=a.match(Iw),h;for(;c;){try{h=JSON.parse(c[1])}catch{r.error(new dn(`Error parsing JSON response: "${c[1]}"`));return}r.enqueue(h),a=a.substring(c[0].length),c=a.match(Iw)}return o()}).catch(u=>{let l=u;throw l.stack=u.stack,l.name==="AbortError"?l=new nT("Request aborted when reading from the stream"):l=new dn("Error reading from the stream"),l})}}})}function BV(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const r of n){if(r.candidates){let a=0;for(const o of r.candidates)if(t.candidates||(t.candidates=[]),t.candidates[a]||(t.candidates[a]={index:a}),t.candidates[a].citationMetadata=o.citationMetadata,t.candidates[a].groundingMetadata=o.groundingMetadata,t.candidates[a].finishReason=o.finishReason,t.candidates[a].finishMessage=o.finishMessage,t.candidates[a].safetyRatings=o.safetyRatings,o.content&&o.content.parts){t.candidates[a].content||(t.candidates[a].content={role:o.content.role||"user",parts:[]});const u={};for(const l of o.content.parts)l.text&&(u.text=l.text),l.functionCall&&(u.functionCall=l.functionCall),l.executableCode&&(u.executableCode=l.executableCode),l.codeExecutionResult&&(u.codeExecutionResult=l.codeExecutionResult),Object.keys(u).length===0&&(u.text=""),t.candidates[a].content.parts.push(u)}a++}r.usageMetadata&&(t.usageMetadata=r.usageMetadata)}return t}async function rT(n,e,t,r){const a=await bl(e,$i.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),r);return NV(a)}async function aT(n,e,t,r){const o=await(await bl(e,$i.GENERATE_CONTENT,n,!1,JSON.stringify(t),r)).json();return{response:Jg(o)}}function iT(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function tl(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return FV(e)}function FV(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let r=!1,a=!1;for(const o of n)"functionResponse"in o?(t.parts.push(o),a=!0):(e.parts.push(o),r=!0);if(r&&a)throw new dn("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!r&&!a)throw new dn("No content is provided for sending chat message.");return r?e:t}function LV(n,e){var t;let r={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const a=n.generateContentRequest!=null;if(n.contents){if(a)throw new ci("CountTokensRequest must have one of contents or generateContentRequest, not both.");r.contents=n.contents}else if(a)r=Object.assign(Object.assign({},r),n.generateContentRequest);else{const o=tl(n);r.contents=[o]}return{generateContentRequest:r}}function Bw(n){let e;return n.contents?e=n:e={contents:[tl(n)]},n.systemInstruction&&(e.systemInstruction=iT(n.systemInstruction)),e}function PV(n){return typeof n=="string"||Array.isArray(n)?{content:tl(n)}:n}const Fw=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],zV={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function UV(n){let e=!1;for(const t of n){const{role:r,parts:a}=t;if(!e&&r!=="user")throw new dn(`First content should be with role 'user', got ${r}`);if(!Rw.includes(r))throw new dn(`Each item should include role field. Got ${r} but valid roles are: ${JSON.stringify(Rw)}`);if(!Array.isArray(a))throw new dn("Content should have 'parts' property with an array of Parts");if(a.length===0)throw new dn("Each Content should have at least one part");const o={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const l of a)for(const c of Fw)c in l&&(o[c]+=1);const u=zV[r];for(const l of Fw)if(!u.includes(l)&&o[l]>0)throw new dn(`Content with role '${r}' can't contain '${l}' part`);e=!0}}function Lw(n){var e;if(n.candidates===void 0||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;if(t===void 0||t.parts===void 0||t.parts.length===0)return!1;for(const r of t.parts)if(r===void 0||Object.keys(r).length===0||r.text!==void 0&&r.text==="")return!1;return!0}const Pw="SILENT_ERROR";class VV{constructor(e,t,r,a={}){this.model=t,this.params=r,this._requestOptions=a,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,r?.history&&(UV(r.history),this._history=r.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var r,a,o,u,l,c;await this._sendPromise;const h=tl(e),d={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,h]},v=Object.assign(Object.assign({},this._requestOptions),t);let m;return this._sendPromise=this._sendPromise.then(()=>aT(this._apiKey,this.model,d,v)).then(g=>{var x;if(Lw(g.response)){this._history.push(h);const E=Object.assign({parts:[],role:"model"},(x=g.response.candidates)===null||x===void 0?void 0:x[0].content);this._history.push(E)}else{const E=ai(g.response);E&&console.warn(`sendMessage() was unsuccessful. ${E}. Inspect response object for details.`)}m=g}).catch(g=>{throw this._sendPromise=Promise.resolve(),g}),await this._sendPromise,m}async sendMessageStream(e,t={}){var r,a,o,u,l,c;await this._sendPromise;const h=tl(e),d={safetySettings:(r=this.params)===null||r===void 0?void 0:r.safetySettings,generationConfig:(a=this.params)===null||a===void 0?void 0:a.generationConfig,tools:(o=this.params)===null||o===void 0?void 0:o.tools,toolConfig:(u=this.params)===null||u===void 0?void 0:u.toolConfig,systemInstruction:(l=this.params)===null||l===void 0?void 0:l.systemInstruction,cachedContent:(c=this.params)===null||c===void 0?void 0:c.cachedContent,contents:[...this._history,h]},v=Object.assign(Object.assign({},this._requestOptions),t),m=rT(this._apiKey,this.model,d,v);return this._sendPromise=this._sendPromise.then(()=>m).catch(g=>{throw new Error(Pw)}).then(g=>g.response).then(g=>{if(Lw(g)){this._history.push(h);const x=Object.assign({},g.candidates[0].content);x.role||(x.role="model"),this._history.push(x)}else{const x=ai(g);x&&console.warn(`sendMessageStream() was unsuccessful. ${x}. Inspect response object for details.`)}}).catch(g=>{g.message!==Pw&&console.error(g)}),m}}async function HV(n,e,t,r){return(await bl(e,$i.COUNT_TOKENS,n,!1,JSON.stringify(t),r)).json()}async function GV(n,e,t,r){return(await bl(e,$i.EMBED_CONTENT,n,!1,JSON.stringify(t),r)).json()}async function jV(n,e,t,r){const a=t.requests.map(u=>Object.assign(Object.assign({},u),{model:e}));return(await bl(e,$i.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:a}),r)).json()}class zw{constructor(e,t,r={}){this.apiKey=e,this._requestOptions=r,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=iT(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var r;const a=Bw(e),o=Object.assign(Object.assign({},this._requestOptions),t);return aT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},a),o)}async generateContentStream(e,t={}){var r;const a=Bw(e),o=Object.assign(Object.assign({},this._requestOptions),t);return rT(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},a),o)}startChat(e){var t;return new VV(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const r=LV(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),a=Object.assign(Object.assign({},this._requestOptions),t);return HV(this.apiKey,this.model,r,a)}async embedContent(e,t={}){const r=PV(e),a=Object.assign(Object.assign({},this._requestOptions),t);return GV(this.apiKey,this.model,r,a)}async batchEmbedContents(e,t={}){const r=Object.assign(Object.assign({},this._requestOptions),t);return jV(this.apiKey,this.model,e,r)}}class WV{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new dn("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new zw(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,r){if(!e.name)throw new ci("Cached content must contain a `name` field.");if(!e.model)throw new ci("Cached content must contain a `model` field.");const a=["model","systemInstruction"];for(const u of a)if(t?.[u]&&e[u]&&t?.[u]!==e[u]){if(u==="model"){const l=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,c=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(l===c)continue}throw new ci(`Different value for "${u}" specified in modelParams (${t[u]}) and cachedContent (${e[u]})`)}const o=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new zw(this.apiKey,o,r)}}const qV="AIzaSyBJbuPlneX69QEvSY9U9dQcNmCkN5zOOWw",KV=new WV(qV),XV=["gemini-1.5-flash","gemini-1.5-flash-8b","gemini-2.0-flash-exp","gemini-1.5-pro","gemini-flash-latest"],YV=async n=>{let e="Unknown Error";for(const r of XV)try{console.log(`Attempting prediction with model: ${r}`);const a=KV.getGenerativeModel({model:r,safetySettings:[{category:ss.HARM_CATEGORY_HARASSMENT,threshold:us.BLOCK_ONLY_HIGH},{category:ss.HARM_CATEGORY_HATE_SPEECH,threshold:us.BLOCK_ONLY_HIGH},{category:ss.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:us.BLOCK_ONLY_HIGH},{category:ss.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:us.BLOCK_ONLY_HIGH}]}),o=n.split(",")[1]||n,u=`
              Estimate the age (number) and gender (male/female) of the person in this image.
              Add a short, humorous comment about their age.
              Return valid JSON only. NO markdown.
              Example: {"age": 25, "gender": "male", "comment": "..."}
            `,l={inlineData:{data:o,mimeType:"image/jpeg"}},h=await(await a.generateContent([u,l])).response;if(!h.candidates||h.candidates.length===0)throw new Error("Safety Block or No Candidates");let d="";try{d=h.text()}catch{throw new Error("Safety Block Triggered")}const v=d.match(/\{[\s\S]*\}/);if(!v)throw new Error("Invalid JSON Response");return console.log(`Success with ${r}!`),{result:JSON.parse(v[0])}}catch(a){console.warn(`Failed with ${r}:`,a.message);const o=a.message||"";if(o.includes("429")||o.includes("Quota")||o.includes("404")||o.includes("Overloaded")||o.includes("fetch")){e=o;continue}if(o.includes("API_KEY")||o.includes("400"))return{result:null,error:"Invalid API Key"};e=o}let t="Prediction Failed";if(e.includes("429")){const r=e.match(/retry in ([0-9\.]+)/);r?t=`All Quotas Hit (Wait ${Math.ceil(parseFloat(r[1]))}s)`:t="System Overloaded (Try later)"}else e.includes("404")?t="AI Models Not Available":e&&(t=e);return{result:null,error:t}},QV=()=>{const n=Y.useRef(null),e=Y.useRef(null),[t,r]=Y.useState(!1),[a,o]=Y.useState(!1),[u,l]=Y.useState(null),c=pm(),[h,d]=Y.useState(!1),v=Y.useRef(!1),m=Y.useRef([]);Y.useEffect(()=>{const E=()=>{navigator.mediaDevices.getUserMedia({video:{width:{ideal:1920},height:{ideal:1080}}}).then(C=>{n.current&&(n.current.srcObject=C,o(!0))}).catch(C=>{console.error(C),l("Camera access denied or not available")})};(async()=>{try{await vV()?(r(!0),E()):l("Failed to load AI models")}catch(C){console.error(C),l("Error initializing AI")}})()},[]);const g=()=>{if(!n.current)return null;const E=.3,w=n.current.videoWidth*E,C=n.current.videoHeight*E,S=document.createElement("canvas");S.width=w,S.height=C;const _=S.getContext("2d");return _?(_.drawImage(n.current,0,0,w,C),S.toDataURL("image/jpeg",.7)):null},x=()=>{if(!e.current||!n.current)return;const E={width:n.current.clientWidth,height:n.current.clientHeight};qz(e.current,E);const w=async()=>{if(!n.current||!e.current)return;const C=await dV(n.current,new gl({minConfidence:.5})),S=tT(C,E),_=e.current.getContext("2d");if(_){_.clearRect(0,0,e.current.width,e.current.height);const T=[],A=Date.now();for(const D of S){const N=D.box,k={x:N.x+N.width/2,y:N.y+N.height/2};let O,B=150;for(const V of m.current){const U=Math.hypot(V.center.x-k.x,V.center.y-k.y);U<B&&(B=U,O=V)}if(O){if(O.center=k,O.box=N,O.lastSeen=A,!O.geminiResult&&!O.isAnalyzing&&!O.hasFailed&&!v.current){O.isAnalyzing=!0,O.analysisStartTime=A;const V=g();V?YV(V).then(async U=>{const it=Date.now()-O.analysisStartTime,et=Math.max(0,5e3-it);if(et>0&&await new Promise(tt=>setTimeout(tt,et)),U.result)O.geminiResult=U.result,v.current=!0,d(!0);else{O.hasFailed=!0;const tt=U.error||"Failed";O.failureReason=tt,l(tt)}O.isAnalyzing=!1}):O.isAnalyzing=!1}T.push(O)}else T.push({id:(A+Math.random()).toString(),center:k,box:N,lastSeen:A,isAnalyzing:!1,geminiResult:null})}m.current=T,m.current.forEach(D=>{const N=D.box,k=E.width-N.x-N.width;D.geminiResult?_.strokeStyle="#06b6d4":D.isAnalyzing?_.strokeStyle="#a855f7":_.strokeStyle="#ffffff80",_.lineWidth=3,_.strokeRect(k,N.y,N.width,N.height);let O="";if(D.geminiResult)O=`${D.geminiResult.age}y - ${D.geminiResult.gender}`;else if(D.isAnalyzing&&D.analysisStartTime){const V=((Date.now()-D.analysisStartTime)/1e3).toFixed(1);O=`Analyzing... ${Math.min(parseFloat(V),5).toFixed(1)}s`}else D.hasFailed?O=D.failureReason||"Prediction Failed":O="Detecting...";_.font="bold 16px Inter";const B=_.measureText(O).width;_.fillStyle="rgba(0, 0, 0, 0.8)",_.fillRect(k,N.y-35,B+20,30),_.fillStyle=_.strokeStyle,_.fillText(O,k+10,N.y-14)})}requestAnimationFrame(w)};w()};return Et.jsxs("div",{className:"relative w-full h-[100dvh] bg-black flex flex-col items-center justify-center overflow-hidden",children:[Et.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-gray-900 via-black to-black opacity-80 z-0"}),!1,(u||m.current.some(E=>E.hasFailed))&&Et.jsxs("div",{className:"z-20 flex flex-col items-center text-red-500 bg-white/5 p-8 rounded-xl backdrop-blur-md border border-red-500/20",children:[Et.jsx(q4,{className:"w-12 h-12 mb-4"}),Et.jsx("p",{className:"text-lg font-bold text-center",children:u||m.current.find(E=>E.hasFailed)?.failureReason||"Prediction Failed"}),Et.jsxs("div",{className:"flex gap-4 mt-6",children:[Et.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-2 bg-red-500/10 hover:bg-red-500/20 text-red-400 rounded-lg transition-colors",children:"Retry"}),Et.jsx("button",{onClick:()=>c("/"),className:"px-6 py-2 bg-white/5 hover:bg-white/10 text-gray-400 rounded-lg transition-colors",children:"Back"})]})]}),(!t||!a&&!u)&&Et.jsxs("div",{className:"z-20 flex flex-col items-center text-cyan-400",children:[Et.jsx(U4,{className:"w-12 h-12 animate-spin mb-4"}),Et.jsx("p",{className:"text-sm tracking-wider uppercase",children:"Initializing Systems..."})]}),Et.jsxs(gf.div,{initial:{opacity:0},animate:{opacity:a?1:0},className:"absolute inset-0 w-full h-full",children:[Et.jsx("video",{ref:n,autoPlay:!0,muted:!0,onPlay:x,className:"absolute inset-0 w-full h-full object-cover scale-x-[-1]"}),Et.jsx("canvas",{ref:e,className:"absolute inset-0 w-full h-full"}),Et.jsxs("div",{className:"absolute bottom-4 left-4 p-4 bg-black/50 backdrop-blur-sm rounded-lg flex items-center gap-3",children:[Et.jsx(j4,{className:"text-purple-400 w-5 h-5 animate-pulse"}),Et.jsx("p",{className:"text-gray-200 text-xs tracking-wider uppercase",children:"Powered by Gemini AI"})]}),h&&Et.jsx(gf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"absolute bottom-20 left-1/2 -translate-x-1/2 z-50",children:Et.jsxs("button",{onClick:()=>window.location.reload(),className:"bg-white text-black px-8 py-3 rounded-full font-bold shadow-[0_0_20px_rgba(255,255,255,0.4)] hover:scale-105 transition-transform flex items-center gap-2",children:[Et.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Et.jsx("path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}),Et.jsx("path",{d:"M21 3v5h-5"}),Et.jsx("path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}),Et.jsx("path",{d:"M3 21v-5h5"})]}),"SCAN ANOTHER FACE"]})})]}),Et.jsx("button",{onClick:()=>c("/"),className:"absolute top-8 left-8 z-30 text-gray-500 hover:text-white transition-colors flex items-center gap-2",children:" BACK"})]})};function ZV(){return Et.jsx(XD,{children:Et.jsx("div",{className:"w-full min-h-screen bg-black text-white overflow-hidden",children:Et.jsxs(_D,{children:[Et.jsx(bv,{path:"/",element:Et.jsx(K4,{})}),Et.jsx(bv,{path:"/camera",element:Et.jsx(QV,{})})]})})})}kA.createRoot(document.getElementById("root")).render(Et.jsx(Y.StrictMode,{children:Et.jsx(ZV,{})}))});export default JV();
